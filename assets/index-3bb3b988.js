import{u as du,v as i,w as t,x as l,y as ki,z as Ai,D as vm,H as _n,J as Pi,K as V,L as Sr,N as Mr,O as wm,Q as ym,U as dt,V as xm,W as Di,X as Rm,Y as mu,Z as Dt,_ as Om,$ as km,a0 as Am,a1 as Jt,a2 as Zt,a3 as $s,a4 as Ks,a5 as gu,a6 as pu,a7 as hu,a8 as Pm,a9 as Dm,aa as fu,ab as Lm,ac as Mm,ad as Iu,ae as ia,af as fs,ag as Li,ah as Eu,ai as Um,aj as Fm,ak as ui,al as Bm,am as Gm,an as Vm,ao as Hm,ap as Wm,aq as Mi,ar as Ui,as as jm,at as qm,au as zm,av as Ym,aw as El,ax as $m,ay as wa,az as ya,aA as xa,aB as Km}from"./vendor-334d58ba.js";import{N as is,a as dr,H as Xs,M as ke,T as fn,R as re,b as tt,A as ms,c as dn,G as Xm,d as Q,D as Qm,C as cn,e as Jm,f as ze,g as Zm,h as Wo,i as nr,j as pr,k as Fi,l as jo,E as eg,m as Cl,n as yn,o as Us,p as ft,F as Go,q as Fs,S as Qs,r as ks,s as tg,t as Cu,u as Bs,v as ng,w as rg,x as sg,y as qo,z as Dn,B as ur,O as _u,V as xt,I as Ra,P as Is,J as Bt,K as Un,U as og,L as ag,Q as Oa,W as bu,X as fr,Y as ig,Z as lg,_ as cg,$ as ug,a0 as dg,a1 as mg,a2 as gg,a3 as pg,a4 as hg,a5 as fg,a6 as Ig,a7 as Eg,a8 as Su,a9 as Cg,aa as _g,ab as bg,ac as Sg,ad as Ng,ae as Tg,af as vg,ag as wg,ah as yg,ai as xg,aj as Rg,ak as Og,al as kg,am as Ag,an as di,ao as Pg,ap as Nu,aq as Dg,ar as Lg,as as Mg,at as Ug,au as Fg,av as Bg,aw as Gg,ax as Vg,ay as Hg,az as Wg,aA as jg,aB as qg,aC as zg,aD as Tu,aE as Yg,aF as $g,aG as Kg,aH as _l,aI as Xg,aJ as Qg,aK as Jg,aL as la,aM as Zg,aN as ep,aO as vu,aP as tp,aQ as np,aR as zo,aS as zt,aT as ws,aU as wu,aV as yu,aW as rp,aX as sp,aY as op,aZ as ap,a_ as ip,a$ as lp,b0 as cp,b1 as up,b2 as Bi,b3 as Ps,b4 as xu,b5 as bl,b6 as dp,b7 as mp,b8 as gp,b9 as pp,ba as hp,bb as fp,bc as Ip,bd as Ep,be as Cp,bf as _p,bg as bp,bh as Sp,bi as Np,bj as Tp,bk as vp,bl as wp,bm as yp,bn as xp,bo as Rp,bp as Op,bq as kp,br as Ap,bs as Pp,bt as Dp,bu as Lp,bv as Mp,bw as Up,bx as Fp,by as Bp,bz as Gp,bA as Ru,bB as mi,bC as Vp,bD as Ou,bE as Hp,bF as Wp,bG as jp,bH as qp,bI as zp,bJ as Yp,bK as $p,bL as Kp,bM as Xp,bN as Qp,bO as Jp,bP as Zp,bQ as eh,bR as th,bS as nh,bT as rh,bU as sh,bV as oh,bW as ah,bX as ih,bY as lh,bZ as ch,b_ as uh,b$ as dh,c0 as mh,c1 as gh,c2 as ph,c3 as hh,c4 as fh,c5 as Ih,c6 as Eh,c7 as Ch,c8 as _h,c9 as bh,ca as ku,cb as Au,cc as Yo,cd as Sh,ce as Nh,cf as Gs,cg as Pu,ch as st,ci as Th,cj as vh,ck as wh,cl as yh,cm as xh,cn as Rh,co as Oh,cp as kh,cq as Ah,cr as Ph,cs as Dh,ct as ka,cu as Lh,cv as Mh,cw as Uh,cx as Fh,cy as Bh,cz as Gh,cA as Sl,cB as Vh,cC as Hh,cD as Wr,cE as Wh,cF as jh,cG as In,cH as Ct,cI as qh,cJ as zh,cK as Yh,cL as uo,cM as Gn,cN as Re,cO as $h,cP as Ut,cQ as Kh,cR as Xh,cS as Qh,cT as Jh,cU as Zh,cV as ef,cW as tf,cX as nf,cY as rf,cZ as sf,c_ as of,c$ as af,d0 as lf,d1 as cf,d2 as uf,d3 as df,d4 as mf,d5 as gi,d6 as gf,d7 as pf,d8 as hf,d9 as Du,da as ff,db as If,dc as Nl,dd as Ef,de as Cf,df as _f,dg as bf,dh as pi,di as Sf,dj as Nf,dk as Tf,dl as vf,dm as mo,dn as Tl,dp as wf,dq as yf,dr as xf,ds as Rf,dt as Lu,du as Of,dv as Mu,dw as kf,dx as Uu,dy as Af,dz as Pf,dA as Df,dB as Lf,dC as vl,dD as wn,dE as Fu,dF as hi,dG as Zn,dH as wl,dI as yl,dJ as _t,dK as vr,dL as Mf,dM as Uf,dN as Ff,dO as Bf,dP as Aa,dQ as Gf,dR as xl,dS as Rl,dT as Vf,dU as Pa,dV as Da,dW as Hf,dX as Bu,dY as Wf,dZ as go,d_ as jf,d$ as Gu,e0 as qf,e1 as zf,e2 as Yf,e3 as $f,e4 as Kf,e5 as Xf,e6 as Qf,e7 as Jf,e8 as La,e9 as Zf,ea as eI,eb as tI,ec as nI,ed as rI,ee as sI,ef as Vu,eg as oI,eh as aI,ei as iI,ej as lI,ek as cI,el as Ds,em as uI,en as dI,eo as mI,ep as gI,eq as Ol,er as pI,es as hI,et as fI,eu as II,ev as EI,ew as CI,ex as kl,ey as _I,ez as bI,eA as SI,eB as NI,eC as TI,eD as vI,eE as wI,eF as yI,eG as xI,eH as RI,eI as Hu,eJ as OI,eK as kI,eL as AI,eM as PI,eN as DI,eO as Wu,eP as LI,eQ as MI,eR as UI,eS as FI,eT as BI,eU as GI,eV as VI,eW as HI,eX as WI,eY as jI,eZ as qI,e_ as zI,e$ as YI,f0 as $I,f1 as KI,f2 as XI,f3 as QI,f4 as Gi,f5 as Js,f6 as JI,f7 as Ma,f8 as ZI,f9 as Al,fa as eE,fb as tE,fc as Qt,fd as nE,fe as rE,ff as sE,fg as oE,fh as aE,fi as iE,fj as lE,fk as cE,fl as uE,fm as dE,fn as mE,fo as gE,fp as pE,fq as hE,fr as fE,fs as IE,ft as ju,fu as Pl,fv as qu,fw as EE,fx as CE,fy as _E,fz as bE,fA as SE,fB as NE,fC as TE,fD as vE,fE as wE,fF as Hn,fG as yE,fH as xE,fI as RE,fJ as OE,fK as kE,fL as AE,fM as PE,fN as DE,fO as LE,fP as ME,fQ as UE,fR as FE,fS as BE,fT as GE,fU as VE,fV as HE,fW as WE,fX as jE,fY as Dl,fZ as qE,f_ as zE,f$ as YE,g0 as $E,g1 as KE,g2 as XE,g3 as po,g4 as Ll,g5 as QE,g6 as JE,g7 as ho,g8 as zu,g9 as ZE,ga as Ua,gb as eC,gc as tC,gd as nC,ge as Yu,gf as rC,gg as sC,gh as oC,gi as aC,gj as iC,gk as lC,gl as cC,gm as uC,gn as dC,go as mC,gp as gC,gq as pC,gr as hC,gs as Es,gt as fC,gu as Ml,gv as IC,gw as EC,gx as CC,gy as $u,gz as _C,gA as bC,gB as SC,gC as NC,gD as TC,gE as vC,gF as wC,gG as yC,gH as xC,gI as RC,gJ as OC,gK as kC,gL as Ku,gM as AC,gN as Xu,gO as PC,gP as DC,gQ as LC,gR as MC,gS as cr,gT as Fa,gU as UC,gV as Ul,gW as FC,gX as BC,gY as Vi,gZ as Qu,g_ as Fn,g$ as GC,h0 as VC,h1 as HC,h2 as Ju,h3 as Zu,h4 as WC,h5 as jC,h6 as qC,h7 as ed,h8 as zC,h9 as YC,ha as $C,hb as KC,hc as XC,hd as QC,he as JC,hf as ZC,hg as e_,hh as t_,hi as n_,hj as r_,hk as fo,hl as pt,hm as s_,hn as Ba,ho as Fl,hp as o_,hq as a_,hr as i_,hs as l_,ht as c_,hu as u_,hv as d_,hw as m_,hx as g_,hy as p_,hz as h_,hA as f_,hB as I_,hC as E_,hD as Bl,hE as Xn,hF as Io}from"./nitro-renderer-b95b6066.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();function be(){return is.instance}function It(o){be().addLinkEventTracker(o)}function vt(){return be().avatar}function Gl(o){return vt().structureData.getPalette(o)}function Vl(o){return vt().structureData.getSetType(o)}function Ls(){return be().cameraManager}function C_(){return be().core}function __(){return C_().configuration}function ee(o){o=o.startsWith("event:")?o.substring(6):o,be().createLinkEvent(o)}function Vs(){var o;return(o=be())==null?void 0:o.communication}function K(o,e=null){return dr.getValue(o,e)}function fi(){var o;return(o=Vs())==null?void 0:o.connection}function td(){return be().localization}const Xr=o=>{!o||!o.length||(o.startsWith("http")?Xs.openWebPage(o):ee(o))};function Et(o){be().removeLinkEventTracker(o)}function Y(){return be().roomEngine}let Ga=!1,Eo=0,Co=0;const _o=(o,e=1)=>{const n=o.clientX,r=o.clientY;let a=o.type;switch(a===ke.MOUSE_CLICK&&(Eo&&(Co=1,Eo>=Date.now()-300&&Co++),Eo=Date.now(),Co===2&&(Ga||(a=ke.DOUBLE_CLICK),Co=0,Eo=null)),a){case ke.MOUSE_CLICK:break;case ke.DOUBLE_CLICK:break;case ke.MOUSE_MOVE:Ga=!0;break;case ke.MOUSE_DOWN:Ga=!1;break;case ke.MOUSE_UP:break;case ke.RIGHT_CLICK:break;default:return}Y().dispatchMouseEvent(e,n,r,a,o.altKey,o.ctrlKey||o.metaKey,o.shiftKey,!1)};let Va=!1,bo=0,So=0;const No=(o,e=1,n=!1,r=!1,a=!1,s=!1)=>{let c=0,u=0;o.touches[0]?(c=o.touches[0].clientX,u=o.touches[0].clientY):o.changedTouches[0]&&(c=o.changedTouches[0].clientX,u=o.changedTouches[0].clientY);let d=o.type;switch(n&&(d=fn.TOUCH_LONG),(d===ke.MOUSE_CLICK||d===fn.TOUCH_END)&&(d=ke.MOUSE_CLICK,bo&&(So=1,bo>=Date.now()-300&&So++),bo=Date.now(),So===2&&(Va||(d=ke.DOUBLE_CLICK),So=0,bo=null)),d){case ke.MOUSE_CLICK:break;case ke.DOUBLE_CLICK:break;case fn.TOUCH_START:d=ke.MOUSE_DOWN,Va=!1;break;case fn.TOUCH_MOVE:d=ke.MOUSE_MOVE,Va=!0;break;case fn.TOUCH_END:d=ke.MOUSE_UP;break;case fn.TOUCH_LONG:d=ke.MOUSE_DOWN_LONG;break;default:return}d===fn.TOUCH_START&&Y().dispatchMouseEvent(e,c,u,d,r,a,s,!1),Y().dispatchMouseEvent(e,c,u,d,r,a,s,!1)};function jt(o){if(!o||!o.model)return!1;const e=W().userId,n=o.model.getValue(re.FURNITURE_OWNER_ID);return e===n}function Hs(o,e,n){return o?o.isRoomOwner||o.controllerLevel>=tt.GUEST||W().isModerator||jt(Y().getRoomObject(o.roomId,e,n)):!1}function Qr(){return be().roomSessionManager}function jr(o,e=null){Qr().createSession(o,e)}function b_(){const o=Jr();return o?o.model.getValue(re.FIGURE_CAN_STAND_UP):ms.POSTURE_STAND}function Ha(){const o=Jr();if(!o)return!1;const n=o.model.getValue(re.FIGURE_EFFECT);return!(n===29||n===30||n===185)}function W(){return be().sessionDataManager}function En(){return K("hc.disabled",!1)?dn.VIP:W().clubLevel}class an{}an.OKAY=0;an.MISSING_OFFER=1;an.FURNI_LIMIT_REACHED=2;an.NOT_IN_ROOM=3;an.NOT_ROOM_OWNER=4;an.GUILD_ROOM=5;an.VISITORS_IN_ROOM=6;class S_{constructor(e,n,r){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._depth=n,this._parent=r,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return this._children.length===0}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}const nd=class{constructor(o,e,n,r,a,s=-1){this._pageId=o,this._layoutCode=e,this._localization=n,this._offers=r,this._acceptSeasonCurrencyAsCredits=a;for(const c of r)c.page=this;s===-1?this._mode=nd.MODE_NORMAL:this._mode=s}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}};let Hi=nd;Hi.MODE_NORMAL=0;class mt{}mt.DUCKET_INFO="ducket_info";mt.CREDITS="credits";mt.AVATAR_EFFECTS="avatar_effects";mt.HC_MEMBERSHIP="hc_membership";mt.CLUB_GIFTS="club_gifts";mt.LIMITED_SOLD="limited_sold";mt.PET_ACCESSORIES="pet_accessories";mt.TRAX_SONGS="trax_songs";mt.NEW_ADDITIONS="new_additions";mt.QUEST_SHELL="quest_shell";mt.QUEST_SNOWFLAKES="quest_snowflakes";mt.VAL_QUESTS="val_quests";mt.GUILD_CUSTOM_FURNI="guild_custom_furni";mt.GIFT_SHOP="gift_shop";mt.HORSE_STYLES="horse_styles";mt.HORSE_SHOE="horse_shoe";mt.SET_EASTER="set_easter";mt.ECOTRON_TRANSFORM="ecotron_transform";mt.LOYALTY_INFO="loyalty_info";mt.ROOM_BUNDLES="room_bundles";mt.ROOM_BUNDLES_MOBILE="room_bundles_mobile";mt.HABBO_CLUB_DESKTOP="habbo_club_desktop";mt.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";class N_{constructor(e,n){this.breed=e,this.palettes=n}}class je{}je.NONE=0;je.CONFIRM=1;je.PURCHASE=2;je.NO_CREDITS=3;je.NO_POINTS=4;je.SOLD_OUT=5;je.FAILED=6;class Rn{}Rn.NORMAL="NORMAL";Rn.BUILDER="BUILDERS_CLUB";const T_=o=>"",v_=o=>"",Hl=(o,e)=>{const n=o.get(e),r=[];if(n&&n.length)for(const a of n)a.isVisible&&r.push(a);return r},rd=(o,e,n,r)=>{if(n.isVisible&&n.pageId>0){let a=!1;const s=[n.pageName,n.localization].join(" ").toLowerCase().replace(/ /gi,"");if(s.indexOf(o)>-1&&(r.push(n),a=!0),!a){for(const c of e)if(s.indexOf(c)>=0){r.push(n);break}}}for(const a of n.children)rd(o,e,a,r)};function w_(o){if(!o.length)return 0;let e=o.length-1;for(;e>=0&&!isNaN(parseInt(o.charAt(e)));)e--;return e>0?parseInt(o.substring(e+1)):-1}function y_(o,e){switch(o){case 0:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 5:return[[16777215],[15658734],[14540253]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const n=[];for(const r of e){const a=Y().getPetColorResult(o,r.paletteId);a&&(a.primaryColor===a.secondaryColor?n.push([a.primaryColor]):n.push([a.primaryColor,a.secondaryColor]))}return n}}}class me{}me.WALL="i";me.FLOOR="s";me.EFFECT="e";me.HABBO_CLUB="h";me.BADGE="b";me.GAME_TOKEN="GAME_TOKEN";me.PET="p";me.ROBOT="r";const sd=class{constructor(o,e,n,r,a,s,c=!1,u=0,d=0){this._productType=o.toLowerCase(),this._productClassId=e,this._extraParam=n,this._productCount=r,this._productData=a,this._furnitureData=s,this._isUniqueLimitedItem=c,this._uniqueLimitedItemSeriesSize=u,this._uniqueLimitedItemsLeft=d}static stripAddonProducts(o){return o.length===1?o:o.filter(e=>e.productType!==me.BADGE&&e.productType!==me.EFFECT&&e.productClassId!==sd.EFFECT_CLASSID_NINJA_DISAPPEAR)}getIconUrl(o=null,e=null){switch(this._productType){case me.FLOOR:return Y().getFurnitureFloorIconUrl(this.productClassId);case me.WALL:{if(o&&this._furnitureData){let n="";switch(this._furnitureData.className){case"floor":n=["th",this._furnitureData.className,o.product.extraParam].join("_");break;case"wallpaper":n=["th","wall",o.product.extraParam].join("_");break;case"landscape":n=["th",this._furnitureData.className,(o.product.extraParam||"").replace(".","_"),"001"].join("_");break}if(n!=="")return`${K("catalog.asset.url")}/${n}.png`}return Y().getFurnitureWallIconUrl(this.productClassId,this._extraParam)}case me.EFFECT:return T_(this.productClassId);case me.HABBO_CLUB:return v_(this.productClassId);case me.BADGE:return W().getBadgeUrl(this._extraParam);case me.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(o){this._extraParam=o}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(o){this._uniqueLimitedItemsLeft=o}};let zr=sd;zr.EFFECT_CLASSID_NINJA_DISAPPEAR=108;const Qn=class{constructor(o,e,n,r,a,s,c,u,d,p){this._clubLevel=0,this._bundlePurchaseAllowed=!1,this._offerId=o,this._localizationId=e,this._isRentOffer=n,this._priceInCredits=r,this._priceInActivityPoints=a,this._activityPointType=s,this._giftable=c,this._clubLevel=u,this._products=d,this._bundlePurchaseAllowed=p,this.setPricingModelForProducts(),this.setPricingType();for(const g of d)if(g.productType===me.BADGE){this._badgeCode=g.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(o){this._page=o}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];const o=zr.stripAddonProducts(this._products);return o.length?o[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const o=gs(this._localizationId);return o?o.name:m(this._localizationId)}get localizationDescription(){const o=gs(this._localizationId);return o?o.description:m(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const o=zr.stripAddonProducts(this._products);o.length===1?o[0].productCount===1?this._pricingModel=Qn.PRICING_MODEL_SINGLE:this._pricingModel=Qn.PRICING_MODEL_MULTI:o.length>1?this._pricingModel=Qn.PRICING_MODEL_BUNDLE:this._pricingModel=Qn.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=Qn.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=Qn.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=Qn.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=Qn.PRICE_TYPE_NONE}clone(){const o=[],e=gs(this.localizationId);for(const r of this._products){const a=Ii(r.productClassId,r.productType);o.push(new zr(r.productType,r.productClassId,r.extraParam,r.productCount,e,a))}const n=new Qn(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,o,this.bundlePurchaseAllowed);return n.page=this.page,n}};let lt=Qn;lt.PRICING_MODEL_UNKNOWN="pricing_model_unknown";lt.PRICING_MODEL_SINGLE="pricing_model_single";lt.PRICING_MODEL_MULTI="pricing_model_multi";lt.PRICING_MODEL_BUNDLE="pricing_model_bundle";lt.PRICING_MODEL_FURNITURE="pricing_model_furniture";lt.PRICE_TYPE_NONE="price_type_none";lt.PRICE_TYPE_CREDITS="price_type_credits";lt.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints";lt.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";class x_{constructor(e){this._furniData=e,this._product=new zr(this._furniData.type,this._furniData.id,this._furniData.customParams,1,gs(this._furniData.className),this._furniData)}activate(){D(new Xm(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return lt.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}const R_=(o,e,n=null)=>{let r=null;switch(o.toLocaleLowerCase()){case me.FLOOR:r=Y().getFurnitureFloorIconUrl(e);break;case me.WALL:r=Y().getFurnitureWallIconUrl(e,n);break}return r};class O_{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class Zs{constructor(e,n,r,a,s,c,u,d,p=-1){this._timeLeftMinutes=-1,this._offerId=e,this._furniId=n,this._furniType=r,this._extraData=a,this._stuffData=s,this._price=c,this._status=u,this._averagePrice=d,this._offerCount=p}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}}Zs.TYPE_FLOOR=1;Zs.TYPE_WALL=2;class $r{}$r.ONGOING=1;$r.ONGOING_OWN=1;$r.SOLD=2;$r.EXPIRED=3;class Ft{}Ft.BY_ACTIVITY=1;Ft.BY_VALUE=2;Ft.ADVANCED=3;class od{constructor(e,n){this._images=e,this._texts=n}getText(e){let n=this._texts[e]||"";return n&&n.length&&(n=n.replace(/\r\n|\r|\n/g,"<br />")),n}getImage(e){const n=this._images[e]||"";if(!n||!n.length)return null;let r=K("catalog.asset.image.url");return r=r.replace("%name%",n),r}}class k_{constructor(e,n,r,a,s,c,u,d){this.roomId=e,this.objectId=n,this.category=r,this.wallLocation=a,this.x=s,this.y=c,this.direction=u,this.offer=d}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}const ls=class{constructor(){this._requestType=ls.REQUEST_TYPE_NONE}resetRequest(){this._requestType=ls.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(o){this._requestType=ls.REQUEST_TYPE_ID,this._requestById=o}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(o){this._requestType=ls.REQUEST_TYPE_OFFER,this._requestedByOfferId=o}get requestByName(){return this._requestByName}set requestByName(o){this._requestType=ls.REQUEST_TYPE_NAME,this._requestByName=o}};let hr=ls;hr.REQUEST_TYPE_NONE=0;hr.REQUEST_TYPE_ID=1;hr.REQUEST_TYPE_OFFER=2;hr.REQUEST_TYPE_NAME=3;class A_{constructor(e,n,r){this.searchValue=e,this.offers=n,this.filteredNodes=r}}function Ii(o,e){let n=null;switch(e.toLowerCase()){case me.FLOOR:n=W().getFloorItemData(o);break;case me.WALL:n=W().getWallItemData(o);break}return n}function ca(o,e,n){const r=Y().getRoomObject(o,e,n);if(!r)return;const a=r.model.getValue(re.FURNITURE_TYPE_ID);switch(n){case Q.FLOOR:return W().getFloorItemData(a);case Q.WALL:return W().getWallItemData(a)}return null}function P_(){const o=Jr();return o?o.model.getValue(re.FIGURE_POSTURE):ms.POSTURE_STAND}function gs(o){return o?W().getProductData(o):null}function Ae(){return Qr().getSession(-1)}function Ei(){D(new Qm)}function qr(){return W().clubLevel>=dn.CLUB}function To(){return W().clubLevel>=dn.VIP}function D_(o){const e=Y().getRoomObject(Ae().roomId,o,Q.FLOOR);if(!e||!e.model)return!1;const n=W().userId,r=e.model.getValue(re.FURNITURE_OWNER_ID);return n===r}function L_(){const o=Jr();return o?o.model.getValue(re.FIGURE_EFFECT)===77:!1}function M_(o){Qr().startSession(o)}const Wi=()=>{Ae()&&(Ei(),Qr().removeSession(-1))};function Jr(){const o=W().userId,e=Y().activeRoomId,n=Q.UNIT,r=Y().getTotalObjectsForManager(e,n);let a=0;for(;a<r;){const s=Y().getRoomObjectByIndex(e,a,n);if(s){const c=Ae().userDataManager.getUserDataByIndex(s.id);if(c&&c.webID===o)return s}a++}return null}const ji=(o,e,n,r=1)=>{const a=Y().getRoomObjectBoundingRectangle(o,e,n,r);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},ad=(o,e,n,r=1)=>{const a=Y().getRoomObjectScreenLocation(o,e,n,r);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},U_=(o,e,n=1)=>{const r=Y(),a=r.activeRoomId;r.initializeRoomInstanceRenderingCanvas(a,n,o,e)};function F_(o){let e=!1;const n=Y().getRoomObject(o.roomId,o.objectId,o.category);return n&&n.model.getValue(re.FURNITURE_SELECTION_DISABLED)===1&&(e=!0,W().isModerator&&(e=!1)),e}function us(o,e,n){Y().processRoomObjectOperation(o,e,n)}function Wl(o){Y().setActiveRoomId(o)}const D=o=>fi().send(o);class un{static getAchievementBadgeCode(e){if(!e)return null;let n=e.badgeId;return e.finalLevel||(n=td().getPreviousLevelBadgeId(n)),n}static getAchievementCategoryImageUrl(e,n=null,r=!1){const a=K("achievements.images.url");let s=r?"achicon_":"achcategory_";return s+=e.code,n!==null&&(s+=`_${n>0?"active":"inactive"}`),a.replace("%image%",s)}static getAchievementCategoryMaxProgress(e){if(!e)return 0;let n=0;for(const r of e.achievements)n+=r.levelCount;return n}static getAchievementCategoryProgress(e){if(!e)return 0;let n=0;for(const r of e.achievements)n+=r.finalLevel?r.level:r.level-1;return n}static getAchievementCategoryTotalUnseen(e){if(!e)return 0;let n=0;for(const r of e.achievements)r.unseen>0&&n++;return n}static getAchievementHasStarted(e){return e?!!(e.finalLevel||e.level-1>0):!1}static getAchievementIsIgnored(e){if(!e)return!1;const n=K("achievements.unseen.ignored"),r=e.badgeId.replace(/[0-9]/g,"");return n.indexOf(r)>=0}static getAchievementLevel(e){return e?e.finalLevel?e.level:e.level-1:0}}class jl{constructor(e){this._code=e,this._achievements=[]}getProgress(){return un.getAchievementCategoryProgress(this)}getMaxProgress(){return un.getAchievementCategoryMaxProgress(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}class xn{}xn.ACTION_SAVE="AEA_ACTION_SAVE";xn.ACTION_CLEAR="AEA_ACTION_CLEAR";xn.ACTION_RESET="AEA_ACTION_RESET";xn.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";class B_{constructor(e,n=!1){this._partColor=e,this._isDisabled=n,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return cn.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class qi{constructor(e,n,r){this._selectedPartIndex=-1,this._name=e,this._parts=n,this._palettes=r,this._selectedPartIndex=-1}static defaultColorId(e,n){if(!e||!e.length)return-1;let r=0;for(;r<e.length;){const a=e[r];if(a.partColor&&a.partColor.clubLevel<=n)return a.partColor.id;r++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const n of e)n.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let n=0;for(;n<this._parts.length;){if(this._parts[n].id===e){this.selectPartIndex(n);return}n++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let n=0;for(;n<this._palettes.length;){const r=this.getPalette(n);if(r){let a=0;if(e.length>n)a=e[n];else{const c=r[0];c&&c.partColor&&(a=c.partColor.id)}let s=0;for(;s<r.length;){const c=r[s];c.partColor.id===a?(this._paletteIndexes[n]=s,c.isSelected=!0):c.isSelected=!1,s++}}n++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const n=this._parts[this._selectedPartIndex];n&&(n.isSelected=!1)}if(this._parts.length>e){const n=this._parts[e];if(n)return n.isSelected=!0,this._selectedPartIndex=e,n}return null}selectColorIndex(e,n){const r=this.getPalette(n);if(!r||r.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[n],n),this._paletteIndexes[n]=e;const a=r[e];return a?(a.isSelected=!0,this.updatePartColors(),a):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,n){const r=this.getPalette(n);if(!r||r.length<=e)return;const a=r[e];a&&(a.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length||!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const n=e[0];if(!n||!n.partColor)return null;const r=n.partColor.id,a=[];let s=0;for(;s<this._paletteIndexes.length;){const u=this._palettes[s];if(!(!u||u.length<=s))if(u.length>this._paletteIndexes[s]){const d=u[this._paletteIndexes[s]];d&&d.partColor?a.push(d.partColor.id):a.push(r)}else a.push(r);s++}const c=this.getCurrentPart();return c?a.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let n=0;for(;n<this._paletteIndexes.length;){const r=this.getSelectedColor(n);r?e.push(r.partColor):e.push(null),n++}return e}getSelectedColor(e){const n=this.getPalette(e);return!n||n.length<=this._paletteIndexes[e]?null:n[this._paletteIndexes[e]]}getSelectedColorId(e){const n=this.getSelectedColor(e);return n&&n.partColor?n.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const n of this._parts)n&&(n.partColors=e)}hasClubSelectionsOverLevel(e){let n=!1;const r=this.getSelectedColors();if(r){let s=0;for(;s<r.length;){const c=r[s];c&&c.clubLevel>e&&(n=!0),s++}}const a=this.getCurrentPart();if(a&&a.partSet){const s=a.partSet;s&&s.clubLevel>e&&(n=!0)}return n}hasInvalidSelectedItems(e){const n=this.getCurrentPart();if(!n)return!1;const r=n.partSet;if(!(!r||!r.isSellable))return e.indexOf(r.id)>-1}stripClubItemsOverLevel(e){const n=this.getCurrentPart();if(n&&n.partSet&&n.partSet.clubLevel>e){const a=this.selectPartIndex(0);return a&&!a.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(e){const n=[],r=this.getSelectedColors(),a=this.getPalette(0);let s=!1;const c=qi.defaultColorId(a,e);if(c===-1)return!1;let u=0;for(;u<r.length;){const d=r[u];d?d.clubLevel>e?(n.push(c),s=!0):n.push(d.id):(n.push(c),s=!0),u++}return s&&this.selectColorIds(n),s}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}class ht{static getGender(e){switch(e){case ue.MALE:case"m":case"M":e=ue.MALE;break;case ue.FEMALE:case"f":case"F":e=ue.FEMALE;break;default:e=ue.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,n){if(!e||!n||!this.CURRENT_FIGURE)return null;const r=[],a=[];let s=0;for(;s<this.MAX_PALETTES;)a.push([]),s++;const c=Vl(n);if(!c)return null;const u=Gl(c.paletteID);if(!u)return null;let d=this.CURRENT_FIGURE.getColorIds(n);d||(d=[]);const p=new Array(d.length),g=this.clubItemsDimmed,h=En();for(const b of u.colors.getValues())if(b.isSelectable&&(g||h>=b.clubLevel)){let N=0;for(;N<this.MAX_PALETTES;){const w=h<b.clubLevel,O=new B_(b,w);a[N].push(O),N++}if(n!==ue.FACE){let w=0;for(;w<d.length;)b.id===d[w]&&(p[w]=b),w++}}let f=[];if(g?f=vt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):f=vt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,h),f.indexOf(n)===-1){const b=new Ws(null,null,!1);b.isClear=!0,r.push(b)}const I=n!==ue.FACE,_=c.partSets;for(s=_.length-1;s>=0;){const b=_.getWithIndex(s);let N=!1;if((b.gender===ue.UNISEX||b.gender===this.CURRENT_FIGURE.gender)&&(N=!0),b.isSelectable&&N&&(g||h>=b.clubLevel)){const w=h<b.clubLevel;let O=!0;b.isSellable&&(O=this.hasFigureSetId(b.id)),O&&r.push(new Ws(b,p,I,w))}s--}for(r.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),s=0;s<this.MAX_PALETTES;)a[s].sort(this.colorSorter),s++;return new qi(n,r,a)}static clubSorter(e,n){const r=e.partSet?e.partSet.clubLevel:9999999999,a=n.partSet?n.partSet.clubLevel:9999999999,s=e.partSet?e.partSet.isSellable:!1,c=n.partSet?n.partSet.isSellable:!1;return s&&!c?1:c&&!s||r>a?-1:r<a?1:e.partSet.id>n.partSet.id?-1:e.partSet.id<n.partSet.id?1:0}static colorSorter(e,n){const r=e.partColor?e.partColor.clubLevel:-1,a=n.partColor?n.partColor.clubLevel:-1;return r<a?-1:r>a?1:e.partColor.index<n.partColor.index?-1:e.partColor.index>n.partColor.index?1:0}static noobSorter(e,n){const r=e.partSet?e.partSet.clubLevel:-1,a=n.partSet?n.partSet.clubLevel:-1,s=e.partSet?e.partSet.isSellable:!1,c=n.partSet?n.partSet.isSellable:!1;return s&&!c?1:c&&!s||r<a?-1:r>a?1:e.partSet.id<n.partSet.id?-1:e.partSet.id>n.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const n=Vl(e);if(!n)return-1;const r=Gl(n.paletteID);if(!r)return-1;for(const a of r.colors.getValues())if(!(!a.isSelectable||En()<a.clubLevel))return a.id;return-1}static get clubItemsFirst(){return K("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return K("avatareditor.show.clubitems.dimmed",!0)}}ht.MAX_PALETTES=2;ht.CURRENT_FIGURE=null;ht.FIGURE_SET_IDS=[];ht.BOUND_FURNITURE_NAMES=[];const Te=class{constructor(){this._gender="M",this._direction=Te.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(o,e){this._data=new Map,this._colors=new Map,this._gender=e,this.parseFigureString(o),this.updateView()}parseFigureString(o){if(!o)return;const e=o.split(".");if(!(!e||!e.length))for(const n of e){const r=n.split("-");if(!r.length)continue;const a=r[0],s=parseInt(r[1]),c=[];let u=2;for(;u<r.length;)c.push(parseInt(r[u])),u++;c.length||c.push(0),this.savePartSetId(a,s,!1),this.savePartSetColourId(a,c,!1)}}getPartSetId(o){const e=this._data.get(o);return e!==void 0?e:-1}getColorIds(o){const e=this._colors.get(o);return e!==void 0?e:[ht.avatarSetFirstSelectableColor(o)]}getFigureString(){let o="";const e=[];for(const[r,a]of this._data.entries()){const s=this._colors.get(r);let c=r+"-"+a;if(s&&s.length){let u=0;for(;u<s.length;)c=c+("-"+s[u]),u++}e.push(c)}let n=0;for(;n<e.length;)o=o+e[n],n<e.length-1&&(o=o+"."),n++;return o}savePartData(o,e,n,r=!1){this.savePartSetId(o,e,r),this.savePartSetColourId(o,n,r)}savePartSetId(o,e,n=!0){switch(o){case Te.FACE:case Te.HAIR:case Te.HAT:case Te.HEAD_ACCESSORIES:case Te.EYE_ACCESSORIES:case Te.FACE_ACCESSORIES:case Te.SHIRT:case Te.JACKET:case Te.CHEST_ACCESSORIES:case Te.CHEST_PRINTS:case Te.TROUSERS:case Te.SHOES:case Te.TROUSER_ACCESSORIES:e>=0?this._data.set(o,e):this._data.delete(o);break}n&&this.updateView()}savePartSetColourId(o,e,n=!0){switch(o){case Te.FACE:case Te.HAIR:case Te.HAT:case Te.HEAD_ACCESSORIES:case Te.EYE_ACCESSORIES:case Te.FACE_ACCESSORIES:case Te.SHIRT:case Te.JACKET:case Te.CHEST_ACCESSORIES:case Te.CHEST_PRINTS:case Te.TROUSERS:case Te.SHOES:case Te.TROUSER_ACCESSORIES:this._colors.set(o,e);break}n&&this.updateView()}getFigureStringWithFace(o,e=!0){let n="";const r=[Te.FACE],a=[];for(const c of r){const u=this._colors.get(c);if(!u)continue;let d=this._data.get(c);c===Te.FACE&&e&&(d=o);let p=c+"-"+d;if(d>=0){let g=0;for(;g<u.length;)p=p+("-"+u[g]),g++}a.push(p)}let s=0;for(;s<a.length;)n=n+a[s],s<a.length-1&&(n=n+"."),s++;return n}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(o){this._direction=o,this.updateView()}set avatarEffectType(o){this._avatarEffectType=o}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(o){this._notifier=o}};let ue=Te;ue.DEFAULT_DIRECTION=4;ue.MALE="M";ue.FEMALE="F";ue.UNISEX="U";ue.SCALE="h";ue.STD="std";ue.DEFAULT_FRAME="0";ue.FACE="hd";ue.HAIR="hr";ue.HAT="ha";ue.HEAD_ACCESSORIES="he";ue.EYE_ACCESSORIES="ea";ue.FACE_ACCESSORIES="fa";ue.JACKET="cc";ue.SHIRT="ch";ue.CHEST_ACCESSORIES="ca";ue.CHEST_PRINTS="cp";ue.TROUSERS="lg";ue.SHOES="sh";ue.TROUSER_ACCESSORIES="wa";ue.SET_TYPES=[Te.FACE,Te.HAIR,Te.HAT,Te.HEAD_ACCESSORIES,Te.EYE_ACCESSORIES,Te.FACE_ACCESSORIES,Te.JACKET,Te.SHIRT,Te.CHEST_ACCESSORIES,Te.CHEST_PRINTS,Te.TROUSERS,Te.SHOES,Te.TROUSERS];const cs=class{constructor(o,e,n=!0,r=!1){if(this._renderManager=vt(),this._partSet=o,this._partColors=e,this._useColors=n,this._isDisabled=r,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,o){const a=o.parts;for(const s of a)this._maxColorIndex=Math.max(this._maxColorIndex,s.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const o=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(o)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(o,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet||!this._isValidFigure&&!this.analyzeFigure())return null;const o=this._partSet.parts.concat().sort(this.sortByDrawOrder),e=new Zm;for(const n of o){if(!n)continue;let r=null,a=0,s=!1;for(;!s&&a<cs.THUMB_DIRECTIONS.length;){const g=ue.SCALE+"_"+ue.STD+"_"+n.type+"_"+n.id+"_"+cs.THUMB_DIRECTIONS[a]+"_"+ue.DEFAULT_FRAME;r=this._renderManager.getAssetByName(g),r&&r.texture?s=!0:a++}if(!s)continue;const c=r.offsetX,u=r.offsetY;let d=null;if(this._useColors&&n.colorLayerIndex>0){const g=this._partColors[n.colorLayerIndex-1];g&&(d=g)}const p=new Wo(r.texture);p.position.set(c,u),d&&(p.tint=d.rgb),e.addChild(p)}return e}updateThumbVisualization(){if(!this._isInitalized)return;let o=this._thumbContainer;o||(o=this.renderThumb()),o&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(o,.2),this._imageUrl=nr.generateImageUrl(o),this.notify&&this.notify())}setAlpha(o,e){return o.filters=[cs.ALPHA_FILTER],o}sortByDrawOrder(o,e){const n=cs.DRAW_ORDER.indexOf(o.type),r=cs.DRAW_ORDER.indexOf(e.type);return n<r?-1:n>r?1:o.index<e.index?-1:o.index>e.index?1:0}resetFigure(o){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(o){this._partColors=o,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(o){this._thumbContainer=o,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(o){this._isClear=o}get isSelected(){return this._isSelected}set isSelected(o){this._isSelected=o,this.notify&&this.notify()}get notify(){return this._notifier}set notify(o){this._notifier=o}};let Ws=cs;Ws.ALPHA_FILTER=new Jm(.2);Ws.THUMB_DIRECTIONS=[2,6,0,4,3,1];Ws.DRAW_ORDER=[ze.LEFT_HAND_ITEM,ze.LEFT_HAND,ze.LEFT_SLEEVE,ze.LEFT_COAT_SLEEVE,ze.BODY,ze.SHOES,ze.LEGS,ze.CHEST,ze.CHEST_ACCESSORY,ze.COAT_CHEST,ze.CHEST_PRINT,ze.WAIST_ACCESSORY,ze.RIGHT_HAND,ze.RIGHT_SLEEVE,ze.RIGHT_COAT_SLEEVE,ze.HEAD,ze.FACE,ze.EYES,ze.HAIR,ze.HAIR_BIG,ze.FACE_ACCESSORY,ze.EYE_ACCESSORY,ze.HEAD_ACCESSORY,ze.HEAD_ACCESSORY_EXTRA,ze.RIGHT_HAND_ITEM];class ua{constructor(){this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let n=this._categories.get(e);n||(n=ht.createCategory(this,e),n&&(this._categories.set(e,n),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const n=this._categories.get(e);if(!n)return;const r=ht.CURRENT_FIGURE.getPartSetId(e);let a=ht.CURRENT_FIGURE.getColorIds(e);a||(a=[]),n.selectPartId(r),n.selectColorIds(a)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const n of this._categories.values())if(n&&n.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const n of this._categories.values())if(n.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let n=!1;for(const[r,a]of this._categories.entries()){let s=!1;if(a.stripClubItemsOverLevel(e)&&(s=!0),a.stripClubColorsOverLevel(e)&&(s=!0),s){const c=a.getCurrentPart();c&&ht.CURRENT_FIGURE&&ht.CURRENT_FIGURE.savePartData(r,c.id,a.getSelectedColorIds(),!0),n=!0}}return n}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[n,r]of this._categories.entries());return e}selectPart(e,n){const r=this._categories.get(e);if(!r)return;const a=r.selectedPartIndex;r.selectPartIndex(n);const s=r.getCurrentPart();if(s){if(s.isDisabled){r.selectPartIndex(a);return}this._maxPaletteCount=s.maxColorIndex,ht.CURRENT_FIGURE.savePartData(e,s.id,r.getSelectedColorIds(),!0)}}selectColor(e,n,r){const a=this._categories.get(e);if(!a)return;const s=a.getCurrentColorIndex(r);if(a.selectColorIndex(n,r),a.getSelectedColor(r).isDisabled){a.selectColorIndex(s,r);return}ht.CURRENT_FIGURE.savePartSetColourId(e,a.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class G_ extends ua{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(ue.FACE),this._isInitalized=!0}selectColor(e,n,r){super.selectColor(e,n,r),this.updateSelectionsFromFigure(ue.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!ht.CURRENT_FIGURE)return;const n=this._categories.get(e);if(!n)return;const r=ht.CURRENT_FIGURE.getPartSetId(e);let a=ht.CURRENT_FIGURE.getColorIds(e);a||(a=[]),n.selectPartId(r),n.selectColorIds(a);for(const s of n.parts){const c=u=>{const d=ht.CURRENT_FIGURE.getFigureStringWithFace(s.id),p=vt().createAvatarImage(d,Fi.LARGE,null,{resetFigure:c,dispose:null,disposed:!1}),g=p.getImageAsSprite(jo.HEAD);g&&(g.y=10,s.thumbContainer=g,setTimeout(()=>p.dispose(),0))};c()}}get canSetGender(){return!0}get name(){return pr.GENERIC}}const Kt=o=>{if(o==null||typeof o!="object")return o;const e=new o.constructor;for(const n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e};class en{static makeColorHex(e){return"#"+e}static makeColorNumberHex(e){return"#"+e.toString(16).padStart(6,"0")}static convertFromHex(e){return parseInt(e.replace("#",""),16)}static uintHexColor(e){const n=e>>>0;return en.makeColorHex(n.toString(16).substring(2))}static int_to_8BitVals(e){const n=e>>24&255,r=e>>16&255,a=e>>8&255,s=e&255;return[n,r,a,s]}static eight_bitVals_to_int(e,n,r,a){return(e<<24)+(n<<16)+(r<<8)+(a|0)}static int2rgb(e){e>>>=0;const n=e&255,r=(e&65280)>>>8;return"rgba("+[(e&16711680)>>>16,r,n,1].join(",")+")"}}const Ur=o=>{let e=Math.floor(o/86400),n=Math.floor(o%86400/3600),r=Math.floor(o%86400%3600/60),a=o%86400%3600%60;return e.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")},$o=o=>{try{JSON.parse(window.localStorage.getItem(o))}catch{return null}},zi=o=>{let e=be().localization.getBadgeDesc(o);return(!e||!e.length)&&(e=`badge_desc_${o}`),e},eo=o=>{let e=be().localization.getBadgeName(o);return(!e||!e.length)&&(e=`badge_name_${o}`),e};function Ko(o){return!o||isNaN(o)?"0":o.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function V_(o){if(!o||isNaN(o))return"0";let e=Math.abs(o);const n=Math.pow(10,1),r=o<0;let a="";const s=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const c of s){let u=e/c.value;if(u=Math.round(u*n)/n,u>=1){e=u,a=c.key;break}}return(r?"-":"")+e+a}function m(o,e=null,n=null){return be().getLocalizationWithParameters(o,e,n)}class to{}to.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects";to.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";const id=(o,e)=>o.dispatchEvent(e),Ci=o=>id(be().events,o),rr=new eg,Tt=o=>id(rr,o);let ld=!1;const sr=o=>{ld&&Ci(new Cl(Cl.PLAY_SOUND,o))},ql=[ke.MOUSE_CLICK],H_=()=>{const o=()=>ql.forEach(n=>window.removeEventListener(n,e)),e=n=>(ld=!0)&&o();ql.forEach(n=>window.addEventListener(n,e))};H_();class Z{}Z.DEFAULT=1;Z.WALL_PAPER=2;Z.FLOOR=3;Z.LANDSCAPE=4;Z.POST_IT=5;Z.POSTER=6;Z.SOUND_SET=7;Z.TRAX_SONG=8;Z.PRESENT=9;Z.ECOTRON_BOX=10;Z.TROPHY=11;Z.CREDIT_FURNI=12;Z.PET_SHAMPOO=13;Z.PET_CUSTOM_PART=14;Z.PET_CUSTOM_PART_SHAMPOO=15;Z.PET_SADDLE=16;Z.GUILD_FURNI=17;Z.GAME_FURNI=18;Z.MONSTERPLANT_SEED=19;Z.MONSTERPLANT_REVIVAL=20;Z.MONSTERPLANT_REBREED=21;Z.MONSTERPLANT_FERTILIZE=22;Z.FIGURE_PURCHASABLE_SET=23;class js{constructor(e){e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(this._secondsToExpiration===-1)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(yn()-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new js(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class Yi{constructor(e=-1,n=-1,r=null,a=null,s=-1){this._type=e,this._category=n,this._roomEngine=r,this._stuffData=a,this._extra=s,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new Yi;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const n of this._items)if(n.id===e)return n;return null}getTradeItems(e){const n=[],r=this.getLastItem();if(!r)return n;let a=0,s=0;for(;s<this._items.length&&!(a>=e);){const c=this.getItemByIndex(s);!c.locked&&c.isTradable&&c.type===r.type&&(n.push(c),a++),s++}return n}push(e){const n=[...this._items];let r=0;for(;r<n.length;){let a=n[r];if(a.id===e.id){a=a.clone(),a.locked=!1,n.splice(r,1),n.push(a),this._items=n;return}r++}n.push(e),this._items=n,this._items.length===1&&this.prepareGroup()}pop(){const e=[...this._items];let n=null;if(e.length>0){const r=e.length-1;n=e[r],e.splice(r,1)}return this._items=e,n}remove(e){const n=[...this._items];let r=0;for(;r<n.length;){let a=n[r];if(a.id===e)return n.splice(r,1),this._items=n,a;r++}return null}getTotalCount(){if(this._category===Z.POST_IT){let e=0,n=0;for(;n<this._items.length;){const r=this.getItemByIndex(n);e=e+parseInt(r.stuffData.getLegacyString()),n++}return e}return this._items.length}getUnlockedCount(){if(this.category===Z.POST_IT)return this.getTotalCount();let e=0,n=0;for(;n<this._items.length;)this.getItemByIndex(n).locked||e++,n++;return e}getLastItem(){return this._items.length?this.getItemByIndex(this._items.length-1):null}unlockAllItems(){const e=[...this._items];let n=0;for(;n<e.length;){const r=e[n];if(r.locked){const a=r.clone();a.locked=!1,e[n]=a}n++}this._items=e}lockItemIds(e){const n=[...this._items];let r=0,a=!1;for(;r<n.length;){const s=n[r],c=e.indexOf(s.ref)>=0;if(s.locked!==c){a=!0;const u=s.clone();u.locked=c,n[r]=u}r++}return this._items=n,a}setName(){const e=this.getLastItem();if(!e){this._name="";return}let n="";switch(this._category){case Z.POSTER:n="poster_"+e.stuffData.getLegacyString()+"_name";break;case Z.TRAX_SONG:this._name="SONG_NAME";return;default:this.isWallItem?n="wallItem.name."+e.type:n="roomItem.name."+e.type}this._name=m(n)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;this.isWallItem?e=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):e=this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return e?e.isWallItem:!1}get isGroupable(){const e=this.getItemByIndex(0);return e?e.isGroupable:!1}get isSellable(){const e=this.getItemByIndex(0);return e?e.sellable:!1}get items(){return this._items}set items(e){this._items=e}}const $i=(o,e,n,r=NaN)=>new Yi(o,e,Y(),n,r),W_=(o,e,n)=>{const r=[];for(const s of o)s.type===e.type&&r.push(s);for(const s of r)if(s.getItemById(e.id))return s;const a=$i(e.type,e.category,e.stuffData,e.extra);return a.push(e),n?(a.hasUnseenItems=!0,o.unshift(a)):o.push(a),a},j_=(o,e,n)=>{let r=null;for(const a of o)if(a.type===e.type&&a.isWallItem===e.isWallItem&&a.isGroupable)if(e.category===Z.POSTER){if(a.stuffData.getLegacyString()===e.stuffData.getLegacyString()){r=a;break}}else if(e.category===Z.GUILD_FURNI){if(e.stuffData.compare(a.stuffData)){r=a;break}}else{r=a;break}if(r){if(r.push(e),n){r.hasUnseenItems=!0;const a=o.indexOf(r);a>=0&&o.splice(a,1),o.unshift(r)}return r}return r=$i(e.type,e.category,e.stuffData,e.extra),r.push(e),n?(r.hasUnseenItems=!0,o.unshift(r)):o.push(r),r},zl=(o,e,n)=>{e.isGroupable?j_(o,e,n):W_(o,e,n)},q_=(o,e,n,r)=>{if(e===1)return o;r[n]=o;for(const s of r)if(!s)return null;const a=new Map;for(const s of r){for(const[c,u]of s)a.set(c,u);s.clear()}return r=null,a},z_=o=>{const e=[];for(const n of o){let r=n.getTotalCount();n.category===Z.POST_IT&&(r=1);let a=0;for(;a<r;)e.push(n.getItemByIndex(a).id),a++}return e};let cd=!1,ud=-1;const Y_=()=>cd,no=o=>cd=o,Cs=()=>ud,da=o=>ud=o,qs=()=>{Cs()!==-1&&(Y().cancelRoomObjectPlacement(),da(-1),no(!1))},_i=(o,e=!1)=>{const n=o.petData;if(!n)return!1;const r=Qr().getSession(1);return!r||!r.isRoomOwner&&!r.allowPets?!1:(ee("inventory/hide"),Y().processRoomObjectPlacement(Us.INVENTORY,-n.id,Q.UNIT,ft.PET,n.figureData.figuredata)&&(da(n.id),no(!0)),!0)},_s=(o,e=!1)=>{if(!o||!o.getUnlockedCount())return!1;const n=o.getLastItem();if(!n)return!1;if(n.category===Z.FLOOR||n.category===Z.WALL_PAPER||n.category===Z.LANDSCAPE)return e||D(new Go(n.id)),!1;{ee("inventory/hide");let r=0,a=!1;n.isWallItem?r=Q.WALL:r=Q.FLOOR,n.category===Z.POSTER?a=Y().processRoomObjectPlacement(Us.INVENTORY,n.id,r,n.type,n.stuffData.getLegacyString()):a=Y().processRoomObjectPlacement(Us.INVENTORY,n.id,r,n.type,n.extra.toString(),n.stuffData),a&&(da(n.ref),no(!0))}return!0},bi=(o,e=!1)=>{const n=o.botData;if(!n)return!1;const r=Qr().getSession(1);return!r||!r.isRoomOwner?!1:(ee("inventory/hide"),Y().processRoomObjectPlacement(Us.INVENTORY,-n.id,Q.UNIT,ft.RENTABLE_BOT,n.figure)&&(da(n.id),no(!0)),!0)};class $e{}$e.FURNI=1;$e.RENTABLE=2;$e.PET=3;$e.BADGE=4;$e.BOT=5;$e.GAMES=6;const $_=o=>o.map(e=>e.petData.id),dd=(o,e,n=!0)=>{const r={petData:o};return n?e.unshift(r):e.push(r),r},md=(o,e)=>{let n=0;for(;n<e.length;){const r=e[n];if(r&&r.petData.id===o)return Cs()===r.petData.id&&(qs(),ee("inventory/open")),e.splice(n,1),r;n++}return null},K_=(o,e,n)=>{const r=$_(o),a=[],s=[];for(const c of e.keys())r.indexOf(c)===-1&&a.push(c);for(const c of r)!e.get(c)&&s.push(c);r.length;for(const c of s)md(c,o);for(const c of a){const u=e.get(c);u&&dd(u,o,n($e.PET,u.id))}return o},X_=(o,e,n,r)=>{if(e===1)return o;r[n]=o;for(const s of r)if(!s)return null;const a=new Map;for(const s of r){for(const[c,u]of s)a.set(c,u);s.clear()}return r=null,a};class rt{}rt.TRADING_STATE_READY=0;rt.TRADING_STATE_RUNNING=1;rt.TRADING_STATE_COUNTDOWN=2;rt.TRADING_STATE_CONFIRMING=3;rt.TRADING_STATE_CONFIRMED=4;rt.TRADING_STATE_COMPLETED=5;rt.TRADING_STATE_CANCELLED=6;class Yl{constructor(e=-1,n="",r=new Fs,a=0,s=0,c=!1,u=!1){this.userId=e,this.userName=n,this.userItems=r,this.itemCount=a,this.creditsCount=s,this.accepts=c,this.canTrade=u}}class St{}St.ALERT_SCAM=0;St.HOTEL_TRADING_DISABLED=1;St.YOU_NOT_ALLOWED=2;St.THEY_NOT_ALLOWED=4;St.ROOM_DISABLED=6;St.YOU_OPEN=7;St.THEY_OPEN=8;St.ERROR_WHILE_COMMIT=9;St.THEY_CANCELLED=10;const $l=o=>{var e;return((e=W().getWallItemData(o))==null?void 0:e.isExternalImage)||!1},Kl=o=>{const e=new Fs;if(o.length)for(const r of o){const a=r.spriteId,s=r.category;let c=r.furniType+a;(!r.isGroupable||$l(a))&&(c="itemid"+r.itemId),r.category===Z.POSTER?c=r.itemId+"poster"+r.stuffData.getLegacyString():r.category===Z.GUILD_FURNI&&(c="");let u=r.isGroupable&&!$l(r.spriteId)?e.getValue(c):null;u||(u=$i(a,s,r.stuffData),e.add(c,u)),u.push(new js(r))}return e},Q_=(o,e)=>{let n=o.toString();if(!(e instanceof Qs))return n;let r=1;for(;r<5;)n=n+(","+e.getValue(r)),r++;return n};class Vo{static getProductImageUrl(e,n,r){let a=null;switch(e){case ks.S:a=Y().getFurnitureFloorIconUrl(n);break;case ks.I:this.getProductCategory(ks.I,n)===1&&(a=Y().getFurnitureWallIconUrl(n,r));break}return a}static getProductCategory(e,n){if(e===ks.S)return 1;if(e===ks.I){if(n===3001)return Z.WALL_PAPER;if(n===3002)return Z.FLOOR;if(n===4057)return Z.LANDSCAPE}return 1}}class Xo{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,n){const r=new Array(n);let a=e.length;const s=new Array(a);for(;n--;){var c=this.getRandomNumber(a);r[n]=e[c in s?s[c]:c],s[c]=--a in s?s[a]:a}return r}}const wt=new Map;wt.set("r","red");wt.set("b","blue");wt.set("g","green");wt.set("y","yellow");wt.set("w","white");wt.set("o","orange");wt.set("c","cyan");wt.set("br","brown");wt.set("pr","purple");wt.set("pk","pink");wt.set("red","red");wt.set("blue","blue");wt.set("green","green");wt.set("yellow","yellow");wt.set("white","white");wt.set("orange","orange");wt.set("cyan","cyan");wt.set("brown","brown");wt.set("purple","purple");wt.set("pink","pink");const J_=o=>o.replace(/([\u00A0-\u9999<>&])(.|$)/g,(e,n,r)=>n!=="&"||r!=="#"?(/[\u00A0-\u9999<>&]/.test(r)&&(r="&#"+r.charCodeAt(0)+";"),"&#"+n.charCodeAt(0)+";"+r):e),Z_=o=>{let e="";if(o.toLowerCase().includes("onerror=")&&(o="Error al ejecutar"),o.toLowerCase().includes("onmouseover=")&&(o="Error al ejecutar"),o=J_(o),o=du.exports.shortnameToUnicode(o),o.includes("giphy.com/media")&&(o="<p style='background-image: url("+o+".gif);width: 70px;height: 70px;margin: 4px 10px 2px 10px;    background-size: cover;border-radius: 2px;'></p>"),o.includes("https://int.habbeh.net/audios/")&&(o.includes("https://int.habbeh.net/audios/errorpeso")?o="El audio es demasiado pesado":o="<audio style='height: 14px; position: relative; top: 2px;  width: 195px;' controls src='"+o+"'/>"),o.includes("/c_images/emojis/")&&(o="<span style='background-image: url("+o+");margin: 4px 3px 2px 3px;background-size: contain;border-radius: 2px;box-sizing: unset;width: 25px;height: 25px;image-rendering: pixelated;display: inline-block;bottom: 9px;margin-bottom: -15px;position: relative'></span>"),o.startsWith("@")&&o.indexOf("@",1)>-1){let n=null;for(;(n=/@[a-zA-Z]+@/g.exec(o))!==null;){const r=n[0].toString(),a=r.substr(1,r.length-2),s=o.replace(r,"");wt.has(a)?e='<span style="color: '+wt.get(a)+'">'+s+"</span>":e=s;break}}else e=o;return e},Ki=(o,e)=>window.localStorage.setItem(o,JSON.stringify(e));class mn{}mn.CAMERA_SHUTTER="camera_shutter";mn.CREDITS="credits";mn.DUCKETS="duckets";mn.MESSENGER_NEW_THREAD="messenger_new_thread";mn.MESSENGER_MESSAGE_RECEIVED="messenger_message_received";mn.MODTOOLS_NEW_TICKET="modtools_new_ticket";function eb(o){const e=o.parts;let n=0;for(const r of e)n=Math.max(n,r.colorLayerIndex);return n}function tb(o,e){return e=e.filter(n=>o.indexOf(n)===-1),[...o,...Xo.getRandomElements(e,Xo.getRandomNumber(e.length)+1)]}function nb(o,e,n=0,r=[]){if(!o)return null;const a=o.partSets.getValues().filter(s=>!s.isSelectable||s.gender!=="U"&&s.gender!==e||s.clubLevel>n||s.isSellable&&r.indexOf(s.id)===-1?null:s);return!a||!a.length?null:Xo.getRandomElement(a)}function rb(o,e,n=0){if(!o)return[];const r=o.colors.getValues().filter(a=>!a.isSelectable||a.clubLevel>n?null:a);return!r||!r.length?null:Xo.getRandomElements(r,eb(e))}function sb(o,e,n=0,r=[],a=[]){const s=vt().structure,c=new tg(""),u=tb(s.getMandatorySetTypeIds(e,n),ue.SET_TYPES);for(const d of a){const p=o.getPartSetId(d),g=o.getColorIds(d);c.updatePart(d,p,g)}for(const d of u){if(c.hasPartType(d))continue;const p=s.figureData.getSetType(d),g=nb(p,e,n,r);if(!g)continue;let h=[];g.isColorable&&(h=rb(s.figureData.getPalette(p.paletteID),g,n).map(f=>f.id)),c.updatePart(p.type,g.id,h)}return c.getFigureString()}class ob extends ua{init(){super.init(),this.addCategory(ue.HAIR),this.addCategory(ue.HAT),this.addCategory(ue.HEAD_ACCESSORIES),this.addCategory(ue.EYE_ACCESSORIES),this.addCategory(ue.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return pr.HEAD}}class ab extends ua{init(){super.init(),this.addCategory(ue.TROUSERS),this.addCategory(ue.SHOES),this.addCategory(ue.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return pr.LEGS}}class ib extends ua{init(){super.init(),this.addCategory(ue.SHIRT),this.addCategory(ue.CHEST_PRINTS),this.addCategory(ue.JACKET),this.addCategory(ue.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return pr.TORSO}}class zs{}zs.COLORMATRIX="colormatrix";zs.COMPOSITE="composite";class lb{constructor(e,n){this.texture=e,this.imageUrl=n}}class cb{constructor(e,n){this.effectName=e,this.thumbnailUrl=n}}class ub{constructor(e,n,r){this._productName=e,this._customImage=n,this._furnitureClassName=r}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}class Gt{}Gt.STATE_UNLOCKED=1;Gt.STATE_LOCKED_AVAILABLE=2;Gt.STATE_LOCKED_EXPIRED=3;Gt.STATE_LOCKED_FUTURE=4;class Pn{}Pn.TYPE_CHAT=1;Pn.TYPE_ROOM_INFO=2;Pn.TYPE_IM=3;const gd=()=>{const o=new Date;return`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`},Xl=(o=0)=>{const e=o?new Date(Date.now()-o*1e3):new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},pd=o=>{if(!o||!o.length)return null;const e=o.split("/"),n=e[0],r=e[1],a=parseInt(e[2]);return{username:n,figure:r,userId:a}};class qt{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}qt.RELATIONSHIP_NONE=0;qt.RELATIONSHIP_HEART=1;qt.RELATIONSHIP_SMILE=2;qt.RELATIONSHIP_BOBBA=3;class Yr{}Yr.GROUP_CHAT=0;Yr.PRIVATE_CHAT=1;class Wn{}Wn.HIDDEN=0;Wn.SHOW=1;Wn.UNREAD=2;class Ql{populate(e){return e?(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0):!1}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class db{constructor(e=0,n=0,r=0,a=[]){this.userFriendLimit=e,this.normalFriendLimit=n,this.extendedFriendLimit=r,this.categories=a}}class jn{constructor(e,n,r=0,a=null,s=0){this._type=s,this._senderId=e,this._message=n,this._secondsSinceSent=r,this._extraData=a,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}jn.CHAT=0;jn.ROOM_INVITE=1;jn.STATUS_NOTIFICATION=2;jn.SECURITY_NOTIFICATION=3;class mb{constructor(e,n=Yr.PRIVATE_CHAT){this._userId=e,this._chats=[],this._type=n}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}const hd=class{constructor(o){this._threadId=++hd.THREAD_ID,this._participant=o,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0}addMessage(o,e,n=0,r=null,a=0){const s=o<0&&r,c=s?pd(r).userId:o,u=this.getLastGroup(c);if(!u)return;s&&(u.type=Yr.GROUP_CHAT);const d=new jn(o,e,n,r,a);return u.addChat(d),this._lastUpdated=new Date,this._unreadCount++,d}getLastGroup(o){let e=this._groups[this._groups.length-1];return e&&e.userId===o||(e=new mb(o),this._groups.push(e)),e}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}};let Xi=hd;Xi.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED";Xi.THREAD_ID=0;function ma(o=0){ee(o===0?"friends-messenger/toggle":`friends-messenger/${o}`)}const gb=()=>Cu.RENDERER_VERSION,fd=()=>"2.1.1";function ro(o){D(new Bs(o,!0))}function Id(o){ee(`groups/manage/${o}`)}function Jl(o,e){ee(e?`group-members/${o}/${e}`:`group-members/${o}`)}const Si=class{constructor(o,e,n,r){this.type=o,this.key=e||0,this.color=n||0,this.position=r||4}get code(){return this.key===0&&this.type!==Si.BASE?null:Si.getCode(this.type,this.key,this.color,this.position)}static getCode(o,e,n,r){return o+(e<10?"0":"")+e+(n<10?"0":"")+n+r}};let Yt=Si;Yt.BASE="b";Yt.SYMBOL="s";class yt{}yt.NOT_MEMBER=0;yt.MEMBER=1;yt.REQUEST_PENDING=2;class ln{}ln.REGULAR=0;ln.EXCLUSIVE=1;ln.PRIVATE=2;const pb=o=>{D(o.favourite?new ng(o.groupId):new rg(o.groupId))},Qi=o=>D(new sg(o));class he{}he.NONE="NONE";he.ERROR="ERROR";he.REJECTED="REJECTED";he.USER_CREATE="USER_CREATE";he.USER_PENDING="USER_PENDING";he.USER_ONGOING="USER_ONGOING";he.USER_FEEDBACK="USER_FEEDBACK";he.USER_NO_HELPERS="USER_NO_HELPERS";he.USER_SOMETHING_WRONG="USER_SOMETHING_WRONG";he.USER_THANKS="USER_THANKS";he.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED";he.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU";he.GUIDE_ACCEPT="GUIDE_ACCEPT";he.GUIDE_ONGOING="GUIDE_ONGOING";he.GUIDE_CLOSED="GUIDE_CLOSED";he.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT";he.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS";he.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE";he.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS";he.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";class Zl{constructor(e,n){this._message=e,this._roomId=n}get message(){return this._message}get roomId(){return this._roomId}}class ec{constructor(e){this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}class Vn{}Vn.ACTIVE="active";Vn.NONE="none";Vn.EXPIRED="expired";const hb="HC1",fb=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"],Ib=o=>{let e=null;return fb.forEach(n=>o.indexOf(n)>-1&&(e=n)),e||hb};class Qo{}Qo.TOO_MANY_PENDING_CALLS_CODE=1;Qo.HAS_ABUSIVE_CALL_CODE=2;const Eb=o=>o===1?"useless":o===2?"abusive":"resolved";class At{}At.SELECT_USER=0;At.SELECT_CHATS=1;At.SELECT_TOPICS=2;At.INPUT_REPORT_MESSAGE=3;At.REPORT_SUMMARY=4;class qe{}qe.EMERGENCY=1;qe.GUIDE=2;qe.IM=3;qe.ROOM=4;qe.BULLY=6;qe.THREAD=7;qe.MESSAGE=8;qe.PHOTO=9;const Cb=o=>{switch(o){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador"}return"Unknown"};class Fe{constructor(e,n,r,a,s){this._actionId=e,this._name=n,this._actionType=r,this._sanctionTypeId=a,this._actionLengthHours=s}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}}Fe.ALERT=1;Fe.MUTE=2;Fe.BAN=3;Fe.KICK=4;Fe.TRADE_LOCK=5;Fe.MESSAGE=6;class Le{}Le.NONE=0;Le.START_DOORBELL=1;Le.START_PASSWORD=2;Le.STATE_PENDING_SERVER=3;Le.UPDATE_STATE=4;Le.STATE_WAITING=5;Le.STATE_NO_ANSWER=6;Le.STATE_WRONG_PASSWORD=7;Le.STATE_ACCEPTED=8;class mr{}mr.LIST=0;mr.THUMBNAILS=1;mr.FORCED_THUMBNAILS=2;const _b=()=>{const o=[];for(let e=10;e<=100;e=e+10)o.push(e);return o},tc=_b(),rs=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function Xt(o){D(new qo(o,!1,!0))}class ge{}ge.DEFAULT="default";ge.MOTD="motd";ge.MODERATION="moderation";ge.EVENT="event";ge.NITRO="nitro";ge.SEARCH="search";ge.ALERT="alert";const Ni=class{constructor(o,e=ge.DEFAULT,n=null,r=null,a=null,s=null){Ni.ITEM_ID+=1,this._id=Ni.ITEM_ID,this._messages=o,this._alertType=e,this._clickUrl=n,this._clickUrlText=r,this._title=a,this._imageUrl=s}get id(){return this._id}get messages(){return this._messages}set alertType(o){this._alertType=o}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}};let Ti=Ni;Ti.ITEM_ID=-1;class Qe{}Qe.FRIENDOFFLINE="friendoffline";Qe.FRIENDONLINE="friendonline";Qe.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline";Qe.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline";Qe.ACHIEVEMENT="achievement";Qe.BADGE_RECEIVED="badge_received";Qe.INFO="info";Qe.RECYCLEROK="recyclerok";Qe.RESPECT="respect";Qe.CLUB="club";Qe.SOUNDMACHINE="soundmachine";Qe.PETLEVEL="petlevel";Qe.CLUBGIFT="clubgift";Qe.BUYFURNI="buyfurni";Qe.VIP="vip";Qe.ROOMMESSAGESPOSTED="roommessagesposted";const vi=class{constructor(o,e=Qe.INFO,n=null,r=null){vi.ITEM_ID+=1,this._id=vi.ITEM_ID,this._message=o,this._notificationType=e,this._iconUrl=n,this._linkUrl=r}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}};let Ed=vi;Ed.ITEM_ID=-1;const wi=class{constructor(o,e,n,r,a,s,c){wi.ITEM_ID+=1,this._id=wi.ITEM_ID,this._confirmType=o,this._message=e,this._onConfirm=n,this._onCancel=r,this._confirmText=a,this._cancelText=s,this._title=c}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}};let Cd=wi;Cd.ITEM_ID=-1;class Ji{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const n=new Ji;return n._credits=e._credits,n._activityPoints=e._activityPoints,n._clubDays=e._clubDays,n._clubPeriods=e._clubPeriods,n._isVIP=e._isVIP,n._pastClubDays=e._pastClubDays,n._pastVipDays=e._pastVipDays,n._isExpiring=e._isExpiring,n._minutesUntilExpiration=e._minutesUntilExpiration,n._minutesSinceLastModified=e._minutesSinceLastModified,n._lastUpdated=e._lastUpdated,n}get credits(){return this._credits}set credits(e){this._lastUpdated=yn(),this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=yn(),this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=yn(),this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=yn(),this._clubPeriods=e}get hasClubLeft(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=yn(),this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=yn(),this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(yn()-this._lastUpdated)/6e4,n=this._minutesUntilExpiration-e;return n>0?n:0}set minutesUntilExpiration(e){this._lastUpdated=yn(),this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=yn(),this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return this.clubDays===0&&this.clubPeriods===0?dn.NO_CLUB:this.isVip?dn.VIP:dn.CLUB}}class so extends Dn{}class gr extends so{constructor(e,n){super(e),this._id=-1,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=n}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}}gr.OFFER="RWPUW_OFFER";gr.ERROR="RWPUW_ERROR";gr.CONTENT="RWPUW_CONTENT";class Tr extends so{constructor(e,n=0,r=0,a=0){super(e),this._hue=n,this._saturation=r,this._lightness=a}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}Tr.PREVIEW="RWUBCPE_PREVIEW";Tr.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";const _d=class extends so{constructor(o,e){super(_d.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=o,this._userName=e}get chatMode(){return this._chatMode}get userName(){return this._userName}};let wr=_d;wr.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT";wr.WHISPER="whisper";wr.SHOUT="shout";const bd=class extends so{constructor(o,e,n,r,a,s,c){super(bd.UPDATE_CHAT),this._objectId=o,this._category=e,this._botId=n,this._chat=r,this._automaticChat=a,this._chatDelay=s,this._mixSentences=c}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}};let Zi=bd;Zi.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";class Oe extends so{constructor(e,n,r,a){super(e),this._id=n,this._category=r,this._roomId=a}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}Oe.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED";Oe.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED";Oe.USER_REMOVED="RWUROE_USER_REMOVED";Oe.FURNI_REMOVED="RWUROE_FURNI_REMOVED";Oe.FURNI_ADDED="RWUROE_FURNI_ADDED";Oe.USER_ADDED="RWUROE_USER_ADDED";Oe.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER";Oe.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT";Oe.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION";Oe.OBJECT_DOUBLE_CLICKED="RWUROE_OBJECT_DOUBLE_CLICKED";class bs{constructor(e){this.type=e,this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}}bs.FURNI="IFI_FURNI";class Sd{constructor(e,n,r,a,s,c=!1){this.roomIndex=e,this.category=n,this.id=r,this.name=a,this.userType=s,this.isFriend=c}}class Ss{constructor(e){this.type=e,this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}}Ss.PET_INFO="IPI_PET_INFO";class Ns{constructor(e){this.type=e,this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}}Ns.RENTABLE_BOT="IRBI_RENTABLE_BOT";const Nd=class{constructor(o){this.type=o,this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===Nd.OWN_USER}};let nt=Nd;nt.OWN_USER="IUI_OWN_USER";nt.PEER="IUI_PEER";nt.BOT="IUI_BOT";nt.TRADE_REASON_OK=0;nt.TRADE_REASON_SHUTDOWN=2;nt.TRADE_REASON_NO_TRADING=3;nt.DEFAULT_BOT_BADGE_ID="BOT";class ss{static getObjectName(e,n){const r=Ae();let a=-1,s=null,c=0;switch(n){case Q.FLOOR:case Q.WALL:{const u=Y().getRoomObject(r.roomId,e,n);if(!u)break;if(u.type.indexOf("poster")===0)s=m("${poster_"+parseInt(u.type.replace("poster",""))+"_name}");else{let d=null;const p=u.model.getValue(re.FURNITURE_TYPE_ID);if(n===Q.FLOOR?d=W().getFloorItemData(p):n===Q.WALL&&(d=W().getWallItemData(p)),!d)break;a=d.id,s=d.name}break}case Q.UNIT:{const u=r.userDataManager.getUserDataByIndex(e);if(!u)break;a=u.webID,s=u.name,c=u.type;break}}return!s||!s.length?null:new Sd(e,n,a,s,c)}static getFurniInfo(e,n){const r=Ae(),a=new bs(bs.FURNI);a.id=e,a.category=n;const s=Y().getRoomObject(r.roomId,e,n);if(!s)return;const c=s.model;c.getValue(ur.INFOSTAND_EXTRA_PARAM)&&(a.extraParam=c.getValue(ur.INFOSTAND_EXTRA_PARAM));const u=c.getValue(re.FURNITURE_DATA_FORMAT),d=_u.getData(u);d.initializeFromRoomObjectModel(c),a.stuffData=d;const p=s.type;if(p.indexOf("poster")===0){const I=parseInt(p.replace("poster",""));a.name=m("${poster_"+I+"_name}"),a.description=m("${poster_"+I+"_desc}")}else{const I=c.getValue(re.FURNITURE_TYPE_ID);let _=null;n===Q.FLOOR?_=W().getFloorItemData(I):n===Q.WALL&&(_=W().getWallItemData(I)),_&&(a.name=_.name,a.description=_.description,a.purchaseOfferId=_.purchaseOfferId,a.purchaseCouldBeUsedForBuyout=_.purchaseCouldBeUsedForBuyout,a.rentOfferId=_.rentOfferId,a.rentCouldBeUsedForBuyout=_.rentCouldBeUsedForBuyout,a.availableForBuildersClub=_.availableForBuildersClub,a.tileSizeX=_.tileSizeX,a.tileSizeY=_.tileSizeY)}p.indexOf("post_it")>-1&&(a.isStickie=!0);const g=c.getValue(re.FURNITURE_EXPIRY_TIME),h=c.getValue(re.FURNITURE_EXPIRTY_TIMESTAMP);a.expiration=g<0?g:Math.max(0,g-(yn()-h)/1e3);let f=Y().getRoomObjectImage(r.roomId,e,n,new xt(180),64,null);(!f.data||f.data.width>140||f.data.height>200)&&(f=Y().getRoomObjectImage(r.roomId,e,n,new xt(180),1,null)),a.image=f.getImage(),a.isWallItem=n===Q.WALL,a.isRoomOwner=r.isRoomOwner,a.roomControllerLevel=r.controllerLevel,a.isAnyRoomController=W().isModerator,a.ownerId=c.getValue(re.FURNITURE_OWNER_ID),a.ownerName=c.getValue(re.FURNITURE_OWNER_NAME),a.usagePolicy=c.getValue(re.FURNITURE_USAGE_POLICY);const E=c.getValue(re.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);return E!==0&&(a.groupId=E),jt(s)&&(a.isOwner=!0),a}static getUserInfo(e,n){const r=Ae();let a=nt.OWN_USER;n.webID!==W().userId&&(a=nt.PEER);const s=new nt(a);s.isSpectatorMode=r.isSpectator,s.name=n.name,s.motto=n.custom,s.achievementScore=n.activityPoints,s.webID=n.webID,s.roomIndex=n.roomIndex,s.userType=ft.USER;const c=Y().getRoomObject(r.roomId,n.roomIndex,e);if(c&&(s.carryItem=c.model.getValue(re.FIGURE_CARRY_OBJECT)||0),a===nt.OWN_USER&&(s.allowNameChange=W().canChangeName),s.amIOwner=r.isRoomOwner,s.isGuildRoom=r.isGuildRoom,s.roomControllerLevel=r.controllerLevel,s.amIAnyRoomController=W().isModerator,s.isAmbassador=W().isAmbassador,a===nt.PEER){if(c){const p=c.model.getValue(re.FIGURE_FLAT_CONTROL);p!==null&&(s.targetRoomControllerLevel=p),s.canBeMuted=this.canBeMuted(s),s.canBeKicked=this.canBeKicked(s),s.canBeBanned=this.canBeBanned(s)}s.isIgnored=W().isUserIgnored(n.name),s.respectLeft=W().respectsLeft;const u=W().isSystemShutdown,d=r.tradeMode;if(u)s.canTrade=!1;else switch(d){case Ra.ROOM_CONTROLLER_REQUIRED:{const p=s.roomControllerLevel!==tt.NONE&&s.roomControllerLevel!==tt.GUILD_MEMBER,g=s.targetRoomControllerLevel!==tt.NONE&&s.targetRoomControllerLevel!==tt.GUILD_MEMBER;s.canTrade=p||g;break}case Ra.NO_TRADING:s.canTrade=!0;break;default:s.canTrade=!1;break}s.canTradeReason=nt.TRADE_REASON_OK,u&&(s.canTradeReason=nt.TRADE_REASON_SHUTDOWN),d!==Ra.FREE_TRADING&&(s.canTradeReason=nt.TRADE_REASON_NO_TRADING)}return s.groupId=n.groupId,s.groupBadgeId=W().getGroupBadge(s.groupId),s.groupName=n.groupName,s.badges=r.userDataManager.getUserBadges(n.webID),s.figure=n.figure,s}static getBotInfo(e,n){const r=Ae(),a=new nt(nt.BOT);a.name=n.name,a.motto=n.custom,a.webID=n.webID,a.roomIndex=n.roomIndex,a.userType=n.type;const s=Y().getRoomObject(r.roomId,n.roomIndex,e);return s&&(a.carryItem=s.model.getValue(re.FIGURE_CARRY_OBJECT)||0),a.amIOwner=r.isRoomOwner,a.isGuildRoom=r.isGuildRoom,a.roomControllerLevel=r.controllerLevel,a.amIAnyRoomController=W().isModerator,a.isAmbassador=W().isAmbassador,a.badges=[nt.DEFAULT_BOT_BADGE_ID],a.figure=n.figure,a}static getRentableBotInfo(e,n){const r=Ae(),a=new Ns(Ns.RENTABLE_BOT);a.name=n.name,a.motto=n.custom,a.webID=n.webID,a.roomIndex=n.roomIndex,a.ownerId=n.ownerId,a.ownerName=n.ownerName,a.botSkills=n.botSkills;const s=Y().getRoomObject(r.roomId,n.roomIndex,e);return s&&(a.carryItem=s.model.getValue(re.FIGURE_CARRY_OBJECT)||0),a.amIOwner=r.isRoomOwner,a.roomControllerLevel=r.controllerLevel,a.amIAnyRoomController=W().isModerator,a.badges=[nt.DEFAULT_BOT_BADGE_ID],a.figure=n.figure,a}static getPetInfo(e){const n=Ae(),r=n.userDataManager.getPetData(e.id);if(!r)return;const a=new Is(r.figure);let s=null;a.typeId===Bt.MONSTERPLANT&&(e.level>=e.adultLevel?s="std":s="grw"+e.level);const c=e.ownerId===W().userId,u=new Ss(Ss.PET_INFO);return u.name=r.name,u.id=e.id,u.ownerId=e.ownerId,u.ownerName=e.ownerName,u.rarityLevel=e.rarityLevel,u.petType=a.typeId,u.petBreed=a.paletteId,u.petFigure=r.figure,u.posture=s,u.isOwner=c,u.roomIndex=r.roomIndex,u.level=e.level,u.maximumLevel=e.maximumLevel,u.experience=e.experience,u.levelExperienceGoal=e.levelExperienceGoal,u.energy=e.energy,u.maximumEnergy=e.maximumEnergy,u.happyness=e.happyness,u.maximumHappyness=e.maximumHappyness,u.respect=e.respect,u.respectsPetLeft=W().respectsPetLeft,u.age=e.age,u.saddle=e.saddle,u.rider=e.rider,u.breedable=e.breedable,u.fullyGrown=e.fullyGrown,u.dead=e.dead,u.rarityLevel=e.rarityLevel,u.skillTresholds=e.skillTresholds,u.canRemovePet=!1,u.publiclyRideable=e.publiclyRideable,u.maximumTimeToLive=e.maximumTimeToLive,u.remainingTimeToLive=e.remainingTimeToLive,u.remainingGrowTime=e.remainingGrowTime,u.publiclyBreedable=e.publiclyBreedable,(c||n.isRoomOwner||W().isModerator||n.controllerLevel>=tt.GUEST)&&(u.canRemovePet=!0),u}static checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=tt.GUILD_ADMIN:e.roomControllerLevel>=tt.GUEST}static isValidSetting(e,n){const r=Ae();if(!r.isPrivateRoom)return!1;const a=r.moderationSettings;let s=!1;return a&&(s=n(e,a)),s&&e.targetRoomControllerLevel<tt.ROOM_OWNER}static canBeMuted(e){const n=(r,a)=>{switch(a.allowMute){case Un.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(r);default:return r.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,n)}static canBeKicked(e){const n=(r,a)=>{switch(a.allowKick){case Un.MODERATION_LEVEL_ALL:return!0;case Un.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(r);default:return r.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,n)}static canBeBanned(e){const n=(r,a)=>{switch(a.allowBan){case Un.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(r);default:return r.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,n)}}class ve{}ve.GENERIC_SKILL=0;ve.DRESS_UP=1;ve.SETUP_CHAT=2;ve.RANDOM_WALK=3;ve.DANCE=4;ve.CHANGE_BOT_NAME=5;ve.SERVE_BEVERAGE=6;ve.INCLIENT_LINK=7;ve.NUX_PROCEED=8;ve.CHANGE_BOT_MOTTO=9;ve.NUX_TAKE_TOUR=10;ve.NO_PICK_UP=12;ve.NAVIGATOR_SEARCH=14;ve.DONATE_TO_USER=24;ve.DONATE_TO_ALL=25;const Td=class{constructor(o=-1,e=-1,n=-1,r="",a="",s="",c=null,u=0,d=0,p=null,g=null){this.senderId=o,this.senderCategory=e,this.roomId=n,this.text=r,this.formattedText=a,this.username=s,this.location=c,this.type=u,this.styleId=d,this.imageUrl=p,this.color=g,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.skipMovement=!1,this._top=0,this._left=0,this.id=++Td.BUBBLE_COUNTER}get top(){return this._top}set top(o){this._top=o,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(o){this._left=o,this.elementRef&&(this.elementRef.style.left=this._left+"px")}};let vd=Td;vd.BUBBLE_COUNTER=0;class On{}On.CHAT_DEFAULT=0;On.CHAT_WHISPER=1;On.CHAT_SHOUT=2;class nc{constructor(e=0,n=0,r=0,a=0){this.id=e,this.type=n,this.color=r,this.light=a}}const bb=(o,e,n,r=0)=>!(o.left+r+o.width<e.left+r||o.left+r>e.left+r+e.width||o.top+o.height<e.top+n||o.top>e.top+n+e.height);class on{static savePreset(e,n,r,a,s){Ae().updateMoodlightData(e,n,r,a,s)}static changeState(){Ae().toggleMoodlightState()}static previewDimmer(e,n,r){Y().updateObjectRoomColor(Ae().roomId,e,n,r)}static scaleBrightness(e){return~~((e-this.MIN_BRIGHTNESS)*(100-0)/(this.MAX_BRIGHTNESS-this.MIN_BRIGHTNESS)+0)}}on.AVAILABLE_COLORS=[7665141,21495,15161822,15353138,15923281,8581961,0];on.HTML_COLORS=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"];on.MIN_BRIGHTNESS=76;on.MAX_BRIGHTNESS=255;const Sb=130,Nb=100,Tb=130,vb=100,wb=130,yb=100,wd=o=>{let e=0,n=0,r=0,a=0;for(;a<o.length;){switch(a%3){case 0:e=e+o.charCodeAt(a)*37;break;case 1:n=n+o.charCodeAt(a)*37;break;case 2:r=r+o.charCodeAt(a)*37;break}a++}return e=e%Nb+Sb,n=n%vb+Tb,r=r%yb+wb,`rgb(${e},${n},${r})`};class ps{static getMergedMannequinFigureContainer(e,n){const r=vt().createFigureContainer(e),a=vt().createFigureContainer(n);for(const s of this.MANNEQUIN_CLOTHING_PART_TYPES)r.removePart(s);for(const s of a.getPartTypeIds())r.updatePart(s,a.getPartSetId(s),a.getPartColorIds(s));return r}static transformAsMannequinFigure(e){for(const n of e.getPartTypeIds())this.MANNEQUIN_CLOTHING_PART_TYPES.indexOf(n)>=0||e.removePart(n);e.updatePart(this.MANNEQUIN_FIGURE[0],this.MANNEQUIN_FIGURE[1],this.MANNEQUIN_FIGURE[2])}}ps.MANNEQUIN_FIGURE=["hd",99999,[99998]];ps.MANNEQUIN_CLOTHING_PART_TYPES=[ze.CHEST_ACCESSORY,ze.COAT_CHEST,ze.CHEST,ze.LEGS,ze.SHOES,ze.WAIST_ACCESSORY];class Jo{}Jo.POSTURE_STAND=0;Jo.POSTURE_SIT=1;class ds{constructor(e,n,r){this._id=e,this._category=n,this._name=r}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class xb{constructor(e,n,r,a,s,c,u){this.id=e,this.category=n,this.name=r,this.requestRoomObjectId=a,this.targetRoomObjectId=s,this.requestInventoryStripId=c,this.replace=u}}const Zo="0",yd="1";class kn{}kn.UNSTARTED=-1;kn.ENDED=0;kn.PLAYING=1;kn.PAUSED=2;kn.BUFFERING=3;kn.CUED=5;function tn(o){D(new og(o))}const oo=o=>{const e=Math.floor(o/2);return o%2?(e+.5).toString():e.toString()};class fe{}fe.TOGGLE_FURNI_STATE=0;fe.RESET=1;fe.SET_FURNI_STATE=3;fe.MOVE_FURNI=4;fe.GIVE_SCORE=6;fe.CHAT=7;fe.TELEPORT=8;fe.JOIN_TEAM=9;fe.LEAVE_TEAM=10;fe.CHASE=11;fe.FLEE=12;fe.MOVE_AND_ROTATE_FURNI=13;fe.GIVE_SCORE_TO_PREDEFINED_TEAM=14;fe.TOGGLE_TO_RANDOM_STATE=15;fe.MOVE_FURNI_TO=16;fe.GIVE_REWARD=17;fe.CALL_ANOTHER_STACK=18;fe.KICK_FROM_ROOM=19;fe.MUTE_USER=20;fe.BOT_TELEPORT=21;fe.BOT_MOVE=22;fe.BOT_TALK=23;fe.BOT_GIVE_HAND_ITEM=24;fe.BOT_FOLLOW_AVATAR=25;fe.BOT_CHANGE_FIGURE=26;fe.BOT_TALK_DIRECT_TO_AVTR=27;class Ie{}Ie.STATES_MATCH=0;Ie.FURNIS_HAVE_AVATARS=1;Ie.ACTOR_IS_ON_FURNI=2;Ie.TIME_ELAPSED_MORE=3;Ie.TIME_ELAPSED_LESS=4;Ie.USER_COUNT_IN=5;Ie.ACTOR_IS_IN_TEAM=6;Ie.HAS_STACKED_FURNIS=7;Ie.STUFF_TYPE_MATCHES=8;Ie.STUFFS_IN_FORMATION=9;Ie.ACTOR_IS_GROUP_MEMBER=10;Ie.ACTOR_IS_WEARING_BADGE=11;Ie.ACTOR_IS_WEARING_EFFECT=12;Ie.NOT_STATES_MATCH=13;Ie.FURNI_NOT_HAVE_HABBO=14;Ie.NOT_ACTOR_ON_FURNI=15;Ie.NOT_USER_COUNT_IN=16;Ie.NOT_ACTOR_IN_TEAM=17;Ie.NOT_HAS_STACKED_FURNIS=18;Ie.NOT_FURNI_IS_OF_TYPE=19;Ie.NOT_STUFFS_IN_FORMATION=20;Ie.NOT_ACTOR_IN_GROUP=21;Ie.NOT_ACTOR_WEARS_BADGE=22;Ie.NOT_ACTOR_WEARING_EFFECT=23;Ie.DATE_RANGE_ACTIVE=24;Ie.ACTOR_HAS_HANDITEM=25;const rc=o=>`${o.getFullYear()}/${("0"+(o.getMonth()+1)).slice(-2)}/${("0"+o.getDate()).slice(-2)} ${("0"+o.getHours()).slice(-2)}:${("0"+o.getMinutes()).slice(-2)}`;class ce{}ce.STUFF_SELECTION_OPTION_NONE=0;ce.STUFF_SELECTION_OPTION_BY_ID=1;ce.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2;ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;const Rb=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
uniform mat3 projectionMatrix;
varying vec2 vTextureCoord;
void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ob=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 lineColor;
uniform vec3 color;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorLine = lineColor * currentColor.a;
    vec3 colorOverlay = color * currentColor.a;

    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {
        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);
    } else if(currentColor.a > 0.0) {
        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);
    }
}`;class kb extends ag{constructor(e,n){super(Rb,Ob),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=n}get lineColor(){return this._lineColor}set lineColor(e){const n=this.uniforms.lineColor;typeof e=="number"?(cn.hex2rgb(e,n),this._lineColor=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this._lineColor=cn.rgb2hex(n))}get color(){return this._color}set color(e){const n=this.uniforms.color;typeof e=="number"?(cn.hex2rgb(e,n),this._color=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this._color=cn.rgb2hex(n))}}const Jn=class{static show(o){Jn.applySelectionShader(Jn.getRoomObject(o))}static hide(o){Jn.clearSelectionShader(Jn.getRoomObject(o))}static clearSelectionShaderFromFurni(o){for(const e of o)Jn.clearSelectionShader(Jn.getRoomObject(e))}static applySelectionShaderToFurni(o){for(const e of o)Jn.applySelectionShader(Jn.getRoomObject(e))}static getRoomObject(o){const e=Y();return e.getRoomObject(e.activeRoomId,o,Q.FLOOR)}static applySelectionShader(o){if(!o)return;const e=o.visualization;if(e)for(const n of e.sprites)n.blendMode!==1&&(n.filters=[Jn._selectionShader])}static clearSelectionShader(o){if(!o)return;const e=o.visualization;if(e)for(const n of e.sprites)n.filters=[]}};let hs=Jn;hs._selectionShader=new kb([1,1,1],[.6,.6,.6]);const Ts="	";class et{}et.AVATAR_SAYS_SOMETHING=0;et.AVATAR_WALKS_ON_FURNI=1;et.AVATAR_WALKS_OFF_FURNI=2;et.EXECUTE_ONCE=3;et.TOGGLE_FURNI=4;et.EXECUTE_PERIODICALLY=6;et.AVATAR_ENTERS_ROOM=7;et.GAME_STARTS=8;et.GAME_ENDS=9;et.SCORE_ACHIEVED=10;et.COLLISION=11;et.EXECUTE_PERIODICALLY_LONG=12;et.BOT_REACHED_STUFF=13;et.BOT_REACHED_AVATAR=14;const L=o=>{const{ref:e=null,innerRef:n=null,display:r=null,fit:a=!1,fitV:s=!1,grow:c=!1,shrink:u=!1,fullWidth:d=!1,fullHeight:p=!1,overflow:g=null,position:h=null,float:f=null,pointer:E=!1,visible:I=null,textColor:_=null,classNames:C=[],className:b="",style:N={},children:w=null,...O}=o,y=i.exports.useMemo(()=>{const P=[];return r&&r.length&&P.push("d-"+r),(a||d)&&P.push("w-100"),(a||p)&&P.push("h-100"),s&&P.push("vw-100","vh-100"),c&&P.push("flex-grow-1"),u&&P.push("flex-shrink-0"),g&&P.push("overflow-"+g),h&&P.push("position-"+h),f&&P.push("float-"+f),E&&P.push("cursor-pointer"),I!==null&&P.push(I?"visible":"invisible"),_&&P.push("text-"+_),C.length&&P.push(...C),P},[r,a,s,c,u,d,p,g,h,f,E,I,_,C]),x=i.exports.useMemo(()=>{let P=y.join(" ");return b.length&&(P+=" "+b),P.trim()},[y,b]),F=i.exports.useMemo(()=>{let P={};return Object.keys(N).length&&(P={...P,...N}),P},[N]);return t("div",{ref:n,className:x,style:F,...O,children:w})},xd=i.exports.createContext({isCssGrid:!1}),Ab=o=>t(xd.Provider,{value:o.value,children:o.children}),Pb=()=>i.exports.useContext(xd),te=o=>{const{inline:e=!1,gap:n=2,maxContent:r=!1,columnCount:a=0,center:s=!1,alignSelf:c=null,alignItems:u=null,justifyContent:d=null,fullHeight:p=!0,classNames:g=[],style:h={},...f}=o,E=i.exports.useMemo(()=>{const _=[];return e?_.push("inline-grid"):_.push("grid"),n?_.push("gap-"+n):n===0&&_.push("gap-0"),r&&_.push("flex-basis-max-content"),c&&_.push("align-self-"+c),u&&_.push("align-items-"+u),d&&_.push("justify-content-"+d),!u&&!d&&s&&_.push("align-items-center","justify-content-center"),g.length&&_.push(...g),_},[e,n,r,c,u,d,s,g]),I=i.exports.useMemo(()=>{let _={};return a&&(_["--bs-columns"]=a.toString()),Object.keys(h).length&&(_={..._,...h}),_},[a,h]);return t(Ab,{value:{isCssGrid:!0},children:t(L,{fullHeight:p,classNames:E,style:I,...f})})},Ge=o=>{const{columnMinWidth:e=40,columnMinHeight:n=40,columnCount:r=0,fullHeight:a=!1,maxContent:s=!0,overflow:c="auto",style:u={},...d}=o,p=i.exports.useMemo(()=>{let g={};return g["--nitro-grid-column-min-height"]=n+"px",r>1&&(g.gridTemplateColumns=`repeat(auto-fill, minmax(${e}px, 1fr))`),Object.keys(u).length&&(g={...g,...u}),g},[e,n,r,u]);return t(te,{columnCount:r,fullHeight:a,overflow:c,style:p,...d})},v=o=>{const{display:e="flex",column:n=void 0,reverse:r=!1,gap:a=null,center:s=!1,alignSelf:c=null,alignItems:u=null,justifyContent:d=null,classNames:p=[],...g}=o,h=i.exports.useMemo(()=>{const f=[];return n?r?f.push("flex-column-reverse"):f.push("flex-column"):r&&f.push("flex-row-reverse"),a&&f.push("gap-"+a),c&&f.push("align-self-"+c),u&&f.push("align-items-"+u),d&&f.push("justify-content-"+d),!u&&!d&&s&&f.push("align-items-center","justify-content-center"),p.length&&f.push(...p),f},[n,r,a,s,c,u,d,p]);return t(L,{display:e,classNames:h,...g})},M=o=>{const{variant:e="primary",size:n="sm",active:r=!1,disabled:a=!1,classNames:s=[],...c}=o,u=i.exports.useMemo(()=>{const d=["btn"];return e&&d.push("btn-"+e),n&&d.push("btn-"+n),r&&d.push("active"),a&&d.push("disabled"),s.length&&d.push(...s),d},[e,n,r,a,s]);return t(v,{center:!0,classNames:u,...c})},tr=o=>{const{classNames:e=[],...n}=o,r=i.exports.useMemo(()=>{const a=["btn-group"];return e.length&&a.push(...e),a},[e]);return t(L,{classNames:r,...n})},Rd=i.exports.createContext({closers:null,setClosers:null,closeAll:null}),Db=o=>t(Rd.Provider,{...o}),Lb=()=>i.exports.useContext(Rd),ea=o=>{const{alignItems:e="center",gap:n=1,children:r=null,...a}=o;return t(v,{alignItems:e,gap:n,...a,children:r})},ta=o=>{const{headerText:e="",isExpanded:n=!1,gap:r=0,classNames:a=[],children:s=null,...c}=o,[u,d]=i.exports.useState(!1),{setClosers:p=null,closeAll:g=null}=Lb(),h=()=>{g(),d(I=>!I)},f=i.exports.useCallback(()=>d(!1),[]),E=i.exports.useMemo(()=>{const I=["nitro-card-accordion-set"];return u&&I.push("active"),a&&a.length&&I.push(...a),I},[u,a]);return i.exports.useEffect(()=>{d(n)},[n]),i.exports.useEffect(()=>{const I=f;return p(_=>{const C=[..._];return C.push(I),C}),()=>{p(_=>{const C=[..._],b=C.indexOf(I);return b>=0&&C.splice(b,1),C})}},[f,p]),l(T,{classNames:E,gap:r,...c,children:[l(v,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:h,children:[t(S,{children:e}),u&&t(ki,{className:"fa-icon"}),!u&&t(Ai,{className:"fa-icon"})]}),u&&t(T,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:s})]})},Mb=o=>{const{...e}=o,[n,r]=i.exports.useState([]),a=i.exports.useCallback(()=>{for(const s of n)s()},[n]);return t(Db,{value:{closers:n,setClosers:r,closeAll:a},children:t(T,{gap:0,...e})})},se=o=>{const{overflow:e="auto",classNames:n=[],...r}=o,a=i.exports.useMemo(()=>{const s=["container-fluid","content-area"];return n.length&&s.push(...n),s},[n]);return t(T,{classNames:a,overflow:e,...r})},Ub=i.exports.createContext({theme:null}),Fb=o=>t(Ub.Provider,{value:o.value,children:o.children}),oe=o=>{const{headerText:e=null,isGalleryPhoto:n=!1,noCloseButton:r=!1,onReportPhoto:a=null,onCloseClick:s=null,justifyContent:c="center",alignItems:u="center",classNames:d=[],children:p=null,...g}=o,h=i.exports.useMemo(()=>{const E=["drag-handler","container-fluid","nitro-card-header"];return d.length&&E.push(...d),E},[d]);return t(T,{center:!0,position:"relative",classNames:h,...g,children:l(v,{fullWidth:!0,center:!0,children:[t("span",{className:"nitro-card-header-text",children:e}),n&&t(L,{position:"absolute",className:"end-4 nitro-card-header-report-camera",onClick:a,children:t(vm,{className:"fa-icon"})}),t(v,{center:!0,position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:E=>{E.stopPropagation(),E.nativeEvent.stopImmediatePropagation()},onClick:s,children:t(_n,{className:"fa-icon w-12 h-12"})})]})})},Od=o=>{const{justifyContent:e="center",classNames:n=[],variant:r="muted",...a}=o,s=i.exports.useMemo(()=>{const c=["container-fluid","p-1"];return n.length&&c.push(...n),c.push("bg-"+r),c},[n,r]);return t(v,{justifyContent:e,classNames:s,...a})};class Pt{}Pt.CENTER="DWP_CENTER";Pt.TOP_CENTER="DWP_TOP_CENTER";Pt.TOP_LEFT="DWP_TOP_LEFT";Pt.NOTHING="DWP_NOTHING";const lr=[],sc=0,oc=0,Or=o=>{const{uniqueKey:e=null,handleSelector:n=".drag-handler",windowPosition:r=Pt.CENTER,disableDrag:a=!1,dragStyle:s={},children:c=null,offsetLeft:u=0,offsetTop:d=0}=o,[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(null),[E,I]=i.exports.useState({x:0,y:0}),[_,C]=i.exports.useState(!1),[b,N]=i.exports.useState(null),w=i.exports.useRef(),O=i.exports.useCallback(()=>{let j=400;for(const de of lr)j+=1,de.style.zIndex=j.toString()},[]),y=i.exports.useCallback(()=>{const j=lr.indexOf(w.current);if(j===-1)lr.push(w.current);else{if(j===lr.length-1)return;j>=0&&(lr.splice(j,1),lr.push(w.current))}O()},[O]),x=i.exports.useCallback(j=>{y()},[y]),F=i.exports.useCallback(j=>{y()},[y]),P=i.exports.useCallback((j,de)=>{I({x:j,y:de}),C(!0)},[]),k=i.exports.useCallback(j=>{P(j.clientX,j.clientY)},[P]),R=i.exports.useCallback(j=>{const de=j.touches[0];P(de.clientX,de.clientY)},[P]),A=i.exports.useCallback(j=>{g({x:j.clientX-E.x,y:j.clientY-E.y})},[E]),G=i.exports.useCallback(j=>{const de=j.touches[0];g({x:de.clientX-E.x,y:de.clientY-E.y})},[E]),B=i.exports.useCallback(()=>{if(!w.current||!b)return;let j=h.x+p.x,de=h.y+p.y;const ie=w.current.offsetLeft+j,ne=w.current.offsetTop+de;if(ne<sc?de=-w.current.offsetTop:ne+b.offsetHeight>=document.body.offsetHeight-sc&&(de=document.body.offsetHeight-w.current.offsetHeight-w.current.offsetTop),ie+w.current.offsetWidth<oc?j=-w.current.offsetLeft:ie>=document.body.offsetWidth-oc&&(j=document.body.offsetWidth-w.current.offsetWidth-w.current.offsetLeft),g({x:0,y:0}),f({x:j,y:de}),C(!1),e!==null){const xe={...$o(`nitro.windows.${e}`)};xe.offset={x:j,y:de},Ki(`nitro.windows.${e}`,xe)}},[b,p,h,e]),H=i.exports.useCallback(j=>{B()},[B]),X=i.exports.useCallback(j=>{B()},[B]);return i.exports.useEffect(()=>{const j=w.current;if(!j)return;if(lr.push(j),O(),!a){const ne=j.querySelector(n);ne&&N(ne)}let de=0,ie=0;switch(r){case Pt.TOP_CENTER:j.style.top=50+d+"px",j.style.left=`calc(50vw - ${j.offsetWidth/2+u}px)`;break;case Pt.CENTER:j.style.top=`calc(50vh - ${j.offsetHeight/2+d}px)`,j.style.left=`calc(50vw - ${j.offsetWidth/2+u}px)`;break;case Pt.TOP_LEFT:j.style.top=50+d+"px",j.style.left=50+u+"px";break}return g({x:0,y:0}),f({x:de,y:ie}),()=>{const ne=lr.indexOf(j);ne>=0&&lr.splice(ne,1)}},[n,r,e,a,u,d,O]),i.exports.useEffect(()=>{if(!h&&!p)return;const j=w.current;j&&(j.style.transform=`translate(${h.x+p.x}px, ${h.y+p.y}px)`,j.style.visibility="visible")},[h,p]),i.exports.useEffect(()=>{if(b)return b.addEventListener(ke.MOUSE_DOWN,k),b.addEventListener(fn.TOUCH_START,R),()=>{b.removeEventListener(ke.MOUSE_DOWN,k),b.removeEventListener(fn.TOUCH_START,R)}},[b,k,R]),i.exports.useEffect(()=>{if(_)return document.addEventListener(ke.MOUSE_UP,H),document.addEventListener(fn.TOUCH_END,X),document.addEventListener(ke.MOUSE_MOVE,A),document.addEventListener(fn.TOUCH_MOVE,G),()=>{document.removeEventListener(ke.MOUSE_UP,H),document.removeEventListener(fn.TOUCH_END,X),document.removeEventListener(ke.MOUSE_MOVE,A),document.removeEventListener(fn.TOUCH_MOVE,G)}},[_,H,A,X,G]),i.exports.useEffect(()=>{if(!e)return;const j=$o(`nitro.windows.${e}`);!j||!j.offset||(g({x:0,y:0}),j.offset&&f(j.offset))},[e]),Pi.exports.createPortal(t(L,{position:"absolute",innerRef:w,className:"draggable-window",onMouseDownCapture:x,onTouchStartCapture:F,style:s,children:c}),document.getElementById("draggable-windows-container"))},ae=o=>{const{theme:e="primary",uniqueKey:n=null,handleSelector:r=".drag-handler",windowPosition:a=Pt.CENTER,disableDrag:s=!1,overflow:c="hidden",position:u="relative",gap:d=0,classNames:p=[],...g}=o,h=i.exports.useRef(),f=i.exports.useMemo(()=>{const E=["nitro-card","rounded","shadow"];return E.push(`theme-${e||"primary"}`),p.length&&E.push(...p),E},[e,p]);return t(Fb,{value:{theme:e},children:t(Or,{uniqueKey:n,handleSelector:r,windowPosition:a,disableDrag:s,children:t(T,{innerRef:h,overflow:c,position:u,gap:d,classNames:f,...g})})})},ot=o=>{const{figure:e="",gender:n="M",headOnly:r=!1,direction:a=0,scale:s=1,classNames:c=[],style:u={},...d}=o,[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(-1),E=i.exports.useRef(!1),I=i.exports.useMemo(()=>{const C=["avatar-image"];return c.length&&C.push(...c),C},[c]),_=i.exports.useMemo(()=>{let C={};return p&&p.length&&(C.backgroundImage=`url('${p}')`),s!==1&&(C.transform=`scale(${s})`,s%1||(C.imageRendering="pixelated")),Object.keys(u).length&&(C={...C,...u}),C},[p,s,u]);return i.exports.useEffect(()=>{const C=vt().createAvatarImage(e,Fi.LARGE,n,{resetFigure:w=>{E.current||f(Math.random())},dispose:()=>{},disposed:!1},null);if(!C)return;let b=jo.FULL;r&&(b=jo.HEAD),C.setDirection(b,a);const N=C.getCroppedImage(b);N&&g(N.src),C.dispose()},[e,n,a,r,h]),i.exports.useEffect(()=>(E.current=!1,()=>{E.current=!0}),[]),t(L,{classNames:I,style:_,...d})},kd=o=>{const{imageUrl:e=null,fit:n=!0,style:r=null,...a}=o,s=i.exports.useMemo(()=>{const c={...r};return e&&(c.background=`url(${e}) center no-repeat`),c},[r,e]);return t(L,{fit:n,style:s,...a})},Ye=o=>{const{badgeCode:e=null,isGroup:n=!1,showInfo:r=!1,customTitle:a=null,isGrayscale:s=!1,scale:c=1,classNames:u=[],style:d={},children:p=null,...g}=o,[h,f]=i.exports.useState(null),E=i.exports.useMemo(()=>{const _=["badge-image"];return n&&_.push("group-badge"),s&&_.push("grayscale"),u.length&&_.push(...u),_},[u,n,s]),I=i.exports.useMemo(()=>{let _={};return h&&(_.backgroundImage=`url(${n?h.src:K("badge.asset.url").replace("%badgename%",e.toString())})`,_.width=h.width,_.height=h.height,c!==1&&(_.transform=`scale(${c})`,c%1||(_.imageRendering="pixelated"),_.width=h.width*c,_.height=h.height*c)),Object.keys(d).length&&(_={..._,...d}),_},[h,c,d]);return i.exports.useEffect(()=>{if(!e||!e.length)return;let _=!1;const C=N=>{if(N.badgeId!==e)return;const w=nr.generateImage(new Wo(N.image));w.onload=()=>f(w),_=!0,W().events.removeEventListener(Oa.IMAGE_READY,C)};W().events.addEventListener(Oa.IMAGE_READY,C);const b=n?W().getGroupBadgeImage(e):W().getBadgeImage(e);if(b&&!_){const N=nr.generateImage(new Wo(b));N.onload=()=>f(N)}return()=>W().events.removeEventListener(Oa.IMAGE_READY,C)},[e,n]),l(L,{classNames:E,style:I,...g,children:[r&&K("badge.descriptions.enabled",!0)&&l(L,{className:"badge-information text-black py-1 px-2 small",children:[t("div",{className:"fw-bold mb-1",children:n?a:eo(e)}),t("div",{children:n?m("group.badgepopup.body"):zi(e)})]}),p]})},Bb=o=>{const{day:e="00",hour:n="00",minutes:r="00",seconds:a="00",classNames:s=[],children:c=null,...u}=o,d=i.exports.useMemo(()=>{const p=["nitro-counter-time"];return s.length&&p.push(...s),p},[s]);return l(v,{gap:1,children:[t(L,{classNames:d,...u,children:l("div",{children:[e!="00"?e:n,e!="00"?m("countdown_clock_unit_days"):m("countdown_clock_unit_hours")]})}),t(L,{style:{marginTop:"3px"},children:":"}),t(L,{classNames:d,...u,children:l("div",{children:[r,m("countdown_clock_unit_minutes")]})}),t(L,{style:{marginTop:"3px"},children:":"}),t(L,{classNames:d,...u,children:l("div",{children:[a,m("countdown_clock_unit_seconds")]})}),c]})},ct=o=>{const{type:e="",classNames:n=[],style:r={},...a}=o,s=i.exports.useMemo(()=>{const d=["nitro-currency-icon topcurrencygen"];return n.length&&d.push(...n),d},[n]),c=i.exports.useMemo(()=>{let d=K("currency.asset.icon.url","");return d=d.replace("%type%",e.toString()),`url(${d})`},[e]),u=i.exports.useMemo(()=>{let d={};return d.backgroundImage=c,Object.keys(r).length&&(d={...d,...r}),d},[r,c]);return t(L,{classNames:s,style:u,...a})},el=o=>{const{productType:e="s",productClassId:n=-1,direction:r=2,extraData:a="",scale:s=1,style:c={},...u}=o,[d,p]=i.exports.useState(null),g=i.exports.useMemo(()=>{var f;let h={};return(f=d==null?void 0:d.src)!=null&&f.length&&(h.backgroundImage=`url('${d.src}')`,h.width=d.width,h.height=d.height),s!==1&&(h.transform=`scale(${s})`,s%1||(h.imageRendering="pixelated")),Object.keys(c).length&&(h={...h,...c}),h},[d,s,c]);return i.exports.useEffect(()=>{let h=null;const f={imageReady:(E,I,_)=>{!_&&I&&(_=nr.generateImage(I)),_.onload=()=>p(_)},imageFailed:null};switch(e.toLocaleLowerCase()){case me.FLOOR:h=Y().getFurnitureFloorImage(n,new xt(r),64,f,0,a);break;case me.WALL:h=Y().getFurnitureWallImage(n,new xt(r),64,f,0,a);break}if(h){const E=h.getImage();E.onload=()=>p(E)}},[e,n,r,a]),d?t(L,{classNames:["furni-image"],style:g,...u}):null},Ad=o=>{const{figure:e=null,userName:n=null,message:r=null,editable:a=!1,onChange:s=null}=o;return l(v,{overflow:"hidden",className:"nitro-gift-card text-black",children:[l("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!n&&t("div",{className:"gift-incognito"}),e&&t("div",{className:"gift-avatar",children:t(ot,{figure:e,direction:2,headOnly:!0})})]}),t(v,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:l(T,{grow:!0,overflow:"auto",justifyContent:"between",children:[!a&&t(S,{textBreak:!0,className:"gift-message",children:r}),a&&s!==null&&t("textarea",{className:"gift-message h-100",maxLength:140,value:r,onChange:c=>s(c.target.value),placeholder:m("catalog.gift_wrapping_new.message_hint")}),n&&t(S,{italics:!0,textEnd:!0,className:"pe-1",children:m("catalog.gift_wrapping_new.message_from",["name"],[n])})]})})]})},T=o=>{const{size:e=0,offset:n=0,column:r=!0,gap:a=2,classNames:s=[],...c}=o,{isCssGrid:u=!1}=Pb(),d=i.exports.useMemo(()=>{const p=[];if(e){let g=`col-${e}`;u&&(g=`g-${g}`),p.push(g)}if(n){let g=`offset-${n}`;u&&(g=`g-start-${n}`),p.push(g)}return s.length&&p.push(...s),p},[e,n,u,s]);return t(v,{classNames:d,column:r,gap:a,...c})},yr=o=>{const{count:e=0,position:n="absolute",classNames:r=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return r.length&&u.push(...r),u},[r]);return l(L,{position:"absolute",classNames:c,...s,children:[e,a]})},Ys=o=>{const{value:e=0}=o,n=e.toString().split("");return t(V,{children:n.map((r,a)=>t("i",{className:"limited-edition-number n-"+r},a))})},Pd=o=>{const{uniqueNumber:e=0,uniqueSeries:n=0,classNames:r=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["unique-compact-plate","z-index-1"];return r.length&&u.push(...r),u},[r]);return l(L,{classNames:c,...s,children:[t("div",{children:t(Ys,{value:e})}),t("div",{children:t(Ys,{value:n})}),a]})},Gb=o=>{const{uniqueLimitedItemsLeft:e=0,uniqueLimitedSeriesSize:n=0,classNames:r=[],...a}=o,s=i.exports.useMemo(()=>{const c=["unique-complete-plate"];return r.length&&c.push(...r),c},[r]);return t(L,{classNames:s,...a,children:l(T,{className:"plate-container",gap:0,children:[l(v,{justifyContent:"between",alignItems:"center",children:[m("unique.items.left"),t("div",{children:t(Ys,{value:e})})]}),l(v,{justifyContent:"between",alignItems:"center",children:[m("unique.items.number.sold"),t("div",{children:t(Ys,{value:n})})]})]})})},Ne=o=>{const{itemImage:e=void 0,itemColor:n=void 0,itemActive:r=!1,itemCount:a=1,itemCountMinimum:s=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:d=!1,itemHighlight:p=!1,disabled:g=!1,center:h=!0,column:f=!0,style:E={},classNames:I=[],position:_="relative",overflow:C="hidden",children:b=null,...N}=o,w=i.exports.useMemo(()=>{const y=["layout-grid-item","border","border-2","border-muted","rounded"];return r&&y.push("active"),(c||u>0)&&y.push("unique-item"),c&&y.push("sold-out"),d&&y.push("unseen"),p&&y.push("has-highlight"),g&&y.push("disabled"),e===null&&y.push("icon","loading-icon"),I.length&&y.push(...I),y},[r,c,u,d,p,g,e,I]),O=i.exports.useMemo(()=>{let y={...E};return e&&!(c||u>0)&&(y.backgroundImage=`url(${e})`),n&&(y.backgroundColor=n),Object.keys(E).length&&(y={...y,...E}),y},[E,e,n,c,u]);return l(T,{center:h,pointer:!0,position:_,overflow:C,column:f,classNames:w,style:O,...N,children:[a>s&&t(yr,{count:a}),u>0&&l(V,{children:[t(L,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute bottom-0 unique-item-counter",children:t(Ys,{value:u})})]}),b]})},or=o=>{const{imageUrl:e=null,className:n="",...r}=o;return t("img",{src:e,className:"no-select "+n,alt:"",...r})},tl=o=>{const{...e}=o;return l(L,{classNames:["spinner-container"],...e,children:[t(L,{className:"spinner"}),t(L,{className:"spinner"}),t(L,{className:"spinner"})]})},Vb=o=>{const{roomId:e=-1,textureReceiver:n=null,onClose:r=null}=o,a=i.exports.useRef(),s=()=>{if(!a||!a.current)return null;const u=a.current.getBoundingClientRect();return new bu(Math.floor(u.x),Math.floor(u.y),Math.floor(u.width),Math.floor(u.height))},c=()=>{sr(mn.CAMERA_SHUTTER),n(Y().createTextureFromRoom(e,1,s()))};return t(Or,{handleSelector:".nitro-room-thumbnail-camera",children:l("div",{className:"nitro-room-thumbnail-camera px-2",children:[t("div",{ref:a,className:"camera-frame"}),l("div",{className:"d-flex align-items-end h-100 pb-2",children:[t("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:r,children:m("cancel")}),t("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:c,children:m("navigator.thumbeditor.save")})]})]})})},ga=o=>{const{title:e="",onClose:n=null,classNames:r=[],children:a=null,type:s=ge.DEFAULT,...c}=o,u=i.exports.useMemo(()=>{const d=["nitro-alert"];return d.push("nitro-alert-"+s),r.length&&d.push(...r),d},[r,s]);return l(ae,{classNames:u,theme:"primary-slim",...c,children:[t(oe,{headerText:e,onCloseClick:n}),t(se,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:a})]})};class Nt{}Nt.BOUNCE="bounce";Nt.SLIDE_LEFT="slideLeft";Nt.SLIDE_RIGHT="slideRight";Nt.FLIP_X="flipX";Nt.FADE_IN="fadeIn";Nt.FADE_DOWN="fadeDown";Nt.FADE_UP="fadeUp";Nt.HEAD_SHAKE="headShake";function Hb(o,e,n=300){switch(o){case Nt.BOUNCE:switch(e){default:return{};case Sr:return{animationName:"bounceIn",animationDuration:`${n}ms`};case Mr:return{animationName:"bounceOut",animationDuration:`${n}ms`}}case Nt.SLIDE_LEFT:switch(e){default:return{};case Sr:return{animationName:"slideInLeft",animationDuration:`${n}ms`};case Mr:return{animationName:"slideOutLeft",animationDuration:`${n}ms`}}case Nt.SLIDE_RIGHT:switch(e){default:return{};case Sr:return{animationName:"slideInRight",animationDuration:`${n}ms`};case Mr:return{animationName:"slideOutRight",animationDuration:`${n}ms`}}case Nt.FLIP_X:switch(e){default:return{};case Sr:return{animationName:"flipInX",animationDuration:`${n}ms`};case Mr:return{animationName:"flipOutX",animationDuration:`${n}ms`}}case Nt.FADE_UP:switch(e){default:return{};case Sr:return{animationName:"fadeInUp",animationDuration:`${n}ms`};case Mr:return{animationName:"fadeOutDown",animationDuration:`${n}ms`}}case Nt.FADE_IN:switch(e){default:return{};case Sr:return{animationName:"fadeIn",animationDuration:`${n}ms`};case Mr:return{animationName:"fadeOut",animationDuration:`${n}ms`}}case Nt.FADE_DOWN:switch(e){default:return{};case Sr:return{animationName:"fadeInDown",animationDuration:`${n}ms`};case Mr:return{animationName:"fadeOutUp",animationDuration:`${n}ms`}}case Nt.HEAD_SHAKE:switch(e){default:return{};case Sr:return{animationName:"headShake",animationDuration:`${n}ms`}}}return null}const vs=o=>{const{type:e=null,inProp:n=!1,timeout:r=300,className:a=null,children:s=null}=o,[c,u]=i.exports.useState(!1);return i.exports.useEffect(()=>{let d=null;return n?u(!0):d=setTimeout(()=>{u(!1),clearTimeout(r)},r),()=>{d&&clearTimeout(d)}},[n,r]),t(wm,{in:n,timeout:r,children:d=>t("div",{className:(a??"")+" animate__animated",style:{...Hb(e,d,r)},children:c&&s})})},nl=o=>{const{fadesOut:e=!0,timeoutMs:n=8e3,onClose:r=null,overflow:a="hidden",classNames:s=[],...c}=o,[u,d]=i.exports.useState(!1),p=i.exports.useMemo(()=>{const g=["nitro-notification-bubble","rounded"];return s.length&&g.push(...s),g},[s]);return i.exports.useEffect(()=>(d(!0),()=>d(!1)),[]),i.exports.useEffect(()=>{if(!e)return;const g=setTimeout(()=>{d(!1),setTimeout(()=>r(),300)},n);return()=>clearTimeout(g)},[e,n,r]),t(vs,{type:Nt.FADE_IN,inProp:u,timeout:300,children:t(v,{overflow:a,classNames:p,onClick:r,...c})})},er=o=>{const{figure:e="",typeId:n=-1,paletteId:r=-1,petColor:a=16777215,customParts:s=[],posture:c="std",headOnly:u=!1,direction:d=0,scale:p=1,style:g={},...h}=o,[f,E]=i.exports.useState(null),[I,_]=i.exports.useState(0),[C,b]=i.exports.useState(0),N=i.exports.useRef(!1),w=i.exports.useMemo(()=>{let O={};return f&&f.length&&(O.backgroundImage=`url(${f})`),p!==1&&(O.transform=`scale(${p})`,p%1||(O.imageRendering="pixelated")),O.width=I,O.height=C,Object.keys(g).length&&(O={...O,...g}),O},[f,p,g,I,C]);return i.exports.useEffect(()=>{let O=n,y=r,x=a,F=s,P=u;if(e&&e.length){const R=new Is(e);O=R.typeId,y=R.paletteId,x=R.color,F=R.customParts}O===16&&(P=!1);const k=Y().getRoomObjectPetImage(O,y,x,new xt(d*45),64,{imageReady:(R,A,G)=>{N.current||(G?(E(G.src),_(G.width),b(G.height)):A&&(E(nr.generateImageUrl(A)),_(A.width),b(A.height)))},imageFailed:R=>{}},P,0,F,c);if(k){const R=k.getImage();R&&(E(R.src),_(R.width),b(R.height))}},[e,n,r,a,s,c,u,d]),i.exports.useEffect(()=>(N.current=!1,()=>{N.current=!0}),[]),t(L,{classNames:["pet-image"],style:w,...h})},rl=o=>{const{text:e="",progress:n=0,maxProgress:r=100,position:a="relative",justifyContent:s="center",classNames:c=[],children:u=null,...d}=o,p=i.exports.useMemo(()=>{const g=["nitro-progress-bar","text-white"];return c.length&&g.push(...c),g},[c]);return l(T,{position:a,justifyContent:s,classNames:p,...d,children:[e&&e.length>0&&t(v,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:e}),t(L,{className:"nitro-progress-bar-inner",style:{width:~~((n-0)*(100-0)/(r-0)+0)+"%"}}),u]})},sl=o=>{const{level:e=0,classNames:n=[],children:r=null,...a}=o,s=i.exports.useMemo(()=>{const c=["nitro-rarity-level"];return n.length&&c.push(...n),c},[n]);return l(L,{classNames:s,...a,children:[t("div",{children:e}),r]})},pa=o=>{const{roomPreviewer:e=null,height:n=0,children:r=null}=o,[a,s]=i.exports.useState(null),c=i.exports.useRef(),u=d=>{e&&(d.shiftKey?e.changeRoomObjectDirection():e.changeRoomObjectState())};return i.exports.useEffect(()=>{if(!e)return;const d=g=>{!e||!a||!c.current||(e.updatePreviewRoomView(),a.canvasUpdated&&(c.current.style.backgroundImage=`url(${nr.generateImageUrl(a.master)})`))};if(!a&&c.current&&e){let h=document.defaultView.getComputedStyle(c.current,null).backgroundColor;h=cn.rgbStringToHex(h),h=h.replace("#","0x"),e.backgroundColor=parseInt(h,16);const f=c.current.parentElement.clientWidth;e.getRoomCanvas(f,n);const E=e.getRenderingCanvas();s(E),E.canvasUpdated=!0,d()}fr().add(d);const p=new ResizeObserver(()=>{if(!e||!c.current)return;const g=c.current.parentElement.offsetWidth;e.modifyRoomCanvas(g,n),d()});return p.observe(c.current),()=>{p.disconnect(),fr().remove(d)}},[a,e,c,n]),l("div",{className:"room-preview-container",children:[t("div",{ref:c,className:"room-preview-image",style:{height:n},onClick:u}),r]})},ha=o=>{const{roomId:e=-1,customUrl:n=null,shrink:r=!0,overflow:a="hidden",classNames:s=[],children:c=null,...u}=o,d=i.exports.useMemo(()=>{const g=["room-thumbnail","rounded","border"];return s.length&&g.push(...s),g},[s]),p=i.exports.useMemo(()=>n&&n.length?K("image.library.url")+n:K("thumbnails.url").replace("%thumbnail%",e.toString()),[n,e]);return l(L,{shrink:r,overflow:a,classNames:d,...u,children:[p&&t("img",{alt:"",src:p}),c]})},Dd=o=>{const{color:e="",message:n="",date:r="",senderName:a="",customTitle:s=null,onCloseClick:c=null}=o;return t(Or,{handleSelector:".drag-handler",children:l(T,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${e}`,children:[l(v,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[t(L,{position:"absolute",pointer:!0,className:"trophy-close",onClick:c}),t(S,{bold:!0,children:m("widget.furni.trophy.title")})]}),l(T,{className:"trophy-content py-1",gap:1,children:[s&&t(S,{bold:!0,children:s}),n]}),l(v,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[t(S,{bold:!0,children:r}),t(S,{bold:!0,children:a})]})]})})},Cn=o=>{const{userId:e=0,userName:n=null,classNames:r=[],pointer:a=!0,children:s=null,...c}=o,u=i.exports.useMemo(()=>{const d=["nitro-friends-spritesheet","icon-profile-sm"];return r.length&&d.push(...r),d},[r]);return t(L,{classNames:u,pointer:a,onClick:d=>tn(e),...c,children:s})},qn=o=>{const{isActive:e=!1,count:n=0,overflow:r="hidden",position:a="relative",pointer:s=!0,classNames:c=[],children:u=null,...d}=o,p=i.exports.useMemo(()=>{const g=["nav-item","rounded-top","border"];return e&&g.push("active"),c.length&&g.push(...c),g},[e,c]);return l(v,{overflow:r,pointer:s,position:a,classNames:p,...d,children:[t(v,{shrink:!0,center:!0,children:u}),n>0&&t(yr,{count:n})]})},Er=o=>{const{justifyContent:e="center",gap:n=1,classNames:r=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["container-fluid","nitro-card-tabs","pt-1"];return r.length&&u.push(...r),u},[r]);return t(v,{justifyContent:e,gap:n,classNames:c,...s,children:a})},Ht=(...o)=>o.filter(Boolean).join(" "),Wb=o=>{const{classNames:e=[],...n}=o,r=i.exports.useMemo(()=>{const a=["form-group"];return e.length&&a.push(...e),a},[e]);return t(v,{classNames:r,...n})},jb=o=>{const{variant:e="black",height:n=1,classNames:r=[],style:a={},...s}=o,c=i.exports.useMemo(()=>{const d=[];return e&&d.push("bg-"+e),r.length&&d.push(...r),d},[e,r]),u=i.exports.useMemo(()=>{let d={display:"list-item"};return n>0&&(d.height=n),Object.keys(a).length&&(d={...d,...a}),d},[n,a]);return t(L,{classNames:c,style:u,...s})},fa=o=>{var E,I;const{rows:e=[],overscan:n=5,scrollToBottom:r=!1,rowRender:a=null}=o,[s,c]=i.exports.useState(e.length-1),u=i.exports.useRef(null),{virtualItems:d=[],totalSize:p=0,scrollToIndex:g=null}=ym({parentRef:u,size:e.length,overscan:n}),h=d.length>0&&((E=d==null?void 0:d[0])==null?void 0:E.start)||0,f=d.length>0?p-(((I=d==null?void 0:d[d.length-1])==null?void 0:I.end)||0):0;return i.exports.useEffect(()=>{r&&g(s)},[r,s,g]),l(L,{fit:!0,innerRef:u,position:"relative",overflow:"auto",children:[h>0&&t("div",{style:{minHeight:`${h}px`}}),d.map(_=>{const C=e[_.index];return C?t("div",{"data-index":_.index,ref:_.measureRef,children:a(C)},_.key):t(i.exports.Fragment,{},_.key)}),f>0&&t("div",{style:{minHeight:`${f}px`}})]})},S=o=>{const{variant:e="black",fontWeight:n=null,fontSize:r=0,align:a=null,bold:s=!1,underline:c=!1,italics:u=!1,truncate:d=!1,center:p=!1,textEnd:g=!1,small:h=!1,wrap:f=!1,noWrap:E=!1,textBreak:I=!1,..._}=o,C=i.exports.useMemo(()=>{const b=["d-inline"];return e&&b.push("text-"+e),s&&b.push("fw-bold"),n&&b.push("fw-"+n),r&&b.push("fs-"+r),a&&b.push("text-"+a),c&&b.push("text-decoration-underline"),u&&b.push("fst-italic"),d&&b.push("text-truncate"),p&&b.push("text-center"),g&&b.push("text-end"),h&&b.push("small"),f&&b.push("text-wrap"),E&&b.push("text-nowrap"),I&&b.push("text-break"),b},[e,n,r,a,s,c,u,d,p,g,h,f,E,I]);return t(L,{classNames:C,..._})},qb=o=>{const{isError:e=!1,message:n="",percent:r=0}=o;return t(T,{fullHeight:!0,position:"relative",className:"nitro-loading",children:t(L,{fullHeight:!0,className:"container h-100",children:l(T,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[t(L,{className:"connecting-duck"}),t(T,{size:6,className:"text-center py-4",children:e&&n&&n.length?t(L,{className:"fs-4 text-shadow",children:n}):l(V,{children:[l(S,{fontSize:4,variant:"white",className:"text-shadow",children:["El hotel esta cargando ",r.toFixed(),"%..."]}),t(rl,{progress:r,className:"mt-2 large"})]})})]})})})},Cr=(o,e,n,r=!0)=>{i.exports.useEffect(()=>{if(r)return Array.isArray(o)?o.map(a=>e.addEventListener(a,n)):e.addEventListener(o,n),()=>{Array.isArray(o)?o.map(a=>e.removeEventListener(a,n)):e.removeEventListener(o,n)}},[o,e,r,n])},ac=(o,e)=>Cr(o,__().events,e),zb=(o,e)=>Cr(o,be().cameraManager.events,e),Yb=(o,e)=>Cr(o,be().localization.events,e),Fr=(o,e)=>Cr(o,be().events,e),we=(o,e)=>Cr(o,Y().events,e),Ke=(o,e)=>Cr(o,Qr().events,e),$b=(o,e)=>Cr(o,W().events,e),Hr=(o,e,n=!0)=>Cr(o,be().soundManager.events,e,n),U=(o,e)=>{i.exports.useEffect(()=>{const n=new o(e);return Vs().registerMessageEvent(n),()=>Vs().removeMessageEvent(n)},[o,e])},ut=(o,e,n=!0)=>Cr(o,rr,e,n),Kb=()=>{const[o,e]=i.exports.useState(!0),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[d,p]=i.exports.useState(0),g=i.exports.useMemo(()=>{let b=0;return n.forEach(N=>b+=un.getAchievementCategoryTotalUnseen(N)),b},[n]),h=i.exports.useMemo(()=>{let b=0;return n.forEach(N=>b+=N.getProgress()),b},[n]),f=i.exports.useMemo(()=>{let b=0;return n.forEach(N=>b+=N.getMaxProgress()),b},[n]),E=i.exports.useMemo(()=>~~((h-0)*(100-0)/(f-0)+0),[h,f]),I=i.exports.useMemo(()=>a===null?null:n.find(b=>b.code===a),[n,a]),_=i.exports.useMemo(()=>c===-1||!I?null:I.achievements.find(b=>b.achievementId===c),[I,c]),C=i.exports.useCallback((b,N)=>{r(w=>{const O=[...w];for(const y of O)if(y.code===b)for(const x of y.achievements)x.achievementId===N&&(x.unseen=0);return O})},[]);return U(ig,b=>{const w=b.getParser().achievement;r(O=>{const y=[...O],x=y.findIndex(F=>F.code===w.category);if(x===-1){const F=new jl(w.category);F.achievements.push(w),y.push(F)}else{const F=Kt(y[x]),P=[...F.achievements],k=P.findIndex(A=>A.achievementId===w.achievementId);let R=null;k===-1?P.push(w):(R=P[k],P[k]=w),un.getAchievementIsIgnored(w)||(w.unseen++,R&&(w.unseen+=R.unseen)),F.achievements=P,y[x]=F}return y})}),U(lg,b=>{const N=b.getParser(),w=[];for(const O of N.achievements){const y=O.category;let x=w.find(F=>F.code===y);x||(x=new jl(y),w.push(x)),x.achievements.push(O)}r(w)}),U(cg,b=>{const N=b.getParser();p(N.score)}),i.exports.useEffect(()=>{o&&(D(new ug),e(!1))},[o]),i.exports.useEffect(()=>{!a||c===-1||C(a,c)},[a,c,C]),{achievementCategories:n,selectedCategoryCode:a,setSelectedCategoryCode:s,selectedAchievementId:c,setSelectedAchievementId:u,achievementScore:d,getTotalUnseen:g,getProgress:h,getMaxProgress:f,scaledProgressPercent:E,selectedCategory:I,selectedAchievement:_,setAchievementSeen:C}},Ia=()=>dt(Kb),Xb=()=>{const[o,e]=i.exports.useState([]),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState(10),[d,p]=i.exports.useState(null);return zb(gg.INITIALIZED,g=>{e(Array.from(Ls().effects.values()))}),U(dg,g=>{const h=g.getParser();p({credits:h.creditPrice,duckets:h.ducketPrice,publishDucketPrice:h.publishDucketPrice})}),i.exports.useEffect(()=>{if(!Ls().isLoaded){Ls().init(),D(new mg);return}},[]),{availableEffects:o,cameraRoll:n,setCameraRoll:r,selectedPictureIndex:a,setSelectedPictureIndex:s,myLevel:c,price:d}},Ld=()=>dt(Xb);class gn extends Dn{}gn.SHOW_CATALOG="CE_SHOW_CATALOG";gn.HIDE_CATALOG="CE_HIDE_CATALOG";gn.TOGGLE_CATALOG="CE_TOGGLE_CATALOG";gn.SOLD_OUT="CE_SOLD_OUT";gn.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT";gn.PURCHASE_APPROVED="CE_PURCHASE_APPROVED";gn.INIT_GIFT="CE_INIT_GIFT";gn.CATALOG_RESET="CE_RESET";gn.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";class Qb extends gn{constructor(e,n,r){super(gn.INIT_GIFT),this._pageId=e,this._offerId=n,this._extraData=r}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}const Md=class extends gn{constructor(o){super(Md.POST_MARKETPLACE),this._item=o}get item(){return this._item}};let ol=Md;ol.POST_MARKETPLACE="CE_POST_MARKETPLACE";const Ud=class extends Dn{constructor(o){super(Ud.PURCHASE_SUCCESS),this._purchase=o}get purchase(){return this._purchase}};let Ir=Ud;Ir.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";const Fd=class extends Dn{constructor(o){super(Fd.PURCHASE_FAILED),this._code=o}get code(){return this._code}};let Kr=Fd;Kr.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";const Bd=class extends Dn{constructor(o){super(Bd.NOT_ALLOWED),this._code=o}get code(){return this._code}};let na=Bd;na.NOT_ALLOWED="CPNAE_NOT_ALLOWED";class Rt extends Dn{}Rt.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED";Rt.SELECT_PRODUCT="CWE_SELECT_PRODUCT";Rt.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM";Rt.PURCHASE="CWE_PURCHASE";Rt.COLOUR_ARRAY="CWE_COLOUR_ARRAY";Rt.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY";Rt.COLOUR_INDEX="CWE_COLOUR_INDEX";Rt.TEXT_INPUT="CWE_TEXT_INPUT";Rt.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT";Rt.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE";Rt.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES";Rt.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW";Rt.GUILD_SELECTED="CWE_GUILD_SELECTED";Rt.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED";Rt.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED";Rt.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA";Rt.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY";Rt.TOGGLE="CWE_CWE_TOGGLE";Rt.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED";Rt.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED";Rt.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";const Gd=class extends Dn{constructor(){super(Gd.SOLD_OUT)}};let ra=Gd;ra.SOLD_OUT="CPSOE_SOLD_OUT";const Vd=class extends Dn{constructor(o,e){super(Vd.UPDATE_STUFF_DATA),this._offer=o,this._stuffData=e}get offer(){return this._offer}get stuffData(){return this._stuffData}};let Jb=Vd;Jb.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";class Wt extends Dn{}Wt.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL";Wt.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL";Wt.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL";Wt.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST";Wt.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";class sa extends Dn{}sa.INIT="HC_NAME_CHANGE_INIT";const Hd=class extends Dn{constructor(o,e,n){super(Hd.FURNI_ADDED),this.id=o,this.spriteId=e,this.category=n}};let oa=Hd;oa.FURNI_ADDED="IFAE_FURNI_ADDED";class Bn extends Dn{}Bn.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL";Bn.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL";Bn.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";const ic=o=>o&&o.length?o.replace(/\\r/g,"\r"):"",lc=o=>{const e="0"+o;return e.substr(e.length-2,e.length)};let As=null;const Zb=()=>{const[o,e]=i.exports.useState([]),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(!1),[d,p]=i.exports.useState(!1),g=()=>K("notification",{}),h=k=>{const R=g();return R?R[k]:null},f=(k,R,A,G)=>{if(k.has(A))return k.get(A);const B=["notification",R,A].join(".");return be().localization.hasValue(B)||G?m(B,Array.from(k.keys()),Array.from(k.values())):null},E=(k,R)=>{let A=k.get("image");return A||(A=K("image.library.notifications.url","").replace("%image%",R.replace(/\./g,"_"))),m(A)},I=i.exports.useCallback((k,R=null,A=null,G=null,B=null,H=null)=>{(!B||!B.length)&&(B=m("notifications.broadcast.title")),(!R||!R.length)&&(R=ge.DEFAULT);const X=new Ti([ic(k)],R,A,G,B,H);e(j=>[X,...j])},[]),_=i.exports.useCallback(()=>I(null,ge.NITRO),[I]),C=i.exports.useCallback((k,R,A=null,G=null)=>{if(c)return;const B=new Ed(k,R,A,G);r(H=>[B,...H])},[c]),b=(k,R=null)=>{R||(R=new Map);const A=h("notification."+k);if(A)for(const de in A)R.set(de,A[de]);k==="floorplan_editor.error"&&R.set("message",R.get("message").replace(/[^a-zA-Z._ ]/g,""));const G=f(R,k,"title",!0),B=f(R,k,"message",!0).replace(/\\r/g,"\r"),H=f(R,k,"linkTitle",!1),X=f(R,k,"linkUrl",!1),j=E(R,k);R.get("display")==="BUBBLE"?C(m(B),Qe.INFO,j,X):I(m(B),k,X,H,G,j),R.get("sound")&&sr(R.get("sound"))},N=i.exports.useCallback((k,R,A,G=null,B=null,H=null,X=null)=>{(!G||!G.length)&&(G=m("generic.confirm")),(!B||!B.length)&&(B=m("generic.cancel")),(!H||!H.length)&&(H=m("notifications.broadcast.title"));const j=new Cd(X,k,R,A,G,B,H);s(de=>[j,...de])},[]),w=(k,R=null,A=!0)=>{I(k,ge.DEFAULT,R,m("mod.alert.link"),m("mod.alert.title"))},O=i.exports.useCallback((k,R="")=>{switch(k){case St.ALERT_SCAM:I(m("inventory.trading.warning.other_not_offering"),null,null,null,m("inventory.trading.notification.title"));return;case St.HOTEL_TRADING_DISABLED:case St.YOU_NOT_ALLOWED:case St.THEY_NOT_ALLOWED:case St.ROOM_DISABLED:case St.YOU_OPEN:case St.THEY_OPEN:I(m(`inventory.trading.openfail.${k}`,["otherusername"],[R]),null,null,null,m("inventory.trading.openfail.title"));return;case St.ERROR_WHILE_COMMIT:I(`${m("inventory.trading.notification.caption")}, ${m("inventory.trading.notification.commiterror.info")}`,null,null,null,m("inventory.trading.notification.title"));return;case St.THEY_CANCELLED:I(m("inventory.trading.info.closed"),null,null,null,m("inventory.trading.notification.title"));return}},[I]),y=i.exports.useCallback(k=>{e(R=>{const A=[...R],G=A.findIndex(B=>k===B);return G>=0&&A.splice(G,1),A})},[]),x=i.exports.useCallback(k=>{r(R=>{const A=[...R],G=A.findIndex(B=>k===B);return G>=0&&A.splice(G,1),A})},[]),F=i.exports.useCallback(k=>{s(R=>{const A=[...R],G=A.findIndex(B=>k===B);return G>=0&&A.splice(G,1),A})},[]);U(pg,k=>{const R=k.getParser();if(R.userId!==W().userId)return;const A=m("notifications.text.respect.1"),G=m("notifications.text.respect.2",["count"],[R.respectsReceived.toString()]);C(A,Qe.RESPECT),C(G,Qe.RESPECT)}),U(hg,k=>{const R=k.getParser();I(R.message.replace(/\\r/g,"\r"),null,null,m("notifications.broadcast.title"))}),U(fg,k=>{const R=k.getParser(),A=m("achievements.levelup.desc"),G=eo(R.data.badgeCode),B=W().getBadgeUrl(R.data.badgeCode),H="questengine/achievements/"+R.data.category;C(A+" "+G,Qe.ACHIEVEMENT,B,H)}),U(Ig,k=>{const R=k.getParser();R.numGifts<=0||C(R.numGifts.toString(),Qe.CLUBGIFT,null,"catalog/open/"+K("catalog.links")["hc.hc_gifts"])}),U(Eg,k=>{const R=k.getParser();w(R.message,R.url,!1)}),U(Su,k=>{const R=k.getParser();if(R.amountChanged<=0||R.type!==5)return;const A=K("currency.asset.icon.url","").replace("%type%",R.type.toString());C(m("notifications.text.loyalty.received",["AMOUNT"],[R.amountChanged.toString()]),Qe.INFO,A)}),U(Cg,k=>{const R=k.getParser();w(R.message)}),U(_g,k=>{const R=k.getParser();I(m("opening.hours."+(R.userThrowOutAtClose?"disconnected":"closed"),["h","m"],[lc(R.openHour),lc(R.openMinute)]),ge.DEFAULT,null,null,m("opening.hours.title"))}),U(bg,k=>{const R=k.getParser(),A=m("notifications.text."+(R.boughtAsGift?"petbought":"petreceived"));let G=null;const B=Y().getRoomObjectPetImage(R.pet.typeId,R.pet.paletteId,parseInt(R.pet.color,16),new xt(45*3),64,null,!0);B&&(G=B.getImage().src),C(A,Qe.PETLEVEL,G)}),U(Sg,k=>{const A=k.getParser().messages.map(B=>ic(B)),G=new Ti(A,ge.MOTD,null,null,m("notifications.motd.title"));e(B=>[G,...B])}),U(Ng,k=>{const R=k.getParser();let A=null;const G=Y().getRoomObjectPetImage(R.figureData.typeId,R.figureData.paletteId,parseInt(R.figureData.color,16),new xt(45*3),64,null,!0);G&&(A=G.getImage().src),C(m("notifications.text.petlevel",["pet_name","level"],[R.petName,R.level.toString()]),Qe.PETLEVEL,A)}),U(Tg,k=>{const R=k.getParser();u(!R.enabled)}),U(vg,k=>{const R=k.getParser();if(!R.products||!R.products.length)return;const A=R.products[0];A&&C(m("notifications.text.club_gift.selected"),Qe.INFO,Vo.getProductImageUrl(A.productType,A.furniClassId,A.extraParam))}),U(wg,k=>{const R=k.getParser();I(m("maintenance.shutdown",["m","d"],[R.minutesUntilMaintenance.toString(),R.duration.toString()]),ge.DEFAULT,null,null,m("opening.hours.title"))}),U(yg,k=>{const R=k.getParser();w(R.message,R.url)}),U(xg,k=>{const R=k.getParser();b(R.type,R.parameters)}),U(Rg,k=>{const R=k.getParser();I(m("opening.hours.shutdown",["m"],[R.openMinute.toString()]),ge.DEFAULT,null,null,m("opening.hours.title"))}),U(Og,k=>{const R=k.getParser();I(m("opening.hours.disconnected",["h","m"],[R.openHour.toString(),R.openMinute.toString()]),ge.DEFAULT,null,null,m("opening.hours.title"))}),U(kg,k=>{const R=k.getParser();switch(R.errorCode){default:case 0:I(m("connection.server.error.desc",["errorCode"],[R.errorCode.toString()]),ge.ALERT,null,null,m("connection.server.error.title"));break;case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 1009:case 1010:case 1011:case 1012:case 1013:case 1014:case 1015:case 1016:case 1017:case 1018:case 1019:k.connection.dispose();break;case 4013:I(m("connection.room.maintenance.desc"),ge.ALERT,null,null,m("connection.room.maintenance.title"));break}}),U(Ag,k=>{const R=k.getParser();I(m(R.alertMessage),ge.DEFAULT,null,null,m(R.titleMessage?R.titleMessage:"notifications.broadcast.title"))});const P=i.exports.useCallback(()=>{if(!d)if(di.isRunning()){if(As)return;As=setTimeout(()=>{P()},di.totalRunningTime+5e3)}else As&&(clearTimeout(As),As=null),C(m("mod.chatdisclaimer"),Qe.INFO),p(!0)},[d,C]);return U(Pg,P),{alerts:o,bubbleAlerts:n,confirms:a,simpleAlert:I,showNitroAlert:_,showTradeAlert:O,showConfirm:N,showSingleBubble:C,closeAlert:y,closeBubbleAlert:x,closeConfirm:F}},Ze=()=>dt(Zb),eS=(o,e)=>{const[n,r]=i.exports.useState(()=>{if(typeof window>"u")return e;try{return $o(o)??e}catch{return e}});return[n,s=>{try{const c=s instanceof Function?s(n):s;r(c),typeof window<"u"&&Ki(o,c)}catch(c){Nu.error(c)}}]},Ea=eS,tS=()=>Ea(to.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),Wd=()=>dt(tS),nS=()=>Ea(to.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),jd=()=>dt(nS),rS=-12345678,sS=()=>{const[o,e]=i.exports.useState(!1),[n,r]=i.exports.useState(!1),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState(-1),[d,p]=i.exports.useState(Rn.NORMAL),[g,h]=i.exports.useState(null),[f,E]=i.exports.useState(null),[I,_]=i.exports.useState(null),[C,b]=i.exports.useState(null),[N,w]=i.exports.useState([]),[O,y]=i.exports.useState(null),[x,F]=i.exports.useState([]),[P,k]=i.exports.useState(null),[R,A]=i.exports.useState(!1),[G,B]=i.exports.useState({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[H,X]=i.exports.useState({}),[j,de]=i.exports.useState(!1),[ie,ne]=Wd(),[xe,Ee]=jd(),[Me,it]=i.exports.useState(null),[Be,Lt]=i.exports.useState(null),[Nn,He]=i.exports.useState(0),[_e,Xe]=i.exports.useState(0),[Ot,pe]=i.exports.useState(0),[Pe,at]=i.exports.useState(0),[rn,Ce]=i.exports.useState(0),[Ue,Tn]=i.exports.useState(0),{simpleAlert:Ar=null}=Ze(),sn=i.exports.useRef(new hr),co=i.exports.useCallback(()=>{s(-1),u(-1),h(null),E(null),_(null),b(null),w([]),y(null),F([]),e(!1)},[]),xs=i.exports.useCallback(q=>{if(!q)return an.MISSING_OFFER;if(Nn<0||Nn>=_e)return an.FURNI_LIMIT_REACHED;const $=Ae();if(!$)return an.NOT_IN_ROOM;if(!$.isRoomOwner)return an.NOT_ROOM_OWNER;if(Pe<=0){const J=Y();let le=J.getRoomObjectCount($.roomId,Q.UNIT);for(;le>0;){const De=J.getRoomObjectByIndex($.roomId,le,Q.UNIT),Je=$.userDataManager.getUserDataByIndex(De.id);if(Je&&Je.type===ft.USER&&Je.roomIndex!==$.ownRoomIndex&&!Je.isModerator)return an.VISITORS_IN_ROOM;le--}}return an.OKAY},[Nn,_e,Pe]),Pr=i.exports.useCallback(q=>{const $=Ae();return!!(($&&q.page&&q.page.layoutCode!=="sold_ltd_items"&&d===Rn.NORMAL&&($.isRoomOwner||$.isGuildRoom&&$.controllerLevel>=tt.GUILD_MEMBER)||d===Rn.BUILDER&&xs(q)===an.OKAY)&&q.pricingModel!==lt.PRICING_MODEL_BUNDLE&&q.product.productType!==me.EFFECT&&q.product.productType!==me.HABBO_CLUB)},[d,xs]),Dr=i.exports.useCallback(q=>{if(!Pr(q))return;const $=q.product;if(!$)return;let J=0;switch($.productType){case me.FLOOR:J=Q.FLOOR;break;case me.WALL:J=Q.WALL;break}Y().processRoomObjectPlacement(Us.CATALOG,-q.offerId,J,$.productClassId,$.extraParam)&&(it(q),de(!0),e(!1))},[Pr]),ts=i.exports.useCallback((q,$)=>{const J=Y();let le=J.getRoomInstanceVariable(J.activeRoomId,re.ROOM_WALL_TYPE),De=J.getRoomInstanceVariable(J.activeRoomId,re.ROOM_FLOOR_TYPE),Je=J.getRoomInstanceVariable(J.activeRoomId,re.ROOM_LANDSCAPE_TYPE);switch(le=le&&le.length?le:"101",De=De&&De.length?De:"101",Je=Je&&Je.length?Je:"1.1",q){case"floor":J.updateRoomInstancePlaneType(J.activeRoomId,$,le,Je,!0);return;case"wallpaper":J.updateRoomInstancePlaneType(J.activeRoomId,De,$,Je,!0);return;case"landscape":J.updateRoomInstancePlaneType(J.activeRoomId,De,le,$,!0);return;default:J.updateRoomInstancePlaneType(J.activeRoomId,De,le,Je,!0);return}},[]),Rs=i.exports.useCallback(()=>{Me&&(Y().cancelRoomObjectInsert(),de(!1),it(null))},[Me]),br=i.exports.useCallback((q=!0)=>{de($=>($&&q&&ee("catalog/open"),!1))},[]),Lr=i.exports.useCallback((q=!1)=>{q||br(),Lt($=>{if($)switch($.category){case Q.FLOOR:Y().removeRoomObjectFloor($.roomId,$.objectId);break;case Q.WALL:{switch($.furniData.className){case"floor":case"wallpaper":case"landscape":ts("reset","");break;default:Y().removeRoomObjectWall($.roomId,$.objectId);break}break}default:Y().deleteRoomObject($.objectId,$.category);break}return null})},[br,ts]),Vt=i.exports.useCallback((q,$)=>{if($.pageId===q&&$!==g)return $;for(const J of $.children){const le=Vt(q,J);if(le)return le}return null},[g]),$n=i.exports.useCallback((q,$)=>{if($.pageName===q&&$!==g)return $;for(const J of $.children){const le=$n(q,J);if(le)return le}return null},[g]),ns=i.exports.useCallback((q,$=!1)=>{if(!f||!f.size)return null;if($){const J=[],le=f.get(q);if(le&&le.length)for(const De of le)De.isVisible&&J.push(De);if(J.length)return J}return f.get(q)},[f]),Kn=i.exports.useCallback((q,$)=>{q<0||(r(!0),s(q),q>-1&&D(new Dg(q,$,d)))},[d]),Tm=i.exports.useCallback((q,$,J,le,De,Je)=>{const kt=new Hi(q,$,J,le,Je);if(_(kt),u(Se=>q!==-1?q:Se),A(!1),De>-1&&kt.offers.length){for(const Se of kt.offers)if(Se.offerId===De){b(Se);break}}},[]),ir=i.exports.useCallback((q,$=-1)=>{if(Rs(),q.parent.pageName==="root"&&q.children.length){for(const De of q.children)if(De.isVisible){q=De;break}}const J=[];let le=q;for(;le&&le.pageName!=="root";)J.push(le),le=le.parent;J.reverse(),w(De=>{const Je=De.indexOf(q)>=0,kt=q.isOpen;for(const Se of De)Se.deactivate(),J.indexOf(Se)===-1&&Se.close();for(const Se of J)Se.activate(),Se.parent&&Se.open(),Se===q.parent&&Se.children.length&&Se.open();return Je&&kt?q.close():q.open(),J}),q.pageId>-1&&Kn(q.pageId,$)},[w,Kn,Rs]),Os=i.exports.useCallback(q=>{if(q!==-1&&y(null),!o)sn.current.requestById=q,e(!0);else{const $=Vt(q,g);$&&ir($)}},[o,g,Vt,ir]),Ta=i.exports.useCallback(q=>{if(y(null),!o)sn.current.requestByName=q,e(!0);else{const $=$n(q,g);$&&ir($)}},[o,g,$n,ir]),va=i.exports.useCallback(q=>{if(y(null),!o)sn.current.requestedByOfferId=q,e(!0);else{const $=ns(q);if(!$||!$.length)return;ir($[0],q)}},[o,ns,ir]),Il=i.exports.useCallback(()=>{},[]);return U(Lg,q=>{const $=q.getParser(),J=new Map,le=(De,Je,kt)=>{const Se=new S_(De,Je,kt);for(const vn of Se.offerIds)J.has(vn)?J.get(vn).push(Se):J.set(vn,[Se]);Je++;for(const vn of De.children)Se.addChild(le(vn,Je,Se));return Se};h(le($.root,0,null)),E(J)}),U(Mg,q=>{const $=q.getParser();if($.catalogType!==d)return;const J=[];for(const le of $.offers){const De=[],Je=gs(le.localizationId);for(const Se of le.products){const vn=Ii(Se.furniClassId,Se.productType);De.push(new zr(Se.productType,Se.furniClassId,Se.extraParam,Se.productCount,Je,vn,Se.uniqueLimitedItem,Se.uniqueLimitedSeriesSize,Se.uniqueLimitedItemsLeft))}if(!De.length)continue;const kt=new lt(le.offerId,le.localizationId,le.rent,le.priceCredits,le.priceActivityPoints,le.priceActivityPointsType,le.giftable,le.clubLevel,De,le.bundlePurchaseAllowed);(d===Rn.NORMAL||kt.pricingModel!==lt.PRICING_MODEL_BUNDLE&&kt.pricingModel!==lt.PRICING_MODEL_MULTI)&&J.push(kt)}$.frontPageItems&&$.frontPageItems.length&&F($.frontPageItems),r(!1),a===$.pageId&&Tm($.pageId,$.layoutCode,new od($.localization.images.concat(),$.localization.texts.concat()),J,$.offerId,$.acceptSeasonCurrencyAsCredits)}),U(Ug,q=>{const $=q.getParser();Tt(new Ir($.offer))}),U(Fg,q=>{const $=q.getParser();Tt(new Kr($.code))}),U(Bg,q=>{const $=q.getParser();Tt(new na($.code))}),U(Gg,q=>{q.getParser(),Tt(new ra)}),U(Vg,q=>{const J=q.getParser().offer;if(!J||!J.products.length)return;J.products[0].uniqueLimitedItem;const De=[],Je=gs(J.localizationId);for(const Se of J.products){const vn=Ii(Se.furniClassId,Se.productType);De.push(new zr(Se.productType,Se.furniClassId,Se.extraParam,Se.productCount,Je,vn,Se.uniqueLimitedItem,Se.uniqueLimitedSeriesSize,Se.uniqueLimitedItemsLeft))}const kt=new lt(J.offerId,J.localizationId,J.rent,J.priceCredits,J.priceActivityPoints,J.priceActivityPointsType,J.giftable,J.clubLevel,De,J.bundlePurchaseAllowed);(d===Rn.NORMAL||kt.pricingModel!==lt.PRICING_MODEL_BUNDLE&&kt.pricingModel!==lt.PRICING_MODEL_MULTI)&&(kt.page=I,b(kt),kt.product&&kt.product.productType===me.WALL&&B(Se=>{const vn={...Se};return vn.extraData=kt.product.extraParam||null,vn}))}),U(Hg,q=>{const $=q.getParser(),J=new N_($.productCode,$.palettes.slice());X(le=>{const De=[];le.petPalettes&&De.push(...le.petPalettes);for(let Je=0;Je<De.length;Je++)if(De[Je].breed===J.breed){De.splice(Je,1);break}return De.push(J),{...le,petPalettes:De}})}),U(Wg,q=>{const $=q.getParser();X(J=>{const le=$.offers;return{...J,clubOffers:le}})}),U(jg,q=>{const $=q.getParser();X(J=>{const le=$.groups;return{...J,groups:le}})}),U(qg,q=>{const $=q.getParser();X(J=>{const le=new O_($);return{...J,giftConfiguration:le}})}),U(zg,q=>{const $=q.getParser();if(!$)return;let J="";$.result===1?J=m("inventory.marketplace.result.title.success"):J=m("inventory.marketplace.result.title.failure");const le=m(`inventory.marketplace.result.${$.result}`);Ar(le,ge.DEFAULT,null,null,J)}),U(Tu,q=>{const $=q.getParser();X(J=>({...J,clubGifts:$}))}),U(Yg,q=>{const $=o;co(),$&&Ar(m("catalog.alert.published.description"),ge.ALERT,null,null,m("catalog.alert.published.title"))}),U($g,q=>{const $=q.getParser();He($.furniCount),Il()}),U(Kg,q=>{const $=q.getParser();Xe($.furniLimit),pe($.maxFurniLimit),at($.secondsLeft),Ce(yn()),Tn($.secondsLeftWithGrace),Il()}),ut(Ir.PURCHASE_SUCCESS,q=>sr(mn.CREDITS)),we(_l.PLACED,q=>{if(!j||q.type!==_l.PLACED)return;if(Lr(!0),!Me){br();return}let $=!1;const J=Me.product;if(q.category===Q.WALL)switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":$=q.placedOnFloor||q.placedOnWall;break;default:$=q.placedInRoom;break}else $=q.placedInRoom;if(!$){br();return}switch(Lt(new k_(q.roomId,q.objectId,q.category,q.wallLocation,q.x,q.y,q.direction,Me)),d){case Rn.NORMAL:{switch(q.category){case Q.FLOOR:Y().addFurnitureFloor(q.roomId,q.objectId,J.productClassId,new xt(q.x,q.y,q.z),new xt(q.direction),0,new Jg);break;case Q.WALL:switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":ts(J.furnitureData.className,J.extraParam);break;default:Y().addFurnitureWall(q.roomId,q.objectId,J.productClassId,new xt(q.x,q.y,q.z),new xt(q.direction*45),0,q.instanceData,0);break}}const le=Y().getRoomObject(q.roomId,q.objectId,q.category);le&&le.model.setValue(re.FURNITURE_ALPHA_MULTIPLIER,.5),xe&&D(new la(a,Me.offerId,J.extraParam,1)),ie&&Dr(Me);break}case Rn.BUILDER:{let le=Me.page.pageId;switch(le===rS&&(le=-1),q.category){case Q.FLOOR:D(new Qg(le,Me.offerId,J.extraParam,q.x,q.y,q.direction));break;case Q.WALL:D(new Xg(le,Me.offerId,J.extraParam,q.wallLocation));break}ie&&Dr(Me);break}}}),ut(oa.FURNI_ADDED,q=>{const $=Y();if(!(!Be||Be.productClassId!==q.spriteId||Be.roomId!==$.activeRoomId)){switch(q.category){case Z.FLOOR:{const J=$.getRoomInstanceVariable($.activeRoomId,re.ROOM_FLOOR_TYPE);Be.extraParam!==J&&D(new Go(q.id));break}case Z.WALL_PAPER:{const J=$.getRoomInstanceVariable($.activeRoomId,re.ROOM_WALL_TYPE);Be.extraParam!==J&&D(new Go(q.id));break}case Z.LANDSCAPE:{const J=$.getRoomInstanceVariable($.activeRoomId,re.ROOM_LANDSCAPE_TYPE);Be.extraParam!==J&&D(new Go(q.id));break}default:D(new Zg(q.id,Be.category,Be.wallLocation,Be.x,Be.y,Be.direction))}ie||Lr()}}),i.exports.useEffect(()=>()=>b(null),[I]),i.exports.useEffect(()=>{if(!(!o||!g||!f||!sn.current))switch(sn.current.requestType){case hr.REQUEST_TYPE_NONE:if(I)return;if(g.isBranch){for(const q of g.children)if(q&&q.isVisible){ir(q);return}}return;case hr.REQUEST_TYPE_ID:Os(sn.current.requestById),sn.current.resetRequest();return;case hr.REQUEST_TYPE_OFFER:va(sn.current.requestedByOfferId),sn.current.resetRequest();return;case hr.REQUEST_TYPE_NAME:Ta(sn.current.requestByName),sn.current.resetRequest();return}},[o,g,f,I,ir,Os,va,Ta]),i.exports.useEffect(()=>{!O&&I&&I.pageId===-1&&Os(c)},[O,I,c,Os]),i.exports.useEffect(()=>{C&&B({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})},[C]),i.exports.useEffect(()=>{!o||g||(D(new ep),D(new vu),D(new tp(d)),D(new np))},[o,g,d]),i.exports.useEffect(()=>(k(new zo(Y(),++zo.PREVIEW_COUNTER)),()=>{k(q=>(q.dispose(),null))}),[]),{isVisible:o,setIsVisible:e,isBusy:n,pageId:a,previousPageId:c,currentType:d,rootNode:g,offersToNodes:f,currentPage:I,setCurrentPage:_,currentOffer:C,setCurrentOffer:b,activeNodes:N,searchResult:O,setSearchResult:y,frontPageItems:x,roomPreviewer:P,navigationHidden:R,setNavigationHidden:A,purchaseOptions:G,setPurchaseOptions:B,catalogOptions:H,setCatalogOptions:X,getNodeById:Vt,getNodeByName:$n,activateNode:ir,openPageById:Os,openPageByName:Ta,openPageByOfferId:va,requestOfferToMover:Dr}},Ve=()=>dt(sS),oS=1e3,aS=10,iS=1e3;let lS=0,cS=0;const uS=()=>{const[o,e]=i.exports.useState([]),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(!1),d=h=>{h.id=lS++,e(f=>{const E=[...f];return E.push(h),E.length>oS&&E.shift(),E})},p=h=>{r(f=>{const E=[...f];return E.push(h),E.length>aS&&E.shift(),E})},g=h=>{h.id=cS++,s(f=>{const E=[...f];return E.push(h),E.length>iS&&E.shift(),E})};return Ke(zt.STARTED,h=>u(!0)),U(ws,h=>{if(!c)return;const f=h.getParser();n.length&&n[n.length-1].id===f.data.roomId||(d({id:-1,webId:-1,entityId:-1,name:f.data.roomName,timestamp:gd(),type:Pn.TYPE_ROOM_INFO,roomId:f.data.roomId}),p({id:f.data.roomId,name:f.data.roomName}),u(!1))}),U(wu,h=>{const f=h.getParser();g({id:-1,webId:f.senderId,entityId:-1,name:"",message:f.messageText,roomId:-1,timestamp:Xl(f.secondsSinceSent),type:Pn.TYPE_IM})}),U(yu,h=>{const f=h.getParser();g({id:-1,webId:f.senderId,entityId:-1,name:"",message:f.messageText,roomId:-1,timestamp:Xl(),type:Pn.TYPE_IM})}),{addChatEntry:d,chatHistory:o,roomHistory:n,messengerHistory:a}},ao=()=>dt(uS),dS=()=>{const[o,e]=i.exports.useState([]),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState([]),[d,p]=i.exports.useState(null),g=i.exports.useMemo(()=>{const N=o.filter(w=>w.online);return N.sort((w,O)=>w.name<O.name?-1:w.name>O.name?1:0),N},[o]),h=i.exports.useMemo(()=>{const N=o.filter(w=>!w.online);return N.sort((w,O)=>w.name<O.name?-1:w.name>O.name?1:0),N},[o]),f=N=>D(new Bi(N.id)),E=(N,w)=>w!==N.relationshipStatus&&D(new Ps(N.id,w)),I=N=>{for(const w of o)if(w.id===N)return w;return null},_=N=>!(N===W().userId||I(N)||n.find(w=>w.requesterUserId===N)||a.indexOf(N)>=0),C=(N,w)=>{if(!_(N))return!1;s(O=>{const y=[...O];return y.push(N),y}),D(new xu(w))},b=(N,w)=>{N===-1&&!w?(D(new bl(!0)),r([])):r(O=>{const y=[...O],x=y.findIndex(F=>F.id===N);return x===-1?O:(D(w?new dp(y[x].id):new bl(!1,y[x].id)),y.splice(x,1),y)})};return U(sp,N=>{const w=N.getParser();p(new db(w.userFriendLimit,w.normalFriendLimit,w.extendedFriendLimit,w.categories)),D(new rp)}),U(op,N=>{const w=N.getParser();e(O=>{const y=[...O];for(const x of w.fragment){const F=y.findIndex(k=>k.id===x.id),P=new qt;P.populate(x),F>-1?y[F]=P:y.push(P)}return y})}),U(ap,N=>{const w=N.getParser();e(O=>{const y=[...O],x=F=>{const P=y.findIndex(k=>k.id===F.id);if(P===-1){const k=new qt;k.populate(F),y.unshift(k)}else y[P].populate(F)};for(const F of w.addedFriends)x(F);for(const F of w.updatedFriends)x(F);for(const F of w.removedFriendIds){const P=y.findIndex(k=>k.id===F);P>-1&&y.splice(P,1)}return y})}),U(ip,N=>{const w=N.getParser();r(O=>{const y=[...O];for(const x of w.requests){const F=y.findIndex(P=>P.requesterUserId===x.requesterUserId);if(F>0)y[F]=Kt(y[F]),y[F].populate(x);else{const P=new Ql;P.populate(x),y.push(P)}}return y})}),U(lp,N=>{const O=N.getParser().request;r(y=>{const x=[...y];if(x.findIndex(P=>P.requesterUserId===O.requesterUserId)===-1){const P=new Ql;P.populate(O),x.push(P)}return x})}),i.exports.useEffect(()=>{D(new cp);const N=setInterval(()=>D(new up),12e4);return()=>{clearInterval(N)}},[]),{friends:o,requests:n,sentRequests:a,dismissedRequestIds:c,setDismissedRequestIds:u,settings:d,onlineFriends:g,offlineFriends:h,getFriend:I,canRequestFriend:_,requestFriend:C,requestResponse:b,followFriend:f,updateRelationship:E}},pn=()=>dt(dS),mS=()=>{const[o,e]=i.exports.useState([]),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(Wn.HIDDEN),{getFriend:d=null}=pn(),{simpleAlert:p=null}=Ze(),g=i.exports.useMemo(()=>o.filter(_=>a.indexOf(_.threadId)===-1),[o,a]),h=i.exports.useMemo(()=>n>0&&g.find(_=>_.threadId===n||null),[n,g]),f=_=>{let C=o.find(b=>b.participant&&b.participant.id===_);if(C){const b=a.indexOf(C.threadId);b>=0&&s(N=>{const w=[...N];return w.splice(b,1),w})}else{const b=d(_);if(!b)return null;C=new Xi(b),C.addMessage(null,m("messenger.moderationinfo"),0,null,jn.SECURITY_NOTIFICATION),C.setRead(),e(N=>{const w=[...N];return w.push(C),w})}return C},E=_=>{s(C=>{const b=[...C];return b.indexOf(_)>=0?C:(b.push(_),b)}),n===_&&r(-1)},I=(_,C,b,N=0,w=null,O=jn.CHAT)=>{if(!_||!b||!b.length)return;const y=C===W().userId;y&&b.length<=255&&D(new gp(_.participant.id,b)),e(x=>{const F=[...x],P=F.findIndex(k=>k.threadId===_.threadId);return P===-1?x:(_=Kt(F[P]),y&&_.groups.length===1&&sr(mn.MESSENGER_NEW_THREAD),_.addMessage(O===jn.ROOM_INVITE?null:C,b,N,w,O),n===_.threadId&&_.setRead(),F[P]=_,!y&&_.unread&&sr(mn.MESSENGER_MESSAGE_RECEIVED),F)})};return U(wu,_=>{const C=_.getParser(),b=f(C.senderId);b&&I(b,C.senderId,C.messageText,C.secondsSinceSent,C.extraData)}),U(yu,_=>{const C=_.getParser(),b=f(C.senderId);b&&I(b,C.senderId,C.messageText,0,null,jn.ROOM_INVITE)}),U(mp,_=>{const C=_.getParser();p(`Received room invite error: ${C.errorCode},recipients: ${C.failedRecipients}`,ge.DEFAULT,null,null,m("friendlist.alert.title"))}),i.exports.useEffect(()=>{n<=0||e(_=>{const C=[..._],b=C.findIndex(N=>N.threadId===n);return b>=0&&(C[b]=Kt(C[b]),C[b].setRead()),C})},[n]),i.exports.useEffect(()=>{u(_=>{if(!g.length)return Wn.HIDDEN;let C=!1;for(const b of g)if(b.unreadCount>0){C=!0;break}return C?Wn.UNREAD:Wn.SHOW})},[g]),{messageThreads:o,activeThread:h,iconState:c,visibleThreads:g,getMessageThread:f,setActiveThreadId:r,closeThread:E,sendMessage:I}},al=()=>dt(mS),gS=()=>{const[o,e]=i.exports.useState(!1),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState(!1),[g,h]=i.exports.useState(null);return U(pp,f=>{let E=f.getParser();!E||E&&!E.games.length||(s(E.games[0]),r(E.games))}),U(hp,f=>{let E=f.getParser();E&&u(E)}),U(fp,f=>{let E=f.getParser();E&&p(E.isInMaintenance)}),U(Ip,f=>{let E=f.getParser();if(E)switch(E.gameTypeId){case 2:return console.log("snowwar");default:return h(E.url)}}),i.exports.useEffect(()=>{o&&(D(new Ep),Wi())},[o]),{isVisible:o,setIsVisible:e,games:n,accountStatus:c,selectedGame:a,setSelectedGame:s,gameOffline:d,gameURL:g,setGameURL:h}},Ca=()=>dt(gS),pS=()=>{const[o,e]=i.exports.useState(null);return U(Cp,n=>{const r=n.getParser(),a={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};r.bases.forEach((c,u)=>a.badgeBases.push({id:u,images:c})),r.symbols.forEach((c,u)=>a.badgeSymbols.push({id:u,images:c})),r.partColors.forEach((c,u)=>a.badgePartColors.push({id:u,color:c})),r.colorsA.forEach((c,u)=>a.groupColorsA.push({id:u,color:c})),r.colorsB.forEach((c,u)=>a.groupColorsB.push({id:u,color:c}));const s=(c,u)=>c.id<u.id?-1:c.id>u.id?1:0;a.badgeBases.sort(s),a.badgeSymbols.sort(s),a.badgePartColors.sort(s),a.groupColorsA.sort(s),a.groupColorsB.sort(s),e(a)}),i.exports.useEffect(()=>{D(new _p)},[]),{groupCustomize:o}},io=()=>dt(pS),hS=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(null),{simpleAlert:a=null,showConfirm:s=null}=Ze(),c=(u,d)=>{const p={reportType:u,reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,roomName:"",messageId:-1,threadId:-1,groupId:-1,extraData:"",roomObjectId:-1,message:"",currentStep:0};switch(u){case qe.BULLY:case qe.EMERGENCY:case qe.IM:p.reportedUserId=d.reportedUserId,p.currentStep=At.SELECT_CHATS;break;case qe.ROOM:p.roomId=d.roomId,p.roomName=d.roomName,p.currentStep=At.SELECT_TOPICS;break;case qe.THREAD:p.groupId=d.groupId,p.threadId=d.threadId,p.currentStep=At.SELECT_TOPICS;break;case qe.MESSAGE:p.groupId=d.groupId,p.threadId=d.threadId,p.messageId=d.messageId,p.currentStep=At.SELECT_TOPICS;break;case qe.PHOTO:p.extraData=d.extraData,p.roomId=d.roomId,p.reportedUserId=d.reportedUserId,p.roomObjectId=d.roomObjectId,p.currentStep=At.SELECT_TOPICS;break}e(p)};return U(Sp,u=>{const d=u.getParser();let p=d.messageText;switch(d.resultType){case Qo.TOO_MANY_PENDING_CALLS_CODE:D(new bp),a(m("help.cfh.error.pending"),ge.MODERATION,null,null,m("help.cfh.error.title"));break;case Qo.HAS_ABUSIVE_CALL_CODE:a(m("help.cfh.error.abusive"),ge.MODERATION,null,null,m("help.cfh.error.title"));break;default:p.trim().length===0&&(p=m("help.cfh.sent.text")),a(p,ge.MODERATION,null,null,m("help.cfh.sent.title"))}}),U(Np,u=>{const d=u.getParser(),p=d.messageText.length===0?m("help.cfh.closed."+Eb(d.closeReason)):d.messageText;a(p,ge.MODERATION,null,null,m("mod.alert.title"))}),U(vp,u=>{const d=u.getParser();d.count>0&&s(m("help.emergency.pending.title")+`
`+d.pendingCalls[0].message,()=>{D(new Tp)},null,m("help.emergency.pending.button.discard"),m("help.emergency.pending.button.keep"),m("help.emergency.pending.message.subtitle"))}),U(wp,u=>{a("Your pending calls were deleted",ge.MODERATION,null,null,m("mod.alert.title"))}),U(yp,u=>{const d=u.getParser();a(d.message,ge.MODERATION,null,null,m("help.cfh.reply.title"))}),U(xp,u=>{const d=u.getParser();a(m("help.emergency.global_mute.message"),ge.MODERATION,d.infoUrl,m("help.emergency.global_mute.link"),m("help.emergency.global_mute.subtitle"))}),U(Rp,u=>{const d=u.getParser();r(d)}),{activeReport:o,setActiveReport:e,sanctionInfo:n,setSanctionInfo:r,report:c}},Ln=()=>dt(hS),_a=()=>{const[o,e]=i.exports.useState([]),n=i.exports.useMemo(()=>!!o.length,[o]),r=i.exports.useCallback(()=>{let s=-1;return e(c=>{const u=[...c];return s=u.length?u[u.length-1]+1:0,u.push(s),u}),s},[]),a=i.exports.useCallback(s=>{e(c=>{const u=[...c],d=u.indexOf(s);return d===-1?c:(u.splice(d,1),u)})},[]);return{isVisible:n,activate:r,deactivate:a}},fS=o=>D(new kp(o)),IS=(o,e)=>D(new Ap(o,...e)),ES=()=>{const[o,e]=i.exports.useState(new Map),n=i.exports.useCallback(d=>{var p;return((p=o.get(d))==null?void 0:p.length)||0},[o]),r=i.exports.useMemo(()=>{let d=0;for(const p of o.keys())d+=n(p);return d},[o,n]),a=i.exports.useCallback(d=>{let p=!0;return e(g=>{if(!g.has(d))return p=!1,g;const h=new Map(g);return h.delete(d),fS(d),h}),p},[]),s=i.exports.useCallback((d,p)=>{let g=!0;return e(h=>{if(!h.has(d))return g=!1,h;const f=new Map(h),E=f.get(d);if(E)for(const I of p)E.splice(E.indexOf(I),1);return IS(d,p),f}),g},[]),c=i.exports.useCallback((d,p)=>o.has(d)?o.get(d).indexOf(p)>=0:!1,[o]),u=i.exports.useCallback((d,p)=>{e(g=>{if(!g.has(d))return g;const h=new Map(g),f=h.get(d),E=f.indexOf(p);return E>=0&&f.splice(E,1),h})},[]);return U(Op,d=>{const p=d.getParser();e(g=>{const h=new Map(g);for(const f of p.categories){let E=h.get(f);E||(E=[],h.set(f,E));const I=p.getItemsByCategory(f);for(const _ of I)E.indexOf(_)===-1&&E.push(_)}return h})}),{getCount:n,getFullCount:r,resetCategory:a,resetItems:s,isUnseen:c,removeUnseen:u}},bn=()=>dt(ES),CS=()=>{const[o,e]=i.exports.useState(!0),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(new Map),[c,u]=i.exports.useState([]),[d,p]=i.exports.useState(null),{isVisible:g=!1,activate:h=null,deactivate:f=null}=_a(),{isUnseen:E=null,resetCategory:I=null}=bn(),_=K("user.badges.max.slots",5),C=O=>c.indexOf(O)>=0,b=()=>c.length<_,N=O=>{u(y=>{const x=[...y],F=x.indexOf(O);if(F===-1){if(!b())return y;x.push(O)}else x.splice(F,1);const P=new Mp;for(let k=0;k<_;k++)P.addActivatedBadge(x[k]??"");return D(P),x})},w=O=>n.indexOf(O)===-1?0:a.get(O)??0;return U(Pp,O=>{const y=O.getParser(),x=[];s(F=>{const P=new Map(F);return y.getAllBadgeCodes().forEach(k=>{const R=n.indexOf(k)>=0,A=y.getBadgeId(k);P.set(k,A),!R&&x.push(k)}),P}),u(y.getActiveBadgeCodes()),r(F=>[...F,...x])}),U(Dp,O=>{const y=O.getParser(),x=E($e.BADGE,y.badgeId);r(F=>{const P=[...F];return x?P.unshift(y.badgeCode):P.push(y.badgeCode),P}),s(F=>{const P=new Map(F);return P.set(y.badgeCode,y.badgeId),P})}),i.exports.useEffect(()=>{!n||!n.length||p(O=>{let y=O;return y&&n.indexOf(y)===-1&&(y=null),y||(y=n[0]),y})},[n]),i.exports.useEffect(()=>{if(g)return()=>{I($e.BADGE)}},[g,I]),i.exports.useEffect(()=>{!g||!o||(D(new Lp),e(!1))},[g,o]),{badgeCodes:n,activeBadgeCodes:c,selectedBadgeCode:d,setSelectedBadgeCode:p,isWearingBadge:C,canWearBadges:b,toggleBadge:N,getBadgeId:w,activate:h,deactivate:f}},ba=()=>dt(CS),_S=()=>{const[o,e]=i.exports.useState(!0),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:d=null}=_a(),{isUnseen:p=null,resetCategory:g=null}=bn();return U(Up,h=>{const f=h.getParser();r(E=>{const I=[...E],_=I.map(b=>b.botData.id),C=[];for(const b of f.items.values())_.indexOf(b.id)===-1&&C.push(b);for(const b of _){let N=!0;for(const y of f.items.values())if(y.id===b){N=!1;break}if(!N)continue;const w=I.findIndex(y=>y.botData.id===b),O=I[w];w===-1||!O||(Cs()===O.botData.id&&(qs(),ee("inventory/open")),I.splice(w,1))}for(const b of C){const N={botData:b};p($e.BOT,b.id)?I.unshift(N):I.push(N)}return I})}),U(Fp,h=>{const f=h.getParser();r(E=>{const I=[...E];if(I.findIndex(N=>N.botData.id===f.item.id)>=0)return E;const C={botData:f.item};return p($e.BOT,C.botData.id)?I.unshift(C):I.push(C),I})}),U(Bp,h=>{const f=h.getParser();r(E=>{const I=[...E],_=I.findIndex(C=>C.botData.id===f.itemId);return _===-1?E:(I.splice(_,1),Cs()===f.itemId&&(qs(),ee("inventory/show")),I)})}),i.exports.useEffect(()=>{!n||!n.length||s(h=>{let f=h;return f&&n.indexOf(f)===-1&&(f=null),f||(f=n[0]),f})},[n]),i.exports.useEffect(()=>{if(c)return()=>{g($e.BOT)}},[c,g]),i.exports.useEffect(()=>{!c||!o||(D(new Gp),e(!1))},[c,o]),{botItems:n,selectedBot:a,setSelectedBot:s,activate:u,deactivate:d}},qd=()=>dt(_S);let vo=null;const bS=()=>{const[o,e]=i.exports.useState(!0),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:d=null}=_a(),{isUnseen:p=null,resetCategory:g=null}=bn(),h=I=>{if(!(!n||!n.length))return n.filter(_=>_.type===I)},f=I=>{if(!(!n||!n.length)){for(const _ of n){const C=_.getItemById(I);if(C&&C.isWallItem)return _}return null}},E=I=>{if(!(!n||!n.length)){for(const _ of n){const C=_.getItemById(I);if(C&&!C.isWallItem)return _}return null}};return U(Ru,I=>{const _=I.getParser();r(C=>{const b=[...C];for(const N of _.items){let w=0,O=null;for(;w<b.length;){const y=b[w];let x=0;for(;x<y.items.length;){const F=y.items[x];if(F.id===N.itemId){F.update(N);const P=[...y.items];P[x]=F,y.items=P,O=y;break}x++}if(O)break;w++}if(O)O.hasUnseenItems=!0,b[w]=Kt(O);else{const y=new js(N);zl(b,y,p($e.FURNI,N.itemId)),Tt(new oa(y.id,y.type,y.category))}}return b})}),U(mi,I=>{const _=I.getParser();vo||(vo=new Array(_.totalFragments));const C=q_(_.fragment,_.totalFragments,_.fragmentNumber,vo);C&&(r(b=>{const N=[...b],w=z_(N);for(const O of w){if(C.get(O))continue;let y=0;for(;y<N.length;){const x=N[y],F=x.remove(O);if(!F){y++;continue}Cs()===F.ref&&(qs(),_s(x)||ee("inventory/show")),x.getTotalCount()<=0&&(N.splice(y,1),x.dispose());break}}for(const O of C.keys()){if(w.indexOf(O)>=0)continue;const y=C.get(O);if(!y)continue;const x=new js(y);zl(N,x,p($e.FURNI,O)),Tt(new oa(x.id,x.type,x.category))}return N}),vo=null)}),U(Vp,I=>{e(!0)}),U(Ou,I=>{const _=I.getParser();r(C=>{const b=[...C];let N=0;for(;N<b.length;){const w=b[N],O=w.remove(_.itemId);if(!O){N++;continue}Cs()===O.ref&&(qs(),_s(w)||ee("inventory/show")),w.getTotalCount()<=0&&(b.splice(N,1),w.dispose());break}return b})}),U(Hp,I=>{}),i.exports.useEffect(()=>{!n||!n.length||s(I=>{let _=I;return _&&n.indexOf(_)===-1&&(_=null),_||(_=n[0]),_})},[n]),i.exports.useEffect(()=>{if(c)return()=>{g($e.FURNI)&&r(I=>{const _=[...I];for(const C of _)C.hasUnseenItems=!1;return _})}},[c,g]),i.exports.useEffect(()=>{!c||!o||(D(new Wp),e(!1))},[c,o]),{isVisible:c,groupItems:n,setGroupItems:r,selectedItem:a,setSelectedItem:s,activate:u,deactivate:d,getWallItemById:f,getFloorItemById:E,getItemsByType:h}},Zr=()=>dt(bS);let wo=null;const SS=()=>{const[o,e]=i.exports.useState(!0),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:d=null}=_a(),{isUnseen:p=null,resetCategory:g=null}=bn();return U(jp,h=>{const f=h.getParser();wo||(wo=new Array(f.totalFragments));const E=X_(f.fragment,f.totalFragments,f.fragmentNumber,wo);E&&(r(I=>{const _=[...I];return K_(_,E,p),_}),wo=null)}),U(qp,h=>{const f=h.getParser();r(E=>{const I=[...E];return dd(f.pet,I,p($e.PET,f.pet.id)),I})}),U(zp,h=>{const f=h.getParser();r(E=>{const I=[...E];return md(f.petId,I),I})}),i.exports.useEffect(()=>{!n||!n.length||s(h=>{let f=h;return f&&n.indexOf(f)===-1&&(f=null),f||(f=n[0]),f})},[n]),i.exports.useEffect(()=>{if(c)return()=>{g($e.PET)}},[c,g]),i.exports.useEffect(()=>{!c||!o||(D(new Yp),e(!1))},[c,o]),{petItems:n,selectedPet:a,setSelectedPet:s,activate:u,deactivate:d}},zd=()=>dt(SS),NS=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(rt.TRADING_STATE_READY),{groupItems:c=[],setGroupItems:u=null,activate:d=null,deactivate:p=null}=Zr(),{simpleAlert:g=null,showTradeAlert:h=null}=Ze(),f=a>=rt.TRADING_STATE_RUNNING,E=()=>{switch(a){case rt.TRADING_STATE_RUNNING:!n.itemCount&&!o.accepts&&g(m("inventory.trading.warning.other_not_offering"),null,null,null),o.accepts?D(new ah):D(new ih);return;case rt.TRADING_STATE_CONFIRMING:D(new oh),s(rt.TRADING_STATE_CONFIRMED);return}},I=C=>{const b=C.getLastItem();b&&D(new lh(b.id))},_=()=>{if(f)switch(a){case rt.TRADING_STATE_RUNNING:D(new uh);return;default:D(new ch);return}};return U($p,C=>{const b=C.getParser();!o||!n||(o.userId===b.userID?e(N=>{const w=Kt(N);return w.accepts=b.userAccepts,w}):n.userId===b.userID&&r(N=>{const w=Kt(N);return w.accepts=b.userAccepts,w}))}),U(Xp,C=>{const b=C.getParser();b.reason===Kp.ERROR_WHILE_COMMIT?h(St.ERROR_WHILE_COMMIT):o&&b.userID!==o.userId&&h(St.THEY_CANCELLED),e(null),r(null),s(rt.TRADING_STATE_READY)}),U(Qp,C=>{C.getParser(),e(null),r(null),s(rt.TRADING_STATE_READY)}),U(Jp,C=>{C.getParser(),s(rt.TRADING_STATE_COUNTDOWN)}),U(Zp,C=>{const b=C.getParser(),N=Kl(b.firstUserItemArray),w=Kl(b.secondUserItemArray);e(O=>{const y=Kt(O);y.userId===b.firstUserID?(y.creditsCount=b.firstUserNumCredits,y.itemCount=b.firstUserNumItems,y.userItems=N):(y.creditsCount=b.secondUserNumCredits,y.itemCount=b.secondUserNumItems,y.userItems=w);const x=[];for(const F of y.userItems.getValues()){let P=0;for(;P<F.getTotalCount();){const k=F.getItemByIndex(P);k&&x.push(k.ref),P++}}return u(F=>{const P=[...F];for(const k of P)k.lockItemIds(x);return P}),y}),r(O=>{const y=Kt(O);return y.userId===b.firstUserID?(y.creditsCount=b.firstUserNumCredits,y.itemCount=b.firstUserNumItems,y.userItems=N):(y.creditsCount=b.secondUserNumCredits,y.itemCount=b.secondUserNumItems,y.userItems=w),y})}),U(eh,C=>{C.getParser()}),U(th,C=>{const b=C.getParser(),N=new Yl,w=Ae().userDataManager.getUserData(b.userID);N.userItems=new Fs;const O=new Yl,y=Ae().userDataManager.getUserData(b.otherUserID);O.userItems=new Fs,w.webID===W().userId?(N.userId=w.webID,N.userName=w.name,N.canTrade=b.userCanTrade,O.userId=y.webID,O.userName=y.name,O.canTrade=b.otherUserCanTrade):y.webID===W().userId&&(N.userId=y.webID,N.userName=y.name,N.canTrade=b.otherUserCanTrade,O.userId=w.webID,O.userName=w.name,O.canTrade=b.userCanTrade),e(N),r(O),s(rt.TRADING_STATE_RUNNING)}),U(nh,C=>{const b=C.getParser();h(b.reason,b.otherUserName)}),U(rh,C=>{C.getParser(),h(St.THEY_NOT_ALLOWED)}),U(sh,C=>{C.getParser(),h(St.YOU_NOT_ALLOWED)}),i.exports.useEffect(()=>{if(a===rt.TRADING_STATE_READY)return;const C=d();return()=>p(C)},[a,d,p]),{ownUser:o,otherUser:n,tradeState:a,setTradeState:s,isTrading:f,groupItems:c,progressTrade:E,removeItem:I,stopTrading:_}},Yd=()=>dt(NS),TS=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState([]),[d,p]=i.exports.useState([]),[g,h]=i.exports.useState([]),[f,E]=i.exports.useState([]),{simpleAlert:I=null}=Ze(),_=A=>{n.indexOf(A)>=0||r(G=>[...G,A])},C=A=>{r(G=>{const B=[...G],H=B.indexOf(A);return H>=0&&B.splice(H),B})},b=A=>{n.indexOf(A)>=0?C(A):_(A)},N=A=>{a.indexOf(A)>=0||s(G=>[...G,A])},w=A=>{s(G=>{const B=[...G],H=B.indexOf(A);return H>=0&&B.splice(H),B})},O=A=>{a.indexOf(A)>=0?w(A):N(A)},y=A=>{c.indexOf(A)>=0||u(G=>[...G,A])},x=A=>{u(G=>{const B=[...G],H=B.indexOf(A);return H>=0&&B.splice(H),B})},F=A=>{c.indexOf(A)>=0?x(A):y(A)},P=A=>{d.indexOf(A)>=0||p(G=>[...G,A])},k=A=>{p(G=>{const B=[...G],H=B.indexOf(A);return H>=0&&B.splice(H),B})},R=A=>{a.indexOf(A)>=0?k(A):P(A)};return U(dh,A=>{const B=A.getParser().data;e(B),h(B.issues)}),U(mh,A=>{const G=A.getParser();h(B=>{const H=[...B],X=H.findIndex(j=>j.issueId===G.issueData.issueId);return X>=0?H[X]=G.issueData:(H.push(G.issueData),sr(mn.MODTOOLS_NEW_TICKET)),H})}),U(gh,A=>{A.getParser()}),U(ph,A=>{A.getParser()&&I("Failed to pick issue",ge.DEFAULT,null,null,"Error")}),U(hh,A=>{const G=A.getParser();h(B=>{const H=[...B],X=H.findIndex(j=>j.issueId===G.issueId);return X>=0&&H.splice(X,1),H})}),U(fh,A=>{A.getParser().success?I("Moderation action was successfull",ge.MODERATION,null,null,"Success"):I("There was a problem applying tht moderation action",ge.MODERATION,null,null,"Error")}),U(Ih,A=>{const G=A.getParser();E(G.callForHelpCategories)}),U(Eh,A=>{A.getParser()}),{settings:o,openRooms:n,openRoomChatlogs:a,openUserChatlogs:d,openUserInfos:c,cfhCategories:f,tickets:g,openRoomInfo:_,closeRoomInfo:C,toggleRoomInfo:b,openRoomChatlog:N,closeRoomChatlog:w,toggleRoomChatlog:O,openUserInfo:y,closeUserInfo:x,toggleUserInfo:F,openUserChatlog:P,closeUserChatlog:k,toggleUserChatlog:R}},ys=()=>dt(TS),vS=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState({roomInfo:null,state:Le.NONE}),[g,h]=i.exports.useState(null),[f,E]=i.exports.useState({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),{simpleAlert:I=null}=Ze();return U(Ch,_=>{const C=_.getParser();D(new qo(C.roomId,!1,!1))}),U(_h,_=>{const C=_.getParser();C.canCreate||I(m(`navigator.cannotcreateevent.error.${C.errorCode}`),null,null,null,m("navigator.cannotcreateevent.title"))}),U(Au,_=>{D(new bh),D(new ku)}),U(Sh,_=>{const C=_.getParser();E(b=>{const N={...b};return N.eventMod=C.securityLevel>=Yo.MODERATOR,N.roomPicker=C.securityLevel>=Yo.COMMUNITY,N})}),U(Nh,_=>{const C=_.getParser();Xt(C.roomId)}),U(Pu,_=>{const C=_.getParser();E(b=>{const N={...b};return N.enteredGuestRoom=null,N.currentRoomOwner=C.isOwner,N.currentRoomId=C.roomId,N}),D(new qo(C.roomId,!0,!1)),Gs.available&&Gs.call("legacyTrack","navigator","private",[C.roomId])}),U(ws,_=>{const C=_.getParser();if(C.roomEnter)p({roomInfo:null,state:Le.NONE}),E(b=>{const N={...b};return N.enteredGuestRoom=C.data,N.currentRoomIsStaffPick=C.staffPick,!(N.createdFlatId===C.data.roomId)&&C.data.displayRoomEntryAd&&K("roomenterad.habblet.enabled",!1)&&Xs.openRoomEnterAd(),N.createdFlatId=0,N.enteredGuestRoom&&N.enteredGuestRoom.habboGroupId>0,N});else if(C.roomForward){if(C.data.ownerName!==W().userName&&!C.isGroupMember)switch(C.data.doorMode){case st.DOORBELL_STATE:p(b=>{const N={...b};return N.roomInfo=C.data,N.state=Le.START_DOORBELL,N});return;case st.PASSWORD_STATE:p(b=>{const N={...b};return N.roomInfo=C.data,N.state=Le.START_PASSWORD,N});return}if(C.data.doorMode===st.NOOB_STATE&&!W().isAmbassador&&!W().isRealNoob&&!W().isModerator)return;jr(C.data.roomId)}else E(b=>{const N={...b};return N.enteredGuestRoom=C.data,N.currentRoomIsStaffPick=C.staffPick,N})}),U(Th,_=>{const C=_.getParser();E(b=>{const N={...b};return N.currentRoomRating=C.totalLikes,N.canRate=C.canLike,N})}),U(vh,_=>{const C=_.getParser();(!C.userName||C.userName.length===0)&&p(b=>{const N={...b};return N.state=Le.STATE_WAITING,N})}),U(wh,_=>{const C=_.getParser();(!C.userName||C.userName.length===0)&&p(b=>{const N={...b};return N.state=Le.STATE_ACCEPTED,N})}),U(yh,_=>{const C=_.getParser();(!C.userName||C.userName.length===0)&&p(b=>{const N={...b};return N.state=Le.STATE_NO_ANSWER,N})}),U(xh,_=>{switch(_.getParser().errorCode){case-100002:p(b=>{const N={...b};return N.state=Le.STATE_WRONG_PASSWORD,N});return;case 4009:I(m("navigator.alert.need.to.be.vip"),ge.DEFAULT,null,null,m("generic.alert.title"));return;case 4010:I(m("navigator.alert.invalid_room_name"),ge.DEFAULT,null,null,m("generic.alert.title"));return;case 4011:I(m("navigator.alert.cannot_perm_ban"),ge.DEFAULT,null,null,m("generic.alert.title"));return;case 4013:I(m("navigator.alert.room_in_maintenance"),ge.DEFAULT,null,null,m("generic.alert.title"));return}}),U(Rh,_=>{const C=_.getParser();u(C.topLevelContexts),s(C.topLevelContexts.length?C.topLevelContexts[0]:null)}),U(Oh,_=>{const C=_.getParser();s(b=>{let N=b;if(N||(N=c&&c.length&&c[0]||null),!N)return null;if(C.result.code!==N.code&&c&&c.length)for(const w of c)w.code===C.result.code&&(N=w);for(const w of c)w.code===C.result.code&&(N=w);return N}),h(C.result)}),U(kh,_=>{const C=_.getParser();e(C.categories)}),U(Ah,_=>{const C=_.getParser();r(C.categories)}),U(Ph,_=>{const C=_.getParser();jr(C.roomId)}),U(Dh,_=>{const C=_.getParser();let b=!1;if(E(O=>{b=O.settingsReceived;const y={...O};return y.homeRoomId=C.homeRoomId,y.settingsReceived=!0,y}),b)return;let N=-1,w=-1;K("friend.id")!==void 0&&parseInt(K("friend.id"))>0&&(N=0,D(new Bi(parseInt(K("friend.id"))))),K("forward.type")!==void 0&&K("forward.id")!==void 0&&(N=parseInt(K("forward.type")),w=parseInt(K("forward.id"))),N===2?Xt(w):N===-1&&C.roomIdToEnter>0&&(ee("navigator/close"),C.roomIdToEnter!==C.homeRoomId?jr(C.roomIdToEnter):jr(C.homeRoomId))}),U(Lh,_=>{const C=_.getParser();switch(C.reason){case ka.REASON_FULL:I(m("navigator.guestroomfull.text"),ge.DEFAULT,null,null,m("navigator.guestroomfull.title"));break;case ka.REASON_QUEUE_ERROR:I(m(`room.queue.error.${C.parameter}`),ge.DEFAULT,null,null,m("room.queue.error.title"));break;case ka.REASON_BANNED:I(m("navigator.banned.text"),ge.DEFAULT,null,null,m("navigator.banned.title"));break;default:I(m("room.queue.error.title"),ge.DEFAULT,null,null,m("room.queue.error.title"));break}Wi()}),U(Mh,_=>ee("navigator/show")),{categories:o,doorData:d,setDoorData:p,topLevelContext:a,topLevelContexts:c,searchResult:g,navigatorData:f}},Mn=()=>dt(vS),wS=()=>{const[o,e]=i.exports.useState(new Ji),n=i.exports.useMemo(()=>K("hc.disabled",!1),[]),r=i.exports.useMemo(()=>n||o.clubDays>0?Vn.ACTIVE:o.pastVipDays>0||o.pastVipDays>0?Vn.EXPIRED:Vn.NONE,[o,n]),a=s=>{if(s===-1)return o.credits;for(const[c,u]of o.activityPoints.entries())if(c===s)return u;return 0};return U(Uh,s=>{const c=s.getParser();e(u=>{const d=Kt(u);return d.credits=parseFloat(c.credits),u.credits!==d.credits&&sr(mn.CREDITS),d})}),U(Fh,s=>{const c=s.getParser();e(u=>{const d=Kt(u);return d.activityPoints=c.currencies,d})}),U(Su,s=>{const c=s.getParser();e(u=>{const d=Kt(u);return d.activityPoints=new Map(d.activityPoints),d.activityPoints.set(c.type,c.amount),c.type===0&&sr(mn.DUCKETS),d})}),U(Gh,s=>{const c=s.getParser(),u=c.productName;u!=="club_habbo"&&u!=="habbo_club"||e(d=>{const p=Kt(d);return p.clubDays=Math.max(0,c.daysToPeriodEnd),p.clubPeriods=Math.max(0,c.periodsSubscribedAhead),p.isVip=c.isVip,p.pastClubDays=c.pastClubDays,p.pastVipDays=c.pastVipDays,p.isExpiring=c.responseType===Bh.RESPONSE_TYPE_DISCOUNT_AVAILABLE,p.minutesUntilExpiration=c.minutesUntilExpiration,p.minutesSinceLastModified=c.minutesSinceLastModified,p})}),i.exports.useEffect(()=>{if(n)return;D(new Sl("habbo_club"));const s=setInterval(()=>D(new Sl("habbo_club")),5e4);return()=>clearInterval(s)},[n]),i.exports.useEffect(()=>{D(new Vh)},[]),{purse:o,hcDisabled:n,clubStatus:r,getCurrencyAmount:a}},es=()=>dt(wS),yS=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const n=r=>e(r);return rr.addEventListener(Oe.FURNI_ADDED,n),()=>{rr.removeEventListener(Oe.FURNI_ADDED,n)}},[o,e])},Sn=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const n=r=>e(r);return rr.addEventListener(Oe.FURNI_REMOVED,n),()=>{rr.removeEventListener(Oe.FURNI_REMOVED,n)}},[o,e])},xS=o=>{ut(Oe.OBJECT_DESELECTED,o)},RS=o=>{ut(Oe.OBJECT_ROLL_OUT,o)},OS=o=>{ut(Oe.OBJECT_ROLL_OVER,o)},il=o=>{ut(Oe.OBJECT_SELECTED,o)},$d=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const n=r=>e(r);return rr.addEventListener(Oe.USER_ADDED,n),()=>{rr.removeEventListener(Oe.USER_ADDED,n)}},[o,e])},Kd=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const n=r=>e(r);return rr.addEventListener(Oe.USER_REMOVED,n),()=>{rr.removeEventListener(Oe.USER_REMOVED,n)}},[o,e])},kS=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(!1);return U(Hh,a=>{const s=a.getParser();s&&e(s)}),{promoteInformation:o,isExtended:n,setPromoteInformation:e,setIsExtended:r}},ll=()=>dt(kS),AS=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(0),d=(g,h,f,E=!1)=>{if(!n)return;const I=cn.hslToRGB(((g&255)<<16)+((h&255)<<8)+(f&255));E&&u(I),!g&&!h&&!f?n.tint=0:n.tint=I},p=g=>{if(!a)return;const h=g>>16&255,f=g>>8&255,E=g&255;a.red=h/255,a.green=f/255,a.blue=E/255};return ut(Tr.PREVIEW,g=>d(g.hue,g.saturation,g.lightness)),ut(Tr.CLEAR_PREVIEW,g=>{n&&(n.tint=c)}),we(Wh.ROOM_BACKGROUND_COLOR,g=>{Wr.isRoomPreviewerId(g.roomId)||(g.enable?d(g.hue,g.saturation,g.lightness,!0):d(0,0,0,!0))}),we(jh.ROOM_COLOR,g=>{if(Wr.isRoomPreviewerId(g.roomId))return;let h=0,f=255;g.bgOnly||(h=g.color,f=g.brightness),p(cn.hslToRGB((cn.rgbToHSL(h)&16776960)+f))}),we([In.INITIALIZED,In.DISPOSED],g=>{if(Wr.isRoomPreviewerId(g.roomId))return;const h=Ae();if(h)switch(g.type){case In.INITIALIZED:Wl(g.roomId),e(h);return;case In.DISPOSED:e(null);return}}),Ke([zt.CREATED,zt.ENDED],g=>{switch(g.type){case zt.CREATED:M_(g.session);return;case zt.ENDED:e(null);return}}),we([Ct.SELECTED,Ct.DESELECTED,Ct.ADDED,Ct.REMOVED,Ct.PLACED,Ct.REQUEST_MOVE,Ct.REQUEST_ROTATE,Ct.MOUSE_ENTER,Ct.MOUSE_LEAVE,Ct.DOUBLE_CLICK],g=>{if(Wr.isRoomPreviewerId(g.roomId))return;let h=null;switch(g.type){case Ct.SELECTED:F_(g)||(h=new Oe(Oe.OBJECT_SELECTED,g.objectId,g.category,g.roomId));break;case Ct.DESELECTED:h=new Oe(Oe.OBJECT_DESELECTED,g.objectId,g.category,g.roomId);break;case Ct.ADDED:{let f=null;switch(g.category){case Q.FLOOR:case Q.WALL:f=Oe.FURNI_ADDED;break;case Q.UNIT:f=Oe.USER_ADDED;break}f&&(h=new Oe(f,g.objectId,g.category,g.roomId));break}case Ct.REMOVED:{let f=null;switch(g.category){case Q.FLOOR:case Q.WALL:f=Oe.FURNI_REMOVED;break;case Q.UNIT:f=Oe.USER_REMOVED;break}f&&(h=new Oe(f,g.objectId,g.category,g.roomId));break}case Ct.REQUEST_MOVE:Hs(o,g.objectId,g.category)&&us(g.objectId,g.category,Gn.OBJECT_MOVE);break;case Ct.REQUEST_ROTATE:Hs(o,g.objectId,g.category)&&us(g.objectId,g.category,Gn.OBJECT_ROTATE_POSITIVE);break;case Ct.MOUSE_ENTER:h=new Oe(Oe.OBJECT_ROLL_OVER,g.objectId,g.category,g.roomId);break;case Ct.MOUSE_LEAVE:h=new Oe(Oe.OBJECT_ROLL_OUT,g.objectId,g.category,g.roomId);break;case Ct.DOUBLE_CLICK:h=new Oe(Oe.OBJECT_DOUBLE_CLICKED,g.objectId,g.category,g.roomId);break}h&&Tt(h)}),i.exports.useEffect(()=>{if(!o)return;const g=be(),h=Y(),f=o.roomId,E=1,I=Math.floor(window.innerWidth),_=Math.floor(window.innerHeight),C=g.application.renderer;C&&(C.view.style.width=`${I}px`,C.view.style.height=`${_}px`,C.resolution=window.devicePixelRatio,C.resize(I,_));const b=h.getRoomInstanceDisplay(f,E,I,_,qh.SCALE_ZOOMED_IN),N=Y().getRoomInstanceRenderingCanvas(f,E);if(!b||!N)return;const w=new Wo(zh.WHITE),O=new Yh,y=N.master;w.tint=0,w.width=I,w.height=_,y.addChildAt(w,0),y.filters=[O],r(w),s(O);const x=h.getRoomInstanceGeometry(f,E);if(x){const k=h.getRoomInstanceVariable(f,uo.ROOM_MIN_X)||0,R=h.getRoomInstanceVariable(f,uo.ROOM_MAX_X)||0,A=h.getRoomInstanceVariable(f,uo.ROOM_MIN_Y)||0,G=h.getRoomInstanceVariable(f,uo.ROOM_MAX_Y)||0;let B=(k+R)/2,H=(A+G)/2;const X=20;B=B+(X-1),H=H+(X-1);const j=Math.sqrt(X*X+X*X)*Math.tan(30/180*Math.PI);x.location=new xt(B,H,j)}const F=g.application.stage;if(!F)return;F.addChild(b),Wl(o.roomId);const P=k=>{const R=Math.floor(window.innerWidth),A=Math.floor(window.innerHeight);C.view.style.width=`${R}px`,C.view.style.height=`${A}px`,C.resolution=window.devicePixelRatio,C.resize(R,A),w.width=R,w.height=A,U_(R,A,1),g.application.render()};return window.addEventListener("resize",P),()=>{r(null),s(null),u(0),window.removeEventListener("resize",P)}},[o]),{roomSession:o}},We=()=>dt(AS),PS=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(0),{roomSession:c=null}=We(),u=()=>{const g=cn.rgbToHSL(a),[h,f,E,I]=en.int_to_8BitVals(g);D(new $h(o,f,E,I))},d=()=>c.useMultistateItem(o),p=()=>{Tt(new Tr(Tr.CLEAR_PREVIEW)),e(-1),r(-1),s(0)};return we(Re.REQUEST_BACKGROUND_COLOR,g=>{if(!Hs(c,g.objectId,g.category))return;const f=Y().getRoomObject(g.roomId,g.objectId,g.category).model;e(g.objectId),r(g.category);const E=parseInt(f.getValue(re.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),I=parseInt(f.getValue(re.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),_=parseInt(f.getValue(re.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)),C=en.eight_bitVals_to_int(0,E,I,_),b=cn.hslToRGB(C);s(b)}),Sn(o!==-1&&n!==-1,g=>{g.id!==o||g.category!==n||p()}),i.exports.useEffect(()=>{if(o===-1||n===-1)return;const g=cn.rgbToHSL(a),[h,f,E,I]=en.int_to_8BitVals(g);Tt(new Tr(Tr.PREVIEW,f,E,I))},[o,n,a]),{objectId:o,color:a,setColor:s,applyToner:u,toggleToner:d,onClose:p}},DS=PS,LS=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState("1"),[c,u]=i.exports.useState(""),[d,p]=i.exports.useState(""),[g,h]=i.exports.useState(""),[f,E]=i.exports.useState(""),{simpleAlert:I=null}=Ze(),_=()=>{e(-1),r(-1),s("1"),u(""),p(""),h(""),E("")};return we([Re.REQUEST_BADGE_DISPLAY_ENGRAVING,Re.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING],C=>{const b=Y().getRoomObject(C.roomId,C.objectId,C.category);if(!b)return;const N=new Qs;N.initializeFromRoomObjectModel(b.model),e(C.objectId),r(C.category),s("1"),u(eo(N.getValue(1))),p(zi(N.getValue(1))),h(N.getValue(2)),E(N.getValue(3))}),we(Re.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,C=>{const b=Y().getRoomObject(C.roomId,C.objectId,C.category);!b||b.model.getValue(re.FURNITURE_OWNER_ID)!==W().userId||I(`${m("resolution.failed.subtitle")} ${m("resolution.failed.text")}`,null,null,null,m("resolution.failed.title"))}),Sn(o!==-1&&n!==-1,C=>{C.id!==o||C.category!==n||_()}),{objectId:o,category:n,color:a,badgeName:c,badgeDesc:d,date:g,senderName:f,onClose:_}},MS=LS,yi="MONSTERPLANT_SEED_CONFIRMATION",xi="PURCHASABLE_CLOTHING_CONFIRMATION",Xd="GROUP_FURNITURE",Qd="EFFECTBOX_OPEN",Ri="MYSTERYTROPHY_OPEN_DIALOG",US=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[d,p]=i.exports.useState(null),[g,h]=i.exports.useState(!1),[f,E]=i.exports.useState(-1),{roomSession:I=null}=We(),_=()=>{e(-1),p(null),h(!1),r(null)},C=()=>{s(null),u(-1)},b=N=>{if(N)switch(N){case"use_friend_furni":I.useMultistateItem(o);break;case"use_monsterplant_seed":s(yi),u(o);break;case"use_random_teleport":Y().useRoomObject(o,Q.FLOOR);break;case"use_purchaseable_clothing":s(xi),u(o);break;case"use_mystery_box":I.useMultistateItem(o);break;case"use_mystery_trophy":s(Ri),u(o);break;case"join_group":Qi(d.guildId),h(!0);return;case"go_to_group_homeroom":d&&Xt(d.guildHomeRoomId);break}_()};return we([Re.OPEN_FURNI_CONTEXT_MENU,Re.CLOSE_FURNI_CONTEXT_MENU,Re.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,Re.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,Re.REQUEST_EFFECTBOX_OPEN_DIALOG,Re.REQUEST_MYSTERYBOX_OPEN_DIALOG,Re.REQUEST_MYSTERYTROPHY_OPEN_DIALOG],N=>{const w=Y().getRoomObject(I.roomId,N.objectId,N.category);if(w)switch(E(w.model.getValue(re.FURNITURE_OWNER_ID)),N.type){case Re.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!jt(w))return;u(w.id),s(yi),_();return;case Re.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!jt(w))return;u(w.id),s(Qd),_();return;case Re.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!jt(w))return;u(w.id),s(xi),_();return;case Re.REQUEST_MYSTERYBOX_OPEN_DIALOG:I.useMultistateItem(w.id),_();return;case Re.REQUEST_MYSTERYTROPHY_OPEN_DIALOG:if(!jt(w))return;u(w.id),s(Ri),_();return;case Re.OPEN_FURNI_CONTEXT_MENU:switch(e(w.id),N.contextMenu){case Ut.FRIEND_FURNITURE:r(Ut.FRIEND_FURNITURE);return;case Ut.MONSTERPLANT_SEED:jt(w)&&r(Ut.MONSTERPLANT_SEED);return;case Ut.MYSTERY_BOX:r(Ut.MYSTERY_BOX);return;case Ut.MYSTERY_TROPHY:jt(w)&&r(Ut.MYSTERY_TROPHY);return;case Ut.RANDOM_TELEPORT:r(Ut.RANDOM_TELEPORT);return;case Ut.PURCHASABLE_CLOTHING:jt(w)&&r(Ut.PURCHASABLE_CLOTHING);return}return;case Re.CLOSE_FURNI_CONTEXT_MENU:w.id===o&&_();return}}),U(Kh,N=>{const w=N.getParser();e(w.objectId),p(w),h(w.userIsMember),r(Xd)}),{objectId:o,mode:n,confirmMode:a,confirmingObjectId:c,groupData:d,isGroupMember:g,objectOwnerId:f,closeConfirm:C,processAction:b,onClose:_}},FS=US,BS=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState([]),[d,p]=i.exports.useState(null),[g,h]=i.exports.useState(new Map),[f,E]=i.exports.useState(!1),{groupItems:I=[],getItemsByType:_=null,activate:C=null,deactivate:b=null}=Zr(),{simpleAlert:N=null}=Ze(),w=a&&g.get(a.name)||null,O=()=>{r([]),s(null),u([]),h(new Map)},y=()=>{e(-1),O()},x=()=>{E(!0),D(new nf(o,a.name))},F=P=>{s(P),g.get(P.name)||D(new rf(P.name))};return we(Re.OPEN_WIDGET,P=>{P.widget===Xh.CRAFTING&&(e(P.objectId),O(),D(new Qh(P.objectId)))}),U(Jh,P=>{const k=P.getParser();if(!k.isActive()){e(-1);return}r(R=>{const A=[];for(const G of k.recipes){const B=Y().roomContentLoader._activeObjectTypeIds.get(G.itemName),H=Y().getFurnitureFloorIconUrl(B);A.push({name:G.recipeName,localizedName:m("roomItem.name."+B),iconUrl:H})}return A}),p(k.ingredients)}),U(Zh,P=>{const k=P.getParser();h(R=>{const A=new Map(R);return A.set(a.name,k.ingredients),A})}),U(ef,P=>{s(null),E(!1),P.getParser().result&&N(m("crafting.info.result.ok"))}),U(tf,P=>{}),i.exports.useEffect(()=>{!d||!d.length||u(P=>{const k=[];for(const R of d){const A=Y().roomContentLoader._activeObjectTypeIds.get(R),G=Y().getFurnitureFloorIconUrl(A),B=_(A);let H=0;if(B)for(const X of B)H+=X.items.length;k.push({name:R,iconUrl:G,count:H})}return k})},[I,d,_]),i.exports.useEffect(()=>{if(o===-1)return;const P=C();return()=>b(P)},[o,C,b]),{objectId:o,recipes:n,ingredients:c,selectedRecipe:a,requiredIngredients:w,isCrafting:f,selectRecipe:F,craft:x,onClose:y}},GS=BS,VS=()=>{const[o,e]=i.exports.useState([]),[n,r]=i.exports.useState(0),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(0),[d,p]=i.exports.useState(0),[g,h]=i.exports.useState(16777215),[f,E]=i.exports.useState(255),[I,_]=i.exports.useState(0),[C,b]=i.exports.useState(0),[N,w]=i.exports.useState(0),{roomSession:O=null}=We(),y=()=>O.isRoomOwner||O.controllerLevel>=tt.GUEST||W().isModerator,x=P=>{const k=o[P-1];k&&(r(k.id),_(k.type),b(k.color),w(k.light))},F=()=>{if(a===0)return;const P=n-1;if(n<1||n>o.length)return;const k=o[P];!k||I===k.type&&C===k.color&&N===k.light||(e(R=>{const A=[...R];return A[P]=new nc(k.id,I,C,N),A}),on.savePreset(k.id,I,C,N,!0))};return we(Re.REQUEST_DIMMER,P=>{y()&&O.requestMoodlightSettings()}),Ke(sf.ROOM_DIMMER_PRESETS,P=>{const k=[];let R=0;for(;R<P.presetCount;){const A=P.getPreset(R);A&&k.push(new nc(A.id,A.type,A.color,A.brightness)),R++}e(k),r(P.selectedPresetId)}),we(of.ROOM_COLOR,P=>{Wr.isRoomPreviewerId(P.roomId)||(u(a),s(P.state),r(P.presetId),p(P.effectId),_(P.effectId),h(P.color),b(P.color),E(P.brightness),w(P.brightness))}),i.exports.useEffect(()=>{a===0&&c===0||on.previewDimmer(C,N,I===2)},[a,c,C,N,I]),{presets:o,selectedPresetId:n,dimmerState:a,lastDimmerState:c,effectId:d,color:g,brightness:f,selectedEffectId:I,setSelectedEffectId:_,selectedColor:C,setSelectedColor:b,selectedBrightness:N,setSelectedBrightness:w,selectPresetId:x,applyChanges:F}},HS=VS,WS=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(0),c=()=>{e(-1),r(-1),s(0)},u=()=>{Ae().connection.send(new af(o)),c()};return we(Re.REQUEST_CREDITFURNI,d=>{const p=Y().getRoomObject(d.roomId,d.objectId,d.category);!p||!jt(p)||(e(d.objectId),r(d.category),s(p.model.getValue(re.FURNITURE_CREDIT_VALUE)||0))}),Sn(o!==-1&&n!==-1,d=>{d.id!==o||d.category!==n||c()}),{objectId:o,value:a,redeem:u,onClose:c}},jS=WS,qS=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState([]),{roomSession:d=null}=We(),p=()=>{e(-1),r(-1),s(-1),u([])};return we(Re.REQUEST_EXTERNAL_IMAGE,g=>{const h=Y().getRoomObject(g.roomId,g.objectId,g.category),f=Y().getRoomObjects(d==null?void 0:d.roomId,Q.WALL);if(!h)return;const E=[];f.forEach(_=>{if(_.type!=="external_image_wallitem_poster_small")return null;const C=_.model.getValue(re.FURNITURE_DATA),b=JSON.parse(C);E.push(b)}),e(g.objectId),r(g.category),u(E);const I=JSON.parse(h.model.getValue(re.FURNITURE_DATA));s(_=>{let C=0;return I&&(C=E.findIndex(b=>b.u===I.u)),C<0&&(C=0),C})}),Sn(o!==-1&&n!==-1,g=>{g.id!==o||g.category!==n||p()}),{objectId:o,currentPhotoIndex:a,currentPhotos:c,onClose:p}},zS=qS,YS=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState([]),[d,p]=i.exports.useState([]),[g,h]=i.exports.useState(null),[f,E]=i.exports.useState(0),I=()=>{e(-1),r(-1),s(0),u([]),p([]),h(null)},_=C=>{Ae().connection.send(new df(o,C)),I()};return U(lf,C=>{const b=C.getParser();e(b.furniId),E(b.start?1:2)}),U(cf,C=>I()),U(uf,C=>I()),we(Re.REQUEST_FRIEND_FURNITURE_ENGRAVING,C=>{const b=Y().getRoomObject(C.roomId,C.objectId,C.category);if(!b)return;const N=b.model.getValue(re.FURNITURE_DATA),w=b.model.getValue(re.FURNITURE_FRIENDFURNI_ENGRAVING);N[0]!=="1"||N.length!==6||(e(C.objectId),r(C.category),s(w),u([N[1],N[2]]),p([N[3],N[4]]),h(N[5]),E(0))}),Sn(o!==-1&&n!==-1,C=>{C.id!==o||C.category!==n||I()}),{objectId:o,type:a,usernames:c,figures:d,date:g,stage:f,onClose:I,respond:_}},$S=YS,KS=["perteam","mostwins","classic"],XS=["alltime","daily","weekly","monthly"],QS=()=>{const[o,e]=i.exports.useState(new Map),{roomSession:n=null}=We(),r=s=>KS[s],a=s=>XS[s];return we(Re.REQUEST_HIGH_SCORE_DISPLAY,s=>{const c=Y().getRoomObject(s.roomId,s.objectId,s.category);if(!c)return;const u=c.model.getValue(re.FURNITURE_DATA_FORMAT),d=_u.getData(u);d.initializeFromRoomObjectModel(c.model),e(p=>{const g=new Map(p);return g.set(c.id,d),g})}),we(Re.REQUEST_HIDE_HIGH_SCORE_DISPLAY,s=>{s.roomId===n.roomId&&e(c=>{const u=new Map(c);return u.delete(s.objectId),u})}),{stuffDatas:o,getScoreType:r,getClearType:a}},JS=QS,ZS="internalLink",eN=()=>(we(Re.REQUEST_INTERNAL_LINK,o=>{const e=Y().getRoomObject(o.roomId,o.objectId,o.category);if(!e)return;let r=e.model.getValue(re.FURNITURE_DATA)[ZS];(!r||!r.length)&&(r=e.model.getValue(re.FURNITURE_INTERNAL_LINK)),r&&r.length&&ee(r)}),{}),tN=eN,nN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState(dn.NO_CLUB),[g,h]=i.exports.useState(null),f=()=>{e(-1),r(-1),s(null),u(null),h(null)},E=()=>{o!==-1&&(D(new mf(o)),f())},I=()=>{o!==-1&&(D(new gi(o)),f())},_=()=>{o!==-1&&D(new gf(o,g))};return we(Re.REQUEST_MANNEQUIN,C=>{const b=Y().getRoomObject(C.roomId,C.objectId,C.category);if(!b)return;const N=b.model,w=N.getValue(re.FURNITURE_MANNEQUIN_FIGURE)||null,O=N.getValue(re.FURNITURE_MANNEQUIN_GENDER)||null,y=vt().createFigureContainer(w),x=vt().getFigureClubLevel(y,O,ps.MANNEQUIN_CLOTHING_PART_TYPES);e(C.objectId),r(C.category),s(w),u(O),p(x),h(N.getValue(re.FURNITURE_MANNEQUIN_NAME)||null)}),Sn(o!==-1&&n!==-1,C=>{C.id!==o||C.category!==n||f()}),{objectId:o,figure:a,gender:c,clubLevel:d,name:g,setName:h,saveFigure:E,wearFigure:I,saveName:_,onClose:f}},rN=nN,sN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState(new Fs),[d,p]=i.exports.useState([]),{roomSession:g=null}=We(),{showSingleBubble:h=null,simpleAlert:f=null}=Ze(),E=()=>{e(-1),r(-1)},I=i.exports.useCallback((N,w)=>D(new pf(N,w)),[]),_=i.exports.useCallback(N=>D(new hf(N)),[]),C=i.exports.useCallback((N,w)=>D(new gi(N,w)),[]);we(Re.REQUEST_PLAYLIST_EDITOR,N=>{var O,y,x;const w=Y().getRoomObject(N.roomId,N.objectId,N.category);if(w){if(jt(w)){e(N.objectId),r(N.category),(O=be().soundManager.musicController)==null||O.requestUserSongDisks(),(x=(y=be().soundManager.musicController)==null?void 0:y.getRoomItemPlaylist())==null||x.requestPlayList();return}(g.isRoomOwner||g.controllerLevel>=tt.GUEST||W().isModerator)&&D(new gi(N.objectId,-2))}}),Sn(o!==-1&&n!==-1,N=>{N.id!==o||N.category!==n||E()}),Hr(Du.NPE_SONG_CHANGED,N=>{s(N.position)}),Hr(ff.NOTIFY_PLAYED_SONG,N=>{h(m("soundmachine.notification.playing",["songname","songauthor"],[N.name,N.creator]),Qe.SOUNDMACHINE)}),Hr(If.SDIR_SONG_DISK_INVENTORY_RECEIVENT_EVENT,N=>{var w;u((w=be().soundManager.musicController)==null?void 0:w.songDiskInventory.clone())}),Hr(Nl.PLUE_PLAY_LIST_UPDATED,N=>{var w,O;p((O=(w=be().soundManager.musicController)==null?void 0:w.getRoomItemPlaylist())==null?void 0:O.entries.concat())}),Hr(Nl.PLUE_PLAY_LIST_FULL,N=>{f(m("playlist.editor.alert.playlist.full"),ge.ALERT,"","",m("playlist.editor.alert.playlist.full.title"))});const b=N=>{var w,O;o!==-1&&(N instanceof mi?N.getParser().fragmentNumber===0&&((w=be().soundManager.musicController)==null||w.requestUserSongDisks()):(O=be().soundManager.musicController)==null||O.requestUserSongDisks())};return U(mi,b),U(Ou,b),U(Ru,b),{objectId:o,diskInventory:c,playlist:d,currentPlayingIndex:a,onClose:E,addToPlaylist:I,removeFromPlaylist:_,togglePlayPause:C}},oN=sN,cc="floor",aN="wallpaper",uc="landscape",iN="poster",lN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState(!1),[g,h]=i.exports.useState(null),[f,E]=i.exports.useState(null),[I,_]=i.exports.useState(-1),[C,b]=i.exports.useState(null),[N,w]=i.exports.useState(!1),[O,y]=i.exports.useState(null),{roomSession:x=null}=We(),F=()=>{e(-1),r(-1),s(null),u(null),p(!1),h(null),E(null),_(-1),b(null),w(!1),y(null)},P=()=>{o!==-1&&(x.openGift(o),Y().changeObjectModelData(Y().activeRoomId,o,Q.FLOOR,re.FURNITURE_DISABLE_PICKING_ANIMATION,1))},k=i.exports.useMemo(()=>({imageReady:(R,A,G)=>{!G&&A&&(G=nr.generateImage(A)),y(G.src)},imageFailed:null}),[]);return Ke(Ef.RSPE_PRESENT_OPENED,R=>{let A=null;R.itemType===me.FLOOR?A=W().getFloorItemData(R.classId):R.itemType===me.WALL&&(A=W().getWallItemData(R.classId));let G=!1;if(R.placedInRoom){const B=Y().getRoomObject(x.roomId,R.placedItemId,Q.FLOOR);B&&(G=jt(B))}switch(R.itemType){case me.WALL:{if(A)switch(A.className){case cc:case uc:case aN:let B=null;A.className===cc?B=m("inventory.furni.item.floor.name"):A.className===uc?B=m("inventory.furni.item.landscape.name"):B=m("inventory.furni.item.wallpaper.name"),u(B);break;case iN:{const H=R.productCode;let X=null;H.indexOf("poster")===0&&(X=H.replace("poster",""));const j=W().getProductData(H);let de=null;j?de=j.name:A&&(de=A.name),u(de),y(Y().getFurnitureWallIconUrl(R.classId,X));break}default:{u(A.name||null),y(Y().getFurnitureWallIconUrl(R.classId));break}}break}case me.HABBO_CLUB:u(m("widget.furni.present.hc"));break;default:{if(R.placedItemType===me.PET){const H=R.petFigureString;if(H&&H.length){const X=new Is(H),j=Y().getRoomObjectPetImage(X.typeId,X.paletteId,X.color,new xt(90),64,k,!0,0,X.customParts);j&&y(j.getImage().src)}}else{const H=Y().getFurnitureFloorImage(R.classId,new xt(90),64,k);H&&y(H.getImage().src)}const B=W().getProductData(R.productCode);u(B&&B.name||A.name);break}}e(0),r(R.classId),s(R.itemType),p(G),_(R.placedItemId),b(R.placedItemType),w(R.placedInRoom)}),we(Re.REQUEST_PRESENT,R=>{const A=Y().getRoomObject(R.roomId,R.objectId,R.category);if(!A)return null;F(),e(R.objectId),r(-1),u(A.model.getValue(re.FURNITURE_DATA)||""),p(jt(A)),h(A.model.getValue(re.FURNITURE_PURCHASER_NAME)||null),E(A.model.getValue(re.FURNITURE_PURCHASER_FIGURE)||null)}),Sn(o!==-1,R=>{R.id===o&&F(),R.id===I&&N&&w(!1)}),{objectId:o,classId:n,itemType:a,text:c,isOwnerOfFurniture:d,senderName:g,senderFigure:f,placedItemId:I,placedItemType:C,placedInRoom:N,imageUrl:O,openPresent:P,onClose:F}},cN=lN,uN="internalLink",dN=()=>{const[o,e]=i.exports.useState(0);return we(Re.REQUEST_ROOM_LINK,n=>{const r=Y().getRoomObject(n.roomId,n.objectId,n.category);if(!r)return;let s=r.model.getValue(re.FURNITURE_DATA)[uN];(!s||!s.length)&&(s=r.model.getValue(re.FURNITURE_INTERNAL_LINK)),!(!s||!s.length)&&(s=parseInt(s,10),!isNaN(s)&&(e(s),D(new qo(s,!1,!1))))}),U(ws,n=>{!o||n.getParser().data.roomId!==o||e(0)}),{}},mN=dN,gN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(""),[d,p]=i.exports.useState("0"),[g,h]=i.exports.useState(""),[f,E]=i.exports.useState(!1),{getWallItemById:I=null}=Zr(),_=()=>{D(new _f(o,c,d,g)),e(-1),r(-1),s(""),u(""),p("0"),h(""),E(!1)};return U(Cf,C=>{const b=C.getParser();e(b.itemId),r(Q.WALL);const N=I(b.itemId);let w="post_it";if(N){const O=Y().getFurnitureWallName(N.type);O.match("post_it_")&&(w=O)}s(w),u(b.location),p("FFFF33"),h(""),E(!0)}),{objectId:o,color:d,setColor:p,text:g,setText:h,canModify:f,onClose:_}},pN=gN,Wa=40,hN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(-1),d=()=>{e(-1),r(-1),s(0),u(-1)},p=(g,h=!1)=>{g||(g=0),g=Math.abs(g),h||g>Wa&&(g=Wa),s(parseFloat(g.toFixed(2))),h||u(g*100)};return U(bf,g=>{const h=g.getParser();o===h.furniId&&p(h.height,!0)}),we(Re.REQUEST_STACK_HEIGHT,g=>{if(!Hs(Ae(),g.objectId,g.category))return;const h=Y().getRoomObject(g.roomId,g.objectId,g.category);h&&(e(g.objectId),r(g.category),s(h.getLocation().z),u(-1))}),Sn(o!==-1&&n!==-1,g=>{g.id!==o||g.category!==n||d()}),i.exports.useEffect(()=>{if(o===-1||c===-1)return;const g=setTimeout(()=>D(new pi(o,~~c)),10);return()=>clearTimeout(g)},[o,c]),{objectId:o,height:a,maxHeight:Wa,onClose:d,updateHeight:p}},fN=hN,IN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState("0"),[c,u]=i.exports.useState(""),[d,p]=i.exports.useState(""),[g,h]=i.exports.useState(!1),f=()=>{e(-1),r(-1),s("0"),u(""),p(""),h(!1)},E=C=>{C!==a&&(s(C),Y().modifyRoomObjectData(o,n,C,c))},I=C=>{u(C),Y().modifyRoomObjectData(o,n,a,C)},_=()=>Y().deleteRoomObject(o,n);return we(Re.REQUEST_STICKIE,C=>{const b=Y().getRoomObject(C.roomId,C.objectId,C.category);if(!b)return;const N=b.model.getValue(re.FURNITURE_ITEMDATA);if(N.length<6)return;let w=null,O=null;N.indexOf(" ")>0?(w=N.slice(0,N.indexOf(" ")),O=N.slice(N.indexOf(" ")+1,N.length)):w=N,e(C.objectId),r(C.category),s(w||"0"),u(O||""),p(b.type||"post_it"),h(Ae().isRoomOwner||W().isModerator||jt(b))}),Sn(o!==-1&&n!==-1,C=>{C.id!==o||C.category!==n||f()}),{objectId:o,color:a,text:c,type:d,canModify:g,updateColor:E,updateText:I,trash:_,onClose:f}},EN=IN,CN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState("1"),[c,u]=i.exports.useState(""),[d,p]=i.exports.useState(""),[g,h]=i.exports.useState(""),f=()=>{e(-1),r(-1),s("1"),u(""),p(""),h("")};return we(Re.REQUEST_TROPHY,E=>{const I=Y().getRoomObject(E.roomId,E.objectId,E.category);if(!I)return;let _=I.model.getValue(re.FURNITURE_DATA);I.model.getValue(re.FURNITURE_EXTRAS),e(E.objectId),r(E.category),s(I.model.getValue(re.FURNITURE_COLOR)||"1");const C=_.substring(0,_.indexOf("	"));_=_.substring(C.length+1,_.length);const b=_.substring(0,_.indexOf("	")),N=_.substr(b.length+1,_.length);u(C),p(b),h(N)}),Sn(o!==-1&&n!==-1,E=>{E.id!==o||E.category!==n||f()}),{objectId:o,color:a,senderName:c,date:d,message:g,onClose:f}},_N=CN,bN=0,SN=1,NN=2,TN=3,vN=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState(null),[g,h]=i.exports.useState(-1),[f,E]=i.exports.useState(null),[I,_]=i.exports.useState(null),[C,b]=i.exports.useState(!1),N=()=>{e(-1),r(-1),s(null),u(null),p(null),h(-1),E(null),_(null),b(!1)},w=()=>D(new mo(o,bN)),O=()=>D(new mo(o,SN)),y=()=>C&&a&&a.length&&D(new mo(o,NN)),x=()=>C&&a&&a.length&&D(new mo(o,TN)),F=P=>{if(f===P){E(null),D(new Tl(o,""));return}E(P),D(new Tl(o,P))};return we(Re.REQUEST_YOUTUBE,P=>{if(Wr.isRoomPreviewerId(P.roomId))return;const k=Y().getRoomObject(P.roomId,P.objectId,P.category);k&&(e(P.objectId),r(P.category),b(W().hasSecurity(Yo.EMPLOYEE)||jt(k)),D(new Sf(P.objectId)))}),U(Nf,P=>{const k=P.getParser();o===-1||o!==k.furniId||(s(k.videoId),u(k.startAtSeconds),p(k.endAtSeconds),h(k.state))}),U(Tf,P=>{const k=P.getParser();o===-1||o!==k.furniId||(_(k.playlists),E(k.selectedPlaylistId),s(null),h(-1),p(null),u(null))}),U(vf,P=>{const k=P.getParser();if(!(o===-1||o!==k.furniId))switch(k.commandId){case 1:h(kn.PLAYING);break;case 2:h(kn.PAUSED);break}}),Sn(o!==-1&&n!==-1,P=>{P.id!==o||P.category!==n||N()}),{objectId:o,videoId:a,videoStart:c,videoEnd:d,currentVideoState:g,selectedVideo:f,playlists:I,onClose:N,previous:w,next:O,pause:y,play:x,selectVideo:F}},wN=vN,yN=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState([]),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState([]),[d,p]=i.exports.useState(0),[g,h]=i.exports.useState(ce.STUFF_SELECTION_OPTION_NONE),{showConfirm:f=null}=Ze(),E=()=>{const _=C=>{C&&(C instanceof Lu?D(new Of(C.id,n,a,c,d,C.stuffTypeSelectionCode)):C instanceof Mu?D(new kf(C.id,n,a,c,C.stuffTypeSelectionCode)):C instanceof Uu&&D(new Af(C.id,n,a,c,C.stuffTypeSelectionCode)))};D_(o.id)?_(o):f(m("wiredfurni.nonowner.change.confirm.body"),()=>{_(o)},null,null,null,m("wiredfurni.nonowner.change.confirm.title"))},I=(_,C)=>{!o||!g||_<=0||u(b=>{const N=[...b],w=b.indexOf(_);return w>=0?(N.splice(w,1),hs.hide(_)):N.length<o.maximumItemSelectionCount&&(N.push(_),hs.show(_)),N})};return U(wf,_=>{_.getParser(),e(null)}),U(yf,_=>{const C=_.getParser();e(C.definition)}),U(xf,_=>{const C=_.getParser();e(C.definition)}),U(Rf,_=>{const C=_.getParser();e(C.definition)}),i.exports.useEffect(()=>{if(o)return()=>{r([]),s(""),p(0),u(_=>(_&&_.length&&hs.clearSelectionShaderFromFurni(_),[])),h(ce.STUFF_SELECTION_OPTION_NONE)}},[o]),{trigger:o,setTrigger:e,intParams:n,setIntParams:r,stringParam:a,setStringParam:s,furniIds:c,setFurniIds:u,actionDelay:d,setActionDelay:p,setAllowsFurni:h,saveWired:E,selectObjectForWired:I}},ye=()=>dt(yN),xN=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState([]),[d,p]=i.exports.useState(null),[g,h]=i.exports.useState(-1),[f,E]=i.exports.useState(!1),{friends:I=[]}=pn(),{selectObjectForWired:_=null}=ye(),{roomSession:C=null}=We(),b=x=>{s(F=>{const P=[...F];return P.splice(x,1),P})},N=x=>{u(F=>{const P=[...F],k=P.splice(x,1)[0];return d===k&&p(null),P})},w=x=>{p(x),u([])},O=(x,F)=>{const P=ss.getObjectName(x,F);P&&(r(P),F!==Q.UNIT&&u([]))},y=(x,F)=>{let P=null;switch(F){case Q.FLOOR:case Q.WALL:P=ss.getFurniInfo(x,F),P&&_(x,F);break;case Q.UNIT:{const k=C.userDataManager.getUserDataByIndex(x);if(!k)break;switch(k.type){case ft.PET:C.userDataManager.requestPetInfo(k.webID),h(k.webID);break;case ft.USER:P=ss.getUserInfo(F,k);break;case ft.BOT:P=ss.getBotInfo(F,k);break;case ft.RENTABLE_BOT:P=ss.getRentableBotInfo(F,k);break}}}P&&e(P)};return Ke(Pf.USER_DATA_UPDATED,x=>{if(!x.addedUsers.length)return;let F=[];x.addedUsers.forEach(P=>{P.webID!==W().userId&&I.find(k=>k.id===P.webID)&&F.push(new Sd(P.roomIndex,Q.UNIT,P.webID,P.name,P.type,!0))}),F.length&&s(P=>{const k=[...P];return F.forEach(R=>{const A=k.findIndex(G=>G.id===R.id);A>-1&&k.splice(A,1),k.push(R)}),k})}),Ke(Df.PET_INFO,x=>{const F=x.petInfo;if(!F||F.id!==g)return;const P=ss.getPetInfo(F);P&&(e(P),h(-1))}),Ke(Lf.PET_STATUS_UPDATE,x=>{}),we(vl.USE_PRODUCT_FROM_INVENTORY,x=>{}),we(vl.USE_PRODUCT_FROM_ROOM,x=>{const F=Y().getRoomObject(C.roomId,x.objectId,Q.FLOOR);if(!F||!jt(F))return;const P=F.model.getValue(re.FURNITURE_OWNER_ID),k=F.model.getValue(re.FURNITURE_TYPE_ID),R=W().getFloorItemData(k),A=R.customParams.split(" "),G=A.length?parseInt(A[0]):-1;if(G===-1)return;const B=[],H=Y().getRoomObjects(C.roomId,Q.UNIT);for(const X of H){const j=C.userDataManager.getUserDataByIndex(X.id);let de=!1;if(!(!j||j.type!==ft.PET)){if(j.ownerId===P){j.hasSaddle&&R.specialType===Z.PET_SADDLE&&(de=!0);const ie=j.figure.split(" ");if((ie.length?parseInt(ie[0]):-1)===G){if(R.specialType===Z.MONSTERPLANT_REVIVAL&&!j.canRevive||R.specialType===Z.MONSTERPLANT_REBREED&&(j.petLevel<7||j.canRevive||j.canBreed)||R.specialType===Z.MONSTERPLANT_FERTILIZE&&(j.petLevel>=7||j.canRevive))continue;B.push(new xb(j.roomIndex,Q.UNIT,j.name,x.objectId,X.id,-1,de))}}}}p(null),B.length&&u(B)}),we(Ct.REQUEST_MANIPULATION,x=>{Hs(C,x.objectId,x.category)&&E(!0)}),il(x=>{y(x.id,x.category)}),xS(x=>{e(null),u([])}),OS(x=>{o||x.category!==Q.UNIT||O(x.id,x.category)}),RS(x=>{!n||x.category!==Q.UNIT||n.roomIndex!==x.id||r(null)}),ut([Oe.FURNI_REMOVED,Oe.USER_REMOVED],x=>{if(n&&n.category===x.category&&n.roomIndex===x.id&&r(null),x.category===Q.UNIT){let F=a.findIndex(P=>P.roomIndex===x.id);F>-1&&s(P=>P.filter(k=>k.roomIndex===x.id)),F=c.findIndex(P=>P.id===x.id),F>-1&&u(P=>P.filter(k=>k.id!==x.id))}else x.category===Q.FLOOR&&c.findIndex(P=>P.id===x.id)>-1&&u(P=>P.filter(k=>k.requestRoomObjectId!==x.id));o&&(o instanceof bs?o.id===x.id&&e(null):(o instanceof nt||o instanceof Ns||o instanceof Ss)&&o.roomIndex===x.id&&e(null))}),i.exports.useEffect(()=>{o&&(r(null),s([]),u([]))},[o]),i.exports.useEffect(()=>{n&&s([])},[n]),i.exports.useEffect(()=>{C.isDecorating=f},[C,f]),{avatarInfo:o,setAvatarInfo:e,activeNameBubble:n,setActiveNameBubble:r,nameBubbles:a,productBubbles:c,confirmingProduct:d,isDecorating:f,setIsDecorating:E,removeNameBubble:b,removeProductBubble:N,updateConfirmingProduct:w,getObjectName:O}},RN=xN,ON=()=>{const[o,e]=i.exports.useState(""),[n,r]=i.exports.useState(!1),[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),[d,p]=i.exports.useState(!1),[g,h]=i.exports.useState(0),{showNitroAlert:f=null,showConfirm:E=null}=Ze(),{roomSession:I=null}=We(),_=(C,b,N="",w=0)=>{if(C==="")return null;const O=C.split(" ");if(O.length>0){const y=O[0];let x="";if(O.length>1&&(x=O[1]),y.charAt(0)===":"&&x==="x"){const F=Y().selectedAvatarId;if(F>-1){const P=I.userDataManager.getUserDataByIndex(F);P&&(x=P.name,C=C.replace(" x"," "+P.name))}}switch(y.toLowerCase()){case":shake":return yl.init(2500,5e3),yl.turnVisualizationOn(),null;case":rotate":return wl.init(2500,5e3),wl.turnVisualizationOn(),null;case":d":case";d":En()===dn.VIP&&I.sendExpressionMessage(Zn.LAUGH.ordinal);break;case"o/":case"_o/":return I.sendExpressionMessage(Zn.WAVE.ordinal),null;case":kiss":if(En()===dn.VIP)return I.sendExpressionMessage(Zn.BLOW.ordinal),null;break;case":jump":if(En()===dn.VIP)return I.sendExpressionMessage(Zn.JUMP.ordinal),null;break;case":idle":return I.sendExpressionMessage(Zn.IDLE.ordinal),null;case"_b":return I.sendExpressionMessage(Zn.RESPECT.ordinal),null;case":sign":return I.sendSignMessage(parseInt(x)),null;case":iddqd":case":flip":return Y().events.dispatchEvent(new hi(I.roomId,-1,!0)),null;case":zoom":return Y().events.dispatchEvent(new hi(I.roomId,parseFloat(x),!1)),null;case":screenshot":const F=Y().createTextureFromRoom(I.roomId,1),P=new Image;return P.src=nr.generateImageUrl(F),window.open("").document.write(P.outerHTML),null;case":pickall":return(I.isRoomOwner||W().isModerator)&&E(m("room.confirm.pick_all"),()=>{W().sendSpecialCommandMessage(":pickall")},null,null,null,m("generic.alert.title")),null;case":ejectall":return(I.isRoomOwner||W().isModerator||I.controllerLevel>=tt.GUEST)&&E(m("room.confirm.eject_all"),()=>{W().sendSpecialCommandMessage(":ejectall")},null,null,null,m("generic.alert.title")),null;case":furni":return ee("furni-chooser/"),null;case":chooser":return ee("user-chooser/"),null;case":floor":case":bcfloor":return I.controllerLevel>=tt.ROOM_OWNER&&ee("floor-editor/show"),null;case":togglefps":return fr().maxFPS>0?fr().maxFPS=0:fr().maxFPS=K("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return f(),null;case":settings":return(I.isRoomOwner||W().isModerator)&&D(new Fu(I.roomId)),null}}switch(b){case On.CHAT_DEFAULT:I.sendChatMessage(C,w);break;case On.CHAT_SHOUT:I.sendShoutMessage(C,w);break;case On.CHAT_WHISPER:I.sendWhisperMessage(N,C,w);break}};return Ke(wn.FLOOD_EVENT,C=>{p(!0),h(parseFloat(C.message))}),il(C=>{if(C.category!==Q.UNIT)return;const b=I.userDataManager.getUserDataByIndex(C.id);b&&e(b.name)}),we(Ct.DESELECTED,C=>e("")),i.exports.useEffect(()=>{if(!d)return;let C=0;const b=setInterval(()=>{h(N=>(C=(N||0)-1,C)),C<0&&(clearInterval(b),p(!1))},1e3);return()=>clearInterval(b)},[d]),i.exports.useEffect(()=>{if(!c)return;let C=null;return c&&(C=setTimeout(()=>{u(!1),r(!1)},1e4)),()=>clearTimeout(C)},[c]),i.exports.useEffect(()=>{n?a||(s(!0),I.sendChatTypingMessage(n)):a&&(s(!1),I.sendChatTypingMessage(n))},[I,n,a]),{selectedUsername:o,floodBlocked:d,floodBlockedSeconds:g,setIsTyping:r,setIsIdle:u,sendChat:_}},cl=ON,dc=new Map,mc=new Map,gc=new Map,kN=()=>{const[o,e]=i.exports.useState([]),[n,r]=i.exports.useState({mode:_t.CHAT_MODE_FREE_FLOW,weight:_t.CHAT_BUBBLE_WIDTH_NORMAL,speed:_t.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:_t.FLOOD_FILTER_NORMAL}),{roomSession:a=null}=We(),{addChatEntry:s}=ao(),c=i.exports.useRef(!1),u=i.exports.useMemo(()=>{if(!n)return 6e3;switch(n.speed){case _t.CHAT_SCROLL_SPEED_FAST:return 3e3;case _t.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case _t.CHAT_SCROLL_SPEED_SLOW:return 12e3}},[n]),d=h=>{const f=vt().createAvatarImage(h,Fi.LARGE,null,{resetFigure:_=>{c.current||d(_)},dispose:()=>{},disposed:!1});if(!f)return;const E=f.getCroppedImage(jo.HEAD),I=f.getPartColor(ze.CHEST);return dc.set(h,I&&I.rgb||16777215),f.dispose(),mc.set(h,E.src),E.src},p=h=>{let f=mc.get(h);return f||(f=d(h)),f},g=(h,f,E,I=64,_=null)=>{let C=gc.get(h+_);if(C)return C;const b=new Is(h),N=b.typeId,w=Y().getRoomObjectPetImage(N,b.paletteId,b.color,new xt(f*45),I,null,!1,0,b.customParts,_);return w&&(C=nr.generateImageUrl(w.data),gc.set(h+_,C)),C};return Ke(wn.CHAT_EVENT,h=>{const f=Y().getRoomObject(a.roomId,h.objectId,Q.UNIT),E=f?ad(a.roomId,f==null?void 0:f.id,Q.UNIT):new vr,I=f?a.userDataManager.getUserDataByIndex(h.objectId):new Mf(-1);let _="",C=0,b=null,N=h.chatType,w=h.style,O=0,y=h.message;if(I){O=I.type;const k=I.figure;switch(O){case ft.PET:b=g(k,2,!0,64,f.model.getValue(re.FIGURE_POSTURE)),new Is(k).typeId;break;case ft.USER:b=p(k);break;case ft.RENTABLE_BOT:case ft.BOT:w=Bf.BOT;break}C=dc.get(k),_=I.name}switch(N){case wn.CHAT_TYPE_RESPECT:y=m("widgets.chatbubble.respect",["username"],[_]),K("respect.options").enabled&&sr(K("respect.options").sound);break;case wn.CHAT_TYPE_PETREVIVE:case wn.CHAT_TYPE_PET_REBREED_FERTILIZE:case wn.CHAT_TYPE_PET_SPEED_FERTILIZE:{let k="widget.chatbubble.petrevived";N===wn.CHAT_TYPE_PET_REBREED_FERTILIZE?k="widget.chatbubble.petrefertilized;":N===wn.CHAT_TYPE_PET_SPEED_FERTILIZE&&(k="widget.chatbubble.petspeedfertilized");let R=null;if(Y().getRoomObject(a.roomId,h.extraParam,Q.UNIT)){const G=a.userDataManager.getUserDataByIndex(f.id);G&&(R=G.name)}y=m(k,["petName","userName"],[_,R]);break}case wn.CHAT_TYPE_PETRESPECT:y=m("widget.chatbubble.petrespect",["petname"],[_]);break;case wn.CHAT_TYPE_PETTREAT:y=m("widget.chatbubble.pettreat",["petname"],[_]);break;case wn.CHAT_TYPE_HAND_ITEM_RECEIVED:y=m("widget.chatbubble.handitem",["username","handitem"],[_,m("handitem"+h.extraParam)]);break;case wn.CHAT_TYPE_MUTE_REMAINING:{const k=(h.extraParam>0?Math.floor(h.extraParam/3600):0).toString(),R=(h.extraParam>0?Math.floor(h.extraParam%3600/60):0).toString(),A=(h.extraParam%60).toString();y=m("widget.chatbubble.mutetime",["hours","minutes","seconds"],[k,R,A]);break}}const x=Z_(y),F=C&&("#"+C.toString(16).padStart(6,"0")||null),P=new vd(I.roomIndex,Q.UNIT,a.roomId,y,x,_,new vr(E.x,E.y),N,w,b,F);e(k=>[...k,P]),s({id:-1,webId:I.webID,entityId:I.roomIndex,name:_,imageUrl:b,style:w,chatType:N,entityType:I.type,message:x,timestamp:gd(),type:Pn.TYPE_CHAT,roomId:a.roomId,color:F})}),we(Uf.ROOM_DRAG,h=>{if(!o.length||h.roomId!==a.roomId)return;const f=h.offsetX;o.forEach(E=>E.elementRef&&(E.left+=f))}),U(ws,h=>{const f=h.getParser();f.roomEnter&&r(f.chat)}),U(Ff,h=>{const f=h.getParser();r(f.chat)}),i.exports.useEffect(()=>(c.current=!1,()=>{c.current=!0}),[]),{chatMessages:o,setChatMessages:e,chatSettings:n,getScrollSpeed:u}},AN=kN,PN=()=>{const[o,e]=i.exports.useState([]),n=s=>{o.indexOf(s)>=0||e([...o,s])},r=s=>{const c=o.indexOf(s);if(c===-1)return;const u=[...o];u.splice(c,1),e(u)},a=(s,c)=>{Ae().sendDoorbellApprovalMessage(s,c),r(s)};return Ke(Aa.DOORBELL,s=>n(s.userName)),Ke(Aa.RSDE_REJECTED,s=>r(s.userName)),Ke(Aa.RSDE_ACCEPTED,s=>r(s.userName)),{users:o,addUser:n,removeUser:r,answer:a}},DN=PN,LN=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(!1),a=()=>r(!1);return U(Gf,s=>{const c=s.getParser();r(!0),e(c.words)}),{wordsFilter:o,isVisible:n,setWordsFilter:e,onClose:a}},MN=LN,UN=()=>{const[o,e]=i.exports.useState([]),{requests:n=[],dismissedRequestIds:r=[],setDismissedRequestIds:a=null}=pn(),s=i.exports.useMemo(()=>o.filter(u=>r.indexOf(u.request.requesterUserId)===-1),[o,r]),c=u=>{a(d=>{if(d.indexOf(u)>=0)return d;const p=[...d];return p.push(u),p})};return $d(!0,u=>{if(u.category!==Q.UNIT)return;const d=Ae().userDataManager.getUserDataByIndex(u.id);if(!d||d.type!==xl.getTypeNumber(xl.USER))return;const p=n.find(h=>h.requesterUserId===d.webID);if(!p||o.find(h=>h.request.requesterUserId===d.webID))return;const g=[...o];g.push({roomIndex:d.roomIndex,request:p}),e(g)}),Kd(!0,u=>{if(u.category!==Q.UNIT)return;const d=o.findIndex(g=>g.roomIndex===u.id);if(d===-1)return;const p=[...o];p.splice(d,1),e(p)}),i.exports.useEffect(()=>{const u=[];for(const d of n){const p=Ae().userDataManager.getUserData(d.requesterUserId);p&&u.push({roomIndex:p.roomIndex,request:d})}e(u)},[n]),{displayedRequests:s,hideFriendRequest:c}},FN=UN,BN=()=>{const[o,e]=i.exports.useState(null),{roomSession:n=null}=We(),r=()=>e(null),a=c=>c&&Y().selectRoomObject(Ae().roomId,c.id,c.category),s=()=>{const c=W(),u=Y().getRoomObjects(n.roomId,Q.WALL),d=Y().getRoomObjects(n.roomId,Q.FLOOR),p=u.map(h=>{if(h.id<0)return null;let f=h.type;if(f.startsWith("poster"))f=m(`poster_${f.replace("poster","")}_name`);else{const E=h.model.getValue(re.FURNITURE_TYPE_ID),I=c.getWallItemData(E);I&&I.name.length&&(f=I.name)}return new ds(h.id,Q.WALL,f)}),g=d.map(h=>{if(h.id<0)return null;let f=h.type;const E=h.model.getValue(re.FURNITURE_TYPE_ID),I=c.getFloorItemData(E);return I&&I.name.length&&(f=I.name),new ds(h.id,Q.FLOOR,f)});e([...p,...g].sort((h,f)=>h.name<f.name?-1:1))};return yS(!!o,c=>{if(c.id<0)return;const u=Y().getRoomObject(Ae().roomId,c.id,c.category);if(!u)return;let d=null;switch(c.category){case Q.WALL:{let p=u.type;if(p.startsWith("poster"))p=m(`poster_${p.replace("poster","")}_name`);else{const g=u.model.getValue(re.FURNITURE_TYPE_ID),h=W().getWallItemData(g);h&&h.name.length&&(p=h.name)}d=new ds(u.id,Q.WALL,p);break}case Q.FLOOR:{let p=u.type;const g=u.model.getValue(re.FURNITURE_TYPE_ID),h=W().getFloorItemData(g);h&&h.name.length&&(p=h.name),d=new ds(u.id,Q.FLOOR,p)}}e(p=>[...p,d].sort((g,h)=>g.name<h.name?-1:1))}),Sn(!!o,c=>{c.id<0||e(u=>{const d=[...u];for(let p=0;p<d.length;p++){const g=d[p];if(!(g.id!==c.id||g.category!==c.category)){d.splice(p,1);break}}return d})}),{items:o,onClose:r,selectItem:a,populateChooser:s}},GN=BN,VN=()=>{const[o,e]=i.exports.useState(!1),[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(""),[d,p]=i.exports.useState(""),g=()=>{p(""),u(""),s(""),r(-1),e(!1)},h=()=>{D(new Vf(n,c))},f=I=>{u(I),d.length>0&&p("")},E=I=>{if(!(!I||I===0))switch(I){case 1:return m("catalog.alert.petname.long");case 2:return m("catalog.alert.petname.short");case 3:return m("catalog.alert.petname.chars");case 4:default:return m("catalog.alert.petname.bobba")}};return Ke(Rl.RSOPPE_OPEN_PET_PACKAGE_REQUESTED,I=>{if(!I)return;const _=Y().getRoomObject(I.session.roomId,I.objectId,Q.FLOOR);r(I.objectId),s(_.type),e(!0)}),Ke(Rl.RSOPPE_OPEN_PET_PACKAGE_RESULT,I=>{I&&(I.nameValidationStatus===0&&g(),I.nameValidationStatus!==0&&p(E(I.nameValidationStatus)))}),{isVisible:o,errorResult:d,petName:c,objectType:a,onChangePetName:f,onConfirm:h,onClose:g}},HN=VN,WN=()=>{const{roomSession:o=null}=We(),e=a=>o.sendPollStartMessage(a),n=a=>o.sendPollRejectMessage(a),r=(a,s,c)=>o.sendPollAnswerMessage(a,s,c);return Ke(Pa.OFFER,a=>{const s=new gr(gr.OFFER,a.id);s.summary=a.summary,s.headline=a.headline,Tt(s)}),Ke(Pa.ERROR,a=>{const s=new gr(gr.ERROR,a.id);s.summary=a.summary,s.headline=a.headline,Tt(s)}),Ke(Pa.CONTENT,a=>{const s=new gr(gr.CONTENT,a.id);s.startMessage=a.startMessage,s.endMessage=a.endMessage,s.numQuestions=a.numQuestions,s.questionArray=a.questionArray,s.npsPoll=a.npsPoll,Tt(s)}),{startPoll:e,rejectPoll:n,answerPoll:r}},jN=WN,qN=()=>{const[o,e]=i.exports.useState(null);We();const n=()=>e(null),r=s=>s&&Y().selectRoomObject(Ae().roomId,s.id,s.category),a=()=>{const s=Ae(),c=Y().getRoomObjects(s.roomId,Q.UNIT);e(c.map(u=>{if(u.id<0)return null;const d=s.userDataManager.getUserDataByIndex(u.id);return d?new ds(d.roomIndex,Q.UNIT,d.name):null}).sort((u,d)=>u.name<d.name?-1:1))};return $d(!!o,s=>{if(s.id<0)return;const c=Ae().userDataManager.getUserDataByIndex(s.id);c&&e(u=>{const d=[...u];return d.push(new ds(c.roomIndex,Q.UNIT,c.name)),d.sort((p,g)=>p.name<g.name?-1:1),d})}),Kd(!!o,s=>{s.id<0||e(c=>{const u=[...c];for(let d=0;d<u.length;d++){const p=u[d];if(!(p.id!==s.id||p.category!==s.category)){u.splice(d,1);break}}return u})}),{items:o,onClose:n,selectItem:r,populateChooser:a}},zN=qN,pc=4e3,YN=3,$N=()=>{const[o,e]=i.exports.useState(-1),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState(new Map),[g,h]=i.exports.useState(new Map),{answerPoll:f=null}=jN(),{roomSession:E=null}=We(),I=()=>{e(-1),r(null)},_=C=>{a||!n||(f(o,n.id,[C]),s(!0))};return Ke(Da.ANSWERED,C=>{const b=E.userDataManager.getUserData(C.userId);b&&(p(C.answerCounts),h(N=>{if(!N.has(b.roomIndex)){const w=new Map(g);return w.set(b.roomIndex,{value:C.value,secondsLeft:YN}),w}return N}),Y().updateRoomObjectUserGesture(E.roomId,b.roomIndex,ms.getGestureId(C.value==="0"?ms.GESTURE_SAD:ms.GESTURE_SMILE)))}),Ke(Da.FINISHED,C=>{n&&n.id===C.questionId&&(p(C.answerCounts),s(!0),u(b=>(b&&clearTimeout(b),setTimeout(()=>I(),pc)))),h(new Map)}),Ke(Da.QUESTION,C=>{e(C.id),r(C.question),s(!1),p(new Map),h(new Map),u(b=>{if(b&&clearTimeout(b),C.duration>0){const N=C.duration<1e3?pc:C.duration;return setTimeout(()=>I(),N)}return null})}),i.exports.useEffect(()=>{const C=()=>{h(N=>{const w=[];if(N.forEach((y,x)=>{y.secondsLeft--,y.secondsLeft<=0&&w.push(x)}),w.length===0)return N;const O=new Map(N);return w.forEach(y=>O.delete(y)),O})},b=setInterval(()=>C(),1e3);return()=>clearInterval(b)},[]),i.exports.useEffect(()=>()=>{u(C=>(C&&clearTimeout(C),null))},[]),{question:n,answerSent:a,answerCounts:d,userAnswers:g,vote:_}},KN=$N,XN=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(0),[d,p]=i.exports.useState(0),[g,h]=Ea("nitro.screensize",{width:window.innerWidth,height:window.innerHeight}),f=_=>{s(_),D(new Wf(_))},E=_=>{W().giveRespect(_),u(W().respectsLeft)},I=_=>{W().givePetRespect(_),p(W().respectsPetLeft)};return U(Au,_=>{const C=_.getParser();e(C.userInfo),r(C.userInfo.figure),u(C.userInfo.respectsRemaining),p(C.userInfo.respectsPetRemaining)}),U(Hf,_=>{const C=_.getParser();r(C.figure)}),U(Bu,_=>{const C=_.getParser();s(C.chatType)}),i.exports.useEffect(()=>{const _=$o("nitro.screensize");if(_&&(_.width!==window.innerWidth||_.height!==window.innerHeight)){let b=window.localStorage.length;for(;b>0;){const N=window.localStorage.key(b);N&&N.startsWith("nitro.window")&&window.localStorage.removeItem(N),b--}}const C=b=>h({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}},[h]),{userInfo:o,userFigure:n,chatStyleId:a,userRespectRemaining:c,petRespectRemaining:d,respectUser:E,respectPet:I,updateChatStyleId:f}},zn=()=>dt(XN),QN=o=>i.exports.useEffect(o,[]),Jd=o=>QN(()=>o()),Zd=o=>{const{achievement:e=null,scale:n=1,...r}=o;return e?t(Ye,{badgeCode:un.getAchievementBadgeCode(e),isGrayscale:!un.getAchievementHasStarted(e),scale:n,...r}):null},JN=o=>{const{achievement:e=null}=o,{selectedAchievement:n=null,setSelectedAchievementId:r=null}=Ia();return e?t(Ne,{itemActive:n===e,itemUnseen:e.unseen>0,onClick:a=>r(e.achievementId),children:t(Zd,{achievement:e})}):null},ZN=o=>{const{achievements:e=null}=o;return t(Ge,{columnCount:6,columnMinWidth:50,columnMinHeight:50,children:e&&e.length>0&&e.map((n,r)=>t(JN,{achievement:n},r))})},eT=o=>{const{achievement:e=null}=o;return e?l(v,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",children:[l(T,{center:!0,gap:1,children:[t(Zd,{className:"nitro-achievements-badge-image",achievement:e,scale:2}),t(S,{fontWeight:"bold",children:m("achievements.details.level",["level","limit"],[un.getAchievementLevel(e).toString(),e.levelCount.toString()])})]}),l(T,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[l(T,{gap:1,children:[t(S,{fontWeight:"bold",truncate:!0,children:eo(un.getAchievementBadgeCode(e))}),t(S,{textBreak:!0,children:zi(un.getAchievementBadgeCode(e))})]}),(e.levelRewardPoints>0||e.scoreLimit>0)&&l(T,{gap:1,children:[e.levelRewardPoints>0&&l(v,{alignItems:"center",gap:1,children:[t(S,{truncate:!0,className:"small",children:m("achievements.details.reward")}),l(v,{center:!0,className:"fw-bold small",gap:1,children:[e.levelRewardPoints,t(ct,{type:e.levelRewardPointType})]})]}),e.scoreLimit>0&&t(rl,{text:m("achievements.details.progress",["progress","limit"],[(e.currentPoints+e.scoreAtStartOfLevel).toString(),(e.scoreLimit+e.scoreAtStartOfLevel).toString()]),progress:e.currentPoints+e.scoreAtStartOfLevel,maxProgress:e.scoreLimit+e.scoreAtStartOfLevel})]})]})]}):null},tT=o=>{const{category:e=null}=o,{selectedAchievement:n=null,setSelectedAchievementId:r=null}=Ia();return i.exports.useEffect(()=>{var a,s;e&&(n||r((s=(a=e==null?void 0:e.achievements)==null?void 0:a[0])==null?void 0:s.achievementId))},[e,n,r]),e?l(T,{fullHeight:!0,justifyContent:"between",children:[t(ZN,{achievements:e.achievements}),!!n&&t(eT,{achievement:n})]}):null},nT=o=>{const{category:e=null,selectedCategoryCode:n=null,setSelectedCategoryCode:r=null}=o;if(!e)return null;const a=un.getAchievementCategoryProgress(e),s=un.getAchievementCategoryMaxProgress(e),c=un.getAchievementCategoryImageUrl(e,a),u=un.getAchievementCategoryTotalUnseen(e);return l(Ne,{itemActive:n===e.code,itemCount:u,itemCountMinimum:0,gap:1,onClick:d=>r(e.code),children:[t(S,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:m(`quests.${e.code}.name`)}),t(kd,{position:"relative",imageUrl:c,children:l(S,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[a," / ",s]})})]})},rT=o=>{const{categories:e=null,selectedCategoryCode:n=null,setSelectedCategoryCode:r=null}=o;return t(Ge,{columnCount:3,columnMinWidth:90,columnMinHeight:100,children:e&&e.length>0&&e.map((a,s)=>t(nT,{category:a,selectedCategoryCode:n,setSelectedCategoryCode:r},s))})},sT=o=>{const[e,n]=i.exports.useState(!1),{achievementCategories:r=[],selectedCategoryCode:a=null,setSelectedCategoryCode:s=null,achievementScore:c=0,getProgress:u=0,getMaxProgress:d=0,selectedCategory:p=null}=Ia();return i.exports.useEffect(()=>{const g={linkReceived:h=>{const f=h.split("/");if(!(f.length<2))switch(f[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(E=>!E);return}},eventUrlPrefix:"achievements/"};return It(g),()=>Et(g)},[]),e?l(ae,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[t(oe,{headerText:m("inventory.achievements"),onCloseClick:g=>n(!1)}),p&&l(Od,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[t(L,{onClick:g=>s(null),className:"nitro-achievements-back-arrow"}),l(T,{grow:!0,gap:0,children:[t(S,{fontSize:4,fontWeight:"bold",className:"text-small",children:m(`quests.${p.code}.name`)}),t(S,{children:m("achievements.details.categoryprogress",["progress","limit"],[p.getProgress().toString(),p.getMaxProgress().toString()])})]}),t(or,{imageUrl:un.getAchievementCategoryImageUrl(p,null,!0)})]}),l(se,{gap:1,children:[!p&&l(V,{children:[t(rT,{categories:r,selectedCategoryCode:a,setSelectedCategoryCode:s}),l(T,{grow:!0,justifyContent:"end",gap:1,children:[t(S,{small:!0,center:!0,children:m("achievements.categories.score",["score"],[c.toString()])}),t(rl,{text:m("achievements.categories.totalprogress",["progress","limit"],[u.toString(),d.toString()]),progress:u,maxProgress:d})]})]}),p&&t(tT,{category:p})]})]}):null},xr=o=>{const{icon:e=null,selected:n=!1,classNames:r=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["nitro-avatar-editor-spritesheet"];return e&&e.length&&u.push(e+"-icon"),n&&u.push("selected"),r.length&&u.push(...r),u},[e,n,r]);return t(L,{classNames:c,...s})},oT=o=>{const{figureData:e=null}=o,[n,r]=i.exports.useState(-1),a=s=>{s<go.MIN_DIRECTION&&(s=go.MAX_DIRECTION+(s+1)),s>go.MAX_DIRECTION&&(s=s-(go.MAX_DIRECTION+1)),e.direction=s};return i.exports.useEffect(()=>{if(e)return e.notify=()=>r(s=>s+1),()=>{e.notify=null}},[e]),l(T,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[t(ot,{figure:e.getFigureString(),direction:e.direction,scale:2}),t(xr,{className:"avatar-spotlight",icon:"spotlight"}),t(L,{className:"avatar-shadow"}),l(L,{className:"arrow-container",children:[t(xr,{pointer:!0,icon:"arrow-left",onClick:s=>a(e.direction+1)}),t(xr,{pointer:!0,icon:"arrow-right",onClick:s=>a(e.direction-1)})]})]})},aT=o=>{const{partItem:e=null,children:n=null,...r}=o,[a,s]=i.exports.useState(-1),c=K("hc.disabled",!1);return i.exports.useEffect(()=>{const u=()=>s(d=>d+1);return e.notify=u,()=>e.notify=null},[e]),l(Ne,{itemImage:e.isClear?void 0:e.imageUrl,itemActive:e.isSelected,...r,children:[!c&&e.isHC&&t(ct,{className:"position-absolute end-1 bottom-1",type:"hc"}),e.isClear&&t(xr,{icon:"clear"}),e.isSellable&&t(xr,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),n]})},iT=o=>{const{model:e=null,category:n=null,setMaxPaletteCount:r=null}=o,a=i.exports.useRef(null),s=i.exports.useCallback(c=>{const u=n.parts.indexOf(c);if(u===-1)return;e.selectPart(n.name,u);const d=n.getCurrentPart();r(d.maxColorIndex||1)},[e,n,r]);return i.exports.useEffect(()=>{!e||!n||!a||!a.current||(a.current.scrollTop=0)},[e,n]),t(Ge,{innerRef:a,columnCount:3,columnMinHeight:50,children:n.parts.length>0&&n.parts.map((c,u)=>t(aT,{partItem:c,onClick:d=>s(c)},u))})},lT=o=>{const{colorItem:e=null,children:n=null,...r}=o,[a,s]=i.exports.useState(-1),c=K("hc.disabled",!1);return i.exports.useEffect(()=>{const u=()=>s(d=>d+1);return e.notify=u,()=>e.notify=null},[e]),l(Ne,{itemHighlight:!0,itemColor:e.color,itemActive:e.isSelected,className:"clear-bg",...r,children:[!c&&e.isHC&&t(ct,{className:"position-absolute end-1 bottom-1",type:"hc"}),n]})},hc=o=>{const{model:e=null,category:n=null,paletteSet:r=[],paletteIndex:a=-1}=o,s=i.exports.useRef(null),c=i.exports.useCallback(u=>{const d=r.indexOf(u);d!==-1&&e.selectColor(n.name,d,a)},[e,n,r,a]);return i.exports.useEffect(()=>{!e||!n||!s||!s.current||(s.current.scrollTop=0)},[e,n]),t(Ge,{innerRef:s,gap:1,columnCount:5,columnMinWidth:30,children:r.length>0&&r.map((u,d)=>t(lT,{colorItem:u,onClick:p=>c(u)},d))})},cT=o=>{const{model:e=null,gender:n=null,setGender:r=null}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(1),d=i.exports.useCallback(p=>{const g=e.categories.get(p);if(g){g.init(),s(g);for(const h of g.parts)if(!(!h||!h.isSelected)){u(h.maxColorIndex||1);break}}},[e]);return i.exports.useEffect(()=>{e.init();for(const p of e.categories.keys()){d(p);break}},[e,d]),!e||!a?null:l(te,{children:[l(T,{size:2,children:[e.canSetGender&&l(V,{children:[t(v,{center:!0,pointer:!0,className:"category-item",onClick:p=>r(ue.MALE),children:t(xr,{icon:"male",selected:n===ue.MALE})}),t(v,{center:!0,pointer:!0,className:"category-item",onClick:p=>r(ue.FEMALE),children:t(xr,{icon:"female",selected:n===ue.FEMALE})})]}),!e.canSetGender&&e.categories&&e.categories.size>0&&Array.from(e.categories.keys()).map(p=>{const g=e.categories.get(p);return t(v,{center:!0,pointer:!0,className:"category-item",onClick:h=>d(p),children:t(xr,{icon:g.name,selected:a===g})},p)})]}),t(T,{size:5,overflow:"hidden",children:t(iT,{model:e,category:a,setMaxPaletteCount:u})}),l(T,{size:5,overflow:"hidden",children:[c>=1&&t(hc,{model:e,category:a,paletteSet:a.getPalette(0),paletteIndex:0}),c===2&&t(hc,{model:e,category:a,paletteSet:a.getPalette(1),paletteIndex:1})]})]})},uT=o=>{const{figureData:e=null,savedFigures:n=[],setSavedFigures:r=null,loadAvatarInEditor:a=null}=o,s=K("hc.disabled",!1),c=i.exports.useCallback(p=>{if(p>=n.length||p<0)return;const[g,h]=n[p];a(g.getFigureString(),h)},[n,a]),u=i.exports.useCallback(p=>{if(!e||p>=n.length||p<0)return;const g=[...n],h=e.getFigureString(),f=e.gender;g[p]=[vt().createFigureContainer(h),f],r(g),D(new jf(p+1,h,f))},[e,n,r]),d=i.exports.useMemo(()=>{if(!n||!n.length)return[];const p=[];return n.forEach(([g,h],f)=>{let E=0;g&&(E=vt().getFigureClubLevel(g,h)),p.push(l(Ne,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[g&&t(ot,{figure:g.getFigureString(),gender:h,direction:2}),t(L,{className:"avatar-shadow"}),!s&&E>0&&t(ct,{className:"position-absolute top-1 start-1",type:"hc"}),l(v,{gap:1,className:"button-container",children:[t(M,{variant:"link",fullWidth:!0,onClick:I=>u(f),children:m("avatareditor.wardrobe.save")}),g&&t(M,{variant:"link",fullWidth:!0,onClick:I=>c(f),disabled:E>En(),children:m("generic_usable.button.use")})]})]},f))}),p},[n,s,u,c]);return t(Ge,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:d})},dT="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",mT="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",gT=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState([]),[E,I]=i.exports.useState([]),[_,C]=i.exports.useState([]),[b,N]=i.exports.useState(!1),[w,O]=i.exports.useState(null),[y,x]=i.exports.useState(null),[F,P]=i.exports.useState(!0),[k,R]=i.exports.useState(!1),A=i.exports.useMemo(()=>K("avatar.wardrobe.max.slots",10),[]);U(qf,ie=>{const ne=ie.getParser();f(ne.figureSetIds),I(ne.boundsFurnitureNames)}),U(zf,ie=>{const ne=ie.getParser(),xe=[];let Ee=0;for(;Ee<A;)xe.push([null,null]),Ee++;for(let[Me,[it,Be]]of ne.looks.entries()){const Lt=vt().createFigureContainer(it);xe[Me-1]=[Lt,Be]}C(xe)});const G=i.exports.useCallback(ie=>{u&&g(u.get(ie))},[u]),B=i.exports.useCallback(()=>{const ie=new Map;ie.set(pr.GENERIC,new G_),ie.set(pr.HEAD,new ob),ie.set(pr.TORSO,new ib),ie.set(pr.LEGS,new ab),d(ie)},[]),H=i.exports.useCallback(()=>{const ie=new Map,ne=new ue,xe=new ue;ne.loadAvatarData(dT,ue.MALE),xe.loadAvatarData(mT,ue.FEMALE),ie.set(ue.MALE,ne),ie.set(ue.FEMALE,xe),a(ie),c(ie.get(ue.MALE))},[]),X=i.exports.useCallback((ie,ne,xe=!0)=>{ne=ht.getGender(ne);let Ee=s;ne!==Ee.gender&&(Ee=r.get(ne)),ie!==Ee.getFigureString()&&Ee.loadAvatarData(ie,ne),Ee!==s&&c(Ee),xe&&(O(s.getFigureString()),x(s.gender))},[r,s]),j=i.exports.useCallback(ie=>{switch(ie){case xn.ACTION_CLEAR:X(s.getFigureStringWithFace(0,!1),s.gender,!1),B();return;case xn.ACTION_RESET:X(w,y),B();return;case xn.ACTION_RANDOMIZE:const ne=sb(s,s.gender,En(),h,[ue.FACE]);X(ne,s.gender,!1),B();return;case xn.ACTION_SAVE:D(new Gu(s.gender,s.getFigureString())),n(!1);return}},[s,w,y,h,X,B]),de=i.exports.useCallback(ie=>{ie=ht.getGender(ie),c(r.get(ie))},[r]);return i.exports.useEffect(()=>{const ie={linkReceived:ne=>{const xe=ne.split("/");if(!(xe.length<2))switch(xe[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(Ee=>!Ee);return}},eventUrlPrefix:"avatar-editor/"};return It(ie),()=>Et(ie)},[]),i.exports.useEffect(()=>{C(new Array(A))},[A]),i.exports.useEffect(()=>{b&&(g(null),D(new Yf))},[b]),i.exports.useEffect(()=>{p&&N(!1)},[p]),i.exports.useEffect(()=>{u&&G(pr.GENERIC)},[u,G]),i.exports.useEffect(()=>{if(s)return ht.CURRENT_FIGURE=s,B(),()=>ht.CURRENT_FIGURE=null},[s,B]),i.exports.useEffect(()=>(ht.FIGURE_SET_IDS=h,ht.BOUND_FURNITURE_NAMES=E,B(),()=>{ht.FIGURE_SET_IDS=null,ht.BOUND_FURNITURE_NAMES=null}),[h,E,B]),i.exports.useEffect(()=>{if(e&&!r){H(),R(!0);return}},[e,r,H]),i.exports.useEffect(()=>{!e||!k||!F||(X(W().figure,W().gender),P(!1))},[e,k,F,X]),i.exports.useEffect(()=>{if(!e)return()=>{P(!0)}},[e]),!e||!s?null:l(ae,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[t(oe,{headerText:m("avatareditor.title"),onCloseClick:ie=>n(!1)}),l(Er,{children:[u&&u.size>0&&Array.from(u.keys()).map(ie=>{const ne=p&&p.name===ie;return t(qn,{isActive:ne,onClick:xe=>G(ie),children:m(`avatareditor.category.${ie}`)},ie)}),t(qn,{isActive:b,onClick:ie=>N(!0),children:m("avatareditor.category.wardrobe")})]}),t(se,{children:l(te,{children:[l(T,{size:9,overflow:"hidden",children:[p&&!b&&t(cT,{model:p,gender:s.gender,setGender:de}),b&&t(uT,{figureData:s,savedFigures:_,setSavedFigures:C,loadAvatarInEditor:X})]}),l(T,{size:3,overflow:"hidden",children:[t(oT,{figureData:s}),l(T,{grow:!0,gap:1,children:[l(tr,{children:[t(M,{variant:"secondary",onClick:ie=>j(xn.ACTION_RESET),children:t(xm,{className:"fa-icon"})}),t(M,{variant:"secondary",onClick:ie=>j(xn.ACTION_CLEAR),children:t(Di,{className:"fa-icon"})}),t(M,{variant:"secondary",onClick:ie=>j(xn.ACTION_RANDOMIZE),children:t(Rm,{className:"fa-icon"})})]}),t(M,{className:"w-100",variant:"success",onClick:ie=>j(xn.ACTION_SAVE),children:m("avatareditor.save")})]})]})]})})]})},pT=5,hT=o=>{const{onClose:e=null,onEdit:n=null,onDelete:r=null}=o,{cameraRoll:a=null,setCameraRoll:s=null,selectedPictureIndex:c=-1,setSelectedPictureIndex:u=null}=Ld(),{simpleAlert:d=null}=Ze(),p=i.exports.useRef(),g=c>-1?a[c]:null,h=()=>{if(!p||!p.current)return null;const E=p.current.getBoundingClientRect();return new bu(Math.floor(E.x),Math.floor(E.y),Math.floor(E.width),Math.floor(E.height))},f=()=>{if(c>-1){u(-1);return}const E=Y().createTextureFromRoom(Ae().roomId,1,h()),I=[...a];I.length>=pT&&(d(m("camera.full.body")),I.pop()),sr(mn.CAMERA_SHUTTER),I.push(new lb(E,nr.generateImageUrl(E))),s(I)};return t(Or,{uniqueKey:"nitro-camera-capture",children:l(T,{center:!0,className:"nitro-camera-capture",gap:0,children:[g&&t("img",{alt:"",className:"camera-area",src:g.imageUrl}),l("div",{className:"camera-canvas drag-handler",children:[t("div",{className:"position-absolute header-close",onClick:e,children:t(_n,{className:"fa-icon"})}),!g&&t("div",{ref:p,className:"camera-area camera-view-finder"}),g&&t("div",{className:"camera-area camera-frame",children:l("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[t("button",{className:"btn btn-success me-3",title:m("camera.editor.button.tooltip"),onClick:n,children:m("camera.editor.button.text")}),t("button",{className:"btn btn-danger",onClick:r,children:m("camera.delete.button.text")})]})}),t("div",{className:"d-flex justify-content-center",children:t("div",{className:"camera-button",title:m("camera.take.photo.button.tooltip"),onClick:f})})]}),a.length>0&&t(v,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:a.map((E,I)=>t("img",{alt:"",src:E.imageUrl,onClick:_=>u(I)},I))})]})})},fT=o=>{const{base64Url:e=null,onCloseClick:n=null,onCancelClick:r=null,price:a=null}=o,[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(0),[h,f]=i.exports.useState(!1),[E,I]=i.exports.useState(!1),[_,C]=i.exports.useState(0),b=i.exports.useMemo(()=>K("camera.publish.disabled",!1),[]);U($f,w=>{g(O=>O+1),I(!1)}),U(Kf,w=>{const O=w.getParser();d(O.extraDataId),C(O.secondsToWait),f(O.ok),I(!1)}),U(Xf,w=>{const O=w.getParser();c(K("camera.url")+"/"+O.url)});const N=(w,O=null)=>{switch(w){case"close":n();return;case"buy":if(E)return;I(!0),D(new Jf(""));return;case"publish":if(E)return;I(!0),D(new Qf);return;case"cancel":r();return}};return i.exports.useEffect(()=>{e&&Y().saveBase64AsScreenshot(e)},[e]),a?l(ae,{className:"nitro-camera-checkout",theme:"primary-slim",children:[t(oe,{headerText:m("camera.confirm_phase.title"),onCloseClick:w=>N("close")}),l(se,{children:[l(v,{center:!0,children:[s&&s.length&&t(or,{className:"picture-preview border",imageUrl:s}),(!s||!s.length)&&t(v,{center:!0,className:"picture-preview border",children:t(S,{bold:!0,children:m("camera.loading")})})]}),l(v,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(T,{size:b?10:6,gap:1,children:[t(S,{bold:!0,children:m("camera.purchase.header")}),(a.credits>0||a.duckets>0)&&l(v,{gap:1,children:[t(S,{children:m("catalog.purchase.confirmation.dialog.cost")}),a.credits>0&&l(v,{gap:1,children:[t(S,{bold:!0,children:a.credits}),t(ct,{type:-1})]}),a.duckets>0&&l(v,{gap:1,children:[t(S,{bold:!0,children:a.duckets}),t(ct,{type:5})]})]}),p>0&&l(S,{children:[t(S,{bold:!0,children:m("camera.purchase.count.info")})," ",p,t("u",{className:"ms-1 cursor-pointer",onClick:()=>ee("inventory/toggle"),children:m("camera.open.inventory")})]})]}),t(v,{alignItems:"center",children:t(M,{variant:"success",disabled:E,onClick:w=>N("buy"),children:m(p?"camera.buy.another.button.text":"buy")})})]}),!b&&l(v,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m(h?"camera.publish.successful":"camera.publish.explanation")}),t(S,{children:m(h?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),h&&t("a",{href:u,rel:"noreferrer",target:"_blank",children:m("camera.link.to.published")}),!h&&a.publishDucketPrice>0&&l(v,{gap:1,children:[t(S,{children:m("catalog.purchase.confirmation.dialog.cost")}),l(v,{gap:1,children:[t(S,{bold:!0,children:a.publishDucketPrice}),t(ct,{type:5})]})]}),_>0&&t("div",{className:"mt-1 text-center fw-bold",children:m("camera.publish.wait",["minutes"],[Math.ceil(_/60).toString()])})]}),!h&&t(v,{className:"d-flex align-items-end",children:t(M,{variant:"success",disabled:E||_>0,onClick:w=>N("publish"),children:m("camera.publish.button.text")})})]}),t(S,{center:!0,children:m("camera.warning.disclaimer")}),t(v,{justifyContent:"end",children:t(M,{onClick:w=>N("cancel"),children:m("generic.cancel")})})]})]}):null},IT=o=>{const{effect:e=null,thumbnailUrl:n=null,isActive:r=!1,isLocked:a=!1,selectEffect:s=null,removeEffect:c=null}=o;return l(Ne,{title:m(a?`camera.effect.required.level ${e.minLevel}`:`camera.effect.name.${e.name}`),itemActive:r,onClick:u=>!r&&s(),children:[r&&t(M,{variant:"danger",className:"rounded-circle remove-effect",onClick:c,children:t(_n,{className:"fa-icon"})}),!a&&n&&n.length>0&&t("div",{className:"effect-thumbnail-image border",children:t("img",{alt:"",src:n})}),a&&l(S,{center:!0,bold:!0,children:[t("div",{children:t(mu,{className:"fa-icon"})}),e.minLevel]})]})},ET=o=>{const{myLevel:e=0,selectedEffects:n=[],effects:r=[],thumbnails:a=[],processAction:s=null}=o;return t(te,{columnCount:3,overflow:"auto",children:r&&r.length>0&&r.map((c,u)=>{const d=a.find(g=>g.effectName===c.name),p=n.findIndex(g=>g.effect.name===c.name)>-1;return t(IT,{effect:c,thumbnailUrl:d&&d.thumbnailUrl||null,isActive:p,isLocked:c.minLevel>e,selectEffect:()=>s("select_effect",c.name),removeEffect:()=>s("remove_effect",c.name)},u)})})},fc=[zs.COLORMATRIX,zs.COMPOSITE],CT=o=>{const{picture:e=null,availableEffects:n=null,myLevel:r=1,onClose:a=null,onCancel:s=null,onCheckout:c=null}=o,[u,d]=i.exports.useState(fc[0]),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState([]),[E,I]=i.exports.useState([]),[_,C]=i.exports.useState(!1),b=i.exports.useMemo(()=>n.filter(R=>R.colorMatrix),[n]),N=i.exports.useMemo(()=>n.filter(R=>R.texture),[n]),w=i.exports.useCallback(()=>u===zs.COLORMATRIX?b:N,[u,b,N]),O=i.exports.useCallback(R=>!R||!R.length||!h||!h.length?-1:h.findIndex(A=>A.effect.name===R),[h]),y=i.exports.useMemo(()=>O(p),[p,O]),x=i.exports.useMemo(()=>p&&h[y]||null,[p,y,h]),F=i.exports.useCallback(R=>{const A=y;A!==-1&&f(G=>{const B=[...G],H=B[A];return B[y]=new La(H.effect,R),B})},[y,f]),P=i.exports.useMemo(()=>Ls().applyEffects(e.texture,h,_).src,[e,h,_]),k=i.exports.useCallback((R,A=null)=>{switch(R){case"close":a();return;case"cancel":s();return;case"checkout":c(P);return;case"change_tab":d(String(A));return;case"select_effect":{if(O(A)>=0)return;const B=n.find(H=>H.name===A);if(!B)return;f(H=>[...H,new La(B,1)]),g(B.name);return}case"remove_effect":{let G=O(A);if(G===-1)return;f(B=>{const H=[...B];return H.splice(G,1),H}),p===A&&g(null);return}case"clear_effects":g(null),f([]);return;case"download":{const G=new Image;G.src=P,window.open("").document.write(G.outerHTML);return}case"zoom":C(!_);return}},[_,n,p,P,O,s,c,a,C,f]);return i.exports.useEffect(()=>{const R=[];for(const A of n)R.push(new cb(A.name,Ls().applyEffects(e.texture,[new La(A,1)],!1).src));I(R)},[e,n]),l(ae,{className:"nitro-camera-editor",children:[t(oe,{headerText:m("camera.editor.button.text"),onCloseClick:R=>k("close")}),t(Er,{children:fc.map(R=>t(qn,{isActive:u===R,onClick:A=>k("change_tab",R),children:t("i",{className:"icon icon-camera-"+R})},R))}),t(se,{children:l(te,{children:[t(T,{size:5,overflow:"hidden",children:t(ET,{myLevel:r,selectedEffects:h,effects:w(),thumbnails:E,processAction:k})}),l(T,{size:7,justifyContent:"between",overflow:"hidden",children:[l(T,{center:!0,children:[t(or,{imageUrl:P,className:"picture-preview"}),p&&l(T,{center:!0,fullWidth:!0,gap:1,children:[t(S,{children:m("camera.effect.name."+p)}),t(Dt,{className:"nitro-slider",min:0,max:1,step:.01,value:x.alpha,onChange:R=>F(R),renderThumb:(R,A)=>t("div",{...R,children:A.valueNow})})]})]}),l(v,{justifyContent:"between",children:[l(tr,{children:[t(M,{onClick:R=>k("clear_effects"),children:t(Di,{className:"fa-icon"})}),t(M,{onClick:R=>k("download"),children:t(Om,{className:"fa-icon"})}),l(M,{onClick:R=>k("zoom"),children:[_&&t(km,{className:"fa-icon"}),!_&&t(Am,{className:"fa-icon"})]})]}),l(v,{gap:1,children:[t(M,{onClick:R=>k("cancel"),children:m("generic.cancel")}),t(M,{onClick:R=>k("checkout"),children:m("camera.preview.button.text")})]})]})]})]})})]})},os=0,yo=1,Ic=2,Ec=3,_T=o=>{const[e,n]=i.exports.useState(os),[r,a]=i.exports.useState(null),{availableEffects:s=[],selectedPictureIndex:c=-1,cameraRoll:u=[],setCameraRoll:d=null,myLevel:p=0,price:g={credits:0,duckets:0,publishDucketPrice:0}}=Ld(),h=E=>{switch(E){case"close":n(os);return;case"edit":n(Ic);return;case"delete":d(I=>{const _=[...I];return _.splice(c,1),_});return;case"editor_cancel":n(yo);return}},f=E=>{a(E),n(Ec)};return Ke(zt.ENDED,E=>n(os)),i.exports.useEffect(()=>{const E={linkReceived:I=>{const _=I.split("/");if(!(_.length<2))switch(_[1]){case"show":n(yo);return;case"hide":n(os);return;case"toggle":n(C=>C?os:yo);return}},eventUrlPrefix:"camera/"};return It(E),()=>Et(E)},[]),e===os?null:l(V,{children:[e===yo&&t(hT,{onClose:()=>h("close"),onEdit:()=>h("edit"),onDelete:()=>h("delete")}),e===Ic&&t(CT,{picture:u[c],myLevel:p,onClose:()=>h("close"),onCancel:()=>h("editor_cancel"),onCheckout:f,availableEffects:s}),e===Ec&&t(fT,{base64Url:r,onCloseClick:()=>h("close"),onCancelClick:()=>h("editor_cancel"),price:g})]})},bT=o=>{const{itemId:e=-1,state:n=null,product:r=null,active:a=!1,onClick:s=null}=o,c=u=>{let d=W().getFloorItemDataByName(u),p=null;return d?p=Y().getFurnitureFloorIconUrl(d.id):(d=W().getWallItemDataByName(u),d&&(p=Y().getFurnitureWallIconUrl(d.id))),p};return l(T,{fit:!0,center:!0,pointer:!0,className:`campaign-spritesheet campaign-day-generic-bg rounded calendar-item ${a?"active":""}`,onClick:()=>s(e),children:[n===Gt.STATE_UNLOCKED&&t(v,{center:!0,className:"campaign-spritesheet unlocked-bg",children:t(v,{center:!0,className:"campaign-spritesheet campaign-opened",children:r&&t(or,{imageUrl:r.customImage?K("image.library.url")+r.customImage:c(r.productName)})})}),n!==Gt.STATE_UNLOCKED&&l(v,{center:!0,className:"campaign-spritesheet locked-bg",children:[n===Gt.STATE_LOCKED_AVAILABLE&&t(L,{className:"campaign-spritesheet available"}),(n===Gt.STATE_LOCKED_EXPIRED||n===Gt.STATE_LOCKED_FUTURE)&&t(L,{className:"campaign-spritesheet unavailable"})]})]})},ja=5,ST=o=>{const{onClose:e=null,campaignName:n=null,currentDay:r=null,numDays:a=null,missedDays:s=null,openedDays:c=null,openPackage:u=null,receivedProducts:d=null}=o,[p,g]=i.exports.useState(r),[h,f]=i.exports.useState(Math.max(0,p-1)),E=w=>c.includes(w)?Gt.STATE_UNLOCKED:w>r?Gt.STATE_LOCKED_FUTURE:s.includes(w)?Gt.STATE_LOCKED_EXPIRED:Gt.STATE_LOCKED_AVAILABLE,I=w=>{switch(E(w)){case Gt.STATE_UNLOCKED:return m("campaign.calendar.info.unlocked");case Gt.STATE_LOCKED_FUTURE:return m("campaign.calendar.info.future");case Gt.STATE_LOCKED_EXPIRED:return m("campaign.calendar.info.expired");default:return m("campaign.calendar.info.available.desktop")}},_=()=>{const w=p+1;w!==a&&(g(w),h+ja<w+1&&f(h+1))},C=()=>{const w=p-1;w<0||(g(w),h>w&&f(h-1))},b=w=>{if(p===w){E(w)===Gt.STATE_LOCKED_AVAILABLE&&u(w,!1);return}g(w)},N=()=>{const w=p;E(w)!==Gt.STATE_UNLOCKED&&u(w,!0)};return l(ae,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[t(oe,{headerText:m(`campaign.calendar.${n}.title`),onCloseClick:e}),l(se,{children:[l(te,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[t(T,{size:1}),t(T,{size:10,children:l(v,{justifyContent:"between",alignItems:"center",gap:1,children:[l(T,{gap:1,children:[t(S,{fontSize:3,children:m("campaign.calendar.heading.day",["number"],[(p+1).toString()])}),t(S,{children:I(p)})]}),t("div",{children:W().isModerator&&t(M,{variant:"danger",onClick:N,children:"Force open"})})]})}),t(T,{size:1})]}),l(v,{fullHeight:!0,gap:2,children:[t(v,{center:!0,children:t(L,{pointer:!0,className:"campaign-spritesheet prev",onClick:C})}),t(T,{center:!0,fullWidth:!0,children:t(te,{fit:!0,columnCount:ja,gap:1,children:[...Array(ja)].map((w,O)=>{const y=h+O;return t(T,{overflow:"hidden",children:t(bT,{itemId:y,state:E(y),active:p===y,product:d.has(y)?d.get(y):null,onClick:b})},O)})})}),t(v,{center:!0,children:t(L,{pointer:!0,className:"campaign-spritesheet next",onClick:_})})]})]})]})},NT=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(-1),[s,c]=i.exports.useState(new Map),[u,d]=i.exports.useState(!1),p=(g,h=!1)=>{e&&(a(g),D(h?new Zf(e.campaignName,g):new eI(e.campaignName,g)))};return U(tI,g=>{const h=g.getParser();h&&n(h.calendarData)}),U(nI,g=>{const h=g.getParser();if(!h)return;const f=r;h.doorOpened&&(n(E=>{const I=E.clone();return I.openedDays.push(r),I}),c(E=>{const I=new Map(E);return I.set(f,new ub(h.productName,h.customImage,h.furnitureClassName)),I})),a(-1)}),i.exports.useEffect(()=>{const g={linkReceived:h=>{const f=h.split("/");if(!(f.length<2))switch(f[1]){case"calendar":d(!0);break}},eventUrlPrefix:"openView/"};return It(g),()=>Et(g)},[]),t(V,{children:e&&u&&t(ST,{onClose:()=>d(!1),campaignName:e.campaignName,currentDay:e.currentDay,numDays:e.campaignDays,openedDays:e.openedDays,missedDays:e.missedDays,openPackage:p,receivedProducts:s})})},em=o=>{const{icon:e=0}=o,n=i.exports.useMemo(()=>K("catalog.asset.icon.url").replace("%name%",e.toString()),[e]);return t(or,{imageUrl:n,style:{width:20,height:20}})},TT=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),[u,d]=i.exports.useState(""),[p,g]=i.exports.useState(""),[h,f]=i.exports.useState(!0),[E,I]=i.exports.useState(""),[_,C]=i.exports.useState([]),[b,N]=i.exports.useState(0),[w,O]=i.exports.useState(0),[y,x]=i.exports.useState(0),[F,P]=i.exports.useState(0),[k,R]=i.exports.useState(0),[A,G]=i.exports.useState(!1),{catalogOptions:B=null}=Ve(),{friends:H}=pn(),{giftConfiguration:X=null}=B,[j,de]=i.exports.useState([]),[ie,ne]=i.exports.useState([]),[xe,Ee]=i.exports.useState(!0),Me=i.exports.useCallback(()=>{n(!1),a(0),c(0),d(""),g(""),f(!0),I(""),N(0),O(0),Ee(!1),ne([]),_.length&&x(_[0].id)},[_]),it=i.exports.useMemo(()=>X?X.defaultStuffTypes.findIndex(Ce=>Ce===j[b])>-1:!1,[j,X,b]),Be=i.exports.useMemo(()=>X?(j[b]*1e3+X.ribbonTypes[w]).toString():"",[X,b,w,j]),Lt=i.exports.useMemo(()=>{if(!X||it)return!1;const Ce=j[b];return!(Ce===8||Ce>=3&&Ce<=6)},[X,b,it,j]),Nn=i.exports.useMemo(()=>it?j[b]:y,[it,j,b,y]),He=H.filter(Ce=>Ce.id!==-1),_e=Ce=>{const Ue=Ce.target.value;let Tn=[];Ue.length>0&&(Tn=He.sort().filter(Ar=>Ar.name.includes(Ue))),g(Ue),Ee(!0),ne(Tn)},Xe=Ce=>{g(Ce),Ee(!1)},Ot=i.exports.useCallback(Ce=>{switch(Ce){case"prev_box":N(Ue=>Ue===0?F:Ue-1);return;case"next_box":N(Ue=>Ue===F?0:Ue+1);return;case"prev_ribbon":O(Ue=>Ue===0?k:Ue-1);return;case"next_ribbon":O(Ue=>Ue===k?0:Ue+1);return;case"buy":if(!p||p.length===0){G(!0);return}D(new rI(r,s,u,p,E,Nn,b,w,h));return}},[Nn,u,F,k,E,s,r,p,b,w,h]);U(sI,Ce=>G(!0)),ut([Ir.PURCHASE_SUCCESS,gn.INIT_GIFT],Ce=>{switch(Ce.type){case Ir.PURCHASE_SUCCESS:Me();return;case gn.INIT_GIFT:const Ue=Ce;Me(),a(Ue.pageId),c(Ue.offerId),d(Ue.extraData),n(!0);return}}),i.exports.useEffect(()=>{G(!1)},[p]);const pe=i.exports.useCallback(()=>{X&&de(Ce=>{let Ue=[...X.boxTypes];return Ue.push(X.defaultStuffTypes[Math.floor(Math.random()*(X.defaultStuffTypes.length-1))]),P(Ue.length-1),R(Ue.length-1),Ue})},[X]);if(i.exports.useEffect(()=>{if(!X)return;const Ce=[];for(const Ue of X.stuffTypes){const Tn=W().getFloorItemData(Ue);Tn&&Tn.colors&&Tn.colors.length>0&&Ce.push({id:Ue,color:en.makeColorNumberHex(Tn.colors[0])})}pe(),Ce.length&&(x(Ce[0].id),C(Ce))},[X,pe]),i.exports.useEffect(()=>{e&&pe()},[pe,e]),!X||!X.isEnabled||!e)return null;const Pe="catalog.gift_wrapping_new.box."+(it?"default":j[b]),at=`catalog.gift_wrapping_new.ribbon.${w}`,rn="catalog.gift_wrapping_new."+(it?"freeprice":"price");return l(ae,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[t(oe,{headerText:m("catalog.gift_wrapping.title"),onCloseClick:Me}),l(se,{className:"text-black",children:[l(Wb,{column:!0,children:[t(S,{children:m("catalog.gift_wrapping.receiver")}),t("input",{type:"text",className:Ht("form-control form-control-sm",A&&"is-invalid"),value:p,onChange:Ce=>_e(Ce)}),ie.length>0&&xe&&t(T,{className:"autocomplete-gift-container",children:ie.map(Ce=>t(L,{className:"autocomplete-gift-item",onClick:Ue=>Xe(Ce.name),children:Ce.name},Ce.id))}),A&&t(L,{className:"invalid-feedback",children:m("catalog.gift_wrapping.receiver_not_found.title")})]}),t(Ad,{figure:W().figure,userName:W().userName,message:E,editable:!0,onChange:Ce=>I(Ce)}),l(L,{className:"form-check",children:[t("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:h,onChange:Ce=>f(Ue=>!Ue)}),t("label",{className:"form-check-label",children:m("catalog.gift_wrapping.show_face.title")})]}),l(v,{alignItems:"center",gap:2,children:[y&&t(L,{className:"gift-preview",children:t(el,{productType:me.FLOOR,productClassId:Nn,extraData:Be})}),l(T,{gap:1,children:[l(v,{gap:2,children:[l(tr,{children:[t(M,{variant:"primary",onClick:()=>Ot("prev_box"),children:t(Jt,{className:"fa-icon"})}),t(M,{variant:"primary",onClick:()=>Ot("next_box"),children:t(Zt,{className:"fa-icon"})})]}),l(T,{gap:1,children:[t(S,{fontWeight:"bold",children:m(Pe)}),l(v,{alignItems:"center",gap:1,children:[m(rn,["price"],[X.price.toString()]),t(ct,{type:-1})]})]})]}),l(v,{alignItems:"center",gap:2,className:Lt?"":"opacity-50 pointer-events-none",children:[l(tr,{children:[t(M,{variant:"primary",onClick:()=>Ot("prev_ribbon"),children:t(Jt,{className:"fa-icon"})}),t(M,{variant:"primary",onClick:()=>Ot("next_ribbon"),children:t(Zt,{className:"fa-icon"})})]}),t(S,{fontWeight:"bold",children:m(at)})]})]})]}),l(T,{gap:1,className:Lt?"":"opacity-50 pointer-events-none",children:[t(S,{fontWeight:"bold",children:m("catalog.gift_wrapping.pick_color")}),t(tr,{fullWidth:!0,children:_.map(Ce=>t(M,{variant:"dark",active:Ce.id===y,disabled:!Lt,style:{backgroundColor:Ce.color},onClick:()=>x(Ce.id)},Ce.id))})]}),l(v,{justifyContent:"between",alignItems:"center",children:[t(M,{variant:"link",onClick:Me,className:"text-black",children:m("cancel")}),t(M,{variant:"success",onClick:()=>Ot("buy"),children:m("catalog.gift_wrapping.give_gift")})]})]})]})},vT=o=>{const[e,n]=i.exports.useState(""),{currentType:r=null,rootNode:a=null,offersToNodes:s=null,searchResult:c=null,setSearchResult:u=null,setCurrentPage:d=null}=Ve();return i.exports.useEffect(()=>{let p=e==null?void 0:e.toLocaleLowerCase().replace(" ","");if(!p||!p.length){u(null);return}const g=setTimeout(()=>{const h=W().getAllFurnitureData({loadFurnitureData:null});if(!h||!h.length)return;const f=[],E=[];for(const C of h){if(r===Rn.BUILDER&&!C.availableForBuildersClub||r===Rn.NORMAL&&C.excludeDynamic)continue;const b=[C.className,C.name,C.description].join(" ").replace(/ /gi,"").toLowerCase();if(r===Rn.BUILDER&&C.purchaseOfferId===-1&&C.rentOfferId===-1)C.furniLine!==""&&E.indexOf(C.furniLine)<0&&b.indexOf(p)>=0&&E.push(C.furniLine);else if([...Hl(s,C.purchaseOfferId),...Hl(s,C.rentOfferId)].length&&(b.indexOf(p)>=0&&f.push(C),f.length===250))break}const I=[];for(const C of f)I.push(new x_(C));let _=[];rd(p,E,a,_),u(new A_(p,I,_.filter(C=>C.isVisible))),d(new Hi(-1,"default_3x3",new od([],[]),I,!1,1))},300);return()=>clearTimeout(g)},[s,r,a,e,d,u]),l(v,{gap:1,children:[t(v,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:e,onChange:p=>n(p.target.value)})}),(!e||!e.length)&&t(M,{variant:"primary",className:"catalog-search-button",children:t($s,{className:"fa-icon"})}),e&&!!e.length&&t(M,{variant:"primary",className:"catalog-search-button",onClick:p=>n(""),children:t(_n,{className:"fa-icon"})})]})},tm=o=>{const{node:e=null,child:n=!1}=o;return t(V,{children:e&&e.children.length>0&&e.children.map((r,a)=>r.isVisible?t(nm,{node:r,child:n},a):null)})},nm=o=>{const{node:e=null,child:n=!1}=o,{activateNode:r=null}=Ve();return l(L,{className:"nitro-catalog-navigation-section",children:[l(Ne,{gap:1,column:!1,itemActive:e.isActive,onClick:a=>r(e),className:n?"inset":"",children:[t(em,{icon:e.iconId}),t(S,{grow:!0,truncate:!0,children:e.localization}),e.isBranch&&l(V,{children:[e.isOpen&&t(ki,{className:"fa-icon blackselectiongen"}),!e.isOpen&&t(Ai,{className:"fa-icon blackselectiongen"})]})]}),e.isOpen&&e.isBranch&&t(tm,{node:e,child:!0})]})},wT=o=>{const{node:e=null}=o,{searchResult:n=null}=Ve();return l(V,{children:[t(vT,{}),t(T,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:l(Ge,{id:"nitro-catalog-main-navigation",gap:1,columnCount:1,children:[n&&n.filteredNodes.length>0&&n.filteredNodes.map((r,a)=>t(nm,{node:r},a)),!n&&t(tm,{node:e})]})})]})},yT=o=>{const{columnCount:e=5,...n}=o,[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),{currentOffer:u=null,setPurchaseOptions:d=null}=Ve(),{badgeCodes:p=[],activate:g=null,deactivate:h=null}=ba(),f=i.exports.useMemo(()=>{if(!s)return null;const E=new Qs;return E.setValue(["0",s,"",""]),E},[s]);return i.exports.useEffect(()=>{u&&d(E=>{const I={...E};return I.extraParamRequired=!0,I.extraData=f&&f.getValue(1)||null,I.previewStuffData=f,I})},[u,f,d]),i.exports.useEffect(()=>{if(!r)return;const E=g();return()=>h(E)},[r,g,h]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),t(Ge,{columnCount:e,...n,children:p&&p.length>0&&p.map((E,I)=>t(Ne,{itemActive:s===E,onClick:_=>c(E),children:t(Ye,{badgeCode:E})},I))})},Sa=o=>{const{currentPage:e=null,setCurrentOffer:n=null}=Ve();return i.exports.useEffect(()=>{!e||!e.offers.length||n(e.offers[0])},[e,n]),null},ul=o=>{const{offer:e=null,selectOffer:n=null,itemActive:r=!1,...a}=o,[s,c]=i.exports.useState(!1),{requestOfferToMover:u=null}=Ve(),{isVisible:d=!1}=Zr(),p=i.exports.useMemo(()=>e.pricingModel===lt.PRICING_MODEL_BUNDLE?null:e.product.getIconUrl(e),[e]),g=f=>{switch(f.type){case ke.MOUSE_DOWN:n(e),c(!0);return;case ke.MOUSE_UP:c(!1);return;case ke.ROLL_OUT:if(!s||!r||!d)return;u(e);return}},h=e.product;return h?t(Ne,{itemImage:p,itemCount:e.pricingModel===lt.PRICING_MODEL_MULTI?h.productCount:1,itemUniqueSoldout:h.uniqueLimitedItemSeriesSize&&!h.uniqueLimitedItemsLeft,itemUniqueNumber:h.uniqueLimitedItemSeriesSize,itemActive:r,onMouseDown:g,onMouseUp:g,onMouseOut:g,...a,children:e.product.productType===me.ROBOT&&t(ot,{figure:e.product.extraParam,headOnly:!0,direction:3})}):null},lo=o=>{const{columnCount:e=5,children:n=null,...r}=o,{currentOffer:a=null,setCurrentOffer:s=null,currentPage:c=null,setPurchaseOptions:u=null}=Ve(),d=i.exports.useRef();if(i.exports.useEffect(()=>{d&&d.current&&(d.current.scrollTop=0)},[c]),!c)return null;const p=g=>{g.activate(),!g.isLazy&&(s(g),g.product&&g.product.productType===me.WALL&&u(h=>{const f={...h};return f.extraData=g.product.extraParam||null,f}))};return l(Ge,{innerRef:d,columnCount:e,...r,children:[c.offers&&c.offers.length>0&&c.offers.map((g,h)=>t(ul,{itemActive:a&&a.offerId===g.offerId,offer:g,selectOffer:p},h)),n]})},Na=o=>{const{children:e=null,...n}=o,{currentOffer:r=null}=Ve();return!r||r.pricingModel!==lt.PRICING_MODEL_SINGLE||!r.product.isUniqueLimitedItem?null:l(L,{...n,children:[t(Gb,{className:"mx-auto",uniqueLimitedItemsLeft:r.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:r.product.uniqueLimitedItemSeriesSize}),e]})},Yn=o=>{const{noGiftOption:e=!1,purchaseCallback:n=null}=o;i.exports.useState(!1);const[r,a]=i.exports.useState(je.NONE);Ea(to.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1);const{currentOffer:s=null,currentPage:c=null,purchaseOptions:u=null,setPurchaseOptions:d=null}=Ve(),{getCurrencyAmount:p=null}=es(),g=i.exports.useCallback(I=>{switch(I.type){case Ir.PURCHASE_SUCCESS:a(je.NONE);return;case Kr.PURCHASE_FAILED:a(je.FAILED);return;case na.NOT_ALLOWED:a(je.FAILED);return;case ra.SOLD_OUT:a(je.SOLD_OUT);return}},[]);ut(Ir.PURCHASE_SUCCESS,g),ut(Kr.PURCHASE_FAILED,g),ut(na.NOT_ALLOWED,g),ut(ra.SOLD_OUT,g);const h=i.exports.useMemo(()=>{if(!s||u.extraParamRequired&&(!u.extraData||!u.extraData.length))return!1;if(s.pricingModel===lt.PRICING_MODEL_SINGLE){const I=s.product;if(I&&I.isUniqueLimitedItem)return!I.uniqueLimitedItemsLeft}return!1},[s,u]),f=(I=!1)=>{if(!s)return;if(En()<s.clubLevel){ee("habboUI/open/hccenter");return}if(I){Tt(new Qb(s.page.pageId,s.offerId,u.extraData));return}if(a(je.PURCHASE),n){n();return}let _=s.page.pageId;D(new la(_,s.offerId,u.extraData,u.quantity))};return i.exports.useEffect(()=>{s&&a(je.NONE)},[s,d]),i.exports.useEffect(()=>{let I=null;return(r===je.CONFIRM||r===je.FAILED)&&(I=setTimeout(()=>a(je.NONE),3e3)),()=>{I&&clearTimeout(I)}},[r]),s?l(V,{children:[t(()=>{const I=s.priceInCredits*u.quantity,_=s.priceInActivityPoints*u.quantity;if(En()<s.clubLevel)return t(M,{variant:"danger",disabled:!0,children:m("catalog.alert.hc.required")});if(h)return t(M,{variant:"danger",disabled:!0,children:m("catalog.alert.limited_edition_sold_out.title")});if(I>p(-1))return t(M,{variant:"danger",disabled:!0,children:m("catalog.alert.notenough.title")});if(_>p(s.activityPointType))return t(M,{variant:"danger",disabled:!0,children:m("catalog.alert.notenough.activitypoints.title."+s.activityPointType)});switch(r){case je.CONFIRM:return t(M,{variant:"warning",onClick:C=>f(),children:m("catalog.marketplace.confirm_title")});case je.PURCHASE:return t(M,{disabled:!0,children:t(tl,{})});case je.FAILED:return t(M,{variant:"danger",children:m("generic.failed")});case je.SOLD_OUT:return t(M,{variant:"danger",children:m("generic.failed")+" - "+m("catalog.alert.limited_edition_sold_out.title")});case je.NONE:default:return t(M,{disabled:u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:C=>a(je.CONFIRM),children:m("catalog.purchase_confirmation."+(s.isRentOffer?"rent":"buy"))})}},{}),!e&&!s.isRentOffer&&t(M,{disabled:u.quantity>1||!s.giftable||h||u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:I=>f(!0),children:m("catalog.purchase_confirmation.gift")})]}):null},rm=o=>{const{offer:e=null,separator:n=!1}=o,{purchaseOptions:r=null}=Ve(),{quantity:a=1}=r;return e?l(V,{children:[e.priceInCredits>0&&l(v,{alignItems:"center",gap:1,children:[t(S,{bold:!0,children:e.priceInCredits*a}),t(ct,{type:-1})]}),n&&e.priceInCredits>0&&e.priceInActivityPoints>0&&t(Ks,{size:"xs",color:"black",className:"fa-icon"}),e.priceInActivityPoints>0&&l(v,{alignItems:"center",gap:1,children:[t(S,{bold:!0,children:e.priceInActivityPoints*a}),t(ct,{type:e.activityPointType})]})]}):null},_r=o=>{const{gap:e=1,...n}=o,{currentOffer:r=null}=Ve();return t(T,{gap:e,...n,children:t(rm,{offer:r})})},kr=o=>{const{currentOffer:e=null,roomPreviewer:n=null,purchaseOptions:r=null}=Ve(),{previewStuffData:a=null}=r;return i.exports.useEffect(()=>{if(!e||e.pricingModel===lt.PRICING_MODEL_BUNDLE||!n)return;const s=e.product;if(s)switch(n.reset(!1),s.productType){case me.FLOOR:{if(!s.furnitureData)return;if(s.furnitureData.specialType===Z.FIGURE_PURCHASABLE_SET){const u=W().getFloorItemData(s.furnitureData.id).customParams.split(",").map(g=>parseInt(g)),d=[];for(const g of u)vt().isValidFigureSetForGender(g,W().gender)&&d.push(g);const p=vt().getFigureStringWithFigureIds(W().figure,W().gender,d);n.addAvatarIntoRoom(p,s.productClassId)}else n.addFurnitureIntoRoom(s.productClassId,new xt(90),a,s.extraParam);return}case me.WALL:{if(!s.furnitureData)return;switch(s.furnitureData.specialType){case Z.FLOOR:n.updateObjectRoom(s.extraParam);return;case Z.WALL_PAPER:n.updateObjectRoom(null,s.extraParam);return;case Z.LANDSCAPE:{n.updateObjectRoom(null,null,s.extraParam);const c=W().getWallItemDataByName("window_double_default");c&&n.addWallItemIntoRoom(c.id,new xt(90),c.customParams);return}default:n.updateObjectRoom("default","default","default"),n.addWallItemIntoRoom(s.productClassId,new xt(90),s.extraParam);return}}case me.ROBOT:n.addAvatarIntoRoom(s.extraParam,0);return;case me.EFFECT:n.addAvatarIntoRoom(W().figure,s.productClassId);return}},[e,a,n]),e?e.pricingModel===lt.PRICING_MODEL_BUNDLE?t(T,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(Ge,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:e.products.length>0&&e.products.map((s,c)=>t(Ne,{itemImage:s.getIconUrl(e),itemCount:s.productCount},c))})}):t(pa,{roomPreviewer:n,height:140}):null},xT=o=>{const{page:e=null}=o,{currentOffer:n=null}=Ve();return l(V,{children:[t(Sa,{}),l(te,{children:[l(T,{size:7,overflow:"hidden",children:[t(lo,{shrink:!0}),l(T,{gap:1,overflow:"hidden",children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:m("catalog_selectbadge")}),t(yT,{})]})]}),l(T,{center:!n,size:5,overflow:"hidden",children:[!n&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(V,{children:[t(L,{position:"relative",overflow:"hidden",children:t(kr,{})}),l(T,{grow:!0,gap:1,children:[t(Na,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:n.localizationName}),t(v,{justifyContent:"end",children:t(_r,{alignItems:"end"})}),t(Yn,{})]})]})]})]})]})},Rr=o=>{const{...e}=o,{currentOffer:n=null}=Ve();return!n||!n.badgeCode||!n.badgeCode.length?null:t(Ye,{badgeCode:n.badgeCode,...e})},RT=1,OT=100,dl=o=>{const{currentOffer:e=null,purchaseOptions:n=null,setPurchaseOptions:r=null}=Ve(),{quantity:a=1}=n,s=c=>{isNaN(c)&&(c=1),c=Math.max(c,RT),c=Math.min(c,OT),c!==a&&r(u=>{const d={...u};return d.quantity=c,d})};return!e||!e.bundlePurchaseAllowed?null:l(V,{children:[t(S,{children:m("catalog.bundlewidget.spinner.select.amount")}),l(v,{alignItems:"center",gap:1,children:[t(gu,{className:"text-black cursor-pointer fa-icon",onClick:c=>s(a-1)}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:a,onChange:c=>s(c.target.valueAsNumber)}),t(pu,{className:"text-black cursor-pointer fa-icon",onClick:c=>s(a+1)})]})]})},kT=o=>{const{page:e=null}=o,[n,r]=i.exports.useState(new Map),{currentOffer:a=null,setCurrentOffer:s=null}=Ve(),[c,u]=i.exports.useState(!1),d=(E,I)=>!E.product.furnitureData.colorIndex||!I.product.furnitureData.colorIndex||E.product.furnitureData.colorIndex>I.product.furnitureData.colorIndex?1:E==I?0:-1,p=(E,I)=>E.product.furnitureData.className>I.product.furnitureData.className?1:E==I?0:-1,g=E=>{E.activate(),s(E)},h=(E,I)=>{const _=`${I}*${E}`,C=e.offers.findIndex(b=>b.product.furnitureData.fullName===_);C>-1&&g(e.offers[C])},f=i.exports.useMemo(()=>{const E=[],I=new Map,_=new Map;return e.offers.sort(d),e.offers.forEach(C=>{if(!C.product)return;const b=C.product.furnitureData;if(!b||!b.hasIndexedColor)E.push(C);else{const N=b.className,w=b.colorIndex;_.has(N)||_.set(N,[]);let O=16777215;if(b.colors){for(let y of b.colors)y!==16777215&&(O=y);_.get(N).indexOf(O)===-1&&(_.get(N)[w]=O)}I.has(N)||(E.push(C),I.set(N,!0))}}),E.sort(p),r(_),E},[e.offers]);return l(te,{children:[t(T,{size:7,overflow:"hidden",children:l(Ge,{columnCount:5,children:[(!c||!a||!n.has(a.product.furnitureData.className))&&f.map((E,I)=>t(ul,{itemActive:a&&(a.product.furnitureData.hasIndexedColor?a.product.furnitureData.className===E.product.furnitureData.className:a.offerId===E.offerId),offer:E,selectOffer:g},I)),c&&a&&n.has(a.product.furnitureData.className)&&n.get(a.product.furnitureData.className).map((E,I)=>t(Ne,{itemHighlight:!0,itemActive:a.product.furnitureData.colorIndex===I,itemColor:cn.int2rgb(E),className:"clear-bg",onClick:_=>h(I,a.product.furnitureData.className)},I))]})}),l(T,{center:!a,size:5,overflow:"hidden",children:[!a&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),a&&l(V,{children:[l(L,{position:"relative",overflow:"hidden",children:[t(kr,{}),t(Rr,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),a.product.furnitureData.hasIndexedColor&&t(M,{position:"absolute",className:"bottom-1 start-1",onClick:E=>u(I=>!I),children:t(hu,{className:"fa-icon"})})]}),l(T,{grow:!0,gap:1,children:[t(Na,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:a.localizationName}),l(v,{justifyContent:"between",children:[t(T,{gap:1,children:t(dl,{})}),t(_r,{justifyContent:"end",alignItems:"end"})]}),t(Yn,{})]})]})]})]})},sm=o=>{const{imageUrl:e=null}=o,[n,r]=i.exports.useState("");return i.exports.useEffect(()=>{r(e??K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder"))},[e]),t(v,{center:!0,fullWidth:!0,className:"nitro-catalog-header",children:t("img",{src:n,onError:({currentTarget:a})=>{a.src=K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder")}})})},AT=o=>{const{page:e=null}=o,{currentOffer:n=null,currentPage:r=null}=Ve();return t(V,{children:l(te,{children:[l(T,{size:7,overflow:"hidden",children:[K("catalog.headers")&&t(sm,{imageUrl:r.localization.getImage(0)}),t(lo,{})]}),l(T,{center:!n,size:5,overflow:"hidden",children:[!n&&l(V,{children:[!!e.localization.getImage(1)&&t(or,{imageUrl:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(V,{children:[l(v,{center:!0,overflow:"hidden",style:{height:140},children:[n.product.productType!==me.BADGE&&l(V,{children:[t(kr,{}),t(Rr,{className:"bg-muted rounded bottom-1 end-1"})]}),n.product.productType===me.BADGE&&t(Rr,{className:"scale-2"})]}),l(T,{grow:!0,gap:1,children:[t(Na,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:n.localizationName}),l(v,{justifyContent:"between",children:[t(T,{gap:1,children:t(dl,{})}),t(_r,{justifyContent:"end",alignItems:"end"})]}),t(Yn,{})]})]})]})]})})},PT=o=>{const{...e}=o,{currentOffer:n=null,purchaseOptions:r=null}=Ve(),{previewStuffData:a=null}=r,s=i.exports.useMemo(()=>{if(!n||!a)return null;const c=a.getValue(2);return!c||!c.length?null:c},[n,a]);return s?t(Ye,{badgeCode:s,isGroup:!0,...e}):null},om=o=>{const[e,n]=i.exports.useState(0),{currentOffer:r=null,catalogOptions:a=null,setPurchaseOptions:s=null}=Ve(),{groups:c=null}=a,u=i.exports.useMemo(()=>{if(!c||!c.length)return null;const p=c[e];if(!p)return null;const g=new Qs;return g.setValue(["0",p.groupId.toString(),p.badgeCode,p.colorA,p.colorB]),g},[e,c]);if(i.exports.useEffect(()=>{r&&s(p=>{const g={...p};return g.extraParamRequired=!0,g.extraData=u&&u.getValue(1)||null,g.previewStuffData=u,g})},[r,u,s]),i.exports.useEffect(()=>{D(new Vu)},[]),!c||!c.length)return l(L,{className:"bg-muted rounded p-1 text-black text-center",children:[m("catalog.guild_selector.members_only"),t(M,{className:"mt-1",children:m("catalog.guild_selector.find_groups")})]});const d=c[e];return l(v,{gap:1,children:[!!d&&l(v,{overflow:"hidden",className:"rounded border",children:[t(L,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+d.colorA}}),t(L,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+d.colorB}})]}),t("select",{className:"form-select form-select-sm",value:e,onChange:p=>n(parseInt(p.target.value)),children:c.map((p,g)=>t("option",{value:g,children:p.groupName},g))})]})},DT=o=>{const{page:e=null}=o,{currentOffer:n=null}=Ve();return l(te,{children:[t(T,{size:7,overflow:"hidden",children:t(lo,{})}),l(T,{center:!n,size:5,overflow:"hidden",children:[!n&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(V,{children:[l(L,{position:"relative",overflow:"hidden",children:[t(kr,{}),t(PT,{position:"absolute",className:"bottom-1 end-1"})]}),l(T,{grow:!0,gap:1,children:[t(S,{truncate:!0,children:n.localizationName}),t(L,{grow:!0,children:t(om,{})}),t(v,{justifyContent:"end",children:t(_r,{alignItems:"end"})}),t(Yn,{})]})]})]})]})},LT=o=>{const{page:e=null}=o;i.exports.useState(0);const{currentOffer:n=null,setCurrentOffer:r=null,catalogOptions:a=null}=Ve();return i.exports.useEffect(()=>{D(new Vu)},[e]),l(V,{children:[t(Sa,{}),l(te,{children:[t(T,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:t(L,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})}),t(T,{size:5,overflow:"hidden",gap:1,children:!!n&&t(V,{children:l(T,{grow:!0,gap:1,children:[t(S,{truncate:!0,children:n.localizationName}),t(L,{grow:!0,children:t(om,{})}),t(v,{justifyContent:"end",children:t(_r,{alignItems:"end"})}),t(Yn,{noGiftOption:!0})]})})})]})]})},MT=o=>{const{page:e=null}=o;return l(te,{children:[l(T,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[t(L,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(L,{overflow:"auto",dangerouslySetInnerHTML:{__html:e.localization.getText(0)}}),t(L,{dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),l(T,{center:!0,size:5,overflow:"hidden",children:[t(or,{imageUrl:e.localization.getImage(1)}),t(M,{onClick:()=>ee("groups/create"),children:m("catalog.start.guild.purchase.button")})]})]})},UT=o=>{const{page:e=null}=o;return t("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:t("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:t("div",{dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})})})},am=o=>{const{page:e=null}=o,n=e.localization.getImage(1);return l(T,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[l(v,{alignItems:"center",gap:2,children:[n&&t("img",{alt:"",src:n}),t(L,{className:"fs-5",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),t(T,{grow:!0,alignItems:"center",overflow:"auto",children:t(L,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}})}),t(v,{alignItems:"center",children:t(L,{className:"fw-bold",dangerouslySetInnerHTML:{__html:e.localization.getText(3)}})})]})},FT=o=>t(am,{...o}),BT=o=>{const{page:e=null}=o,[n,r]=i.exports.useState(""),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(-1),[d,p]=i.exports.useState([]),[g,h]=i.exports.useState(!1),[f,E]=i.exports.useState(1),{categories:I=null}=Mn(),{setIsVisible:_=null}=Ve(),{promoteInformation:C,isExtended:b,setIsExtended:N}=ll();i.exports.useEffect(()=>{b&&(u(C.data.flatId),r(C.data.eventName),s(C.data.eventDescription),E(C.data.categoryId),h(b),N(!1))},[b,n,a,f]);const w=()=>{u(-1),r(""),s(""),E(1),N(!1),_(!1)},O=()=>{const y=e.pageId,x=e.offers.length>=1?e.offers[0].offerId:-1,F=c,P=n,k=a,R=f;D(new iI(y,x,F,P,g,k,R)),w()};return U(oI,y=>{const x=y.getParser();x&&p(x.rooms)}),i.exports.useEffect(()=>{D(new aI),D(new ku)},[]),l(V,{children:[t(S,{bold:!0,center:!0,children:m("roomad.catalog_header")}),l(T,{size:12,overflow:"hidden",className:"text-black",children:[t(L,{children:m("roomad.catalog_text",["duration"],["120"])}),l(L,{className:"bg-muted rounded p-1",children:[l(T,{gap:2,children:[t(S,{bold:!0,children:m("navigator.category")}),t("select",{className:"form-select form-select-sm",value:f,onChange:y=>E(parseInt(y.target.value)),disabled:g,children:I&&I.map((y,x)=>t("option",{value:y.id,children:m(y.name)},x))})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("roomad.catalog_name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:n,onChange:y=>r(y.target.value),readOnly:g})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("roomad.catalog_description")}),t("textarea",{className:"form-control form-control-sm",maxLength:64,value:a,onChange:y=>s(y.target.value),readOnly:g})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("roomad.catalog_roomname")}),l("select",{className:"form-select form-select-sm",value:c,onChange:y=>u(parseInt(y.target.value)),disabled:g,children:[t("option",{value:-1,disabled:!0,children:m("roomad.catalog_roomname")}),d&&d.map((y,x)=>t("option",{value:y.roomId,children:y.roomName},x))]})]}),t(T,{gap:1,children:t(M,{variant:!n||!a||c===-1?"danger":"success",onClick:O,disabled:!n||!a||c===-1,children:m(g?"roomad.extend.event":"buy")})})]})]})]})},im=o=>{const{columnCount:e=5,children:n=null,...r}=o,{currentOffer:a=null}=Ve(),s=i.exports.useRef();return i.exports.useEffect(()=>{s&&s.current&&(s.current.scrollTop=0)},[a]),a?l(Ge,{innerRef:s,columnCount:5,...r,children:[a.products&&a.products.length>0&&a.products.map((c,u)=>t(Ne,{itemImage:c.getIconUrl(),itemCount:c.productCount},u)),n]}):null},lm=o=>{const{gap:e=1,...n}=o,{currentOffer:r=null}=Ve();return t(v,{gap:e,alignItems:"center",classNames:["bg-muted","p-1","rounded"],...n,children:t(rm,{separator:!0,offer:r})})},GT=o=>{const{page:e=null}=o;return l(V,{children:[t(Sa,{}),l(te,{children:[l(T,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(S,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(T,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(im,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),l(T,{size:5,overflow:"hidden",gap:1,children:[!!e.localization.getText(1)&&t(S,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)}),l(T,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(Rr,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(lm,{position:"absolute",className:"bottom-0 end-0"})]}),t(T,{gap:1,children:t(Yn,{})})]})]})]})},VT=o=>{const{page:e=null}=o;return l(V,{children:[t(Sa,{}),l(te,{children:[l(T,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(S,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(T,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(im,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),l(T,{size:5,overflow:"hidden",gap:1,children:[!!e.localization.getText(1)&&t(S,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)}),l(T,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(Rr,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(lm,{position:"absolute",className:"bottom-0 end-0"})]}),t(T,{gap:1,children:t(Yn,{})})]})]})]})},HT=o=>{const{page:e=null}=o,[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState(""),{currentOffer:c=null,currentPage:u=null}=Ve(),d=p=>{var g;return(g=be().soundManager.musicController)==null?void 0:g.playSong(p,Ds.PRIORITY_PURCHASE_PREVIEW,15,0,0,0)};return U(lI,p=>{const g=p.getParser();g.officialSongId===a&&r(g.songId)}),i.exports.useEffect(()=>{if(!c)return;const p=c.product;if(p){if(p.extraParam.length>0){const g=parseInt(p.extraParam);g>0?r(g):(s(p.extraParam),D(new cI(p.extraParam)))}else s(""),r(-1);return()=>{var g;return(g=be().soundManager.musicController)==null?void 0:g.stop(Ds.PRIORITY_PURCHASE_PREVIEW)}}},[c]),i.exports.useEffect(()=>()=>{var p;return(p=be().soundManager.musicController)==null?void 0:p.stop(Ds.PRIORITY_PURCHASE_PREVIEW)},[]),t(V,{children:l(te,{children:[l(T,{size:7,overflow:"hidden",children:[K("catalog.headers")&&t(sm,{imageUrl:u.localization.getImage(0)}),t(lo,{})]}),l(T,{center:!c,size:5,overflow:"hidden",children:[!c&&l(V,{children:[!!e.localization.getImage(1)&&t(or,{imageUrl:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),c&&l(V,{children:[l(v,{center:!0,overflow:"hidden",style:{height:140},children:[c.product.productType!==me.BADGE&&l(V,{children:[t(kr,{}),t(Rr,{className:"bg-muted rounded bottom-1 end-1"})]}),c.product.productType===me.BADGE&&t(Rr,{className:"scale-2"})]}),l(T,{grow:!0,gap:1,children:[t(Na,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:c.localizationName}),n>-1&&t(M,{onClick:()=>d(n),children:m("play_preview_button")}),l(v,{justifyContent:"between",children:[t(T,{gap:1,children:t(dl,{})}),t(_r,{justifyContent:"end",alignItems:"end"})]}),t(Yn,{})]})]})]})]})})},WT=["floors","walls","views"],jT=o=>{const{columnCount:e=5,children:n=null,...r}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[d,p]=i.exports.useState(null),{currentPage:g=null,currentOffer:h=null,setCurrentOffer:f=null,setPurchaseOptions:E=null}=Ve(),I=i.exports.useRef(),_=b=>{b&&p(N=>{const w=[...N];return w[c]=b,w})};if(i.exports.useEffect(()=>{if(!g)return;const b=[[],[],[]];for(const N of g.offers){if(N.pricingModel!==lt.PRICING_MODEL_SINGLE&&N.pricingModel!==lt.PRICING_MODEL_MULTI)continue;const w=N.product;if(!w||w.productType!==me.WALL&&w.productType!==me.FLOOR||!w.furnitureData)continue;switch(w.furnitureData.className){case"floor":b[0].push(N);break;case"wallpaper":b[1].push(N);break;case"landscape":b[2].push(N);break}}s(b),u(0),p([b[0][0],b[1][0],b[2][0]])},[g]),i.exports.useEffect(()=>{c===-1||!d||f(d[c])},[c,d,f]),i.exports.useEffect(()=>{c===-1||!d||!h||E(b=>{const N={...b};return N.extraData=d[c].product.extraParam,N.extraParamRequired=!0,N})},[h,c,d,E]),i.exports.useEffect(()=>{I&&I.current&&(I.current.scrollTop=0)},[c]),!a||c===-1)return null;const C=a[c];return l(V,{children:[t(tr,{children:WT.map((b,N)=>t(M,{active:c===N,onClick:w=>u(N),children:m(`catalog.spaces.tab.${b}`)},N))}),l(Ge,{innerRef:I,columnCount:e,...r,children:[C&&C.length>0&&C.map((b,N)=>t(ul,{itemActive:h&&h===b,offer:b,selectOffer:w=>_(w)},N)),n]})]})},qT=o=>{const{page:e=null}=o,{currentOffer:n=null,roomPreviewer:r=null}=Ve();return i.exports.useEffect(()=>{r.updatePreviewObjectBoundingRectangle(new vr)},[r]),l(te,{children:[t(T,{size:7,overflow:"hidden",children:t(jT,{})}),l(T,{center:!n,size:5,overflow:"hidden",children:[!n&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(V,{children:[t(L,{position:"relative",overflow:"hidden",children:t(kr,{})}),l(T,{grow:!0,gap:1,children:[t(S,{grow:!0,truncate:!0,children:n.localizationName}),t(v,{justifyContent:"end",children:t(_r,{alignItems:"end"})}),t(Yn,{})]})]})]})]})},zT=o=>{const{page:e=null}=o,[n,r]=i.exports.useState(""),{currentOffer:a=null,setPurchaseOptions:s=null}=Ve();return i.exports.useEffect(()=>{a&&s(c=>{const u={...c};return u.extraData=n,u})},[a,n,s]),l(te,{children:[l(T,{size:7,overflow:"hidden",children:[t(lo,{}),t("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:n||"",onChange:c=>r(c.target.value)})]}),l(T,{center:!a,size:5,overflow:"hidden",children:[!a&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),a&&l(V,{children:[t(kr,{}),l(T,{grow:!0,gap:1,children:[t(S,{grow:!0,truncate:!0,children:a.localizationName}),t(v,{justifyContent:"end",children:t(_r,{alignItems:"end"})}),t(Yn,{})]})]})]})]})},YT=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(je.NONE),{currentPage:s=null,catalogOptions:c=null}=Ve(),{purse:u=null,getCurrencyAmount:d=null}=es(),{clubOffers:p=null}=c,g=i.exports.useCallback(N=>{switch(N.type){case Ir.PURCHASE_SUCCESS:a(je.NONE);return;case Kr.PURCHASE_FAILED:a(je.FAILED);return}},[]);ut(Ir.PURCHASE_SUCCESS,g),ut(Kr.PURCHASE_FAILED,g);const h=i.exports.useCallback(N=>{let w="";return N.months>0&&(w=m("catalog.vip.item.header.months",["num_months"],[N.months.toString()])),N.extraDays>0&&(w!==""&&(w+=" "),w+=" "+m("catalog.vip.item.header.days",["num_days"],[N.extraDays.toString()])),w},[]),f=i.exports.useCallback(()=>{if(!u)return"";const N=u.clubDays>0||u.clubPeriods>0?"extension.":"subscription.",w=e.months===0?"days":"months",O=e.months===0?e.extraDays:e.months;return m("catalog.vip.buy.confirm."+N+w).replace("%NUM_"+w.toUpperCase()+"%",O.toString())},[e,u]),E=i.exports.useCallback(()=>{let N=m("catalog.vip.buy.confirm.end_date");return N=N.replace("%month%",e.month.toString()),N=N.replace("%day%",e.day.toString()),N=N.replace("%year%",e.year.toString()),N},[e]),I=i.exports.useMemo(()=>{const N=u.clubDays,O=u.clubPeriods*31+N;return m("catalog.vip.extend.info",["days"],[O.toString()])},[u]),_=i.exports.useCallback(()=>{e&&(a(je.PURCHASE),D(new la(s.pageId,e.offerId,null,1)))},[e,s]),C=i.exports.useCallback(N=>{a(je.NONE),n(N)},[]),b=i.exports.useCallback(()=>{if(!e)return null;if(e.priceCredits>d(-1))return t(M,{fullWidth:!0,variant:"danger",children:m("catalog.alert.notenough.title")});if(e.priceActivityPoints>d(e.priceActivityPointsType))return t(M,{fullWidth:!0,variant:"danger",children:m("catalog.alert.notenough.activitypoints.title."+e.priceActivityPointsType)});switch(r){case je.CONFIRM:return t(M,{fullWidth:!0,variant:"warning",onClick:_,children:m("catalog.marketplace.confirm_title")});case je.PURCHASE:return t(M,{fullWidth:!0,variant:"primary",disabled:!0,children:t(tl,{})});case je.FAILED:return t(M,{fullWidth:!0,variant:"danger",disabled:!0,children:m("generic.failed")});case je.NONE:default:return t(M,{fullWidth:!0,variant:"success",onClick:()=>a(je.CONFIRM),children:m("buy")})}},[e,r,_,d]);return i.exports.useEffect(()=>{p||D(new uI(1))},[p]),l(te,{children:[l(T,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[t(Ge,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:p&&p.length>0&&p.map((N,w)=>l(Ne,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:e===N,className:"p-1",onClick:()=>C(N),children:[t("i",{className:"icon-hc-banner"}),l(T,{justifyContent:"end",gap:0,children:[t(S,{textEnd:!0,children:h(N)}),l(v,{justifyContent:"end",gap:1,children:[N.priceCredits>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:N.priceCredits}),t(ct,{type:-1})]}),N.priceActivityPoints>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:N.priceActivityPoints}),t(ct,{type:N.priceActivityPointsType})]})]})]})]},w))}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:m("catalog.vip.buy.hccenter")}})]}),l(T,{size:5,overflow:"hidden",children:[l(T,{fullHeight:!0,center:!0,overflow:"hidden",children:[s.localization.getImage(1)&&t("img",{alt:"",src:s.localization.getImage(1)}),t(S,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:I}})]}),e&&l(T,{fullWidth:!0,grow:!0,justifyContent:"end",children:[l(v,{alignItems:"end",children:[l(T,{grow:!0,gap:0,children:[t(S,{fontWeight:"bold",children:f()}),t(S,{children:E()})]}),l(T,{gap:1,children:[e.priceCredits>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:e.priceCredits}),t(ct,{type:-1})]}),e.priceActivityPoints>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:e.priceActivityPoints}),t(ct,{type:e.priceActivityPointsType})]})]})]}),b()]})]})]})},$T=o=>{const{text:e=null}=o,[n,r]=i.exports.useState(""),[a,s]=i.exports.useState(!1),{simpleAlert:c=null}=Ze(),u=()=>{!n||!n.length||a||(D(new gI(n)),s(!0))};return U(dI,d=>{const p=d.getParser();let g=m("catalog.alert.voucherredeem.ok.description");p.productName&&(g=m("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[p.productName,p.productDescription])),c(g,null,null,null,m("catalog.alert.voucherredeem.ok.title")),s(!1),r("")}),U(mI,d=>{const p=d.getParser();c(m(`catalog.alert.voucherredeem.error.description.${p.errorCode}`),null,null,null,m("catalog.alert.voucherredeem.error.title")),s(!1)}),l(v,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:e,value:n,onChange:d=>r(d.target.value)}),t(M,{variant:"primary",onClick:u,disabled:a,children:t(Pm,{className:"fa-icon"})})]})},xo=o=>{const{item:e=null,position:n="relative",pointer:r=!0,overflow:a="hidden",fullHeight:s=!0,classNames:c=[],children:u=null,...d}=o,p=i.exports.useMemo(()=>{const h=["rounded","nitro-front-page-item"];return c.length&&h.push(...c),h},[c]);if(!e)return null;const g=K("image.library.url")+e.itemPromoImage;return l(kd,{imageUrl:g,classNames:p,position:n,fullHeight:s,pointer:r,overflow:a,...d,children:[t(S,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:e.itemName}),u]})},KT=o=>{const{page:e=null,hideNavigation:n=null}=o,{frontPageItems:r=[]}=Ve(),a=i.exports.useCallback(s=>{switch(s.type){case Ol.ITEM_CATALOGUE_PAGE:ee(`catalog/open/${s.catalogPageLocation}`);return;case Ol.ITEM_PRODUCT_OFFER:ee(`catalog/open/${s.productOfferId}`);return}},[]);return i.exports.useEffect(()=>{n()},[e,n]),l(te,{children:[t(T,{size:4,children:r[0]&&t(xo,{item:r[0],onClick:s=>a(r[0])})}),l(T,{size:8,children:[r[1]&&t(xo,{item:r[1],onClick:s=>a(r[1])}),r[2]&&t(xo,{item:r[2],onClick:s=>a(r[2])}),r[3]&&t(xo,{item:r[3],onClick:s=>a(r[3])}),t($T,{text:e.localization.getText(1)})]})]})},Oi=1,Ho=2,cm=o=>{const{offerData:e=null,type:n=Ho,onClick:r=null}=o,a=i.exports.useMemo(()=>e?m((e.furniType===2?"wallItem":"roomItem")+`.name.${e.furniId}`):"",[e]),s=i.exports.useCallback(()=>{if(!e)return"";if(e.status===$r.SOLD)return m("catalog.marketplace.offer.sold");if(e.timeLeftMinutes<=0)return m("catalog.marketplace.offer.expired");const c=Math.max(1,e.timeLeftMinutes),u=Math.floor(c/60);let p=c-u*60+" "+m("catalog.marketplace.offer.minutes");return u>0&&(p=u+" "+m("catalog.marketplace.offer.hours")+" "+p),m("catalog.marketplace.offer.time_left",["time"],[p])},[e]);return l(Ne,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(T,{style:{width:40,height:40},children:t(Ne,{column:!1,itemImage:R_(e.furniType===Zs.TYPE_FLOOR?me.FLOOR:me.WALL,e.furniId,e.extraData),itemUniqueNumber:e.isUniqueLimitedItem?e.stuffData.uniqueNumber:0})}),l(T,{grow:!0,gap:0,children:[t(S,{fontWeight:"bold",children:a}),n===Oi&&l(V,{children:[t(S,{children:m("catalog.marketplace.offer.price_own_item",["price"],[e.price.toString()])}),t(S,{children:s()})]}),n===Ho&&l(V,{children:[t(S,{children:m("catalog.marketplace.offer.price_public_item",["price","average"],[e.price.toString(),e.averagePrice>0?e.averagePrice.toString():"-"])}),t(S,{children:m("catalog.marketplace.offer_count",["count"],[e.offerCount.toString()])})]})]}),l(T,{gap:1,children:[n===Oi&&e.status!==$r.SOLD&&t(M,{variant:"secondary",onClick:()=>r(e),children:m("catalog.marketplace.offer.pick")}),n===Ho&&l(V,{children:[t(M,{variant:"secondary",onClick:()=>r(e),children:m("buy")}),t(M,{variant:"secondary",disabled:!0,children:m("catalog.marketplace.view_more")})]})]})]})},XT=o=>{const[e,n]=i.exports.useState(0),[r,a]=i.exports.useState([]),{simpleAlert:s=null}=Ze();U(pI,p=>{const g=p.getParser();if(!g)return;const h=g.offers.map(f=>{const E=new Zs(f.offerId,f.furniId,f.furniType,f.extraData,f.stuffData,f.price,f.status,f.averagePrice,f.offerCount);return E.timeLeftMinutes=f.timeLeftMinutes,E});n(g.creditsWaiting),a(h)}),U(hI,p=>{const g=p.getParser();if(g){if(!g.success){s(m("catalog.marketplace.cancel_failed"),ge.DEFAULT,null,null,m("catalog.marketplace.operation_failed.topic"));return}a(h=>h.filter(f=>f.offerId!==g.offerId))}});const c=i.exports.useMemo(()=>r.filter(p=>p.status===$r.SOLD),[r]),u=i.exports.useCallback(()=>{a(p=>{const g=c.map(h=>h.offerId);return p.filter(h=>g.indexOf(h.offerId)===-1)}),D(new fI)},[c]),d=p=>{D(new EI(p.offerId))};return i.exports.useEffect(()=>{D(new II)},[]),l(T,{overflow:"hidden",children:[e<=0&&t(S,{center:!0,className:"bg-muted rounded p-1",children:m("catalog.marketplace.redeem.no_sold_items")}),e>0&&l(T,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[t(S,{children:m("catalog.marketplace.redeem.get_credits",["count","credits"],[c.length.toString(),e.toString()])}),t(M,{className:"mt-1",onClick:u,children:m("catalog.marketplace.offer.redeem")})]}),l(T,{gap:1,overflow:"hidden",children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:m("catalog.marketplace.items_found",["count"],[r.length.toString()])}),t(T,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:r.length>0&&r.map(p=>t(cm,{offerData:p,type:Oi,onClick:d},p.offerId))})]})]})},QT=o=>{const{searchType:e=null,sortTypes:n=null,onSearch:r=null}=o,[a,s]=i.exports.useState(n?n[0]:3),[c,u]=i.exports.useState(""),[d,p]=i.exports.useState(0),[g,h]=i.exports.useState(0),f=i.exports.useCallback(I=>{s(I),(e===Ft.BY_ACTIVITY||e===Ft.BY_VALUE)&&r({minPrice:-1,maxPrice:-1,query:"",type:I})},[r,e]),E=i.exports.useCallback(()=>{const I=d>0?d:-1,_=g>0?g:-1;r({minPrice:I,maxPrice:_,type:a,query:c})},[g,d,r,c,a]);return i.exports.useEffect(()=>{if(!n||!n.length)return;const I=n[0];s(I),(e===Ft.BY_ACTIVITY||Ft.BY_VALUE===e)&&r({minPrice:-1,maxPrice:-1,query:"",type:I})},[r,e,n]),l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("catalog.marketplace.sort_order")}),t("select",{className:"form-select form-select-sm",value:a,onChange:I=>f(parseInt(I.target.value)),children:n.map(I=>t("option",{value:I,children:m(`catalog.marketplace.sort.${I}`)},I))})]}),e===Ft.ADVANCED&&l(V,{children:[l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("catalog.marketplace.search_name")}),t("input",{className:"form-control form-control-sm",type:"text",value:c,onChange:I=>u(I.target.value)})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("catalog.marketplace.search_price")}),l(v,{fullWidth:!0,gap:1,children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:d,onChange:I=>p(I.target.valueAsNumber)}),t("input",{className:"form-control form-control-sm",type:"number",min:0,value:g,onChange:I=>h(I.target.valueAsNumber)})]})]}),t(M,{variant:"secondary",className:"mx-auto",onClick:E,children:m("generic.search")})]})]})},JT=[1,2],ZT=[3,4,5,6],ev=[1,2,3,4,5,6],tv=o=>{const[e,n]=i.exports.useState(Ft.BY_ACTIVITY),[r,a]=i.exports.useState(0),[s,c]=i.exports.useState(new Map),[u,d]=i.exports.useState({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:p=null}=es(),{simpleAlert:g=null,showConfirm:h=null}=Ze(),f=i.exports.useCallback(_=>{d(_),D(new CI(_.minPrice,_.maxPrice,_.query,_.type))},[]),E=i.exports.useMemo(()=>{switch(e){case Ft.BY_ACTIVITY:return ZT;case Ft.BY_VALUE:return JT;case Ft.ADVANCED:return ev}return[]},[e]),I=i.exports.useCallback(_=>{if(_.price>p(-1)){g(m("catalog.alert.notenough.credits.description"),ge.DEFAULT,null,null,m("catalog.alert.notenough.title"));return}const C=_.offerId;h(m("catalog.marketplace.confirm_header"),()=>{D(new kl(C))},null,null,null,m("catalog.marketplace.confirm_title"))},[p,g,h]);return U(_I,_=>{const C=_.getParser();if(!C)return;const b=new Map;C.offers.forEach(N=>{const w=new Zs(N.offerId,N.furniId,N.furniType,N.extraData,N.stuffData,N.price,N.status,N.averagePrice,N.offerCount);w.timeLeftMinutes=N.timeLeftMinutes,b.set(N.offerId,w)}),a(C.totalItemsFound),c(b)}),U(bI,_=>{const C=_.getParser();if(C)switch(C.result){case 1:f(u);break;case 2:c(b=>{const N=new Map(b);return N.delete(C.requestedOfferId),N}),g(m("catalog.marketplace.not_available_header"),ge.DEFAULT,null,null,m("catalog.marketplace.not_available_title"));break;case 3:c(b=>{const N=new Map(b),w=N.get(C.requestedOfferId);return w&&(w.offerId=C.offerId,w.price=C.newPrice,w.offerCount--,N.set(w.offerId,w)),N.delete(C.requestedOfferId),N}),h(m("catalog.marketplace.confirm_higher_header")+`
`+m("catalog.marketplace.confirm_price",["price"],[C.newPrice.toString()]),()=>{D(new kl(C.offerId))},null,null,null,m("catalog.marketplace.confirm_higher_title"));break;case 4:g(m("catalog.alert.notenough.credits.description"),ge.DEFAULT,null,null,m("catalog.alert.notenough.title"));break}}),l(V,{children:[l(tr,{children:[t(M,{active:e===Ft.BY_ACTIVITY,onClick:()=>n(Ft.BY_ACTIVITY),children:m("catalog.marketplace.search_by_activity")}),t(M,{active:e===Ft.BY_VALUE,onClick:()=>n(Ft.BY_VALUE),children:m("catalog.marketplace.search_by_value")}),t(M,{active:e===Ft.ADVANCED,onClick:()=>n(Ft.ADVANCED),children:m("catalog.marketplace.search_advanced")})]}),t(QT,{sortTypes:E,searchType:e,onSearch:f}),l(T,{gap:1,overflow:"hidden",children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:m("catalog.marketplace.items_found",["count"],[s.size.toString()])}),t(T,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(s.values()).map((_,C)=>t(cm,{offerData:_,type:Ho,onClick:I},C))})]})]})},nv=o=>{const{page:e=null}=o,[n,r]=i.exports.useState(-1),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(-1),[d,p]=i.exports.useState([]),[g,h]=i.exports.useState(-1),[f,E]=i.exports.useState(!1),[I,_]=i.exports.useState("");i.exports.useState(!0);const[C,b]=i.exports.useState(-1),{currentOffer:N=null,setCurrentOffer:w=null,setPurchaseOptions:O=null,catalogOptions:y=null,roomPreviewer:x=null}=Ve(),{petPalettes:F=null}=y,P=i.exports.useMemo(()=>!d.length||g===-1?16777215:d[g][0],[d,g]),k=i.exports.useMemo(()=>n===-1||!a.length||c===-1?"":m(`pet.breed.${n}.${a[c].breedId}`),[n,a,c]),R=i.exports.useMemo(()=>{if(!a.length||c===-1)return"";const B=a[c].paletteId;let H=16777215;if(n<=7){if(g===-1)return"";H=d[g][0]}let X=H.toString(16).toUpperCase();for(;X.length<6;)X="0"+X;return`${B}
${X}`},[a,c,n,d,g]),A=i.exports.useMemo(()=>{let B="";switch(C){case 1:B="catalog.alert.petname.long";break;case 2:B="catalog.alert.petname.short";break;case 3:B="catalog.alert.petname.chars";break;case 4:B="catalog.alert.petname.bobba";break}return!B||!B.length?"":m(B)},[C]),G=i.exports.useCallback(()=>{if(C===-1){D(new SI(I,1));return}if(C===0){D(new la(e.pageId,N.offerId,`${I}
${R}`,1));return}},[e,N,I,R,C]);return U(NI,B=>{const H=B.getParser();b(H.result),H.result===0?G():Tt(new Kr(-1))}),i.exports.useEffect(()=>{if(!e||!e.offers.length)return;const B=e.offers[0];w(B),r(w_(B.localizationId)),E(!1)},[e,w]),i.exports.useEffect(()=>{if(!N)return;const B=N.product.productData;if(B){if(F)for(const H of F){if(H.breed!==B.type)continue;const X=[];for(const j of H.palettes)j.sellable&&X.push(j);u(X.length?0:-1),s(X);return}u(-1),s([]),D(new TI(B.type))}},[N,F]),i.exports.useEffect(()=>{if(n===-1)return;const B=y_(n,a);h(B.length?0:-1),p(B)},[n,a]),i.exports.useEffect(()=>{if(!x||(x.reset(!1),n===-1||!a.length||c===-1))return;let B=`${n} ${a[c].paletteId}`;n<=7&&(B+=` ${P.toString(16)}`),x.addPetIntoRoom(B)},[x,n,a,c,P]),i.exports.useEffect(()=>{b(-1)},[I]),N?l(te,{children:[t(T,{size:7,overflow:"hidden",children:l(Ge,{columnCount:5,children:[!f&&a.length>0&&a.map((B,H)=>t(Ne,{itemActive:c===H,onClick:X=>u(H),children:t(er,{typeId:n,paletteId:B.paletteId,direction:2,headOnly:!0})},H)),f&&d.length>0&&d.map((B,H)=>t(Ne,{itemHighlight:!0,itemActive:g===H,itemColor:cn.int2rgb(B[0]),className:"clear-bg",onClick:X=>h(H)},H))]})}),l(T,{center:!N,size:5,overflow:"hidden",children:[!N&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),N&&l(V,{children:[l(L,{position:"relative",overflow:"hidden",children:[t(kr,{}),t(Rr,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),n>-1&&n<=7&&t(M,{position:"absolute",className:"bottom-1 start-1",onClick:B=>E(!f),children:t(hu,{className:"fa-icon"})})]}),l(T,{grow:!0,gap:1,children:[t(S,{truncate:!0,children:k}),l(T,{grow:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:m("widgets.petpackage.name.title"),value:I,onChange:B=>_(B.target.value)}),C>0&&t(L,{className:"invalid-feedback d-block m-0",children:A})]}),t(v,{justifyContent:"end",children:t(_r,{justifyContent:"end",alignItems:"end"})}),t(Yn,{purchaseCallback:G})]})]})]})]}):null},rv=o=>{const{offer:e=null,isAvailable:n=!1,daysRequired:r=0,onSelect:a=null}=o,s=i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0];return Vo.getProductImageUrl(u.productType,u.furniClassId,u.extraParam)},[e]),c=i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],d=Vo.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.name."+u.furniClassId:"roomItem.name."+u.furniClassId;return m(d)},[e]);return i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],d=Vo.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.desc."+u.furniClassId:"roomItem.desc."+u.furniClassId;return m(d)},[e]),i.exports.useCallback(()=>Math.floor(r/31),[r]),l(Ne,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(or,{imageUrl:s()}),t(S,{grow:!0,fontWeight:"bold",children:c()}),t(M,{variant:"secondary",onClick:()=>a(e.localizationId),disabled:!n,children:m("catalog.club_gift.select")})]})},sv=o=>{const{purse:e=null}=es(),{catalogOptions:n=null,setCatalogOptions:r=null}=Ve(),{clubGifts:a=null}=n,{showConfirm:s=null}=Ze(),c=i.exports.useCallback(()=>a?a.giftsAvailable>0?m("catalog.club_gift.available",["amount"],[a.giftsAvailable.toString()]):a.daysUntilNextGift>0?m("catalog.club_gift.days_until_next",["days"],[a.daysUntilNextGift.toString()]):e.isVip?m("catalog.club_gift.not_available"):m("catalog.club_gift.no_club"):"",[a,e]),u=i.exports.useCallback(p=>{s(m("catalog.club_gift.confirm"),()=>{D(new vI(p)),r(g=>(g.clubGifts.giftsAvailable--,{...g}))},null)},[r,s]),d=i.exports.useMemo(()=>a.offers.sort((g,h)=>a.getOfferExtraData(g.offerId).daysRequired-a.getOfferExtraData(h.offerId).daysRequired),[a]);return l(V,{children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:c()}),t(Ge,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:a.offers.length>0&&d.map(p=>t(rv,{offer:p,isAvailable:a.getOfferExtraData(p.offerId).isSelectable&&a.giftsAvailable>0,onSelect:u,daysRequired:a.getOfferExtraData(p.offerId).daysRequired},p.offerId))})]})},ov=(o,e)=>{if(!o)return null;const n={page:o,hideNavigation:e};switch(o.layoutCode){case"frontpage_featured":return null;case"frontpage4":return t(KT,{...n});case"pets":return t(nv,{...n});case"pets2":return t(FT,{...n});case"pets3":return t(am,{...n});case"vip_buy":return t(YT,{...n});case"guild_frontpage":return t(MT,{...n});case"guild_forum":return t(LT,{...n});case"guild_custom_furni":return t(DT,{...n});case"club_gifts":return t(sv,{...n});case"marketplace_own_items":return t(XT,{...n});case"marketplace":return t(tv,{...n});case"single_bundle":return t(VT,{...n});case"room_bundle":return t(GT,{...n});case"spaces_new":return t(qT,{...n});case"trophies":return t(zT,{...n});case"info_loyalty":return t(UT,{...n});case"badge_display":return t(xT,{...n});case"roomads":return t(BT,{...n});case"default_3x3_color_grouping":return t(kT,{...n});case"soundmachine":return t(HT,{...n});case"bots":case"default_3x3":default:return t(AT,{...n})}},av=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(0),[s,c]=i.exports.useState("0"),{catalogOptions:u=null,setCatalogOptions:d=null}=Ve(),{marketplaceConfiguration:p=null}=u,{showConfirm:g=null}=Ze(),h=C=>{c(C);const b=parseInt(C);isNaN(b)||b===r||a(parseInt(C))};if(U(wI,C=>{const b=C.getParser();d(N=>{const w={...N};return w.marketplaceConfiguration=b,w})}),ut(ol.POST_MARKETPLACE,C=>n(C.item)),i.exports.useEffect(()=>{!e||p||D(new yI)},[e,p]),i.exports.useEffect(()=>{if(e)return()=>a(0)},[e]),!p||!e)return null;const f=e?m(e.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type):"",E=e?m(e.isWallItem?"wallItem.desc."+e.type:"roomItem.desc."+e.type):"",I=()=>Math.max(Math.ceil(p.commission*.01*r),1),_=()=>{!e||r<p.minimumPrice||g(m("inventory.marketplace.confirm_offer.info",["furniname","price"],[f,r.toString()]),()=>{D(new xI(r,e.isWallItem?2:1,e.id)),n(null)},()=>{n(null)},null,null,m("inventory.marketplace.confirm_offer.title"))};return l(ae,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[t(oe,{headerText:m("inventory.marketplace.make_offer.title"),onCloseClick:C=>n(null)}),t(se,{overflow:"hidden",children:l(te,{fullHeight:!0,children:[t(T,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:t(el,{productType:e.isWallItem?me.WALL:me.FLOOR,productClassId:e.type,extraData:e.extra.toString()})}),l(T,{size:8,justifyContent:"between",overflow:"hidden",children:[l(T,{grow:!0,gap:1,children:[t(S,{fontWeight:"bold",children:f}),t(S,{truncate:!0,shrink:!0,children:E})]}),l(T,{overflow:"auto",children:[t(S,{italics:!0,children:m("inventory.marketplace.make_offer.expiration_info",["time"],[p.offerTime.toString()])}),l("div",{className:"input-group has-validation",children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:s,onChange:C=>h(C.target.value),placeholder:m("inventory.marketplace.make_offer.price_request")}),(r<p.minimumPrice||isNaN(r))&&t(L,{className:"invalid-feedback d-block",children:m("inventory.marketplace.make_offer.min_price",["minprice"],[p.minimumPrice.toString()])}),r>p.maximumPrice&&!isNaN(r)&&t(L,{className:"invalid-feedback d-block",children:m("inventory.marketplace.make_offer.max_price",["maxprice"],[p.maximumPrice.toString()])}),!(r<p.minimumPrice||r>p.maximumPrice||isNaN(r))&&t(L,{className:"invalid-feedback d-block",children:m("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[I().toString(),(r+I()).toString()])})]}),t(M,{disabled:r<p.minimumPrice||r>p.maximumPrice||isNaN(r),onClick:_,children:m("inventory.marketplace.make_offer.post")})]})]})]})})]})},iv=o=>{const{isVisible:e=!1,setIsVisible:n=null,rootNode:r=null,currentPage:a=null,navigationHidden:s=!1,setNavigationHidden:c=null,activeNodes:u=[],searchResult:d=null,setSearchResult:p=null,openPageByName:g=null,openPageByOfferId:h=null,activateNode:f=null,getNodeById:E}=Ve();return i.exports.useEffect(()=>{const I={linkReceived:_=>{const C=_.split("/");if(!(C.length<2))switch(C[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(b=>!b);return;case"open":if(C.length>2)if(C.length===4)switch(C[2]){case"offerId":h(parseInt(C[3]));return}else g(C[2]);else n(!0);return}},eventUrlPrefix:"catalog/"};return It(I),()=>Et(I)},[n,h,g]),l(V,{children:[e&&l(ae,{uniqueKey:"catalog",className:"nitro-catalog",style:K("catalog.headers")?{width:710}:{},children:[t(oe,{headerText:m("catalog.title"),onCloseClick:I=>n(!1)}),t(Er,{children:r&&r.children.length>0&&r.children.map(I=>I.isVisible?t(qn,{isActive:I.isActive,onClick:_=>{d&&p(null),f(I)},children:l(v,{gap:K("catalog.tab.icons")?1:0,alignItems:"center",children:[K("catalog.tab.icons")&&t(em,{icon:I.iconId}),I.localization]})},I.pageId):null)}),t(se,{children:l(te,{children:[!s&&t(T,{size:3,overflow:"hidden",children:u&&u.length>0&&t(wT,{node:u[0]})}),t(T,{size:s?12:9,overflow:"hidden",children:ov(a,()=>c(!0))})]})})]}),t(TT,{}),t(av,{})]})},lv=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(""),{chatHistory:s=[]}=ao(),c=i.exports.useRef(null),u=i.exports.useMemo(()=>{if(r.length===0)return s;let d=r.toLowerCase();return s.filter(p=>p.message&&p.message.toLowerCase().includes(d)||p.name&&p.name.toLowerCase().includes(d))},[s,r]);return i.exports.useEffect(()=>{c&&c.current&&e&&(c.current.scrollTop=c.current.scrollHeight)},[e]),i.exports.useEffect(()=>{const d={linkReceived:p=>{const g=p.split("/");if(!(g.length<2))switch(g[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(h=>!h);return}},eventUrlPrefix:"chat-history/"};return It(d),()=>Et(d)},[]),e?l(ae,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[t(oe,{headerText:m("room.chathistory.button.text"),onCloseClick:d=>n(!1)}),l(se,{innerRef:c,overflow:"hidden",gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:r,onChange:d=>a(d.target.value)}),t(fa,{rows:u,scrollToBottom:!0,rowRender:d=>l(v,{alignItems:"center",className:"p-1",gap:2,children:[t(S,{variant:"muted",children:d.timestamp}),d.type===Pn.TYPE_CHAT&&l("div",{className:"bubble-container",style:{position:"relative"},children:[d.style===0&&t("div",{className:"user-container-bg",style:{backgroundColor:d.color}}),l("div",{className:`chat-bubble bubble-${d.style} type-${d.chatType}`,style:{maxWidth:"100%"},children:[t("div",{className:"user-container",children:d.imageUrl&&d.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${d.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${d.name}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${d.message}`}})]})]})]}),d.type===Pn.TYPE_ROOM_INFO&&l(V,{children:[t("i",{className:"icon icon-small-room"}),t(S,{textBreak:!0,wrap:!0,grow:!0,children:d.name})]})]})})]})]}):null},An=32,Br=64,Ms="x0123456789abcdefghijklmnopq";class bt{}bt.DOOR=0;bt.UP=1;bt.DOWN=2;bt.SET=3;bt.UNSET=4;const cv={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class uv{constructor(){this._currentAction=bt.SET,this._currentHeight=Ms[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=bt.SET,this._currentHeight=Ms[1]}}class Ro{constructor(e,n){this._height=e,this._isBlocked=n}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const dv=(o,e)=>{let n=o*An/2-e*An/2;const r=o*An/4+e*An/4;return n=n+1024,[n,r]},mv=(o,e)=>{const n=o-1024,r=(n/(An/2)+e/(An/4))/2,a=(e/(An/4)-n/(An/2))/2;return[r,a]},aa=o=>{switch(o=parseInt(o.toString()),o){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},Oo=o=>{switch(o){case .25:return 0;case .5:return 1;case 2:return 3;default:return 2}},Vr=class extends RI{constructor(){const o=An*Br+20,e=An*Br/2+100;super({width:o,height:e,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=[],this._doorLocation=new vr(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new vr(-1,-1),this._actionSettings=new uv}initialize(){if(this._isInitialized)return;const o=Hu().getCollection("floor_editor");o&&(this._assetCollection=o,this._tilemapRenderer=new OI(o.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const o=new vr;this._tilemapRenderer.containsPoint=e=>(this._tilemapRenderer.worldTransform.applyInverse(e,o),this.tileHitDetection(o,!1)),this._tilemapRenderer.on("pointerup",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerout",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerdown",e=>{if(!(e.data.originalEvent instanceof PointerEvent)&&!(e.data.originalEvent instanceof TouchEvent))return;const n=e.data.originalEvent;if(n instanceof MouseEvent&&n.button===2)return;const r=e.data.global;this.tileHitDetection(r,!0)}),this._tilemapRenderer.on("click",e=>{if(!(e.data.originalEvent instanceof PointerEvent)||e.data.originalEvent.button===2)return;const r=e.data.global;this.tileHitDetection(r,!0,!0)})}tileHitDetection(o,e,n=!1){const r=this._tilemapRenderer.pointsBuf,a=Dm,s=r.length;e&&(this._isHolding=!0);for(let c=0;c<s;c+=a){const u=c+a,d=r.slice(c,u),p=An,g=An/2,h=Math.floor(o.x),f=Math.floor(o.y),E=d[2],I=d[3],_=E+p/2,C=I+g/2,b=Math.abs(h-_),N=Math.abs(f-C);if(b/(p*.5)+N/(g*.5)<=1){if(this._isHolding){const[O,y]=mv(E,I);n?this.onClick(O,y):(this._lastUsedTile.x!==O||this._lastUsedTile.y!==y)&&(this._lastUsedTile.x=O,this._lastUsedTile.y=y,this.onClick(O,y))}return!0}}return!1}onClick(o,e){const n=this._tilemap[e][o],r=Ms.indexOf(n.height);let a=0;switch(this._actionSettings.currentAction){case bt.DOOR:n.height!=="x"&&(this._doorLocation.x=o,this._doorLocation.y=e,this.renderTiles());return;case bt.UP:if(n.height==="x")return;a=r+1;break;case bt.DOWN:if(n.height==="x"||r<=1)return;a=r-1;break;case bt.SET:a=Ms.indexOf(this._actionSettings.currentHeight);break;case bt.UNSET:a=0;break}if(a===-1||r===a)return;a>0&&(o+1>this._width&&(this._width=o+1),e+1>this._height&&(this._height=e+1));const s=Ms[a];s&&(n.isBlocked||(this._tilemap[e][o].height=s,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let o=0;o<this._tilemap.length;o++)for(let e=0;e<this.tilemap[o].length;e++){const n=this.tilemap[o][e];let r=n.height;this._doorLocation.x===e&&this._doorLocation.y===o&&(r=Vr.TILE_DOOR),n.isBlocked&&(r=Vr.TILE_BLOCKED);const[a,s]=dv(e,o);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${r}`),a,s)}}setTilemap(o,e){this._tilemap=[];const n=o.split("\r");let r=0,a=n.length;for(let s=0;s<a;s++){const c=n[s];if(c.length===0){n.splice(s,1),a=n.length,s--;continue}c.length>r&&(r=c.length)}for(let s=0;s<a;s++){this._tilemap[s]=[];const c=n[s];for(let u=0;u<r;u++){const d=e[s]&&e[s][u]||!1,p=c[u];p!=="x"&&p!=="X"&&p?this._tilemap[s][u]=new Ro(p,d):this._tilemap[s][u]=new Ro("x",d)}for(let u=r;u<Br;u++)this.tilemap[s][u]=new Ro("x",!1)}for(let s=a;s<Br;s++){this.tilemap[s]||(this.tilemap[s]=[]);for(let c=0;c<Br;c++)this.tilemap[s][c]=new Ro("x",!1)}this._width=r,this._height=a}getCurrentTilemapString(){if(this._tilemap[this._height-1][this._width-1].height==="x"){this._width=-1,this._height=-1;for(let n=Br-1;n>=0;n--)if(this._tilemap[n])for(let r=Br-1;r>=0;r--){if(!this._tilemap[n][r])continue;this._tilemap[n][r].height!=="x"&&(r+1>this._width&&(this._width=r+1),n+1>this._height&&(this._height=n+1))}}const e=[];for(let n=0;n<this._height;n++){const r=[];for(let a=0;a<this._width;a++){const s=this._tilemap[n][a];r[a]=s.height}e[n]=r.join("")}return e.join("\r")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(o){this._doorLocation=o}get actionSettings(){return this._actionSettings}static get instance(){return Vr._INSTANCE||(Vr._INSTANCE=new Vr),Vr._INSTANCE}};let Mt=Vr;Mt._INSTANCE=null;Mt.TILE_BLOCKED="r_blocked";Mt.TILE_DOOR="r_door";const um=i.exports.createContext({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),gv=o=>t(um.Provider,{...o}),ml=()=>i.exports.useContext(um),pv=o=>{const{gap:e=1,children:n=null,...r}=o,[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),{originalFloorplanSettings:d=null,setOriginalFloorplanSettings:p=null,setVisualizationSettings:g=null}=ml(),h=i.exports.useRef(null);U(kI,E=>{const I=E.getParser();p(_=>{const C={..._};return C.reservedTiles=I.blockedTilesMap,Mt.instance.setTilemap(C.tilemap,C.reservedTiles),C}),s(!0),h.current.scrollTo(Mt.instance.view.width/3,0)}),U(AI,E=>{const I=E.getParser();p(_=>{const C={..._};return C.entryPoint=[I.x,I.y],C.entryPointDir=I.direction,C}),g(_=>{const C={..._};return C.entryPointDir=I.direction,C}),Mt.instance.doorLocation=new vr(I.x,I.y),u(!0)});const f=E=>{const I=h.current;if(I)switch(E){case"up":I.scrollBy({top:-10});break;case"down":I.scrollBy({top:10});break;case"left":I.scrollBy({left:-10});break;case"right":I.scrollBy({left:10});break}};return i.exports.useEffect(()=>()=>{Mt.instance.clear(),g(E=>({wallHeight:d.wallHeight,thicknessWall:d.thicknessWall,thicknessFloor:d.thicknessFloor,entryPointDir:E.entryPointDir}))},[d.thicknessFloor,d.thicknessWall,d.wallHeight,g]),i.exports.useEffect(()=>{!c||!a||Mt.instance.renderTiles()},[c,a]),i.exports.useEffect(()=>{D(new PI),D(new DI),Mt.instance.tilemapRenderer.interactive=!0,h.current&&h.current.appendChild(Mt.instance.renderer.view)},[]),l(T,{gap:e,...r,children:[l(te,{overflow:"hidden",gap:1,children:[t(T,{center:!0,size:1,children:t(M,{className:"d-md-none",onClick:E=>f("left"),children:t(fu,{className:"fa-icon"})})}),l(T,{overflow:"hidden",size:10,gap:1,children:[t(v,{justifyContent:"center",className:"d-md-none",children:t(M,{shrink:!0,onClick:E=>f("up"),children:t(Lm,{className:"fa-icon"})})}),t(L,{overflow:"auto",innerRef:h}),t(v,{justifyContent:"center",className:"d-md-none",children:t(M,{shrink:!0,onClick:E=>f("down"),children:t(Mm,{className:"fa-icon"})})})]}),t(T,{center:!0,size:1,children:t(M,{className:"d-md-none",onClick:E=>f("right"),children:t(Iu,{className:"fa-icon"})})})]}),n]})},Cc=o=>o.replace(/\r\n|\r|\n/g,`
`).toLowerCase(),hv=o=>{const{onCloseClick:e=null}=o,[n,r]=i.exports.useState(""),{originalFloorplanSettings:a=null}=ml(),s=()=>{D(new Wu(n.split(`
`).join("\r"),a.entryPoint[0],a.entryPoint[1],a.entryPointDir,aa(a.thicknessWall),aa(a.thicknessFloor),a.wallHeight-1))};return Jd(()=>{r(Cc(a.tilemap))}),l(ae,{theme:"primary-slim",className:"floorplan-import-export",children:[t(oe,{headerText:m("floor.plan.editor.import.export"),onCloseClick:e}),l(se,{children:[t("textarea",{className:"h-100",value:n,onChange:c=>r(c.target.value)}),l(v,{justifyContent:"between",children:[t(M,{onClick:c=>r(Cc(a.tilemap)),children:m("floor.plan.editor.revert.to.last.received.map")}),t(M,{onClick:s,children:m("floor.plan.editor.save")})]})]})]})},_c=0,ko=16,fv=0,Iv=26,Ev=o=>{const{visualizationSettings:e=null,setVisualizationSettings:n=null}=ml(),[r,a]=i.exports.useState(bt.SET),[s,c]=i.exports.useState(0),u=_=>{a(_),Mt.instance.actionSettings.currentAction=_},d=()=>{n(_=>{const C={..._};return C.entryPointDir<7?++C.entryPointDir:C.entryPointDir=0,C})},p=_=>{(isNaN(_)||_<=0)&&(_=0),_>26&&(_=26),c(_),Mt.instance.actionSettings.currentHeight=_.toString(36)},g=_=>{n(C=>{const b={...C};return b.thicknessFloor=_,b})},h=_=>{n(C=>{const b={...C};return b.thicknessWall=_,b})},f=_=>{(isNaN(_)||_<=0)&&(_=_c),_>ko&&(_=ko),n(C=>{const b={...C};return b.wallHeight=_,b})},E=()=>{let _=e.wallHeight+1;_>ko&&(_=ko),f(_)},I=()=>{let _=e.wallHeight-1;_<=0&&(_=_c),f(_)};return l(T,{children:[l(v,{gap:1,children:[l(T,{size:5,gap:1,children:[t(S,{bold:!0,children:m("floor.plan.editor.draw.mode")}),l(v,{gap:3,children:[l(v,{gap:1,children:[t(Ne,{itemActive:r===bt.SET,onClick:_=>u(bt.SET),children:t("i",{className:"icon icon-set-tile"})}),t(Ne,{itemActive:r===bt.UNSET,onClick:_=>u(bt.UNSET),children:t("i",{className:"icon icon-unset-tile"})})]}),l(v,{gap:1,children:[t(Ne,{itemActive:r===bt.UP,onClick:_=>u(bt.UP),children:t("i",{className:"icon icon-increase-height"})}),t(Ne,{itemActive:r===bt.DOWN,onClick:_=>u(bt.DOWN),children:t("i",{className:"icon icon-decrease-height"})})]}),t(Ne,{itemActive:r===bt.DOOR,onClick:_=>u(bt.DOOR),children:t("i",{className:"icon icon-set-door"})})]})]}),l(T,{alignItems:"center",size:4,children:[t(S,{bold:!0,children:m("floor.plan.editor.enter.direction")}),t("i",{className:`icon icon-door-direction-${e.entryPointDir} cursor-pointer`,onClick:d})]}),l(T,{size:3,children:[t(S,{bold:!0,children:m("floor.editor.wall.height")}),l(v,{alignItems:"center",gap:1,children:[t(gu,{className:"cursor-pointer fa-icon",onClick:I}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:e.wallHeight,onChange:_=>f(_.target.valueAsNumber)}),t(pu,{className:"cursor-pointer fa-icon",onClick:E})]})]})]}),l(v,{gap:1,children:[l(T,{size:6,children:[l(S,{bold:!0,children:[m("floor.plan.editor.tile.height"),": ",s]}),t(Dt,{className:"nitro-slider",min:fv,max:Iv,step:1,value:s,onChange:_=>p(_),renderThumb:({style:_,...C},b)=>t("div",{style:{backgroundColor:`#${cv[b.valueNow.toString(33)]}`,..._},...C,children:b.valueNow})})]}),l(T,{size:6,children:[t(S,{bold:!0,children:m("floor.plan.editor.room.options")}),l(v,{className:"align-items-center",children:[l("select",{className:"form-control form-control-sm",value:e.thicknessWall,onChange:_=>h(parseInt(_.target.value)),children:[t("option",{value:0,children:m("navigator.roomsettings.wall_thickness.thinnest")}),t("option",{value:1,children:m("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:2,children:m("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:3,children:m("navigator.roomsettings.wall_thickness.thick")})]}),l("select",{className:"form-control form-control-sm",value:e.thicknessFloor,onChange:_=>g(parseInt(_.target.value)),children:[t("option",{value:0,children:m("navigator.roomsettings.floor_thickness.thinnest")}),t("option",{value:1,children:m("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:2,children:m("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:3,children:m("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},Cv=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[u,d]=i.exports.useState({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),p=()=>{D(new Wu(Mt.instance.getCurrentTilemapString(),Mt.instance.doorLocation.x,Mt.instance.doorLocation.y,u.entryPointDir,aa(u.thicknessWall),aa(u.thicknessFloor),u.wallHeight-1))},g=()=>{d({wallHeight:s.wallHeight,thicknessWall:s.thicknessWall,thicknessFloor:s.thicknessFloor,entryPointDir:s.entryPointDir}),Mt.instance.doorLocation=new vr(s.entryPoint[0],s.entryPoint[1]),Mt.instance.setTilemap(s.tilemap,s.reservedTiles),Mt.instance.renderTiles()};return we(In.DISPOSED,h=>n(!1)),U(LI,h=>{const f=h.getParser();c(E=>{const I={...E};return I.tilemap=f.model,I.wallHeight=f.wallHeight+1,I}),d(E=>{const I={...E};return I.wallHeight=f.wallHeight+1,I})}),U(MI,h=>{const f=h.getParser();c(E=>{const I={...E};return I.thicknessFloor=Oo(f.thicknessFloor),I.thicknessWall=Oo(f.thicknessWall),I}),d(E=>{const I={...E};return I.thicknessFloor=Oo(f.thicknessFloor),I.thicknessWall=Oo(f.thicknessWall),I})}),i.exports.useEffect(()=>{const h={linkReceived:f=>{const E=f.split("/");if(!(E.length<2))switch(E[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(I=>!I);return}},eventUrlPrefix:"floor-editor/"};return It(h),()=>Et(h)},[]),i.exports.useEffect(()=>{Mt.instance.initialize()},[]),l(gv,{value:{originalFloorplanSettings:s,setOriginalFloorplanSettings:c,visualizationSettings:u,setVisualizationSettings:d},children:[e&&l(ae,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[t(oe,{headerText:m("floor.plan.editor.title"),onCloseClick:()=>n(!1)}),l(se,{overflow:"hidden",children:[t(Ev,{}),t(pv,{overflow:"hidden"}),l(v,{justifyContent:"between",children:[t(M,{onClick:g,children:m("floor.plan.editor.reload")}),l(tr,{children:[t(M,{disabled:!0,children:m("floor.plan.editor.preview")}),t(M,{onClick:h=>a(!0),children:m("floor.plan.editor.import.export")}),t(M,{onClick:p,children:m("floor.plan.editor.save")})]})]})]})]}),r&&t(hv,{onCloseClick:()=>a(!1)})]})},_v=o=>{const{friend:e=null}=o,[n,r]=i.exports.useState(!1),{followFriend:a=null}=pn(),s=i.exports.useRef();return i.exports.useEffect(()=>{const c=u=>{const d=s.current;d&&u.target!==d&&!d.contains(u.target)&&r(!1)};return document.addEventListener(ke.MOUSE_CLICK,c),()=>document.removeEventListener(ke.MOUSE_CLICK,c)},[]),e?l("div",{ref:s,className:"btn btn-friendsgensuccess friend-bar-item "+(n?"friend-bar-item-active":""),onClick:c=>r(u=>!u),children:[l("div",{className:`friend-bar-item-head position-absolute ${e.id>0?"avatar":"group"}`,children:[e.id>0&&t(ot,{headOnly:!0,figure:e.figure,direction:2}),e.id<=0&&t(Ye,{isGroup:!0,badgeCode:e.figure})]}),t("div",{className:"text-truncate",children:e.name}),n&&l("div",{className:"d-flex justify-content-between",children:[t(L,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:c=>ma(e.id)}),e.followingAllowed&&t(L,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:c=>a(e)}),t(L,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:c=>tn(e.id)})]})]}):l("div",{ref:s,className:"btn btn-friendsgen friend-bar-item friend-bar-search",children:[t("div",{className:"friend-bar-item-head position-absolute"}),t("div",{className:"text-truncate",children:m("friend.bar.find.title")})]})},qa=3,bv=o=>{const{onlineFriends:e=null}=o,[n,r]=i.exports.useState(0),a=i.exports.useRef();return l(v,{innerRef:a,alignItems:"center",className:"friend-bar",children:[t(M,{variant:"black",className:"friend-bar-button",disabled:n<=0,onClick:s=>r(n-1),children:t(Jt,{className:"fa-icon"})}),Array.from(Array(qa),(s,c)=>t(_v,{friend:e[n+c]||null},c)),t(M,{variant:"black",className:"friend-bar-button",disabled:!(e.length>qa&&n+qa<=e.length-1),onClick:s=>r(n+1),children:t(Zt,{className:"fa-icon"})})]})},Sv=o=>{const{friend:e=null,selected:n=!1,selectFriend:r=null}=o,[a,s]=i.exports.useState(!1),{followFriend:c=null,updateRelationship:u=null}=pn(),d=E=>{E.stopPropagation(),c(e)},p=E=>{E.stopPropagation(),ma(e.id)},g=E=>{E.stopPropagation(),s(!0)},h=(E,I)=>{E.stopPropagation(),u(e,I),s(!1)},f=()=>{if(!e)return"none";switch(e.relationshipStatus){case qt.RELATIONSHIP_HEART:return"heart";case qt.RELATIONSHIP_SMILE:return"smile";case qt.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}};return e?l(ea,{justifyContent:"between",className:`px-2 py-1 ${n&&"bg-primary text-white"}`,onClick:E=>r(e.id),children:[l(v,{alignItems:"center",gap:1,children:[t(L,{onClick:E=>E.stopPropagation(),children:t(Cn,{userId:e.id})}),t("div",{children:e.name})]}),l(v,{alignItems:"center",gap:1,children:[!a&&l(V,{children:[e.followingAllowed&&t(L,{pointer:!0,onClick:d,className:"nitro-friends-spritesheet icon-follow",title:m("friendlist.tip.follow")}),e.online&&t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:p,title:m("friendlist.tip.im")}),e.id>0&&t(L,{className:`nitro-friends-spritesheet icon-${f()} cursor-pointer`,onClick:g,title:m("infostand.link.relationship")})]}),a&&l(V,{children:[t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:E=>h(E,qt.RELATIONSHIP_HEART)}),t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:E=>h(E,qt.RELATIONSHIP_SMILE)}),t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:E=>h(E,qt.RELATIONSHIP_BOBBA)}),t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:E=>h(E,qt.RELATIONSHIP_NONE)})]})]})]}):null},bc=o=>{const{list:e=null,selectedFriendsIds:n=null,selectFriend:r=null}=o;return!e||!e.length?null:t(V,{children:e.map((a,s)=>t(Sv,{friend:a,selected:n&&n.indexOf(a.id)>=0,selectFriend:r},s))})},Nv=o=>{const{request:e=null}=o,{requestResponse:n=null}=pn();return e?l(ea,{justifyContent:"between",className:"px-2 py-1",children:[l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:e.id}),t("div",{children:e.name})]}),l(v,{alignItems:"center",gap:1,children:[t(L,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:r=>n(e.id,!0)}),t(L,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:r=>n(e.id,!1)})]})]}):null},Tv=o=>{const{children:e=null,...n}=o,{requests:r=[],requestResponse:a=null}=pn();return r.length?l(ta,{...n,children:[l(T,{fullHeight:!0,justifyContent:"between",gap:1,children:[t(T,{gap:0,children:r.map((s,c)=>t(Nv,{request:s},c))}),t(v,{justifyContent:"center",className:"px-2 py-1",children:t(M,{onClick:s=>a(-1,!1),children:m("friendlist.requests.dismissall")})})]}),e]}):null},vv=o=>{const{selectedFriendsIds:e=null,removeFriendsText:n=null,removeSelectedFriends:r=null,onCloseClick:a=null}=o;return l(ae,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[t(oe,{headerText:m("friendlist.removefriendconfirm.title"),onCloseClick:a}),l(se,{className:"text-black",children:[t("div",{children:n}),l(v,{gap:1,children:[t(M,{fullWidth:!0,variant:"danger",disabled:e.length===0,onClick:r,children:m("generic.ok")}),t(M,{fullWidth:!0,onClick:a,children:m("generic.cancel")})]})]})]})},wv=o=>{const{selectedFriendsIds:e=null,onCloseClick:n=null,sendRoomInvite:r=null}=o,[a,s]=i.exports.useState("");return l(ae,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[t(oe,{headerText:m("friendlist.invite.title"),onCloseClick:n}),l(se,{className:"text-black",children:[m("friendlist.invite.summary",["count"],[e.length.toString()]),t("textarea",{className:"form-control",value:a,maxLength:255,onChange:c=>s(c.target.value)}),t(S,{center:!0,className:"bg-muted rounded p-1",children:m("friendlist.invite.note")}),l(v,{gap:1,children:[t(M,{fullWidth:!0,variant:"success",disabled:a.length===0||e.length===0,onClick:()=>r(a),children:m("friendlist.invite.send")}),t(M,{fullWidth:!0,onClick:n,children:m("generic.cancel")})]})]})]})},yv=o=>{const{...e}=o,[n,r]=i.exports.useState(""),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),{canRequestFriend:d=null,requestFriend:p=null}=pn();return U(UI,g=>{const h=g.getParser();s(h.friends),u(h.others)}),i.exports.useEffect(()=>{if(!n||!n.length)return;const g=setTimeout(()=>{!n||!n.length||D(new FI(n))},500);return()=>clearTimeout(g)},[n]),l(ta,{...e,children:[t("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:m("generic.search"),value:n,maxLength:50,onChange:g=>r(g.target.value)}),l(T,{children:[a&&l(V,{children:[a.length===0&&t(S,{bold:!0,small:!0,className:"px-2 py-1",children:m("friendlist.search.nofriendsfound")}),a.length>0&&l(T,{gap:0,children:[t(S,{bold:!0,small:!0,className:"px-2 py-1",children:m("friendlist.search.friendscaption",["cnt"],[a.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(T,{gap:0,children:a.map(g=>l(ea,{justifyContent:"between",className:"px-2 py-1",children:[l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:g.avatarId}),t("div",{children:g.avatarName})]}),t(v,{alignItems:"center",gap:1,children:g.isAvatarOnline&&t(L,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:h=>ma(g.avatarId),title:m("friendlist.tip.im")})})]},g.avatarId))})]})]}),c&&l(V,{children:[c.length===0&&t(S,{bold:!0,small:!0,className:"px-2 py-1",children:m("friendlist.search.noothersfound")}),c.length>0&&l(T,{gap:0,children:[t(S,{bold:!0,small:!0,className:"px-2 py-1",children:m("friendlist.search.otherscaption",["cnt"],[c.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(T,{gap:0,children:c.map(g=>l(ea,{justifyContent:"between",className:"px-2 py-1",children:[l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:g.avatarId}),t("div",{children:g.avatarName})]}),t(v,{alignItems:"center",gap:1,children:d(g.avatarId)&&t(L,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:h=>p(g.avatarId,g.avatarName),title:m("friendlist.tip.addfriend")})})]},g.avatarId))})]})]})]})]})},xv=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState([]),[s,c]=i.exports.useState(!1),[u,d]=i.exports.useState(!1),{onlineFriends:p=[],offlineFriends:g=[],requests:h=[],requestFriend:f=null}=pn(),E=i.exports.useMemo(()=>{if(!r||!r.length)return"";const b=[];for(const N of r){let w=p.find(O=>O.id===N);w||(w=g.find(O=>O.id===N)),w&&b.push(w.name)}return m("friendlist.removefriendconfirm.userlist",["user_names"],[b.join(", ")])},[g,p,r]),I=i.exports.useCallback(b=>{b<0||a(N=>{const w=[...N],O=w.indexOf(b);return O>-1?w.splice(O,1):w.push(b),w})},[a]),_=b=>{!r.length||!b||!b.length||b.length>255||(D(new BI(b,r)),c(!1))},C=()=>{r.length!==0&&(a(b=>(D(new GI(...b)),[])),d(!1))};return i.exports.useEffect(()=>{const b={linkReceived:N=>{const w=N.split("/");if(!(w.length<2))switch(w[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(O=>!O);return;case"request":if(w.length<4)return;f(parseInt(w[2]),w[3])}},eventUrlPrefix:"friends/"};return It(b),()=>Et(b)},[f]),e?l(V,{children:[l(ae,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"primary-slim",children:[t(oe,{headerText:m("friendlist.friends"),onCloseClick:b=>n(!1)}),l(se,{overflow:"hidden",gap:1,className:"text-black p-0",children:[l(Mb,{fullHeight:!0,overflow:"hidden",children:[t(ta,{headerText:m("friendlist.friends")+` (${p.length})`,isExpanded:!0,children:t(bc,{list:p,selectedFriendsIds:r,selectFriend:I})}),t(ta,{headerText:m("friendlist.friends.offlinecaption")+` (${g.length})`,children:t(bc,{list:g,selectedFriendsIds:r,selectFriend:I})}),t(Tv,{headerText:m("friendlist.tab.friendrequests")+` (${h.length})`,isExpanded:!0}),t(yv,{headerText:m("people.search.title")})]}),r&&r.length>0&&l(v,{gap:1,className:"p-1",children:[t(M,{fullWidth:!0,onClick:()=>c(!0),children:m("friendlist.tip.invite")}),t(M,{fullWidth:!0,variant:"danger",onClick:b=>d(!0),children:m("generic.delete")})]})]})]}),s&&t(wv,{selectedFriendsIds:r,onCloseClick:()=>c(!1),sendRoomInvite:_}),u&&t(vv,{selectedFriendsIds:r,removeFriendsText:E,onCloseClick:()=>d(!1),removeSelectedFriends:C})]}):null},Rv=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(!0),[h,f]=i.exports.useState(!1);cl();var E=!1;zn();const{visibleThreads:I=[],activeThread:_=null,getMessageThread:C=null,sendMessage:b=null,setActiveThreadId:N=null,closeThread:w=null}=al();function O(B){if(E=!0,B.length==0){f(!1),g(!0);return}fetch("https://api.giphy.com/v1/gifs/search?api_key=4qwMrfzYMYVl1lhhl3wDaVxDNWAzAv6s&q="+B+"&limit=25&offset=0&rating=g&lang=en").then(H=>H.json()).then(H=>{d(H),g(!1),f(!0)})}const y=B=>{B.key==="Enter"&&O(A)};function x(B){const H=B.split(".gif");b(_,W().userId,H[0])}function F(){return s==null?null:t("div",{})}function P(){return u==null?null:t(te,{columnCount:4,overflow:"auto",id:"giphyStickers",children:u.data.map(B=>t(L,{children:t("img",{src:B.images.downsized_medium.url,width:50,height:50,className:"sticker-img",onClick:H=>x(B.images.fixed_height_small.url)})},B.images.downsized_medium.url))})}const k=B=>{if(E)return;let H=!0;a(X=>(H=!X,H)),H&&n(B.target),E=!1};function R(){E=!0}var A="";function G(B){A=B}return i.exports.useEffect(()=>{r||n(null)},[r]),t(V,{children:t(L,{pointer:!0,className:"icon sticker-icon",onClick:k,style:{display:"inline-block"},children:t(ia,{show:r,target:e,placement:"top",children:t(fs,{className:"nitro-chat-sticker-selector-container image-rendering-pixelated",children:l(se,{overflow:"hidden",className:"bg-transparent",children:[l(v,{gap:1,children:[t("input",{onClick:B=>R(),onChange:B=>G(B.target.value),onKeyDown:y,type:"text",className:"form-control form-control-sm",placeholder:m("generic.search")}),t(Li,{variant:"success",className:"stickers-search-button",onClick:B=>O(A),children:t($s,{className:"fa-icon"})})]}),p?t(F,{}):null,h?t(P,{}):null]})})})})})},Ov=o=>{const e=c=>c.replace(/([\u00A0-\u9999<>&])(.|$)/g,(u,d,p)=>d!=="&"||p!=="#"?(/[\u00A0-\u9999<>&]/.test(p)&&(p="&#"+p.charCodeAt(0)+";"),"&#"+d.charCodeAt(0)+";"+p):u),{thread:n=null,group:r=null}=o,a=i.exports.useMemo(()=>r.type===Yr.GROUP_CHAT&&pd(r.chats[0].extraData),[r]),s=i.exports.useMemo(()=>!n||!r?!1:!!(r.type===Yr.PRIVATE_CHAT&&r.userId===W().userId||a&&r.chats.length&&a.userId===W().userId),[n,r,a]);return!n||!r?null:r.userId?l(v,{fullWidth:!0,justifyContent:s?"end":"start",gap:2,children:[l(L,{shrink:!0,className:"message-avatar",children:[r.type===Yr.PRIVATE_CHAT&&!s&&t(ot,{figure:n.participant.figure,direction:2}),a&&!s&&t(ot,{figure:a.figure,direction:2})]}),l(L,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(s?"right":"left"),children:[t("div",{className:"fw-bold",dangerouslySetInnerHTML:{__html:s&&W().userName||!s&&(a?a.username:n.participant.name)}}),r.chats.map((c,u)=>{let d=c.message;d.toLowerCase().includes("<style>")&&(d="Soy napa, y tengo déficit de atención."),d.toLowerCase().includes("<script>")&&(d="Soy napa, y tengo déficit de atención.");let p=e(d);const g=/\s*\[[^\]]*\]|\s*\([^\)]*\)/g;return p=du.exports.shortnameToUnicode(p),p.includes("https://int.habbeh.net/audios/")?p.includes("https://int.habbeh.net/audios/errorpeso")?p="El audio es demasiado pesado":(p=p.replace(g,""),p=`<audio style='height: 14px; position: relative; top: 2px; width: 195px;' controls src='${p}'/>`):p.includes("giphy.com/media")&&(p=p.replace(g,""),p=`<p style='background-image: url(${p}.gif); width: 90px; height: 90px; margin: 4px 10px 2px 10px; background-size: cover; border-radius: 3px;'></p>`),t(L,{className:"text-break",dangerouslySetInnerHTML:{__html:p}},u)})]}),s&&t(L,{shrink:!0,className:"message-avatar",children:t(ot,{figure:W().figure,direction:4})})]}):t(V,{children:r.chats.map((c,u)=>t(v,{fullWidth:!0,gap:2,justifyContent:"start",children:l(L,{className:"w-100 text-break",children:[c.type===jn.SECURITY_NOTIFICATION&&l(v,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[t(L,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),t(L,{children:c.message})]}),c.type===jn.ROOM_INVITE&&l(v,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[t(L,{className:"messenger-notification-icon flex-shrink-0"}),l(L,{children:[m("messenger.invitation")+" ",c.message]})]})]})},u))})},kv=o=>{const{thread:e=null}=o;return e.setRead(),t(V,{children:e.groups.length>0&&e.groups.map((n,r)=>t(Ov,{thread:e,group:n},r))})},Av=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(-1),[s,c]=i.exports.useState(""),{visibleThreads:u=[],activeThread:d=null,getMessageThread:p=null,sendMessage:g=null,setActiveThreadId:h=null,closeThread:f=null}=al(),{report:E=null}=Ln(),I=i.exports.useRef(),_=()=>d&&d.participant&&D(new Bi(d.participant.id)),C=()=>d&&d.participant&&tn(d.participant.id),b=()=>{!d||!s.length||(g(d,W().userId,s),c(""))},N=H=>{H.key==="Enter"&&b()};if(i.exports.useEffect(()=>{const H={linkReceived:X=>{const j=X.split("/");if(j.length===2){if(j[1]==="open"){n(!0);return}if(j[1]==="toggle"){n(ie=>!ie);return}const de=p(parseInt(j[1]));if(!de)return;h(de.threadId),n(!0)}},eventUrlPrefix:"friends-messenger/"};return It(H),()=>Et(H)},[p,h]),i.exports.useEffect(()=>{!e||!d||(I.current.scrollTop=I.current.scrollHeight)},[e,d]),i.exports.useEffect(()=>{if(e&&!d){r>0?h(r):u.length>0&&h(u[0].threadId);return}!e&&d&&(a(d.threadId),h(-1))},[e,d,r,u,h]),!e)return null;function w(){document.getElementById("submenuChatConsola").style.display="flex",document.getElementById("chatmasinfogen").style.display="none"}function O(){document.getElementById("submenuChatConsola").style.display="none",document.getElementById("chatmasinfogen").style.display="block"}var y,x=[],F=document.getElementById("microphoneConsoeOn"),P=document.getElementById("microphoneConsoeOff"),k=document.getElementById("deleteAudioConsola"),R=!1;function A(){F.style.display="none",P.style.display="inline-block",k.style.display="inline-block",navigator.mediaDevices.getUserMedia({audio:!0}).then(H=>{y=new MediaRecorder(H),y.start(),y.addEventListener("dataavailable",X=>{x.push(X.data)}),y.addEventListener("stop",()=>{if(F.style.display="inline-block",P.style.display="none",k.style.display="none",!R){const j=new Blob(x);var X=new FormData;X.append("audio",j),fetch("https://int.habbeh.net/audio.php",{method:"POST",body:X}).then(de=>de.text()).then(de=>{g(d,W().userId,"https://int.habbeh.net/audios/"+de+".mp3")})}R=!1,x=[]})})}function G(){F.style.display="inline-block",P.style.display="none",k.style.display="none",y.stop()}function B(){F.style.display="inline-block",P.style.display="none",k.style.display="none",R=!0,y.stop()}return l(ae,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[t(oe,{className:"cardtitleplusconsola",headerText:m("messenger.window.title",["OPEN_CHAT_COUNT"],[u.length.toString()]),onCloseClick:H=>n(!1)}),t(se,{className:"cardheadplusconsola",children:l(te,{overflow:"hidden",children:[l(T,{size:4,overflow:"hidden",children:[t(S,{bold:!0,children:m("toolbar.icon.label.messenger")}),t(T,{fit:!0,overflow:"auto",children:t(T,{children:u&&u.length>0&&u.map(H=>l(Ne,{itemActive:d===H,onClick:X=>h(H.threadId),children:[H.unread&&t(yr,{count:H.unreadCount}),l(v,{fullWidth:!0,alignItems:"center",gap:1,children:[l(v,{alignItems:"center",className:"friend-head px-1",children:[H.participant.id>0&&t(ot,{figure:H.participant.figure,headOnly:!0,direction:3}),H.participant.id<=0&&t(Ye,{isGroup:!0,badgeCode:H.participant.figure})]}),t(S,{truncate:!0,grow:!0,children:H.participant.name})]})]},H.threadId))})})]}),t(T,{size:8,overflow:"hidden",children:d&&l(V,{children:[t(S,{bold:!0,center:!0,children:m("messenger.window.separator",["FRIEND_NAME"],[d.participant.name])}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[l(v,{gap:1,children:[l(tr,{children:[t(M,{className:"colornewbuttonfriend",onClick:_,children:t(L,{className:"nitro-friends-spritesheet icon-follow"})}),t(M,{className:"colornewbuttonfriend",onClick:C,children:t(L,{className:"nitro-friends-spritesheet icon-profile-sm"})})]}),t(M,{variant:"danger",onClick:()=>E(qe.IM,{reportedUserId:d.participant.id}),children:m("messenger.window.button.report")})]}),t(M,{variant:"danger",onClick:H=>f(d.threadId),children:t(_n,{className:"fa-icon"})})]}),t(T,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:t(T,{innerRef:I,overflow:"auto",children:t(kv,{thread:d})})}),l(v,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:m("messenger.window.input.default",["FRIEND_NAME"],[d.participant.name]),value:s,onChange:H=>c(H.target.value),onKeyDown:N,style:{paddingRight:35}}),l("div",{id:"submenuChatConsola",children:[t(Rv,{}),t("div",{id:"microphoneConsoeOn",onClick:H=>A(),style:{marginLeft:"5px",display:"inline-block"},className:"icon chatmicrophoneConsoe-on-icon"}),t("div",{id:"microphoneConsoeOff",onClick:H=>G(),style:{marginLeft:"5px",display:"none"},className:"icon chatmicrophoneConsoe-off-icon"}),t("div",{id:"deleteAudioConsola",onClick:H=>B(),style:{marginLeft:"5px",display:"none"},className:"icon chatdeleteAudioConsola-icon"}),t("div",{onClick:()=>O(),className:"icon chatequis-icon",style:{display:"inline-block"}})]}),t("div",{onClick:()=>w(),className:"masiconstoolgen icon chatmas-icon",id:"chatmasinfogen",style:{position:"relative",width:"40px",height:"27px",marginTop:"4px",marginRight:"0px",marginLeft:"0px",float:"inherit",right:"0px"}}),t(M,{variant:"success",onClick:b,children:m("widgets.chatinput.say")})]})]})})]})})]})},Pv=o=>{const{settings:e=null,onlineFriends:n=[]}=pn();return e?l(V,{children:[Pi.exports.createPortal(t(bv,{onlineFriends:n}),document.getElementById("toolbar-friend-bar-container")),t(xv,{}),t(Av,{})]}):null},Dv=()=>{const{games:o,selectedGame:e,setSelectedGame:n}=Ca(),r=s=>{let c=["game-icon"];return e===s&&c.push("selected"),c.join(" ")},a=s=>`url(${s.assetUrl}${s.gameNameId}_icon.png)`;return l(L,{fullWidth:!0,className:"gameList-container bg-dark p-1",children:[m("gamecenter.game_list_title"),t(v,{gap:3,children:o&&o.map((s,c)=>t(L,{className:r(s),onClick:u=>n(s),style:{backgroundImage:a(s)}},c))})]})},Lv=()=>{const{gameURL:o,setGameURL:e}=Ca(),[n,r]=i.exports.useState(0),a=i.exports.useRef();return i.exports.useEffect(()=>{if(!a||a&&!a.current)return;r(0);let s=document.createElement("iframe");s.src=o,s.classList.add("game-center-stage"),s.classList.add("h-100"),s.onload=()=>{r(c=>c+=1)},a.current.innerHTML="",a.current.appendChild(s)},[a,o]),i.exports.useEffect(()=>{n>1&&(e(null),D(new VI))},[n,e]),o?t(L,{innerRef:a,className:"game-center-stage"}):null},Mv=()=>{const{selectedGame:o,accountStatus:e}=Ca();i.exports.useEffect(()=>{o&&(D(new HI(o.gameId)),D(new WI(o.gameId)))},[o]);const n=()=>en.uintHexColor(o.bgColor),r=()=>`url(${o.assetUrl}${o.gameNameId}_theme.png)`,a=()=>en.uintHexColor(o.textColor),s=()=>{D(new jI(o.gameId))};return l(v,{className:"game-view py-4",fullHeight:!0,style:{backgroundColor:n(),backgroundImage:r(),color:a()},children:[l(v,{className:"w-75",column:!0,alignItems:"center",gap:2,children:[t(S,{bold:!0,children:m(`gamecenter.${o.gameNameId}.description_title`)}),t("img",{src:o.assetUrl+o.gameNameId+"_logo.png"}),(e.hasUnlimitedGames||e.freeGamesLeft>0)&&t(V,{children:l(M,{variant:"light",position:"relative",className:"px-4",onClick:s,children:[m("gamecenter.play_now"),!e.hasUnlimitedGames&&t(yr,{className:"me-n1 mt-n1",count:e.freeGamesLeft})]})}),t(S,{bold:!0,className:"w-50",center:!0,children:m(`gamecenter.${o.gameNameId}.description_content`)})]}),t(L,{className:"w-25"})]})},Uv=()=>{const{isVisible:o,setIsVisible:e,games:n,accountStatus:r}=Ca();if(i.exports.useEffect(()=>{const a=()=>{e(c=>!c)},s={linkReceived:c=>{switch(c.split("/")[1]){case"toggle":a();break}},eventUrlPrefix:"games/"};return It(s),()=>Et(s)},[]),!(!o||!n||!r))return l(v,{position:"absolute",className:"top-0 bottom-0 start-0 end-0 bg-black",justifyContent:"center",children:[l(v,{className:"game-center-main",column:!0,children:[t(Mv,{}),t(Dv,{})]}),t(Lv,{})]})},Fv=[0,1,2,3,4,5,6,7,8],Bv=o=>{const{badgeParts:e=[],setBadgeParts:n=null}=o,[r,a]=i.exports.useState(-1),{groupCustomize:s=null}=io(),c=(u,d,p)=>{const g=[...e];g[u][d]=p,n(g),d==="key"&&a(-1)};return!e||!e.length?null:l(V,{children:[r<0&&e&&e.length>0&&e.map((u,d)=>l(v,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[l(v,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:p=>a(d),children:[e[d].code&&e[d].code.length>0&&t(Ye,{badgeCode:e[d].code,isGroup:!0}),(!e[d].code||!e[d].code.length)&&t(v,{center:!0,className:"badge-image group-badge",children:t(Ks,{className:"fa-icon"})})]}),u.type!==Yt.BASE&&t(te,{gap:1,columnCount:3,children:Fv.map((p,g)=>t(L,{pointer:!0,className:`group-badge-position-swatch ${e[d].position===p?"active":""}`,onClick:h=>c(d,"position",p)},g))}),t(te,{gap:1,columnCount:8,children:s.badgePartColors.length>0&&s.badgePartColors.map((p,g)=>t(L,{pointer:!0,className:`group-badge-color-swatch ${e[d].color===g+1?"active":""}`,style:{backgroundColor:"#"+p.color},onClick:h=>c(d,"color",g+1)},g))})]},d)),r>=0&&l(te,{gap:1,columnCount:5,children:[e[r].type===Yt.SYMBOL&&t(T,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:u=>c(r,"key",0),children:t(v,{center:!0,className:"badge-image group-badge",children:t(_n,{className:"fa-icon"})})}),(e[r].type===Yt.BASE?s.badgeBases:s.badgeSymbols).map((u,d)=>t(T,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:p=>c(r,"key",u.id),children:t(Ye,{badgeCode:Yt.getCode(e[r].type,u.id,e[r].color,4),isGroup:!0})},d))]})]})},dm=o=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:r=null,skipDefault:a=null}=o,[s,c]=i.exports.useState(null),{groupCustomize:u=null}=io(),d=()=>{if(!s||!s.length)return"";let g="";return s.forEach(h=>h.code&&(g+=h.code)),g},p=i.exports.useCallback(()=>{if(!e||!s||!s.length)return!1;if(e.groupBadgeParts===s)return!0;if(e.groupId<=0)return n(h=>{const f={...h};return f.groupBadgeParts=s,f}),!0;const g=[];return s.forEach(h=>{h.code&&(g.push(h.key),g.push(h.color),g.push(h.position))}),D(new qI(e.groupId,g)),!0},[e,s,n]);return i.exports.useEffect(()=>{if(e.groupBadgeParts)return;const g=[new Yt(Yt.BASE,u.badgeBases[0].id,u.badgePartColors[0].id),new Yt(Yt.SYMBOL,0,u.badgePartColors[0].id),new Yt(Yt.SYMBOL,0,u.badgePartColors[0].id),new Yt(Yt.SYMBOL,0,u.badgePartColors[0].id),new Yt(Yt.SYMBOL,0,u.badgePartColors[0].id)];n(h=>({...h,groupBadgeParts:g}))},[e.groupBadgeParts,u,n]),i.exports.useEffect(()=>{if(e.groupId<=0){c(e.groupBadgeParts?[...e.groupBadgeParts]:null);return}c(e.groupBadgeParts)},[e]),i.exports.useEffect(()=>(r({action:p}),()=>r(null)),[r,p]),l(te,{overflow:"hidden",gap:1,children:[t(T,{size:2,children:t(v,{center:!0,className:"bg-muted rounded p-1",children:t(Ye,{badgeCode:d(),isGroup:!0})})}),t(T,{size:10,overflow:"auto",children:t(Bv,{badgeParts:s,setBadgeParts:c})})]})},mm=o=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:r=null}=o,[a,s]=i.exports.useState(null),{groupCustomize:c=null}=io(),u=g=>g===0?c.groupColorsA.find(h=>h.id===a[g]).color:c.groupColorsB.find(h=>h.id===a[g]).color,d=(g,h)=>{s(f=>{const E=[...f];return E[g]=h,E})},p=i.exports.useCallback(()=>!e||!a||!a.length?!1:e.groupColors===a?!0:e.groupId<=0?(n(g=>{const h={...g};return h.groupColors=[...a],h}),!0):(D(new zI(e.groupId,a[0],a[1])),!0),[e,a,n]);return i.exports.useEffect(()=>{if(!c.groupColorsA||!c.groupColorsB||e.groupColors)return;const g=[c.groupColorsA[0].id,c.groupColorsB[0].id];n(h=>({...h,groupColors:g}))},[c,e.groupColors,n]),i.exports.useEffect(()=>{if(e.groupId<=0){s(e.groupColors?[...e.groupColors]:null);return}s(e.groupColors)},[e]),i.exports.useEffect(()=>(r({action:p}),()=>r(null)),[r,p]),a?l(te,{overflow:"hidden",children:[l(T,{size:2,gap:1,children:[t(S,{bold:!0,children:m("group.edit.color.guild.color")}),e.groupColors&&e.groupColors.length>0&&l(v,{overflow:"hidden",className:"rounded border",children:[t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+u(0)}}),t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+u(1)}})]})]}),l(T,{size:5,gap:1,overflow:"hidden",children:[t(S,{bold:!0,children:m("group.edit.color.primary.color")}),t(Ge,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsA&&c.groupColorsA.map((g,h)=>t("div",{className:Ht("group-badge-color-swatch cursor-pointer",e.groupColors[0]===g.id&&"active"),style:{backgroundColor:"#"+g.color},onClick:()=>d(0,g.id)},h))})]}),l(T,{size:5,gap:1,overflow:"hidden",children:[t(S,{bold:!0,children:m("group.edit.color.secondary.color")}),t(Ge,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsB&&c.groupColorsB.map((g,h)=>t("div",{className:Ht("group-badge-color-swatch cursor-pointer",e.groupColors[1]===g.id&&"active"),style:{backgroundColor:"#"+g.color},onClick:()=>d(1,g.id)},h))})]})]}):null},Gv=o=>{const{groupData:e=null,setGroupData:n=null,purchaseCost:r=0}=o,{groupCustomize:a=null}=io(),s=()=>{if(!e||!e.groupBadgeParts||!e.groupBadgeParts.length)return"";let u="";return e.groupBadgeParts.forEach(d=>d.code&&(u+=d.code)),u},c=u=>u===0?a.groupColorsA.find(d=>d.id===e.groupColors[u]).color:a.groupColorsB.find(d=>d.id===e.groupColors[u]).color;return e?l(te,{overflow:"hidden",gap:1,children:[l(T,{size:3,children:[l(T,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(S,{bold:!0,center:!0,children:m("group.create.confirm.guildbadge")}),t(Ye,{badgeCode:s(),isGroup:!0})]}),l(T,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(S,{bold:!0,center:!0,children:m("group.edit.color.guild.color")}),l(v,{overflow:"hidden",className:"rounded border",children:[t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]})]}),l(T,{size:9,justifyContent:"between",children:[l(T,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:e.groupName}),t(S,{children:e.groupDescription})]}),t(S,{overflow:"auto",children:m("group.create.confirm.info")})]}),t(S,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:m("group.create.confirm.buyinfo",["amount"],[r.toString()])})]})]}):null},gm=o=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:r=null,onClose:a=null,isCreator:s=!1,availableRooms:c=[]}=o,[u,d]=i.exports.useState(""),[p,g]=i.exports.useState(""),[h,f]=i.exports.useState(-1),{showConfirm:E=null}=Ze(),I=()=>{!e||e.groupId<=0||E(m("group.deleteconfirm.desc"),()=>{D(new $I(e.groupId)),a&&a()},null,null,null,m("group.deleteconfirm.title"))},_=i.exports.useCallback(()=>!e||!u||!u.length?!1:u===e.groupName&&p===e.groupDescription?!0:e.groupId<=0?h<=0?!1:(n(C=>{const b={...C};return b.groupName=u,b.groupDescription=p,b.groupHomeroomId=h,b}),!0):(D(new YI(e.groupId,u,p||"")),!0),[e,u,p,h,n]);return i.exports.useEffect(()=>{d(e.groupName||""),g(e.groupDescription||""),f(e.groupHomeroomId)},[e]),i.exports.useEffect(()=>(r({action:_}),()=>r(null)),[r,_]),e?l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(S,{center:!0,className:"col-3",children:m("group.edit.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:29,onChange:C=>d(C.target.value)})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{center:!0,className:"col-3",children:m("group.edit.desc")}),t("textarea",{className:"form-control form-control-sm",value:p,maxLength:254,onChange:C=>g(C.target.value)})]}),s&&l(V,{children:[l(v,{alignItems:"center",gap:1,children:[t(S,{center:!0,className:"col-3",children:m("group.edit.base")}),t(T,{fullWidth:!0,gap:1,children:l("select",{className:"form-select form-select-sm",value:h,onChange:C=>f(parseInt(C.target.value)),children:[t("option",{value:-1,disabled:!0,children:m("group.edit.base.select.room")}),c&&c.map((C,b)=>t("option",{value:C.id,children:C.name},b))]})})]}),l(v,{gap:1,children:[t(L,{className:"col-3",children:" "}),t(S,{small:!0,children:m("group.edit.base.warning")})]})]})]}),!s&&t(M,{variant:"danger",onClick:I,children:m("group.delete")}),s&&t(S,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:C=>ee("navigator/create"),children:m("group.createroom")})]}):null},Vv=[1,2,3,4],Hv=o=>{const{onClose:e=null}=o,[n,r]=i.exports.useState(1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState(null),[g,h]=i.exports.useState(0),f=()=>{s(null),u(null),e&&e()},E=()=>{if(!c)return;const C=[];c.groupBadgeParts.forEach(b=>{b.code&&(C.push(b.key),C.push(b.color),C.push(b.position))}),D(new QI(c.groupName,c.groupDescription,c.groupHomeroomId,c.groupColors[0],c.groupColors[1],C))},I=()=>{if(!(a&&a.action&&!a.action())){if(n===1){e();return}r(C=>C-1)}},_=()=>{if(!(a&&a.action&&!a.action())){if(n===4){E();return}r(C=>C===4?C:C+1)}};return U(KI,C=>{const b=C.getParser(),N=[];b.availableRooms.forEach((w,O)=>N.push({id:O,name:w})),p(N),h(b.groupCost)}),i.exports.useEffect(()=>{r(1),u({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),D(new XI)},[u]),c?l(ae,{className:"nitro-group-creator",theme:"primary-slim",children:[t(oe,{headerText:m("group.create.title"),onCloseClick:f}),l(se,{children:[t(v,{center:!0,className:"creator-tabs",children:Vv.map((C,b)=>t(v,{center:!0,className:`tab tab-${C===1?"blue-flat":C===4?"yellow":"blue-arrow"} ${n===C?"active":""}`,children:t(S,{variant:"white",children:m(`group.create.steplabel.${C}`)})},b))}),l(T,{overflow:"hidden",children:[l(v,{alignItems:"center",gap:2,children:[t(L,{className:`nitro-group-tab-image tab-${n}`}),l(T,{grow:!0,gap:0,children:[t(S,{bold:!0,fontSize:4,children:m(`group.create.stepcaption.${n}`)}),t(S,{children:m(`group.create.stepdesc.${n}`)})]})]}),l(T,{overflow:"hidden",children:[n===1&&t(gm,{groupData:c,setGroupData:u,setCloseAction:s,onClose:null,isCreator:!0,availableRooms:d}),n===2&&t(dm,{groupData:c,setGroupData:u,setCloseAction:s}),n===3&&t(mm,{groupData:c,setGroupData:u,setCloseAction:s}),n===4&&t(Gv,{groupData:c,setGroupData:u,purchaseCost:g})]}),l(v,{justifyContent:"between",children:[t(M,{variant:"link",className:"text-black",onClick:I,children:m(n===1?"generic.cancel":"group.create.previousstep")}),t(M,{disabled:n===4&&!qr(),variant:n===4?qr()?"success":"danger":"primary",onClick:_,children:m(n===4?qr()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null},Wv=["regular","exclusive","private"],pm=o=>{const{groupInformation:e=null,onClose:n=null,overflow:r="hidden",...a}=o,{showConfirm:s=null}=Ze(),c=e&&e.ownerName===W().userName,u=()=>e&&Qi(e.id),d=()=>{s(m("group.leaveconfirm.desc"),()=>{D(new Gi(e.id,W().userId)),n&&n()},null)},p=()=>e.membershipType===yt.NOT_MEMBER||e.membershipType===yt.REQUEST_PENDING?null:c?t("i",{className:"icon icon-group-owner",title:m("group.youareowner")}):e.isAdmin?t("i",{className:"icon icon-group-admin",title:m("group.youareadmin")}):t("i",{className:"icon icon-group-member",title:m("group.youaremember")}),g=()=>{if(c)return"group.youareowner";if(e.type===ln.PRIVATE&&e.membershipType!==yt.MEMBER)return"";if(e.membershipType===yt.MEMBER)return"group.leave";if(e.membershipType===yt.NOT_MEMBER&&e.type===ln.REGULAR)return"group.join";if(e.membershipType===yt.REQUEST_PENDING)return"group.membershippending";if(e.membershipType===yt.NOT_MEMBER&&e.type===ln.EXCLUSIVE)return"group.requestmembership"},h=()=>{if(!(e.type===ln.PRIVATE&&e.membershipType===yt.NOT_MEMBER)){if(e.membershipType===yt.MEMBER){d();return}u()}},f=E=>{switch(E){case"members":Jl(e.id);break;case"members_pending":Jl(e.id,2);break;case"manage":Id(e.id);break;case"homeroom":Xt(e.roomId);break;case"furniture":ee("catalog/open/"+mt.GUILD_CUSTOM_FURNI);break;case"popular_groups":ee("navigator/search/groups");break}};return e?l(te,{overflow:r,...a,children:[l(T,{center:!0,size:3,overflow:"hidden",children:[t(v,{alignItems:"center",overflow:"hidden",className:"group-badge",children:t(Ye,{badgeCode:e.badge,isGroup:!0,scale:2})}),l(T,{alignItems:"center",gap:1,children:[t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("members"),children:m("group.membercount",["totalMembers"],[e.membersCount.toString()])}),e.pendingRequestsCount>0&&t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("members_pending"),children:m("group.pendingmembercount",["amount"],[e.pendingRequestsCount.toString()])}),e.isOwner&&t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("manage"),children:m("group.manage")})]}),p()]}),l(T,{size:9,justifyContent:"between",overflow:"auto",children:[l(T,{overflow:"hidden",children:[l(T,{gap:1,children:[l(v,{alignItems:"center",gap:2,children:[t(S,{bold:!0,children:e.title}),l(v,{gap:1,children:[t("i",{className:"icon icon-group-type-"+e.type,title:m(`group.edit.settings.type.${Wv[e.type]}.help`)}),e.canMembersDecorate&&t("i",{className:"icon icon-group-decorate",title:m("group.memberscandecorate")})]})]}),t(S,{small:!0,children:m("group.created",["date","owner"],[e.createdAt,e.ownerName])})]}),t(S,{small:!0,overflow:"auto",className:"group-description",children:e.description})]}),l(T,{children:[l(T,{gap:1,children:[t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("homeroom"),children:m("group.linktobase")}),t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("furniture"),children:m("group.buyfurni")}),t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("popular_groups"),children:m("group.showgroups")})]}),(e.type!==ln.PRIVATE||e.type===ln.PRIVATE&&e.membershipType===yt.MEMBER)&&t(M,{disabled:e.membershipType===yt.REQUEST_PENDING||c,onClick:h,children:m(g())})]})]})]}):null},jv=o=>{const[e,n]=i.exports.useState(null);return U(Js,r=>{const a=r.getParser();(e&&e.id===a.id||a.flag)&&n(a)}),e?l(ae,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[t(oe,{headerText:m("group.window.title"),onCloseClick:r=>n(null)}),t(se,{children:t(pm,{groupInformation:e,onClose:()=>n(null)})})]}):null},qv=["regular","exclusive","private"],zv=o=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:r=null}=o,[a,s]=i.exports.useState(e.groupState),[c,u]=i.exports.useState(e.groupCanMembersDecorate),d=i.exports.useCallback(()=>e?a===e.groupState&&c===e.groupCanMembersDecorate?!0:e.groupId<=0?(n(p=>{const g={...p};return g.groupState=a,g.groupCanMembersDecorate=c,g}),!0):(D(new JI(e.groupId,a,c?0:1)),!0):!1,[e,a,c,n]);return i.exports.useEffect(()=>{s(e.groupState),u(e.groupCanMembersDecorate)},[e]),i.exports.useEffect(()=>(r({action:d}),()=>r(null)),[r,d]),l(T,{overflow:"auto",children:[t(T,{children:qv.map((p,g)=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"groupState",checked:a===g,onChange:h=>s(g)}),l(T,{gap:0,children:[l(v,{gap:1,children:[t("i",{className:`icon icon-group-type-${g}`}),t(S,{bold:!0,children:m(`group.edit.settings.type.${p}.label`)})]}),t(S,{children:m(`group.edit.settings.type.${p}.help`)})]})]},g))}),t(jb,{}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:c,onChange:p=>u(g=>!g)}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("group.edit.settings.rights.caption")}),t(S,{children:m("group.edit.settings.rights.members.help")})]})]})]})},Yv=[1,2,3,5],$v=o=>{const[e,n]=i.exports.useState(1),[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),u=()=>{a(p=>(p&&p.action&&p.action(),null)),c(null)},d=p=>{r&&r.action&&r.action(),n(p)};return U(Js,p=>{const g=p.getParser();!s||s.groupId!==g.id||c(h=>{const f={...h};return f.groupName=g.title,f.groupDescription=g.description,f.groupState=g.type,f.groupCanMembersDecorate=g.canMembersDecorate,f})}),U(ZI,p=>{const g=p.getParser(),h=[];g.badgeParts.forEach((f,E)=>{h.push(new Ma(f.isBase?Ma.BASE:Ma.SYMBOL,f.key,f.color,f.position))}),c({groupId:g.id,groupName:g.title,groupDescription:g.description,groupHomeroomId:g.roomId,groupState:g.state,groupCanMembersDecorate:g.canMembersDecorate,groupColors:[g.colorA,g.colorB],groupBadgeParts:h})}),!s||s.groupId<=0?null:l(ae,{className:"nitro-group-manager",children:[t(oe,{headerText:m("group.window.title"),onCloseClick:u}),t(Er,{children:Yv.map(p=>t(qn,{isActive:e===p,onClick:()=>d(p),children:m(`group.edit.tab.${p}`)},p))}),l(se,{children:[l(v,{alignItems:"center",gap:2,children:[t(L,{className:`nitro-group-tab-image tab-${e}`}),l(T,{grow:!0,gap:0,children:[t(S,{bold:!0,fontSize:4,children:m(`group.edit.tabcaption.${e}`)}),t(S,{children:m(`group.edit.tabdesc.${e}`)})]})]}),l(T,{grow:!0,overflow:"hidden",children:[e===1&&t(gm,{groupData:s,setGroupData:c,setCloseAction:a,onClose:u}),e===2&&t(dm,{groupData:s,setGroupData:c,setCloseAction:a,skipDefault:!0}),e===3&&t(mm,{groupData:s,setGroupData:c,setCloseAction:a}),e===5&&t(zv,{groupData:s,setGroupData:c,setCloseAction:a})]})]})]})},Kv=o=>{const[e,n]=i.exports.useState(-1),[r,a]=i.exports.useState(-1),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(-1),[p,g]=i.exports.useState(0),[h,f]=i.exports.useState(""),[E,I]=i.exports.useState(null),{showConfirm:_=null}=Ze(),C=y=>{if(y.rank===Qt.OWNER)return"group.members.owner";if(s.admin){if(y.rank===Qt.ADMIN)return"group.members.removerights";if(y.rank===Qt.MEMBER)return"group.members.giverights"}return""},b=i.exports.useCallback(()=>{e===-1||r===-1||u===-1||D(new Al(e,u,h,r))},[e,r,u,h]),N=y=>{!s.admin||y.rank===Qt.OWNER||(y.rank!==Qt.ADMIN?D(new nE(s.groupId,y.id)):D(new rE(s.groupId,y.id)),b())},w=y=>{!s.admin||y.rank!==Qt.REQUESTED||(D(new sE(s.groupId,y.id)),b())},O=y=>{if(s.admin){if(y.rank===Qt.REQUESTED){D(new oE(s.groupId,y.id)),b();return}I(y.name),D(new aE(s.groupId,y.id))}};return U(eE,y=>{const x=y.getParser();c(x),a(x.level),g(Math.ceil(x.totalMembersCount/x.pageSize))}),U(tE,y=>{const x=y.getParser();_(m(x.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[E,x.furnitureCount.toString()]),()=>{D(new Gi(s.groupId,x.userId)),b()},null),I(null)}),i.exports.useEffect(()=>{const y={linkReceived:x=>{const F=x.split("/");if(F.length<2)return;const P=parseInt(F[1])||-1,k=parseInt(F[2])||3;n(P),a(k),d(0)},eventUrlPrefix:"group-members/"};return It(y),()=>Et(y)},[]),i.exports.useEffect(()=>{d(0)},[e,r,h]),i.exports.useEffect(()=>{e===-1||r===-1||u===-1||D(new Al(e,u,h,r))},[e,r,u,h]),i.exports.useEffect(()=>{e!==-1&&(a(-1),c(null),g(0),f(""),I(null))},[e]),e===-1||!s?null:l(ae,{className:"nitro-group-members",theme:"primary-slim",children:[t(oe,{headerText:m("group.members.title",["groupName"],[s?s.groupTitle:""]),onCloseClick:y=>n(-1)}),l(se,{overflow:"hidden",children:[l(v,{gap:2,children:[t(v,{center:!0,className:"group-badge",children:t(Ye,{badgeCode:s.badge,isGroup:!0,className:"mx-auto d-block"})}),l(T,{fullWidth:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:m("group.members.searchinfo"),value:h,onChange:y=>f(y.target.value)}),l("select",{className:"form-select form-select-sm w-100",value:r,onChange:y=>a(parseInt(y.target.value)),children:[t("option",{value:"0",children:m("group.members.search.all")}),t("option",{value:"1",children:m("group.members.search.admins")}),t("option",{value:"2",children:m("group.members.search.pending")})]})]})]}),t(te,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:s.result.map((y,x)=>l(v,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[t("div",{className:"avatar-head cursor-pointer",onClick:()=>tn(y.id),children:t(ot,{figure:y.figure,headOnly:!0,direction:2})}),l(T,{grow:!0,gap:1,children:[t(S,{bold:!0,small:!0,pointer:!0,onClick:F=>tn(y.id),children:y.name}),y.rank!==Qt.REQUESTED&&t(S,{small:!0,italics:!0,variant:"muted",children:m("group.members.since",["date"],[y.joinedAt])})]}),l(T,{gap:1,children:[y.rank!==Qt.REQUESTED&&t(v,{center:!0,children:t(L,{pointer:s.admin,className:`icon icon-group-small-${y.rank===Qt.OWNER?"owner":y.rank===Qt.ADMIN?"admin":s.admin&&y.rank===Qt.MEMBER?"not-admin":""}`,title:m(C(y)),onClick:F=>N(y)})}),s.admin&&y.rank===Qt.REQUESTED&&t(v,{alignItems:"center",children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:m("group.members.accept"),onClick:F=>w(y)})}),s.admin&&y.rank!==Qt.OWNER&&y.id!==W().userId&&t(v,{alignItems:"center",children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:m(y.rank===Qt.REQUESTED?"group.members.reject":"group.members.kick"),onClick:F=>O(y)})})]})]},x))}),l(v,{gap:1,justifyContent:"between",alignItems:"center",children:[t(M,{disabled:s.pageIndex===0,onClick:y=>d(x=>x-1),children:t(Jt,{className:"fa-icon"})}),t(S,{small:!0,children:m("group.members.pageinfo",["amount","page","totalPages"],[s.totalMembersCount.toString(),(s.pageIndex+1).toString(),p.toString()])}),t(M,{disabled:s.pageIndex===p-1,onClick:y=>d(x=>x+1),children:t(Zt,{className:"fa-icon"})})]})]})]})},Xv=o=>{const[e,n]=i.exports.useState(!1);return io(),U(iE,r=>{const a=r.getParser();n(!1),Xt(a.roomId)}),i.exports.useEffect(()=>{const r={linkReceived:a=>{const s=a.split("/");if(!(s.length<2))switch(s[1]){case"create":n(!0);return;case"manage":if(!s[2])return;n(!1),D(new lE(Number(s[2])));return}},eventUrlPrefix:"groups/"};return It(r),()=>Et(r)},[]),l(V,{children:[e&&t(Hv,{onClose:()=>n(!1)}),!e&&t($v,{}),t(Kv,{}),t(jv,{})]})},Qv=o=>{const{helpRequestDescription:e=null,helpRequestAverageTime:n=0}=o,r=a=>D(new cE(a));return l(T,{children:[l(T,{gap:0,className:"bg-muted p-2 rounded",children:[t(S,{bold:!0,children:m("guide.help.request.guide.accept.request.title")}),t(S,{variant:"muted",children:m("guide.help.request.type.1")}),t(S,{wrap:!0,textBreak:!0,children:e})]}),l(T,{gap:1,children:[t(M,{variant:"success",onClick:a=>r(!0),children:m("guide.help.request.guide.accept.accept.button")}),t(M,{variant:"danger",onClick:a=>r(!1),children:m("guide.help.request.guide.accept.skip.link")})]})]})},Jv=o=>{const{isOnDuty:e=!1,isHandlingGuideRequests:n=!1,setIsHandlingGuideRequests:r=null,isHandlingHelpRequests:a=!1,setIsHandlingHelpRequests:s=null,isHandlingBullyReports:c=!1,setIsHandlingBullyReports:u=null,guidesOnDuty:d=0,helpersOnDuty:p=0,guardiansOnDuty:g=0,processAction:h=null}=o;return l(T,{children:[l(v,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[t(L,{className:"duty-switch"+(e?"":" off"),onClick:f=>h("toggle_duty")}),l(T,{gap:0,children:[t(S,{bold:!0,children:m("guide.help.guide.tool.yourstatus")}),t(S,{children:m(`guide.help.guide.tool.duty.${e?"on":"off"}`)})]})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("guide.help.guide.tool.tickettypeselection.caption")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:n,onChange:f=>r(f.target.checked)}),t(S,{children:m("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:a,onChange:f=>s(f.target.checked)}),t(S,{children:m("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:c,onChange:f=>u(f.target.checked)}),t(S,{children:m("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),t("hr",{className:"bg-dark m-0"}),l(v,{center:!0,gap:2,children:[t(L,{className:"info-icon"}),l(T,{gap:1,children:[t(L,{dangerouslySetInnerHTML:{__html:m("guide.help.guide.tool.guidesonduty",["amount"],[d.toString()])}}),t(L,{dangerouslySetInnerHTML:{__html:m("guide.help.guide.tool.helpersonduty",["amount"],[p.toString()])}}),t(L,{dangerouslySetInnerHTML:{__html:m("guide.help.guide.tool.guardiansonduty",["amount"],[g.toString()])}})]})]}),t("hr",{className:"bg-dark m-0"}),l(v,{justifyContent:"between",gap:2,children:[t(M,{disabled:!0,onClick:f=>h("forum_link"),children:m("guide.help.guide.tool.forum.link")}),t(M,{disabled:!0,children:m("guide.help.guide.tool.skill.link")})]})]})},Zv=o=>{const e=i.exports.useRef(null),{isGuide:n=!1,userId:r=0,userName:a=null,userFigure:s=null,isTyping:c=!1,messageGroups:u=[]}=o,[d,p]=i.exports.useState("");i.exports.useEffect(()=>{var C;(C=e.current)==null||C.scrollIntoView({block:"end",behavior:"smooth"})},[u]);const g=i.exports.useCallback(()=>{D(new uE)},[]),h=i.exports.useCallback(()=>{D(new dE)},[]),f=i.exports.useCallback(()=>{D(new mE)},[]);U(gE,C=>{const b=C.getParser();Xt(b.requesterRoomId)});const E=i.exports.useCallback(()=>{!d||!d.length||(D(new pE(d)),p(""))},[d]),I=i.exports.useCallback(C=>{C.key==="Enter"&&E()},[E]),_=i.exports.useCallback(C=>C===W().userId,[]);return l(T,{fullHeight:!0,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[n&&l(tr,{children:[t(M,{onClick:g,children:m("guide.help.request.guide.ongoing.visit.button")}),t(M,{onClick:h,children:m("guide.help.request.guide.ongoing.invite.button")})]}),!n&&l(T,{gap:0,children:[t(S,{bold:!0,children:a}),t(S,{children:m("guide.help.request.user.ongoing.guide.desc")})]}),t(M,{variant:"danger",disabled:!0,children:m("guide.help.common.report.link")})]}),t(T,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:l(T,{overflow:"auto",children:[u.map((C,b)=>l(v,{fullWidth:!0,justifyContent:_(C.userId)?"end":"start",gap:2,children:[t(L,{shrink:!0,className:"message-avatar",children:!_(C.userId)&&t(ot,{figure:s,direction:2})}),l(L,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(_(C.userId)?"right":"left"),children:[l(S,{bold:!0,children:[_(C.userId)&&W().userName,!_(C.userId)&&a]}),C.messages.map((N,w)=>t(L,{pointer:!!N.roomId,className:N.roomId?"text-break text-underline":"text-break",onClick:()=>N.roomId?Xt(N.roomId):null,children:N.message},w))]}),_(C.userId)&&t(L,{className:"message-avatar flex-shrink-0",children:t(ot,{figure:W().figure,direction:4})})]},b)),t("div",{ref:e})]})}),l(T,{gap:1,children:[l(v,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("guide.help.request.guide.ongoing.input.empty",["name"],[a]),value:d,onChange:C=>p(C.target.value),onKeyDown:I}),t(M,{variant:"success",onClick:E,children:m("widgets.chatinput.say")})]}),c&&t(S,{variant:"muted",children:m("guide.help.common.typing")})]}),t(M,{fullWidth:!0,variant:"success",onClick:f,children:m("guide.help.request."+(n?"guide":"user")+".ongoing.close.link")})]})},ew=15,tw=o=>{const{userRequest:e="",setUserRequest:n=null}=o,[r,a]=i.exports.useState(!1),s=()=>{a(!0),D(new hE(1,e))};return l(T,{children:[t(S,{children:m("guide.help.request.user.create.help")}),t("textarea",{className:"request-message",maxLength:140,value:e,onChange:c=>n(c.target.value),placeholder:m("guide.help.request.user.create.input.help")}),t(M,{fullWidth:!0,variant:"success",disabled:e.length<ew||r,onClick:s,children:m("guide.help.request.user.create.input.button")})]})},nw=o=>{const{userName:e=null}=o,n=r=>D(new fE(r));return l(T,{children:[l(v,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[l(T,{gap:0,children:[t(S,{bold:!0,children:e}),t(S,{children:m("guide.help.request.user.feedback.guide.desc")})]}),t(M,{variant:"danger",disabled:!0,children:m("guide.help.common.report.link")})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("guide.help.request.user.feedback.closed.title")}),t(S,{children:m("guide.help.request.user.feedback.closed.desc")})]}),e&&e.length>0&&l(V,{children:[t("hr",{className:"bg-dark m-0 mt-auto"}),l(T,{children:[t(S,{center:!0,bold:!0,children:m("guide.help.request.user.feedback.question")}),l(v,{gap:1,children:[t(M,{fullWidth:!0,variant:"success",onClick:r=>n(!0),children:m("guide.help.request.user.feedback.positive.button")}),t(M,{fullWidth:!0,variant:"danger",onClick:r=>n(!1),children:m("guide.help.request.user.feedback.negative.button")})]})]})]})]})},rw=o=>l(T,{gap:1,children:[t(S,{bold:!0,children:m("guide.help.request.no_tour_guides.title")}),t(S,{children:m("guide.help.request.no_tour_guides.message")})]}),sw=o=>{const{helpRequestDescription:e=null,helpRequestAverageTime:n=0}=o,r=()=>D(new IE);return l(T,{children:[l(T,{gap:0,className:"bg-muted rounded p-2",children:[t(S,{bold:!0,children:m("guide.help.request.guide.accept.request.title")}),t(S,{variant:"muted",children:m("guide.help.request.type.1")}),t(S,{wrap:!0,textBreak:!0,children:e})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("guide.help.request.user.pending.info.title")}),t(S,{children:m("guide.help.request.user.pending.info.message")}),t(S,{children:m("guide.help.request.user.pending.info.waiting",["waitingtime"],[n.toString()])})]}),t(M,{variant:"danger",onClick:r,children:m("guide.help.request.user.pending.cancel.button")})]})},ow=o=>t(T,{gap:1,children:t(S,{children:m("guide.help.request.user.guide.disconnected.error.desc")})}),aw=o=>l(T,{gap:1,children:[t(S,{bold:!0,children:m("guide.help.request.user.thanks.info.title")}),t(S,{children:m("guide.help.request.user.thanks.info.desc")})]}),iw=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(m("guide.help.guide.tool.title")),[s,c]=i.exports.useState(!1),[u,d]=i.exports.useState(he.GUIDE_TOOL_MENU),[p,g]=i.exports.useState(!1),[h,f]=i.exports.useState(!1),[E,I]=i.exports.useState(!1),[_,C]=i.exports.useState(!1),[b,N]=i.exports.useState(0),[w,O]=i.exports.useState(0),[y,x]=i.exports.useState(0),[F,P]=i.exports.useState(""),[k,R]=i.exports.useState(null),[A,G]=i.exports.useState(0),[B,H]=i.exports.useState(0),[X,j]=i.exports.useState(null),[de,ie]=i.exports.useState(null),[ne,xe]=i.exports.useState(!1),[Ee,Me]=i.exports.useState([]),{simpleAlert:it=null}=Ze(),Be=i.exports.useCallback((He,_e)=>{switch(He){case he.GUIDE_TOOL_MENU:a(m("guide.help.guide.tool.title")),c(!1);break;case he.GUIDE_ACCEPT:a(m("guide.help.request.guide.accept.title")),c(!0);break;case he.GUIDE_ONGOING:a(m("guide.help.request.guide.ongoing.title",["name"],[_e])),c(!0);break;case he.USER_CREATE:a(m("guide.help.request.user.create.title")),c(!1);break;case he.USER_PENDING:a(m("guide.help.request.user.pending.title")),c(!0);break;case he.USER_ONGOING:a(m("guide.help.request.user.ongoing.title",["name"],[_e])),c(!0);break;case he.USER_FEEDBACK:a(m("guide.help.request.user.feedback.title")),c(!0);break;case he.USER_THANKS:a(m("guide.help.request.user.thanks.title")),c(!1);break;case he.USER_NO_HELPERS:a(m("guide.help.request.no_tour_guides.heading")),c(!1);break;case he.USER_SOMETHING_WRONG:a(m("guide.help.request.user.guide.disconnected.error.heading")),c(!1);break}d(He),n(!0)},[]),Lt=i.exports.useCallback(He=>{switch(He.type){case Wt.SHOW_GUIDE_TOOL:n(!0);return;case Wt.HIDE_GUIDE_TOOL:n(!1);return;case Wt.TOGGLE_GUIDE_TOOL:n(_e=>!_e);return;case Wt.CREATE_HELP_REQUEST:Be(he.USER_CREATE);return}},[Be]);ut(Wt.SHOW_GUIDE_TOOL,Lt),ut(Wt.HIDE_GUIDE_TOOL,Lt),ut(Wt.TOGGLE_GUIDE_TOOL,Lt),ut(Wt.CREATE_HELP_REQUEST,Lt),U(qu,He=>{!He.getParser().isAllowed(ju.USE_GUIDE_TOOL)&&p&&(g(!1),D(new Pl(!1,!1,!1,!1)))}),U(EE,He=>{const _e=He.getParser();g(_e.onDuty),O(_e.guidesOnDuty),N(_e.helpersOnDuty),x(_e.guardiansOnDuty)}),U(CE,He=>{const _e=He.getParser();R(_e.helpRequestDescription),G(_e.roleSpecificWaitTime),_e.asGuide&&p&&Be(he.GUIDE_ACCEPT),_e.asGuide||Be(he.USER_PENDING)}),U(_E,He=>{const _e=He.getParser();p?(H(_e.requesterUserId),j(_e.requesterName),ie(_e.requesterFigure),Be(he.GUIDE_ONGOING,_e.requesterName)):(H(_e.guideUserId),j(_e.guideName),ie(_e.guideFigure),Be(he.USER_ONGOING,_e.guideName))}),U(bE,He=>{const _e=He.getParser();xe(_e.isTyping)}),U(SE,He=>{const _e=He.getParser(),Xe=[...Ee];let Ot=Xe[Xe.length-1];(!Ot||Ot.userId!==_e.senderId)&&(Ot=new ec(_e.senderId),Xe.push(Ot)),Ot.addChat(new Zl(_e.chatMessage)),Me(Xe)}),U(NE,He=>{const _e=He.getParser();if(_e.roomId!==0){const Xe=[...Ee];let Ot=Xe[Xe.length-1];const pe=p?W().userId:B;(!Ot||Ot.userId!==pe)&&(Ot=new ec(pe),Xe.push(Ot)),Ot.addChat(new Zl(_e.roomName,_e.roomId)),Me(Xe)}}),U(TE,He=>{p?(H(0),j(null),ie(null),xe(!1),Me([]),Be(he.GUIDE_TOOL_MENU)):Be(he.USER_FEEDBACK)}),U(vE,He=>{switch(He.getParser().errorCode){case 0:Be(he.USER_SOMETHING_WRONG);break;case 1:case 2:Be(he.USER_NO_HELPERS);break}}),U(wE,He=>{H(0),j(null),ie(null),xe(!1),Me([]),Be(p?he.GUIDE_TOOL_MENU:he.USER_THANKS)}),i.exports.useEffect(()=>{const He={linkReceived:_e=>{const Xe=_e.split("/");if(!(Xe.length<2))switch(Xe[1]){case"tour":return}},eventUrlPrefix:"help/"};return It(He),()=>Et(He)},[]);const Nn=i.exports.useCallback(He=>{switch(He){case"close":n(!1),P(""),d(he.GUIDE_TOOL_MENU);return;case"toggle_duty":if(!h&&!E&&!_){it(m("guide.help.guide.tool.noqueueselected.message"),null,null,null,m("guide.help.guide.tool.noqueueselected.caption"),null);return}g(Xe=>(D(new Pl(!Xe,Xe?!1:E,Xe?!1:_,Xe?!1:h)),!Xe));return;case"forum_link":const _e=K("group.homepage.url","").replace("%groupid%",K("guide.help.alpha.groupid","0"));window.open(_e);return}},[h,E,_,it]);return e?l(ae,{className:"nitro-guide-tool",theme:"primary-slim",children:[t(oe,{headerText:r,onCloseClick:He=>Nn("close"),noCloseButton:s}),l(se,{className:"text-black",children:[u===he.GUIDE_TOOL_MENU&&t(Jv,{isOnDuty:p,isHandlingGuideRequests:E,setIsHandlingGuideRequests:I,isHandlingHelpRequests:_,setIsHandlingHelpRequests:C,isHandlingBullyReports:h,setIsHandlingBullyReports:f,guidesOnDuty:w,helpersOnDuty:b,guardiansOnDuty:y,processAction:Nn}),u===he.GUIDE_ACCEPT&&t(Qv,{helpRequestDescription:k,helpRequestAverageTime:A}),[he.GUIDE_ONGOING,he.USER_ONGOING].includes(u)&&t(Zv,{isGuide:p,userId:B,userName:X,userFigure:de,isTyping:ne,messageGroups:Ee}),u===he.USER_CREATE&&t(tw,{userRequest:F,setUserRequest:P}),u===he.USER_PENDING&&t(sw,{helpRequestDescription:k,helpRequestAverageTime:A}),u===he.USER_FEEDBACK&&t(nw,{userName:X}),u===he.USER_THANKS&&t(aw,{}),u===he.USER_NO_HELPERS&&t(rw,{}),u===he.USER_SOMETHING_WRONG&&t(ow,{})]})]}):null},lw=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(0),[u,d]=i.exports.useState(null),{userFigure:p=null}=zn(),{purse:g=null,clubStatus:h=null}=es(),{badgeCodes:f=[],activate:E=null,deactivate:I=null}=ba(),_=()=>g.clubDays<=0?m("purse.clubdays.zero.amount.text"):g.minutesUntilExpiration>-1&&g.minutesUntilExpiration<60*24?Hn.shortFormat(g.minutesUntilExpiration*60):Hn.shortFormat((g.clubPeriods*31+g.clubDays)*86400),C=()=>{switch(h){case Vn.ACTIVE:return m(`hccenter.status.${h}.info`,["timeleft","joindate","streakduration"],[_(),r==null?void 0:r.firstSubscriptionDate,Hn.shortFormat((r==null?void 0:r.currentHcStreak)*86400)]);case Vn.EXPIRED:return m(`hccenter.status.${h}.info`,["joindate"],[r==null?void 0:r.firstSubscriptionDate]);default:return m(`hccenter.status.${h}.info`)}},b=()=>!r||r.timeUntilPayday<60?m("hccenter.special.time.soon"):Hn.shortFormat(r.timeUntilPayday*60),N=()=>m("hccenter.special.sum",["credits"],[((r==null?void 0:r.creditRewardForStreakBonus)+(r==null?void 0:r.creditRewardForMonthlySpent)).toString()]);if(U(Tu,O=>{const y=O.getParser();c(y.giftsAvailable)}),U(yE,O=>{const y=O.getParser();a(y.data)}),i.exports.useEffect(()=>{const O={linkReceived:y=>{const x=y.split("/");if(!(x.length<2))switch(x[1]){case"open":if(x.length>2)switch(x[2]){case"hccenter":n(!0);break}return}},eventUrlPrefix:"habboUI/"};return It(O),()=>Et(O)},[]),i.exports.useEffect(()=>{d(Ib(f))},[f]),i.exports.useEffect(()=>{if(!e)return;const O=E();return()=>I(O)},[e,E,I]),i.exports.useEffect(()=>{D(new vu),D(new xE)},[]),!e)return null;const w=t(fs,{id:"popover-basic",children:l(fs.Body,{className:"text-black py-2 px-3",children:[t("h5",{children:m("hccenter.breakdown.title")}),t("div",{children:m("hccenter.breakdown.creditsspent",["credits"],[r==null?void 0:r.totalCreditsSpent.toString()])}),t("div",{children:m("hccenter.breakdown.paydayfactor.percent",["percent"],[((r==null?void 0:r.kickbackPercentage)*100).toString()])}),t("div",{children:m("hccenter.breakdown.streakbonus",["credits"],[r==null?void 0:r.creditRewardForStreakBonus.toString()])}),t("hr",{className:"w-100 text-black my-1"}),t("div",{children:m("hccenter.breakdown.total",["credits","actual"],[N(),(((r==null?void 0:r.kickbackPercentage)*(r==null?void 0:r.totalCreditsSpent)+(r==null?void 0:r.creditRewardForStreakBonus))*100/100).toString()])}),t("div",{className:"btn btn-link text-primary p-0",onClick:()=>ee("habbopages/"+K("hc.center")["payday.habbopage"]),children:m("hccenter.special.infolink")})]})});return l(ae,{theme:"primary-slim",className:"nitro-hc-center",children:[t(oe,{headerText:m("generic.hccenter"),onCloseClick:()=>n(!1)}),l(v,{position:"relative",className:"bg-muted p-2",children:[l(T,{gap:1,children:[t("div",{className:"hc-logo"}),t(v,{children:t(M,{variant:"success",onClick:O=>ee("catalog/open/"+K("catalog.links")["hc.buy_hc"]),children:m(h===Vn.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),t(L,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:t(ot,{figure:p,direction:4,scale:2})})]}),l(se,{children:[l(v,{gap:2,children:[t(Ye,{badgeCode:u,className:"align-self-center flex-shrink-0 me-1"}),l(T,{size:5,className:"streak-info",gap:0,children:[t(S,{children:m("hccenter.status."+h)}),t(S,{dangerouslySetInnerHTML:{__html:C()}})]})]}),K("hc.center")["payday.info"]&&l(v,{alignItems:"center",children:[l(T,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[t("h4",{className:"mb-1",children:m("hccenter.special.title")}),t("div",{children:m("hccenter.special.info")}),t("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:()=>ee("habbopages/"+K("hc.center")["payday.habbopage"]),children:m("hccenter.special.infolink")})]}),l("div",{className:"payday flex-shrink-0 p-2",children:[t("h5",{className:"mb-2 ms-2",children:m("hccenter.special.time.title")}),l("div",{className:"d-flex flex-row mb-2",children:[t("div",{className:"clock me-2"}),t("h6",{className:"mb-0 align-self-center",children:b()})]}),h===Vn.ACTIVE&&l("div",{className:"pe-3",children:[t("h5",{className:"ms-2 mb-1 bolder",children:m("hccenter.special.amount.title")}),l("div",{className:"d-flex flex-column",children:[t("div",{className:"w-100 text-center ms-4n",children:N()}),t(Eu,{trigger:["hover","focus"],placement:"left",overlay:w,children:t("div",{className:"btn btn-link align-self-end text-primary",children:m("hccenter.breakdown.infolink")})})]})]})]})]}),K("hc.center")["gift.info"]&&l("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[l("div",{children:[t("h4",{className:"mb-1",children:m("hccenter.gift.title")}),t("div",{dangerouslySetInnerHTML:{__html:s>0?m("hccenter.unclaimedgifts",["unclaimedgifts"],[s.toString()]):m("hccenter.gift.info")}})]}),t("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:()=>ee("catalog/open/"+K("catalog.links")["hc.hc_gifts"]),children:m(h===Vn.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),K("hc.center")["benefits.info"]&&l("div",{className:"benefits text-black py-2",children:[t("h5",{className:"mb-1 text-primary",children:m("hccenter.general.title")}),t("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:m("hccenter.general.info")}}),t("button",{className:"btn btn-link p-0 text-primary",onClick:()=>ee("habbopages/"+K("hc.center")["benefits.habbopage"]),children:m("hccenter.general.infolink")})]})]})]})},cw=o=>{const[e,n]=i.exports.useState(""),{activeReport:r=null,setActiveReport:a=null}=Ln(),s=()=>{e.length<15||a(u=>{const d=At.REPORT_SUMMARY;return{...u,message:e,currentStep:d}})},c=()=>{a(u=>({...u,currentStep:u.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:m("help.emergency.chat_report.subtitle")}),t(S,{children:m("help.cfh.input.text")})]}),t("textarea",{className:"form-control h-100",value:e,onChange:u=>n(u.target.value)}),l(v,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",disabled:!(r.reportType===qe.BULLY||r.reportType===qe.EMERGENCY),onClick:c,children:m("generic.back")}),t(M,{disabled:e.length<15,onClick:s,children:m("help.emergency.main.submit.button")})]})]})},uw=o=>{const{setActiveReport:e=null}=Ln(),n=()=>{e(r=>{const a=At.SELECT_USER,s=qe.BULLY;return{...r,currentStep:a,reportType:s}})};return l(V,{children:[l(T,{grow:!0,center:!0,gap:1,children:[t(S,{fontSize:3,children:m("help.main.frame.title")}),t(S,{children:m("help.main.self.description")})]}),l(T,{gap:1,children:[t(M,{onClick:n,children:m("help.main.bully.subtitle")}),t(M,{onClick:()=>Tt(new Wt(Wt.CREATE_HELP_REQUEST)),disabled:!K("guides.enabled"),children:m("help.main.help.title")}),t(M,{disabled:!0,children:m("help.main.self.tips.title")})]}),t(M,{variant:"link",textColor:"black",onClick:()=>D(new RE(!1)),children:m("help.main.my.sanction.status")})]})},dw=o=>{const{username:e="",onAction:n=null}=o,[r,a]=i.exports.useState(!1),s=()=>{r||(a(!0),D(new kE(e)))};return U(OE,c=>{const u=c.getParser();u&&u.webId===W().userId&&n("close")}),l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:m("tutorial.name_change.info.confirm")}),l("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[t("div",{children:m("tutorial.name_change.confirm")}),t("div",{className:"fw-bold",children:e})]}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:r,onClick:s,children:m("generic.ok")}),t("button",{className:"btn btn-primary w-100",onClick:()=>n("close"),children:m("cancel")})]})]})},mw=o=>{const{onAction:e=null}=o;return l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:m("tutorial.name_change.info.main")}),t("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:m("tutorial.name_change.current",["name"],[W().userName])}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",onClick:()=>e("start"),children:m("tutorial.name_change.change")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("confirmation",W().userName),children:m("tutorial.name_change.keep")})]})]})},gw=0,pw=2,hw=3,fw=4,Iw=5,Ew=6,Cw=o=>{const{onAction:e=null}=o,[n,r]=i.exports.useState(""),[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),[d,p]=i.exports.useState(null),[g,h]=i.exports.useState([]),f=()=>{n!==""&&(s(!1),h([]),p(null),u(!0),D(new PE(n)))},E=I=>{s(!1),h([]),p(null),r(I)};return U(AE,I=>{u(!1);const _=I.getParser();if(_)switch(_.resultCode){case gw:s(!0);break;case pw:p("short");break;case hw:p("long");break;case fw:p("invalid");break;case Iw:h(_.nameSuggestions),p("taken");break;case Ew:p("change_not_allowed")}}),l("div",{className:"d-flex flex-column gap-3 h-100",children:[t("div",{children:m("tutorial.name_change.info.select")}),l("div",{className:"d-flex gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:I=>E(I.target.value)}),t("button",{className:"btn btn-primary",disabled:n===""||c,onClick:f,children:m("tutorial.name_change.check")})]}),!d&&!a&&t("div",{className:"bg-muted rounded p-2 text-center",children:m("help.tutorial.name.info")}),d&&t("div",{className:"bg-danger rounded p-2 text-center text-white",children:m(`help.tutorial.name.${d}`,["name"],[n])}),a&&t("div",{className:"bg-success rounded p-2 text-center text-white",children:m("help.tutorial.name.available",["name"],[n])}),g&&t("div",{className:"d-flex flex-column gap-2",children:g.map((I,_)=>t("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>E(I),children:I},_))}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:!a,onClick:()=>e("confirmation",n),children:m("tutorial.name_change.pick")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("close"),children:m("cancel")})]})]})},Ao="INIT",za="INPUT",Ya="CONFIRMATION",_w=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(Ao),[s,c]=i.exports.useState(""),u=(p,g)=>{switch(p){case"start":a(za);break;case"confirmation":c(g),a(Ya);break;case"close":c(""),n(!1);break}},d=i.exports.useMemo(()=>{switch(r){case Ao:return"tutorial.name_change.title.main";case za:return"tutorial.name_change.title.select";case Ya:return"tutorial.name_change.title.confirm"}},[r]);return ut(sa.INIT,p=>{a(Ao),n(!0)}),e?l(ae,{className:"nitro-change-username",theme:"primary-slim",children:[t(oe,{headerText:m(d),onCloseClick:()=>u("close")}),l(se,{className:"text-black",children:[r===Ao&&t(mw,{onAction:u}),r===za&&t(Cw,{onAction:u}),r===Ya&&t(dw,{username:s,onAction:u})]})]}):null},bw=o=>{const{activeReport:e=null,setActiveReport:n=null}=Ln(),r=()=>{const a=[];switch(e.reportType){case qe.BULLY:case qe.EMERGENCY:case qe.ROOM:{const s=e.roomId<=0?e.reportedChats[0].roomId:e.roomId;e.reportedChats.forEach(c=>a.push(c.webId,c.message)),D(new FE(e.message,e.cfhTopic,e.reportedUserId,s,a));break}case qe.IM:e.reportedChats.forEach(s=>a.push(s.webId,s.message)),D(new UE(e.message,e.cfhTopic,e.reportedUserId,a));break;case qe.THREAD:D(new ME(e.groupId,e.threadId,e.cfhTopic,e.message));break;case qe.MESSAGE:D(new LE(e.groupId,e.threadId,e.messageId,e.cfhTopic,e.message));break;case qe.PHOTO:D(new DE(e.extraData,e.roomId,e.reportedUserId,e.cfhTopic,e.roomObjectId));break}n(null)};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:m("help.cfh.button.send")}),t(S,{children:m("help.main.summary")})]}),t(M,{variant:"success",onClick:r,children:m("guide.help.request.emergency.submit.button")})]})},Sw=o=>{const{sanctionInfo:e=null,setSanctionInfo:n=null}=Ln(),r=(a,s,c)=>{let u=`help.sanction.${a}`;switch(s){case"ALERT":u=u+".alert";break;case"MUTE":u=u+".mute";break;case"BAN_PERMANENT":u=u+".permban";break;default:if(u=u+".ban",c>24)return u=u+".days",m(u,["days"],[(c/24).toString()])}return m(u,["hours"],[c.toString()])};return e?l(ae,{className:"nitro-help",theme:"primary-slim",children:[t(oe,{headerText:m("help.sanction.info.title"),onCloseClick:()=>n(null)}),t(se,{className:"text-black",children:l(te,{children:[t(T,{center:!0,size:5,overflow:"hidden",children:t(L,{className:"index-image"})}),l(T,{justifyContent:"between",size:7,overflow:"hidden",children:[e.sanctionReason==="cfh.reason.EMPTY"?t("div",{className:"col-12 fw-bold",children:m("help.sanction.current.none")}):l(V,{children:[(e.probationHoursLeft>0||e.isSanctionActive)&&t("div",{className:"col-12 fw-bold",children:m("help.sanction.probation.reminder")}),l("div",{className:`col-12 fw-bold ${e.isSanctionNew?"text-danger":""}`,children:[m("help.sanction.last.sanction")," ",r("current",e.sanctionName,e.sanctionLengthHours)]}),l("div",{className:"col-12",children:[m("generic.start.time")," ",e.sanctionCreationTime]}),l("div",{className:"col-12",children:[m("generic.reason")," ",e.sanctionReason]}),l("div",{className:"col-12",children:[m("help.sanction.probation.days.left")," ",Math.trunc(e.probationHoursLeft/24)+1]})]}),e.hasCustomMute&&!e.isSanctionActive&&t("div",{className:"col-12 fw-bold",children:m("help.sanction.custom.mute")}),e.tradeLockExpiryTime&&e.tradeLockExpiryTime.length>0&&l("div",{className:"col-12 fw-bold",children:[m("trade.locked.until")," ",e.tradeLockExpiryTime]}),t("div",{className:"col-12",children:r("next",e.nextSanctionName,e.nextSanctionLengthHours)}),t(M,{variant:"success",onClick:a=>n(null),children:m("habbo.way.ok.button")})]})]})})]}):null},Nw=o=>{const[e,n]=i.exports.useState([]),{activeReport:r=null,setActiveReport:a=null}=Ln(),{chatHistory:s=[],messengerHistory:c=[]}=ao(),u=i.exports.useMemo(()=>{switch(r.reportType){case qe.BULLY:case qe.EMERGENCY:return s.filter(h=>h.type===Pn.TYPE_CHAT&&h.webId===r.reportedUserId&&h.entityType===ft.USER);case qe.IM:return c.filter(h=>h.webId===r.reportedUserId&&h.type===Pn.TYPE_IM)}return[]},[r,s,c]),d=h=>{n(f=>{const E=[...f],I=E.indexOf(h);return I>=0?E.splice(I,1):E.push(h),E})},p=()=>{!e||e.length<=0||a(h=>({...h,reportedChats:e,currentStep:At.SELECT_TOPICS}))},g=()=>{a(h=>({...h,currentStep:h.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:m("help.emergency.chat_report.subtitle")}),t(S,{children:m("help.emergency.chat_report.description")})]}),l(T,{gap:1,overflow:"hidden",children:[!u||!u.length&&t(S,{children:m("help.cfh.error.no_user_data")}),u.length>0&&t(Ge,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:u.map((h,f)=>t(Ne,{onClick:E=>d(h),itemActive:e.indexOf(h)>=0,children:t(S,{children:h.message})},h.id))})]}),l(v,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",onClick:g,disabled:r.reportType===qe.IM,children:m("generic.back")}),t(M,{disabled:e.length<=0,onClick:p,children:m("help.emergency.main.submit.button")})]})]})},Tw=o=>{const[e,n]=i.exports.useState(-1),{chatHistory:r=[]}=ao(),{activeReport:a=null,setActiveReport:s=null}=Ln(),c=i.exports.useMemo(()=>{const g=new Map;return r.forEach(h=>{h.type===Pn.TYPE_CHAT&&h.entityType===ft.USER&&h.webId!==W().userId&&!g.has(h.webId)&&g.set(h.webId,{id:h.webId,username:h.name})}),Array.from(g.values())},[r]),u=g=>{g<=0||s(h=>({...h,reportedUserId:g,currentStep:At.SELECT_CHATS}))},d=g=>{n(h=>g===h?-1:g)},p=()=>{s(g=>({...g,currentStep:g.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:m("help.emergency.main.step.two.title")}),c.length>0&&t(S,{children:m("report.user.pick.user")})]}),l(T,{gap:1,overflow:"hidden",children:[!c.length&&t(S,{children:m("report.user.error.nolist")}),c.length>0&&t(Ge,{columnCount:1,columnMinHeight:25,gap:1,children:c.map((g,h)=>t(Ne,{onClick:f=>d(g.id),itemActive:e===g.id,children:t("span",{dangerouslySetInnerHTML:{__html:g.username}})},g.id))})]}),l(v,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",onClick:p,children:m("generic.back")}),t(M,{disabled:e<=0,onClick:()=>u(e),children:m("help.emergency.main.submit.button")})]})]})},vw=o=>{const[e,n]=i.exports.useState(-1),[r,a]=i.exports.useState(-1),{setActiveReport:s=null}=Ln(),{cfhCategories:c=[]}=ys(),u=()=>{e<0||r<0||s(p=>({...p,cfhCategory:e,cfhTopic:c[e].topics[r].id,currentStep:At.INPUT_REPORT_MESSAGE}))},d=()=>{s(p=>({...p,currentStep:p.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:m("help.emergency.chat_report.subtitle")}),t(S,{children:m("help.cfh.pick.topic")})]}),l(T,{gap:1,overflow:"auto",children:[e<0&&c.map((p,g)=>t(M,{variant:"danger",onClick:h=>n(g),children:m(`help.cfh.reason.${p.name}`)},g)),e>=0&&c[e].topics.map((p,g)=>t(M,{variant:"danger",onClick:h=>a(g),active:r===g,children:m(`help.cfh.topic.${p.id}`)},g))]}),l(v,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",onClick:d,children:m("generic.back")}),t(M,{disabled:r<0,onClick:u,children:m("help.emergency.main.submit.button")})]})]})},ww=o=>{const[e,n]=i.exports.useState(!1),{activeReport:r=null,setActiveReport:a=null,report:s=null}=Ln(),c=()=>{a(null),n(!1)};i.exports.useEffect(()=>{const d={linkReceived:p=>{const g=p.split("/");if(!(g.length<2))switch(g[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(h=>!h);return;case"tour":return;case"report":g.length>=5&&g[2]==="room"&&(parseInt(g[3]),unescape(g.splice(4).join("/")));return}},eventUrlPrefix:"help/"};return It(d),()=>Et(d)},[]),i.exports.useEffect(()=>{r&&n(!0)},[r]);const u=()=>{if(r)switch(r.currentStep){case At.SELECT_USER:return t(Tw,{});case At.SELECT_CHATS:return t(Nw,{});case At.SELECT_TOPICS:return t(vw,{});case At.INPUT_REPORT_MESSAGE:return t(cw,{});case At.REPORT_SUMMARY:return t(bw,{})}return t(uw,{})};return l(V,{children:[e&&l(ae,{className:"nitro-help",theme:"primary-slim",children:[t(oe,{headerText:m("help.button.cfh"),onCloseClick:c}),t(se,{className:"text-black",children:l(te,{children:[t(T,{center:!0,size:5,overflow:"hidden",children:t(L,{className:"index-image"})}),t(T,{justifyContent:"between",size:7,overflow:"hidden",children:t(u,{})})]})})]}),t(Sw,{}),t(_w,{})]})},yw=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null);return U(BE,p=>{const g=p.getParser();n(g.productType),a(g.productClassId),c(g.totalCoinsForBonus),d(g.coinsStillRequiredToBuy)}),i.exports.useEffect(()=>{D(new GE)},[]),e?l("div",{className:"bonus-rare widget d-flex",children:[e,l("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[t("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:s-u+"/"+s}),t("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(s-u)/s*100+"%"}})]})]}):null},xw=o=>{const{data:e=null,level:n=0}=o;return l("div",{className:"hof-user-container",children:[l("div",{className:"hof-tooltip",children:[l("div",{className:"hof-header",children:[n,". ",e.userName," ",t(Cn,{userId:e.userId})]}),t("div",{className:"small text-center text-white",children:m("landing.view.competition.hof.points",["points"],[Ko(e.currentScore).toString()])})]}),t(ot,{figure:e.figure,direction:2})]})},Rw=o=>{const{slot:e=-1,conf:n=null}=o,[r,a]=i.exports.useState(null);return U(VE,s=>{const c=s.getParser();a(c.data)}),i.exports.useEffect(()=>{const s=n?n.campaign:"";D(new HE(s))},[n]),r?t("div",{className:"hall-of-fame d-flex",children:r.hof&&r.hof.length>0&&r.hof.map((s,c)=>t(xw,{data:s,level:c+1},c))}):null},Ow=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(0);return U(WE,s=>{const c=s.getParser();n(c.articles)}),i.exports.useEffect(()=>{D(new jE)},[]),e?l("div",{className:"promo-articles widget mb-2",children:[l("div",{className:"d-flex flex-row align-items-center w-100 mb-1",children:[t("small",{className:"flex-shrink-0 pe-1",children:m("landing.view.promo.article.header")}),t("hr",{className:"w-100 my-0"})]}),t("div",{className:"d-flex flex-row mb-1",children:e&&e.length>0&&e.map((s,c)=>t("div",{className:"promo-articles-bullet cursor-pointer "+(s===e[r]?"promo-articles-bullet-active":""),onClick:u=>a(c)},s.id))}),e&&e[r]&&l("div",{className:"promo-article d-flex flex-row row mx-0",children:[t("div",{className:"promo-article-image",style:{backgroundImage:`url(${e[r].imageUrl})`}}),l("div",{className:"col-3 d-flex flex-column h-100",children:[t("h3",{className:"my-0",children:e[r].title}),t("b",{children:e[r].bodyText}),t("button",{className:"btn btn-sm mt-auto btn-gainsboro",onClick:s=>Xr(e[r].linkContent),children:e[r].buttonText})]})]})]}):null},kw=o=>{const{conf:e=null}=o,n=r=>{const a=e[r];if(!a)return null;switch(r){case"image":return dr.interpolate(a)}return a};return l("div",{className:"widgetcontainer widget d-flex flex-row overflow-hidden",children:[t("div",{className:"widgetcontainer-image flex-shrink-0",style:{backgroundImage:`url(${n("image")})`}}),l("div",{className:"d-flex flex-column align-self-center",children:[t("h3",{className:"my-0",children:m(`landing.view.${n("texts")}.header`)}),t("i",{children:m(`landing.view.${n("texts")}.body`)}),t("button",{className:"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto",onClick:r=>Xr(n("btnLink")),children:m(`landing.view.${n("texts")}.button`)})]})]})},Aw=o=>{switch(o.widgetType){case"promoarticle":return t(Ow,{});case"achievementcompetition_hall_of_fame":return t(Rw,{slot:o.slot,conf:o.widgetConf});case"bonusrare":return t(yw,{});case"widgetcontainer":return t(kw,{conf:o.widgetConf});default:return null}},Gr=o=>{const{widgetType:e=null,widgetSlot:n=0,widgetConf:r=null,className:a="",...s}=o;return t("div",{className:`widget-slot slot-${n} ${a||""}`,...s,children:t(Aw,{widgetType:e,slot:n,widgetConf:r})})},Pw=o=>{const[e,n]=i.exports.useState(!0),{userFigure:r=null}=zn();if(Ke([zt.CREATED,zt.ENDED],h=>{switch(h.type){case zt.CREATED:n(!1);return;case zt.ENDED:n(h.openLandingView);return}}),!e)return null;const a=K("hotelview").images["background.colour"],s=dr.interpolate(K("hotelview").images.background),c=dr.interpolate(K("hotelview").images.sun),u=dr.interpolate(K("hotelview").images.drape),d=dr.interpolate(K("hotelview").images.left),p=dr.interpolate(K("hotelview").images["right.repeat"]),g=dr.interpolate(K("hotelview").images.right);return l("div",{className:"nitro-hotel-view",style:a&&a?{background:a}:{},children:[t("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:l("div",{className:"row h-100",children:[l("div",{className:"col-9 h-100 d-flex flex-column",children:[t(Gr,{widgetSlot:1,widgetType:K("hotelview").widgets["slot."+1+".widget"],widgetConf:K("hotelview").widgets["slot."+1+".conf"],className:"col-6"}),l("div",{className:"col-12 row mx-0",children:[t(Gr,{widgetSlot:2,widgetType:K("hotelview").widgets["slot."+2+".widget"],widgetConf:K("hotelview").widgets["slot."+2+".conf"],className:"col-7"}),t(Gr,{widgetSlot:3,widgetType:K("hotelview").widgets["slot."+3+".widget"],widgetConf:K("hotelview").widgets["slot."+3+".conf"],className:"col-5"}),t(Gr,{widgetSlot:4,widgetType:K("hotelview").widgets["slot."+4+".widget"],widgetConf:K("hotelview").widgets["slot."+4+".conf"],className:"col-7"}),t(Gr,{widgetSlot:5,widgetType:K("hotelview").widgets["slot."+5+".widget"],widgetConf:K("hotelview").widgets["slot."+5+".conf"],className:"col-5"})]}),t(Gr,{widgetSlot:6,widgetType:K("hotelview").widgets["slot."+6+".widget"],widgetConf:K("hotelview").widgets["slot."+6+".conf"],className:"mt-auto"})]}),t("div",{className:"col-3 h-100",children:t(Gr,{widgetSlot:7,widgetType:K("hotelview").widgets["slot."+7+".widget"],widgetConf:K("hotelview").widgets["slot."+7+".conf"]})})]})}),t("div",{className:"background position-absolute",style:s&&s.length?{backgroundImage:`url(${s})`}:{}}),t("div",{className:"sun position-absolute",style:c&&c.length?{backgroundImage:`url(${c})`}:{}}),t("div",{className:"drape position-absolute",style:u&&u.length?{backgroundImage:`url(${u})`}:{}}),t("div",{className:"left position-absolute",style:d&&d.length?{backgroundImage:`url(${d})`}:{}}),t("div",{className:"right-repeat position-absolute",style:p&&p.length?{backgroundImage:`url(${p})`}:{}}),t("div",{className:"right position-absolute",style:g&&g.length?{backgroundImage:`url(${g})`}:{}}),K("hotelview")["show.avatar"]&&t("div",{className:"avatar-image",children:t(ot,{figure:r,direction:2})})]})},Sc=o=>{const{badgeCode:e=null,children:n=null,...r}=o,{selectedBadgeCode:a=null,setSelectedBadgeCode:s=null,toggleBadge:c=null,getBadgeId:u=null}=ba(),{isUnseen:d=null}=bn(),p=d($e.BADGE,u(e));return l(Ne,{itemActive:a===e,itemUnseen:p,onMouseDown:g=>s(e),onDoubleClick:g=>c(a),...r,children:[t(Ye,{badgeCode:e}),n]})},Dw=o=>{const[e,n]=i.exports.useState(!1),{badgeCodes:r=[],activeBadgeCodes:a=[],selectedBadgeCode:s=null,isWearingBadge:c=null,canWearBadges:u=null,toggleBadge:d=null,getBadgeId:p=null,activate:g=null,deactivate:h=null}=ba(),{isUnseen:f=null,removeUnseen:E=null}=bn();return i.exports.useEffect(()=>{!s||!f($e.BADGE,p(s))||E($e.BADGE,p(s))},[s,f,E,p]),i.exports.useEffect(()=>{if(!e)return;const I=g();return()=>h(I)},[e,g,h]),i.exports.useEffect(()=>(n(!0),()=>n(!1)),[]),l(te,{children:[t(T,{size:7,overflow:"hidden",children:t(Ge,{columnCount:4,children:r&&r.length>0&&r.map((I,_)=>c(I)?null:t(Sc,{badgeCode:I},_))})}),l(T,{className:"justify-content-between",size:5,overflow:"auto",children:[l(T,{overflow:"hidden",gap:2,children:[t(S,{children:m("inventory.badges.activebadges")}),t(Ge,{columnCount:3,children:a&&a.length>0&&a.map((I,_)=>t(Sc,{badgeCode:I},_))})]}),!!s&&l(T,{grow:!0,justifyContent:"end",gap:2,children:[l(v,{alignItems:"center",gap:2,children:[t(Ye,{shrink:!0,badgeCode:s}),t(S,{children:eo(s)})]}),t(M,{variant:c(s)?"danger":"success",disabled:!c(s)&&!u(),onClick:I=>d(s),children:m(c(s)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},gl=o=>{const{title:e="",desc:n="",children:r=null,...a}=o;return l(te,{...a,children:[t(T,{center:!0,size:5,overflow:"hidden",children:t("div",{className:"empty-image"})}),l(T,{justifyContent:"center",size:7,overflow:"hidden",children:[t(S,{fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:e}),t(S,{overflow:"auto",children:n})]}),r]})},Lw=o=>{const{botItem:e=null,children:n=null,...r}=o,[a,s]=i.exports.useState(!1),{selectedBot:c=null,setSelectedBot:u=null}=qd(),{isUnseen:d=null}=bn(),p=d($e.BOT,e.botData.id),g=h=>{switch(h.type){case ke.MOUSE_DOWN:u(e),s(!0);return;case ke.MOUSE_UP:s(!1);return;case ke.ROLL_OUT:if(!a||c!==e)return;bi(e);return;case"dblclick":bi(e);return}};return l(Ne,{itemActive:c===e,itemUnseen:p,onMouseDown:g,onMouseUp:g,onMouseOut:g,onDoubleClick:g,...r,children:[t(ot,{figure:e.botData.figure,direction:3,headOnly:!0}),n]})},Mw=o=>{const{roomSession:e=null,roomPreviewer:n=null}=o,[r,a]=i.exports.useState(!1),{botItems:s=[],selectedBot:c=null,activate:u=null,deactivate:d=null}=qd(),{isUnseen:p=null,removeUnseen:g=null}=bn();return i.exports.useEffect(()=>{if(!c||!n)return;const h=c.botData,f=Y();let E=f.getRoomInstanceVariable(f.activeRoomId,re.ROOM_WALL_TYPE),I=f.getRoomInstanceVariable(f.activeRoomId,re.ROOM_FLOOR_TYPE),_=f.getRoomInstanceVariable(f.activeRoomId,re.ROOM_LANDSCAPE_TYPE);E=E&&E.length?E:"101",I=I&&I.length?I:"101",_=_&&_.length?_:"1.1",n.reset(!1),n.updateRoomWallsAndFloorVisibility(!0,!0),n.updateObjectRoom(I,E,_),n.addAvatarIntoRoom(h.figure,0)},[n,c]),i.exports.useEffect(()=>{!c||!p($e.BOT,c.botData.id)||g($e.BOT,c.botData.id)},[c,p,g]),i.exports.useEffect(()=>{if(!r)return;const h=u();return()=>d(h)},[r,u,d]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),!s||!s.length?t(gl,{title:m("inventory.empty.bots.title"),desc:m("inventory.empty.bots.desc")}):l(te,{children:[t(T,{size:7,overflow:"hidden",children:t(Ge,{columnCount:5,children:s&&s.length>0&&s.map(h=>t(Lw,{botItem:h},h.botData.id))})}),l(T,{size:5,overflow:"auto",children:[t(T,{overflow:"hidden",position:"relative",children:t(pa,{roomPreviewer:n,height:140})}),c&&l(T,{grow:!0,justifyContent:"between",gap:2,children:[t(S,{grow:!0,truncate:!0,children:c.botData.name}),!!e&&t(M,{variant:"success",onClick:h=>bi(c),children:m("inventory.furni.placetoroom")})]})]})]})},Uw=o=>{const{groupItem:e=null,...n}=o,[r,a]=i.exports.useState(!1),{selectedItem:s=null,setSelectedItem:c=null}=Zr(),u=p=>{switch(p.type){case ke.MOUSE_DOWN:c(e),a(!0);return;case ke.MOUSE_UP:a(!1);return;case ke.ROLL_OUT:if(!r||e!==s)return;_s(e);return;case"dblclick":_s(e);return}},d=e.getUnlockedCount();return t(Ne,{className:d?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:e.getUnlockedCount(),itemActive:e===s,itemUniqueNumber:e.stuffData.uniqueNumber,itemUnseen:e.hasUnseenItems,onMouseDown:u,onMouseUp:u,onMouseOut:u,onDoubleClick:u,...n})},hm=o=>{const{groupItems:e=[],setGroupItems:n=null}=o,[r,a]=i.exports.useState("");return i.exports.useEffect(()=>{let s=[...e];if(r&&r.length){const c=r.toLocaleLowerCase();s=e.filter(u=>c&&c.length&&u.name.toLocaleLowerCase().includes(c)?u:null)}n(s)},[e,n,r]),l(v,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:r,onChange:s=>a(s.target.value)}),t(M,{variant:"primary",children:t($s,{className:"fa-icon"})})]})},Fw=o=>{const e=o.getLastItem();if(!e||!e.sellable)return!1;Tt(new ol(e))},Bw=o=>{const{roomSession:e=null,roomPreviewer:n=null}=o,[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState([]),{groupItems:u=[],selectedItem:d=null,activate:p=null,deactivate:g=null}=Zr(),{resetItems:h=null}=bn();return i.exports.useEffect(()=>{if(!d||!n)return;const f=d.getLastItem();if(!f)return;const E=Y();let I=E.getRoomInstanceVariable(E.activeRoomId,re.ROOM_WALL_TYPE),_=E.getRoomInstanceVariable(E.activeRoomId,re.ROOM_FLOOR_TYPE),C=E.getRoomInstanceVariable(E.activeRoomId,re.ROOM_LANDSCAPE_TYPE);if(I=I&&I.length?I:"101",_=_&&_.length?_:"101",C=C&&C.length?C:"1.1",n.reset(!1),n.updateObjectRoom(_,I,C),n.updateRoomWallsAndFloorVisibility(!0,!0),f.category===Z.WALL_PAPER||f.category===Z.FLOOR||f.category===Z.LANDSCAPE){if(_=f.category===Z.FLOOR?d.stuffData.getLegacyString():_,I=f.category===Z.WALL_PAPER?d.stuffData.getLegacyString():I,C=f.category===Z.LANDSCAPE?d.stuffData.getLegacyString():C,n.updateObjectRoom(_,I,C),f.category===Z.LANDSCAPE){const b=W().getWallItemDataByName("window_double_default");b&&n.addWallItemIntoRoom(b.id,new xt(90,0,0),b.customParams)}}else d.isWallItem?n.addWallItemIntoRoom(d.type,new xt(90),f.stuffData.getLegacyString()):n.addFurnitureIntoRoom(d.type,new xt(90),d.stuffData,f.extra.toString())},[n,d]),i.exports.useEffect(()=>{!d||!d.hasUnseenItems||(h($e.FURNI,d.items.map(f=>f.id)),d.hasUnseenItems=!1)},[d,h]),i.exports.useEffect(()=>{if(!r)return;const f=p();return()=>g(f)},[r,p,g]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),!u||!u.length?t(gl,{title:m("inventory.empty.title"),desc:m("inventory.empty.desc")}):l(te,{children:[l(T,{size:7,overflow:"hidden",children:[t(hm,{groupItems:u,setGroupItems:c}),t(Ge,{columnCount:5,children:s&&s.length>0&&s.map((f,E)=>t(Uw,{groupItem:f},E))})]}),l(T,{size:5,overflow:"auto",children:[l(T,{overflow:"hidden",position:"relative",children:[t(pa,{roomPreviewer:n,height:140}),d&&d.stuffData.isUnique&&t(Pd,{className:"top-2 end-2",position:"absolute",uniqueNumber:d.stuffData.uniqueNumber,uniqueSeries:d.stuffData.uniqueSeries}),d&&d.stuffData.rarityLevel>-1&&t(sl,{className:"top-2 end-2",position:"absolute",level:d.stuffData.rarityLevel})]}),d&&l(T,{grow:!0,justifyContent:"between",gap:2,children:[t(S,{grow:!0,truncate:!0,children:d.name}),l(T,{gap:1,children:[!!e&&t(M,{variant:"success",onClick:f=>_s(d),children:m("inventory.furni.placetoroom")}),d&&d.isSellable&&t(M,{onClick:f=>Fw(d),children:m("inventory.marketplace.sell")})]})]})]})]})},$a=9,Gw=o=>{const{cancelTrade:e=null}=o,[n,r]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[d,p]=i.exports.useState(null),[g,h]=i.exports.useState(3),[f,E]=i.exports.useState(1),{ownUser:I=null,otherUser:_=null,groupItems:C=[],tradeState:b=rt.TRADING_STATE_READY,progressTrade:N=null,removeItem:w=null,setTradeState:O=null}=Yd(),{simpleAlert:y=null}=Ze(),x=(A,G,B,H,X)=>{if(!I||I.accepts||!I.userItems)return!1;if(I.userItems.length<$a)return!0;if(!H)return!1;let j=G.toString();return B===Z.POSTER?j=j+"poster"+X.getLegacyString():B===Z.GUILD_FURNI?j=Q_(G,X):j=(A?"I":"S")+j,!!I.userItems.getValue(j)},F=A=>{if(!n)return;const G=n.getTradeItems(A);if(!G||!G.length)return;let B=null;const H=[];for(const j of G)H.push(j.id),B||(B=j);if(I.userItems.length+H.length<=1500)if(!B.isGroupable&&H.length)D(new Dl(H.pop()));else{const j=[];for(const de of H)x(B.isWallItem,B.type,B.category,B.isGroupable,B.stuffData)&&j.push(de);j.length&&(j.length===1?D(new Dl(j.pop())):D(new qE(...j)))}else y(m("trading.items.too_many_items.desc"),ge.DEFAULT,null,null,m("trading.items.too_many_items.title"))},P=A=>A?t(mu,{className:"text-success fa-icon"}):t(Um,{className:"text-danger fa-icon"}),k=(A,G)=>{(isNaN(Number(A))||Number(A)<0||!A)&&(A=1),A=Math.max(Number(A),1),A=Math.min(Number(A),G),A!==f&&E(A)},R=A=>{k(f,A),F(f)};return i.exports.useEffect(()=>{E(1)},[n]),i.exports.useEffect(()=>{if(b!==rt.TRADING_STATE_COUNTDOWN)return;h(3);const A=setInterval(()=>{h(G=>{const B=G-1;return B===0&&clearInterval(A),B})},1e3);return()=>clearInterval(A)},[b,O]),i.exports.useEffect(()=>{g===0&&O(rt.TRADING_STATE_CONFIRMING)},[g,O]),b===rt.TRADING_STATE_READY||!I||!_?null:l(te,{children:[l(T,{size:4,overflow:"hidden",children:[t(hm,{groupItems:C,setGroupItems:p}),l(v,{column:!0,fullHeight:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[t(Ge,{columnCount:3,children:d&&d.length>0&&d.map((A,G)=>{const B=A.getUnlockedCount();return t(Ne,{className:B?"":"opacity-0-5 ",itemImage:A.iconUrl,itemCount:B,itemActive:n===A,itemUniqueNumber:A.stuffData.uniqueNumber,onClick:H=>B&&r(A),onDoubleClick:H=>F(1),children:B>0&&n===A&&t(M,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:H=>F(1),children:t(Zt,{className:"fa-icon"})})},G)})}),l(T,{gap:1,alignItems:"end",children:[l(te,{overflow:"hidden",children:[t(T,{size:6,overflow:"hidden",children:t("input",{type:"number",className:"form-control form-control-sm quantity-input",placeholder:m("catalog.bundlewidget.spinner.select.amount"),disabled:!n,value:f,onChange:A=>E(A.target.valueAsNumber)})}),t(T,{size:6,overflow:"hidden",children:t(M,{variant:"secondary",disabled:!n,onClick:A=>R(n.getUnlockedCount()),children:m("inventory.trading.areoffering")})})]}),t(L,{fullWidth:!0,className:"badge bg-muted",children:n?n.name:m("catalog_selectproduct")})]})]})]}),l(T,{size:8,overflow:"hidden",children:[l(te,{overflow:"hidden",children:[l(T,{size:6,overflow:"hidden",children:[l(v,{justifyContent:"between",alignItems:"center",children:[l(S,{children:[m("inventory.trading.you")," ",m("inventory.trading.areoffering"),":"]}),P(I.accepts)]}),t(Ge,{columnCount:3,children:Array.from(Array($a),(A,G)=>{const B=I.userItems.getWithIndex(G)||null;return B?t(Ne,{itemActive:a===B,itemImage:B.iconUrl,itemCount:B.getTotalCount(),itemUniqueNumber:B.stuffData.uniqueNumber,onClick:H=>s(B),onDoubleClick:H=>w(B),children:a===B&&t(M,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:H=>w(B),children:t(Jt,{className:"fa-icon"})})},G):t(Ne,{},G)})}),t(L,{fullWidth:!0,className:"badge bg-muted",children:a?a.name:m("catalog_selectproduct")})]}),l(T,{size:6,overflow:"hidden",children:[l(v,{justifyContent:"between",alignItems:"center",children:[l(S,{children:[_.userName," ",m("inventory.trading.isoffering"),":"]}),P(_.accepts)]}),t(Ge,{columnCount:3,children:Array.from(Array($a),(A,G)=>{const B=_.userItems.getWithIndex(G)||null;return B?t(Ne,{itemActive:c===B,itemImage:B.iconUrl,itemCount:B.getTotalCount(),itemUniqueNumber:B.stuffData.uniqueNumber,onClick:H=>u(B)},G):t(Ne,{},G)})}),t(L,{fullWidth:!0,className:"badge bg-muted w-100",children:c?c.name:m("catalog_selectproduct")})]})]}),l(v,{grow:!0,justifyContent:"between",children:[t(M,{variant:"danger",onClick:e,children:m("generic.cancel")}),b===rt.TRADING_STATE_READY&&t(M,{variant:"secondary",disabled:!I.itemCount&&!_.itemCount,onClick:N,children:m("inventory.trading.accept")}),b===rt.TRADING_STATE_RUNNING&&t(M,{variant:"secondary",disabled:!I.itemCount&&!_.itemCount,onClick:N,children:m(I.accepts?"inventory.trading.modify":"inventory.trading.accept")}),b===rt.TRADING_STATE_COUNTDOWN&&t(M,{variant:"secondary",disabled:!0,children:m("inventory.trading.countdown",["counter"],[g.toString()])}),b===rt.TRADING_STATE_CONFIRMING&&t(M,{variant:"secondary",onClick:N,children:m("inventory.trading.button.restore")}),b===rt.TRADING_STATE_CONFIRMED&&t(M,{variant:"secondary",children:m("inventory.trading.info.waiting")})]})]})]})},Vw=o=>{const{petItem:e=null,children:n=null,...r}=o,[a,s]=i.exports.useState(!1),{selectedPet:c=null,setSelectedPet:u=null}=zd(),{isUnseen:d}=bn(),p=d($e.PET,e.petData.id),g=h=>{switch(h.type){case ke.MOUSE_DOWN:u(e),s(!0);return;case ke.MOUSE_UP:s(!1);return;case ke.ROLL_OUT:if(!a||e!==c)return;_i(e);return;case"dblclick":_i(e);return}};return l(Ne,{itemActive:e===c,itemUnseen:p,onMouseDown:g,onMouseUp:g,onMouseOut:g,onDoubleClick:g,...r,children:[t(er,{figure:e.petData.figureData.figuredata,direction:3,headOnly:!0}),n]})},Hw=o=>{const{roomSession:e=null,roomPreviewer:n=null}=o,[r,a]=i.exports.useState(!1),{petItems:s=null,selectedPet:c=null,activate:u=null,deactivate:d=null}=zd(),{isUnseen:p=null,removeUnseen:g=null}=bn();return i.exports.useEffect(()=>{if(!c||!n)return;const h=c.petData,f=Y();let E=f.getRoomInstanceVariable(f.activeRoomId,re.ROOM_WALL_TYPE),I=f.getRoomInstanceVariable(f.activeRoomId,re.ROOM_FLOOR_TYPE),_=f.getRoomInstanceVariable(f.activeRoomId,re.ROOM_LANDSCAPE_TYPE);E=E&&E.length?E:"101",I=I&&I.length?I:"101",_=_&&_.length?_:"1.1",n.reset(!1),n.updateRoomWallsAndFloorVisibility(!0,!0),n.updateObjectRoom(I,E,_),n.addPetIntoRoom(h.figureString)},[n,c]),i.exports.useEffect(()=>{!c||!p($e.PET,c.petData.id)||g($e.PET,c.petData.id)},[c,p,g]),i.exports.useEffect(()=>{if(!r)return;const h=u();return()=>d(h)},[r,u,d]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),!s||!s.length?t(gl,{title:m("inventory.empty.pets.title"),desc:m("inventory.empty.pets.desc")}):l(te,{children:[t(T,{size:7,overflow:"hidden",children:t(Ge,{columnCount:5,children:s&&s.length>0&&s.map(h=>t(Vw,{petItem:h},h.petData.id))})}),l(T,{size:5,overflow:"auto",children:[t(T,{overflow:"hidden",position:"relative",children:t(pa,{roomPreviewer:n,height:140})}),c&&c.petData&&l(T,{grow:!0,justifyContent:"between",gap:2,children:[t(S,{grow:!0,truncate:!0,children:c.petData.name}),!!e&&t(M,{variant:"success",onClick:h=>_i(c),children:m("inventory.furni.placetoroom")})]})]})]})},fm="inventory.furni",Im="inventory.bots",Em="inventory.furni.tab.pets",Cm="inventory.badges",Nc=[fm,Im,Em,Cm],Ww=[$e.FURNI,$e.BOT,$e.PET,$e.BADGE],jw=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(Nc[0]),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),{isTrading:p=!1,stopTrading:g=null}=Yd(),{getCount:h=null,resetCategory:f=null}=bn(),E=()=>{p&&g(),n(!1)};return we(Ct.PLACED,I=>{Y_()&&(no(!1),I.placedInRoom||n(!0))}),Ke([zt.CREATED,zt.ENDED],I=>{switch(I.type){case zt.CREATED:c(I.session);return;case zt.ENDED:c(null),n(!1);return}}),U(zE,I=>{const _=I.getParser();for(const C of _.data)td().setBadgePointLimit(C.badgeId,C.limit)}),i.exports.useEffect(()=>{const I={linkReceived:_=>{const C=_.split("/");if(!(C.length<2))switch(C[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(b=>!b);return}},eventUrlPrefix:"inventory/"};return It(I),()=>Et(I)},[]),i.exports.useEffect(()=>(d(new zo(Y(),++zo.PREVIEW_COUNTER)),()=>{d(I=>(I.dispose(),null))}),[]),i.exports.useEffect(()=>{!e&&p&&n(!0)},[e,p]),e?l(ae,{uniqueKey:"inventory",className:"nitro-inventory",theme:p?"primary-slim":"",children:[t(oe,{headerText:m("inventory.title"),onCloseClick:E}),!p&&l(V,{children:[t(Er,{children:Nc.map((I,_)=>t(qn,{isActive:r===I,onClick:C=>a(I),count:h(Ww[_]),children:m(I)},_))}),l(se,{children:[r===fm&&t(Bw,{roomSession:s,roomPreviewer:u}),r===Im&&t(Mw,{roomSession:s,roomPreviewer:u}),r===Em&&t(Hw,{roomSession:s,roomPreviewer:u}),r===Cm&&t(Dw,{})]})]}),p&&t(se,{children:t(Gw,{cancelTrade:E})})]}):null},pl=o=>{const{records:e=null}=o,{openRoomInfo:n=null}=ys(),r=i.exports.useMemo(()=>{const s=[];return e.forEach(c=>{s.push({isRoomInfo:!0,roomId:c.roomId,roomName:c.roomName}),c.chatlog.forEach(u=>{s.push({timestamp:u.timestamp,habboId:u.userId,username:u.userName,hasHighlighting:u.hasHighlighting,message:u.message,isRoomInfo:!1})})}),s},[e]),a=s=>l(v,{gap:2,alignItems:"center",justifyContent:"between",className:"bg-muted rounded p-1",children:[l(v,{gap:1,children:[t(S,{bold:!0,children:"Room name:"}),t(S,{children:s.roomName})]}),l(v,{gap:1,children:[t(M,{onClick:c=>Xt(s.roomId),children:"Visit Room"}),t(M,{onClick:c=>n(s.roomId),children:"Room Tools"})]})]});return t(V,{children:l(T,{fit:!0,gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Time"}),t(L,{className:"g-col-3",children:"User"}),t(L,{className:"g-col-7",children:"Message"})]})}),e&&e.length>0&&t(fa,{rows:r,rowRender:s=>l(V,{children:[s.isRoomInfo&&t(a,{roomId:s.roomId,roomName:s.roomName}),!s.isRoomInfo&&l(te,{fullHeight:!1,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[t(S,{className:"g-col-2",children:s.timestamp}),t(S,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:c=>ee(`mod-tools/open-user-info/${s.habboId}`),children:s.username}),t(S,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]})]})})]})})},qw=o=>{const{roomId:e=null,onCloseClick:n=null}=o,[r,a]=i.exports.useState(null);return U(YE,s=>{const c=s.getParser();!c||c.data.roomId!==e||a(c.data)}),i.exports.useEffect(()=>{D(new $E(e))},[e]),r?l(ae,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:Pt.TOP_LEFT,children:[t(oe,{headerText:`Room Chatlog ${r.roomName}`,onCloseClick:n}),t(se,{className:"text-black",overflow:"hidden",children:r&&t(pl,{records:[r]})})]}):null},zw=o=>{const{roomId:e=null,onCloseClick:n=null}=o,[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(null),[E,I]=i.exports.useState(!1),[_,C]=i.exports.useState(0),[b,N]=i.exports.useState(!1),[w,O]=i.exports.useState(!1),[y,x]=i.exports.useState(!1),[F,P]=i.exports.useState(""),k=(R,A)=>{if(R)switch(R){case"alert_only":if(F.trim().length===0)return;D(new po(po.ACTION_ALERT,F,"")),D(new Ll(e,w?1:0,y?1:0,b?1:0));return;case"send_message":if(F.trim().length===0)return;D(new po(po.ACTION_MESSAGE,F,"")),D(new Ll(e,w?1:0,y?1:0,b?1:0));return}};return U(KE,R=>{const A=R.getParser();!A||A.data.flatId!==e||(c(A.data.flatId),d(A.data.room.name),g(A.data.ownerId),f(A.data.ownerName),I(A.data.ownerInRoom),C(A.data.userCount))}),i.exports.useEffect(()=>{r||(D(new XE(e)),a(!0))},[e,r,a]),l(ae,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:Pt.TOP_LEFT,children:[t(oe,{headerText:"Room Info"+(u?": "+u:""),onCloseClick:R=>n()}),l(se,{className:"text-black",children:[l(v,{gap:2,children:[l(T,{justifyContent:"center",grow:!0,gap:1,children:[l(v,{alignItems:"center",gap:2,children:[t(S,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),t(S,{underline:!0,pointer:!0,truncate:!0,children:h})]}),l(v,{alignItems:"center",gap:2,children:[t(S,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),t(S,{children:_})]}),l(v,{alignItems:"center",gap:2,children:[t(S,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),t(S,{children:E?"Yes":"No"})]})]}),l(T,{gap:1,children:[t(M,{onClick:R=>Xt(e),children:"Visit Room"}),t(M,{onClick:R=>ee(`mod-tools/open-room-chatlog/${e}`),children:"Chatlog"})]})]}),l(T,{className:"bg-muted rounded p-2",gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:b,onChange:R=>N(R.target.checked)}),t(S,{small:!0,children:"Kick everyone out"})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:w,onChange:R=>O(R.target.checked)}),t(S,{small:!0,children:"Enable the doorbell"})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:y,onChange:R=>x(R.target.checked)}),t(S,{small:!0,children:"Change room name"})]})]}),t("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:F,onChange:R=>P(R.target.value)}),l(v,{justifyContent:"between",children:[t(M,{variant:"danger",onClick:R=>k("send_message"),children:"Send Caution"}),t(M,{onClick:R=>k("alert_only"),children:"Send Alert only"})]})]})]})},Yw=o=>{const{onCloseClick:e=null,issueId:n=null}=o,[r,a]=i.exports.useState(null);return U(QE,s=>{const c=s.getParser();!c||c.data.issueId!==n||a(c.data)}),i.exports.useEffect(()=>{D(new JE(n))},[n]),l(ae,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[t(oe,{headerText:"Issue Chatlog",onCloseClick:e}),t(se,{className:"text-black",children:r&&t(pl,{records:[r.chatRecord]})})]})},$w=o=>{const{issueId:e=null,onIssueInfoClosed:n=null}=o,[r,a]=i.exports.useState(!1),{tickets:s=[],openUserInfo:c=null}=ys(),u=s.find(g=>g.issueId===e),d=g=>{D(new zu([g])),n(g)},p=g=>{D(new ho([e],g)),n(e)};return l(V,{children:[l(ae,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[t(oe,{headerText:"Resolving issue "+e,onCloseClick:()=>n(e)}),l(se,{className:"text-black",children:[t(S,{fontSize:4,children:"Issue Information"}),l(te,{overflow:"auto",children:[t(T,{size:8,children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:l("tbody",{children:[l("tr",{children:[t("th",{children:"Source"}),t("td",{children:Cb(u.categoryId)})]}),l("tr",{children:[t("th",{children:"Category"}),t("td",{className:"text-break",children:m("help.cfh.topic."+u.reportedCategoryId)})]}),l("tr",{children:[t("th",{children:"Description"}),t("td",{className:"text-break",children:u.message})]}),l("tr",{children:[t("th",{children:"Caller"}),t("td",{children:t(S,{bold:!0,underline:!0,pointer:!0,onClick:g=>c(u.reporterUserId),children:u.reporterUserName})})]}),l("tr",{children:[t("th",{children:"Reported User"}),t("td",{children:t(S,{bold:!0,underline:!0,pointer:!0,onClick:g=>c(u.reportedUserId),children:u.reportedUserName})})]})]})})}),l(T,{size:4,gap:1,children:[t(M,{variant:"secondary",onClick:()=>a(!r),children:"Chatlog"}),t(M,{onClick:g=>p(ho.RESOLUTION_USELESS),children:"Close as useless"}),t(M,{variant:"danger",onClick:g=>p(ho.RESOLUTION_ABUSIVE),children:"Close as abusive"}),t(M,{variant:"success",onClick:g=>p(ho.RESOLUTION_RESOLVED),children:"Close as resolved"}),t(M,{variant:"secondary",onClick:g=>d(e),children:"Release"})]})]})]})]}),r&&t(Yw,{issueId:e,onCloseClick:()=>a(!1)})]})},Kw=o=>{const{myIssues:e=null,handleIssue:n=null}=o;return l(T,{gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Type"}),t(L,{className:"g-col-3",children:"Room/Player"}),t(L,{className:"g-col-3",children:"Opened"}),t(L,{className:"g-col-2"}),t(L,{className:"g-col-2"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(r=>l(te,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(L,{className:"g-col-2",children:r.categoryId}),t(L,{className:"g-col-3",children:r.reportedUserName}),t(L,{className:"g-col-3",children:new Date(Date.now()-r.issueAgeInMilliseconds).toLocaleTimeString()}),t(L,{className:"g-col-2",children:t(M,{variant:"primary",onClick:a=>n(r.issueId),children:"Handle"})}),t(L,{className:"g-col-2",children:t(M,{variant:"danger",onClick:a=>D(new zu([r.issueId])),children:"Release"})})]},r.issueId))})]})},Xw=o=>{const{openIssues:e=null}=o;return l(T,{gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Type"}),t(L,{className:"g-col-3",children:"Room/Player"}),t(L,{className:"g-col-4",children:"Opened"}),t(L,{className:"g-col-3"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(n=>l(te,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(L,{className:"g-col-2",children:n.categoryId}),t(L,{className:"g-col-3",children:n.reportedUserName}),t(L,{className:"g-col-4",children:new Date(Date.now()-n.issueAgeInMilliseconds).toLocaleTimeString()}),t(L,{className:"g-col-3",children:t(M,{variant:"success",onClick:r=>D(new ZE([n.issueId],!1,0,"pick issue button")),children:"Pick Issue"})})]},n.issueId))})]})},Qw=o=>{const{pickedIssues:e=null}=o;return l(T,{gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Type"}),t(L,{className:"g-col-3",children:"Room/Player"}),t(L,{className:"g-col-4",children:"Opened"}),t(L,{className:"g-col-3",children:"Picker"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(n=>l(te,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(L,{className:"g-col-2",children:n.categoryId}),t(L,{className:"g-col-3",children:n.reportedUserName}),t(L,{className:"g-col-4",children:new Date(Date.now()-n.issueAgeInMilliseconds).toLocaleTimeString()}),t(L,{className:"g-col-3",children:n.pickerUserName})]},n.issueId))})]})},Jw=["Open Issues","My Issues","Picked Issues"],Zw=o=>{const{onCloseClick:e=null}=o,[n,r]=i.exports.useState(0),[a,s]=i.exports.useState([]),{tickets:c=[]}=ys(),u=c.filter(E=>E.state===Ua.STATE_OPEN),d=c.filter(E=>E.state===Ua.STATE_PICKED&&E.pickerUserId===W().userId),p=c.filter(E=>E.state===Ua.STATE_PICKED),g=E=>{s(I=>{const _=[...I],C=_.indexOf(E);return C>=0&&_.splice(C,1),_})},h=E=>{s(I=>{const _=[...I],C=_.indexOf(E);return C===-1?_.push(E):_.splice(C,1),_})},f=()=>{switch(n){case 0:return t(Xw,{openIssues:u});case 1:return t(Kw,{myIssues:d,handleIssue:h});case 2:return t(Qw,{pickedIssues:p})}return null};return l(V,{children:[l(ae,{className:"nitro-mod-tools-tickets",children:[t(oe,{headerText:"Tickets",onCloseClick:e}),t(Er,{children:Jw.map((E,I)=>t(qn,{isActive:n===I,onClick:_=>r(I),children:E},I))}),t(se,{gap:1,children:t(f,{})})]}),a&&a.length>0&&a.map(E=>t($w,{issueId:E,onIssueInfoClosed:g},E))]})},ey=o=>{const{userId:e=null,onCloseClick:n=null}=o,[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(null);return U(eC,u=>{const d=u.getParser();!d||d.data.userId!==e||(c(d.data.username),a(d.data.roomChatlogs))}),i.exports.useEffect(()=>{D(new tC(e))},[e]),l(ae,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:Pt.TOP_LEFT,children:[t(oe,{headerText:`User Chatlog: ${s||""}`,onCloseClick:n}),t(se,{className:"text-black h-100",children:r&&t(pl,{records:r})})]})},Tc=[new Fe(1,"Alert",Fe.ALERT,1,0),new Fe(2,"Mute 1h",Fe.MUTE,2,0),new Fe(3,"Ban 18h",Fe.BAN,3,0),new Fe(4,"Ban 7 days",Fe.BAN,4,0),new Fe(5,"Ban 30 days (step 1)",Fe.BAN,5,0),new Fe(7,"Ban 30 days (step 2)",Fe.BAN,7,0),new Fe(6,"Ban 100 years",Fe.BAN,6,0),new Fe(106,"Ban avatar-only 100 years",Fe.BAN,6,0),new Fe(101,"Kick",Fe.KICK,0,0),new Fe(102,"Lock trade 1 week",Fe.TRADE_LOCK,0,168),new Fe(104,"Lock trade permanent",Fe.TRADE_LOCK,0,876e3),new Fe(105,"Message",Fe.MESSAGE,0,0)],ty=o=>{const{user:e=null,onCloseClick:n=null}=o,[r,a]=i.exports.useState(-1),[s,c]=i.exports.useState(-1),[u,d]=i.exports.useState(""),{cfhCategories:p=null,settings:g=null}=ys(),{simpleAlert:h=null}=Ze(),f=i.exports.useMemo(()=>{const C=[];if(p&&p.length)for(const b of p)for(const N of b.topics)C.push(N);return C},[p]),E=C=>h(C,ge.DEFAULT,null,null,"Error"),I=()=>{let C=null;const b=f[r];if(r===-1&&(C="You must select a CFH topic"),C)return E(C);const N=u.trim().length===0?m(`help.cfh.topic.${b.id}`):u;D(new nC(e.userId,r,N)),n()},_=()=>{let C=null;const b=f[r],N=Tc[s];if(r===-1||s===-1?C="You must select a CFH topic and Sanction":!g||!g.cfhPermission?C="You do not have permission to do this":b?N||(C="You must select a sanction"):C="You must select a CFH topic",C){E(C);return}const w=u.trim().length===0?m(`help.cfh.topic.${b.id}`):u;switch(N.actionType){case Fe.ALERT:{if(!g.alertPermission){E("You have insufficient permissions");return}D(new iC(e.userId,w,b.id));break}case Fe.MUTE:D(new aC(e.userId,w,b.id));break;case Fe.BAN:{if(!g.banPermission){E("You have insufficient permissions");return}D(new oC(e.userId,w,b.id,s,N.actionId===106));break}case Fe.KICK:{if(!g.kickPermission){E("You have insufficient permissions");return}D(new sC(e.userId,w,b.id));break}case Fe.TRADE_LOCK:{const O=N.actionLengthHours*60;D(new rC(e.userId,w,O,b.id));break}case Fe.MESSAGE:{if(u.trim().length===0){E("Please write a message to user");return}D(new Yu(e.userId,u,b.id));break}}n()};return e?l(ae,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:Pt.TOP_LEFT,children:[t(oe,{headerText:"Mod Action: "+(e?e.username:""),onCloseClick:()=>n()}),l(se,{className:"text-black",children:[l("select",{className:"form-select form-select-sm",value:r,onChange:C=>a(parseInt(C.target.value)),children:[t("option",{value:-1,disabled:!0,children:"CFH Topic"}),f.map((C,b)=>t("option",{value:b,children:m("help.cfh.topic."+C.id)},b))]}),l("select",{className:"form-select form-select-sm",value:s,onChange:C=>c(parseInt(C.target.value)),children:[t("option",{value:-1,disabled:!0,children:"Sanction Type"}),Tc.map((C,b)=>t("option",{value:b,children:C.name},b))]}),l(T,{gap:1,children:[t(S,{small:!0,children:"Optional message type, overrides default"}),t("textarea",{className:"form-control",value:u,onChange:C=>d(C.target.value)})]}),l(v,{justifyContent:"between",gap:1,children:[t(M,{variant:"primary",onClick:I,children:"Default Sanction"}),t(M,{variant:"success",onClick:_,children:"Sanction"})]})]})]}):null},ny=o=>{const{userId:e=null,onCloseClick:n=null}=o,[r,a]=i.exports.useState(null);return U(lC,s=>{const c=s.getParser();c.data.userId===e&&a(c.data)}),i.exports.useEffect(()=>{D(new cC(e))},[e]),e?l(ae,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:Pt.TOP_LEFT,children:[t(oe,{headerText:"User Visits",onCloseClick:n}),t(se,{className:"text-black",gap:1,children:l(T,{fullHeight:!0,gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(te,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Time"}),t(L,{className:"g-col-7",children:"Room name"}),t(L,{className:"g-col-3",children:"Visit"})]})}),t(fa,{rows:(r==null?void 0:r.rooms)??[],rowRender:s=>l(te,{fullHeight:!1,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[l(S,{className:"g-col-2",children:[s.enterHour.toString().padStart(2,"0"),": ",s.enterMinute.toString().padStart(2,"0")]}),t(S,{className:"g-col-7",children:s.roomName}),t(S,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:c=>Xt(s.roomId),children:"Visit Room"})]})})]})})]}):null},ry=o=>{const{user:e=null,onCloseClick:n=null}=o,[r,a]=i.exports.useState(""),{simpleAlert:s=null}=Ze();if(!e)return null;const c=()=>{if(r.trim().length===0){s("Please write a message to user.",null,null,null,"Error",null);return}D(new Yu(e.userId,r,-999)),n()};return l(ae,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:Pt.TOP_LEFT,children:[t(oe,{headerText:"Send Message",onCloseClick:()=>n()}),l(se,{className:"text-black",children:[l(S,{children:["Message To: ",e.username]}),t("textarea",{className:"form-control",value:r,onChange:u=>a(u.target.value)}),t(M,{fullWidth:!0,onClick:c,children:"Send message"})]})]})},sy=o=>{const{onCloseClick:e=null,userId:n=null}=o,[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(!1),[u,d]=i.exports.useState(!1),[p,g]=i.exports.useState(!1),h=i.exports.useMemo(()=>r?[{localeKey:"modtools.userinfo.userName",value:r.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:r.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:r.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:r.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:r.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:r.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:r.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:r.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:Hn.format(r.minutesSinceLastLogin*60,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:r.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:r.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:r.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:Hn.format(r.registrationAgeInMinutes*60,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:r.userClassification}]:null,[r]);return U(uC,f=>{const E=f.getParser();!E||E.data.userId!==n||a(E.data)}),i.exports.useEffect(()=>{D(new dC(n))},[n]),r?l(V,{children:[l(ae,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:Pt.TOP_LEFT,children:[t(oe,{headerText:m("modtools.userinfo.title",["username"],[r.userName]),onCloseClick:()=>e()}),t(se,{className:"text-black",children:l(te,{overflow:"hidden",children:[t(T,{size:8,overflow:"auto",children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:t("tbody",{children:h.map((f,E)=>l("tr",{children:[t("th",{scope:"row",children:m(f.localeKey)}),l("td",{children:[f.value,f.showOnline&&t("i",{className:`icon icon-pf-${r.online?"online":"offline"} ms-2`})]})]},E))})})}),l(T,{size:4,gap:1,children:[t(M,{onClick:f=>ee(`mod-tools/open-user-chatlog/${n}`),children:"Room Chat"}),t(M,{onClick:f=>c(!s),children:"Send Message"}),t(M,{onClick:f=>g(!p),children:"Room Visits"}),t(M,{onClick:f=>d(!u),children:"Mod Action"})]})]})})]}),s&&t(ry,{user:{userId:n,username:r.userName},onCloseClick:()=>c(!1)}),u&&t(ty,{user:{userId:n,username:r.userName},onCloseClick:()=>d(!1)}),p&&t(ny,{userId:n,onCloseClick:()=>g(!1)})]}):null},oy=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(-1),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(!1),{openRooms:p=[],openRoomChatlogs:g=[],openUserChatlogs:h=[],openUserInfos:f=[],openRoomInfo:E=null,closeRoomInfo:I=null,toggleRoomInfo:_=null,openRoomChatlog:C=null,closeRoomChatlog:b=null,toggleRoomChatlog:N=null,openUserInfo:w=null,closeUserInfo:O=null,toggleUserInfo:y=null,openUserChatlog:x=null,closeUserChatlog:F=null,toggleUserChatlog:P=null}=ys(),k=i.exports.useRef(null);return we([In.INITIALIZED,In.DISPOSED],R=>{if(!Wr.isRoomPreviewerId(R.roomId))switch(R.type){case In.INITIALIZED:a(R.roomId);return;case In.DISPOSED:a(-1);return}}),il(R=>{if(R.category!==Q.UNIT)return;const A=Ae();if(!A)return;const G=A.userDataManager.getUserDataByIndex(R.id);!G||G.type!==ft.USER||c({userId:G.webID,username:G.name})}),i.exports.useEffect(()=>{const R={linkReceived:A=>{const G=A.split("/");if(!(G.length<2))switch(G[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(B=>!B);return;case"open-room-info":E(Number(G[2]));return;case"close-room-info":I(Number(G[2]));return;case"toggle-room-info":_(Number(G[2]));return;case"open-room-chatlog":C(Number(G[2]));return;case"close-room-chatlog":b(Number(G[2]));return;case"toggle-room-chatlog":N(Number(G[2]));return;case"open-user-info":w(Number(G[2]));return;case"close-user-info":O(Number(G[2]));return;case"toggle-user-info":y(Number(G[2]));return;case"open-user-chatlog":x(Number(G[2]));return;case"close-user-chatlog":F(Number(G[2]));return;case"toggle-user-chatlog":P(Number(G[2]));return}},eventUrlPrefix:"mod-tools/"};return It(R),()=>Et(R)},[E,I,_,C,b,N,w,O,y,x,F,P]),l(V,{children:[e&&l(ae,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:Pt.TOP_LEFT,theme:"primary-slim",children:[t(oe,{headerText:"Mod Tools",onCloseClick:R=>n(!1)}),l(se,{className:"text-black",gap:1,children:[l(M,{gap:1,onClick:R=>ee(`mod-tools/toggle-room-info/${r}`),disabled:r<=0,className:"position-relative",children:[t(L,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),l(M,{innerRef:k,gap:1,onClick:R=>ee(`mod-tools/toggle-room-chatlog/${r}`),disabled:r<=0,className:"position-relative",children:[t(L,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),l(M,{gap:1,onClick:()=>ee(`mod-tools/toggle-user-info/${s.userId}`),disabled:!s,className:"position-relative",children:[t(L,{className:"icon icon-user position-absolute start-1"})," User: ",s?s.username:""]}),l(M,{gap:1,onClick:()=>d(R=>!R),className:"position-relative",children:[t(L,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),p.length>0&&p.map(R=>t(zw,{roomId:R,onCloseClick:()=>ee(`mod-tools/close-room-info/${R}`)},R)),g.length>0&&g.map(R=>t(qw,{roomId:R,onCloseClick:()=>ee(`mod-tools/close-room-chatlog/${R}`)},R)),f.length>0&&f.map(R=>t(sy,{userId:R,onCloseClick:()=>ee(`mod-tools/close-user-info/${R}`)},R)),h.length>0&&h.map(R=>t(ey,{userId:R,onCloseClick:()=>ee(`mod-tools/close-user-chatlog/${R}`)},R)),u&&t(Zw,{onCloseClick:()=>d(!1)})]})},ay=[Le.START_DOORBELL,Le.STATE_WAITING,Le.STATE_NO_ANSWER,Le.START_PASSWORD,Le.STATE_WRONG_PASSWORD],iy=[Le.START_DOORBELL,Le.STATE_WAITING,Le.STATE_NO_ANSWER],ly=o=>{const[e,n]=i.exports.useState(""),{doorData:r=null,setDoorData:a=null}=Mn(),s=()=>{r&&r.state===Le.STATE_WAITING&&Ei(),a(null)},c=()=>{!r||!r.roomInfo||(jr(r.roomInfo.roomId),a(p=>{const g={...p};return g.state=Le.STATE_PENDING_SERVER,g}))},u=()=>{!r||!r.roomInfo||(jr(r.roomInfo.roomId,e),a(p=>{const g={...p};return g.state=Le.STATE_PENDING_SERVER,g}))};if(i.exports.useEffect(()=>{!r||r.state!==Le.STATE_NO_ANSWER||Ei()},[r]),!r||r.state===Le.NONE||ay.indexOf(r.state)===-1)return null;const d=iy.indexOf(r.state)>=0;return l(ae,{className:"nitro-navigator-doorbell",theme:"primary-slim",children:[t(oe,{headerText:m(d?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:s}),l(se,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:r&&r.roomInfo&&r.roomInfo.roomName}),r.state===Le.START_DOORBELL&&t(S,{children:m("navigator.doorbell.info")}),r.state===Le.STATE_WAITING&&t(S,{children:m("navigator.doorbell.waiting")}),r.state===Le.STATE_NO_ANSWER&&t(S,{children:m("navigator.doorbell.no.answer")}),r.state===Le.START_PASSWORD&&t(S,{children:m("navigator.password.info")}),r.state===Le.STATE_WRONG_PASSWORD&&t(S,{children:m("navigator.password.retryinfo")})]}),d&&l(T,{gap:1,children:[r.state===Le.START_DOORBELL&&t(M,{variant:"success",onClick:c,children:m("navigator.doorbell.button.ring")}),t(M,{variant:"danger",onClick:s,children:m("generic.cancel")})]}),!d&&l(V,{children:[l(T,{gap:1,children:[t(S,{children:m("navigator.password.enter")}),t("input",{type:"password",className:"form-control form-control-sm",onChange:p=>n(p.target.value)})]}),l(T,{gap:1,children:[t(M,{variant:"success",onClick:u,children:m("navigator.password.button.try")}),t(M,{variant:"danger",onClick:s,children:m("generic.cancel")})]})]})]})]})},cy=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(0),[E,I]=i.exports.useState([]),[_,C]=i.exports.useState(""),{categories:b=null}=Mn(),N=K("hc.disabled",!1),w=x=>K("images.url")+`/navigator/models/model_${x}.png`,O=(x,F)=>{!x||x.clubLevel>En()||C(E[F].name)},y=()=>{D(new mC(r,s,"model_"+_,Number(u),Number(p),h))};return i.exports.useEffect(()=>{if(!e){const x=[];for(let F=10;F<=100;F=F+10)x.push(F);n(x),g(x[0])}},[e]),i.exports.useEffect(()=>{b&&b.length&&d(b[0].id)},[b]),i.exports.useEffect(()=>{const x=K("navigator.room.models");x&&x.length&&(I(x),C(x[0].name))},[]),l(T,{overflow:"hidden",children:[l(te,{overflow:"hidden",children:[l(T,{size:6,gap:1,overflow:"auto",children:[l(T,{gap:1,children:[t(S,{children:m("navigator.createroom.roomnameinfo")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:60,onChange:x=>a(x.target.value),placeholder:m("navigator.createroom.roomnameinfo")})]}),l(T,{grow:!0,gap:1,children:[t(S,{children:m("navigator.createroom.roomdescinfo")}),t("textarea",{className:"flex-grow-1 form-control form-control-sm w-100",maxLength:255,onChange:x=>c(x.target.value),placeholder:m("navigator.createroom.roomdescinfo")})]}),l(T,{gap:1,children:[t(S,{children:m("navigator.category")}),t("select",{className:"form-select form-select-sm",onChange:x=>d(Number(x.target.value)),children:b&&b.length>0&&b.map(x=>t("option",{value:x.id,children:m(x.name)},x.id))})]}),l(T,{gap:1,children:[t(S,{children:m("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",onChange:x=>g(Number(x.target.value)),children:e&&e.map(x=>t("option",{value:x,children:x},x))})]}),l(T,{gap:1,children:[t(S,{children:m("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",onChange:x=>f(Number(x.target.value)),children:[t("option",{value:"0",children:m("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:m("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:m("navigator.roomsettings.trade_allowed")})]})]})]}),t(T,{size:6,gap:1,overflow:"auto",children:E.map((x,F)=>l(Ne,{fullHeight:!0,onClick:()=>O(x,F),itemActive:_===x.name,overflow:"unset",gap:0,className:"p-1",disabled:En()<x.clubLevel,children:[t(v,{fullHeight:!0,center:!0,overflow:"hidden",children:t("img",{alt:"",src:w(x.name)})}),l(S,{bold:!0,children:[x.tileSize," ",m("navigator.createroom.tilesize")]}),!N&&x.clubLevel>dn.NO_CLUB&&t(ct,{position:"absolute",className:"top-1 end-1",type:"hc"})]},x.name))})]}),t(M,{fullWidth:!0,variant:!r||r.length<3?"danger":"success",onClick:y,disabled:!r||r.length<3,children:m("navigator.createroom.create")})]})},uy=o=>{const{onCloseClick:e=null}=o,[n,r]=i.exports.useState(!1),[a,s]=i.exports.useState(!1),{report:c=null}=Ln(),{navigatorData:u=null}=Mn(),d=g=>{switch(g){case"settings":return W().userId===u.enteredGuestRoom.ownerId||W().isModerator;case"staff_pick":return W().securityLevel>=Yo.COMMUNITY;default:return!1}},p=(g,h)=>{if(!(!u||!u.enteredGuestRoom))switch(g){case"set_home_room":let f=-1;u.homeRoomId!==u.enteredGuestRoom.roomId&&(f=u.enteredGuestRoom.roomId),f>0&&D(new fC(f));return;case"navigator_search_tag":ee(`navigator/search/${h}`),D(new Es("hotel_view",`tag:${h}`));return;case"open_room_thumbnail_camera":Tt(new Bn(Bn.TOGGLE_THUMBNAIL));return;case"open_group_info":ro(u.enteredGuestRoom.habboGroupId);return;case"toggle_room_link":ee("navigator/toggle-room-link");return;case"open_room_settings":D(new Fu(u.enteredGuestRoom.roomId));return;case"toggle_pick":r(E=>!E),D(new hC(u.enteredGuestRoom.roomId));return;case"toggle_mute":s(E=>!E),D(new pC);return;case"room_filter":D(new gC(u.enteredGuestRoom.roomId));return;case"open_floorplan_editor":ee("floor-editor/toggle");return;case"report_room":c(qe.ROOM,{roomId:u.enteredGuestRoom.roomId,roomName:u.enteredGuestRoom.roomName});return;case"close":e();return}};return i.exports.useEffect(()=>{u&&(r(u.currentRoomIsStaffPick),u.enteredGuestRoom&&s(u.enteredGuestRoom.allInRoomMuted))},[u]),u.enteredGuestRoom?l(ae,{className:"nitro-room-info",theme:"primary-slim",children:[t(oe,{headerText:m("navigator.roomsettings.roominfo"),onCloseClick:()=>p("close")}),t(se,{className:"text-black",children:u.enteredGuestRoom&&l(V,{children:[l(v,{gap:2,overflow:"hidden",children:[t(ha,{roomId:u.enteredGuestRoom.roomId,customUrl:u.enteredGuestRoom.officialRoomPicRef,children:d("settings")&&t("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:()=>p("open_room_thumbnail_camera")})}),l(T,{grow:!0,gap:1,overflow:"hidden",children:[l(v,{gap:1,children:[l(T,{grow:!0,gap:1,children:[l(v,{gap:1,children:[t("i",{onClick:()=>p("set_home_room"),className:Ht("flex-shrink-0 icon icon-house-small cursor-pointer",u.homeRoomId!==u.enteredGuestRoom.roomId&&"gray")}),t(S,{bold:!0,children:u.enteredGuestRoom.roomName})]}),u.enteredGuestRoom.showOwner&&l(v,{alignItems:"center",gap:1,children:[t(S,{variant:"muted",children:m("navigator.roomownercaption")}),l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:u.enteredGuestRoom.ownerId}),t(S,{children:u.enteredGuestRoom.ownerName})]})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{variant:"muted",children:m("navigator.roomrating")}),t(S,{children:u.currentRoomRating})]}),u.enteredGuestRoom.tags.length>0&&t(v,{alignItems:"center",gap:1,children:u.enteredGuestRoom.tags.map(g=>l(S,{pointer:!0,className:"bg-muted rounded p-1",onClick:h=>p("navigator_search_tag",g),children:["#",g]},g))})]}),l(T,{alignItems:"center",gap:1,children:[d("settings")&&t("i",{className:"icon icon-cog cursor-pointer",title:m("navigator.room.popup.info.room.settings"),onClick:g=>p("open_room_settings")}),t(Fm,{title:m("navigator.embed.caption"),className:"cursor-pointer fa-icon",onClick:g=>ee("navigator/toggle-room-link")})]})]}),t(S,{overflow:"auto",style:{maxHeight:50},children:u.enteredGuestRoom.description}),u.enteredGuestRoom.habboGroupId>0&&l(v,{pointer:!0,alignItems:"center",gap:1,onClick:()=>p("open_group_info"),children:[t(Ye,{className:"flex-none",badgeCode:u.enteredGuestRoom.groupBadgeCode,isGroup:!0}),t(S,{underline:!0,children:m("navigator.guildbase",["groupName"],[u.enteredGuestRoom.groupName])})]})]})]}),l(T,{gap:1,children:[d("staff_pick")&&t(M,{onClick:()=>p("toggle_pick"),children:m(n?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),t(M,{variant:"danger",onClick:()=>p("report_room"),children:m("help.emergency.main.report.room")}),d("settings")&&l(V,{children:[t(M,{onClick:()=>p("toggle_mute"),children:m(a?"navigator.muteall_on":"navigator.muteall_off")}),t(M,{onClick:()=>p("room_filter"),children:m("navigator.roomsettings.roomfilter")}),t(M,{onClick:()=>p("open_floorplan_editor"),children:m("open.floor.plan.editor")})]})]})]})})]}):null},dy=o=>{const{onCloseClick:e=null}=o,{navigatorData:n=null}=Mn();return n.enteredGuestRoom?l(ae,{className:"nitro-room-link",theme:"primary-slim",children:[t(oe,{headerText:m("navigator.embed.title"),onCloseClick:e}),t(se,{className:"text-black d-flex align-items-center",children:l(v,{gap:2,children:[t(ha,{roomId:n.enteredGuestRoom.roomId,customUrl:n.enteredGuestRoom.officialRoomPicRef}),l(T,{children:[t(S,{bold:!0,fontSize:5,children:m("navigator.embed.headline")}),t(S,{children:m("navigator.embed.info")}),t("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:m("navigator.embed.src",["roomId"],[n.enteredGuestRoom.roomId.toString()]).replace("${url.prefix}",K("url.prefix",""))})]})]})})]}):null},my=o=>{const{roomData:e=null,handleChange:n=null}=o,[r,a]=i.exports.useState(""),[s,c]=i.exports.useState(""),[u,d]=i.exports.useState(!1),p=()=>{!u||r.length<=0||s.length<=0||r!==s||n("password",r)};return i.exports.useEffect(()=>{a(""),c(""),d(!1)},[e]),l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.roomaccess.caption")}),t(S,{children:m("navigator.roomsettings.roomaccess.info")})]}),l(T,{overflow:"auto",children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.doormode")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===st.OPEN_STATE&&!u,onChange:g=>n("lock_state",st.OPEN_STATE)}),t(S,{children:m("navigator.roomsettings.doormode.open")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===st.DOORBELL_STATE&&!u,onChange:g=>n("lock_state",st.DOORBELL_STATE)}),t(S,{children:m("navigator.roomsettings.doormode.doorbell")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===st.INVISIBLE_STATE&&!u,onChange:g=>n("lock_state",st.INVISIBLE_STATE)}),t(S,{children:m("navigator.roomsettings.doormode.invisible")})]}),l(v,{fullWidth:!0,gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===st.PASSWORD_STATE||u,onChange:g=>d(g.target.checked)}),!u&&e.lockState!==st.PASSWORD_STATE&&t(S,{children:m("navigator.roomsettings.doormode.password")}),(u||e.lockState===st.PASSWORD_STATE)&&l(T,{gap:1,children:[t(S,{children:m("navigator.roomsettings.doormode.password")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:r,onChange:g=>a(g.target.value),placeholder:m("navigator.roomsettings.password"),onFocus:g=>d(!0)}),u&&r.length<=0&&t(S,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.passwordismandatory")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:s,onChange:g=>c(g.target.value),onBlur:p,placeholder:m("navigator.roomsettings.passwordconfirm")}),u&&r.length>0&&r!==s&&t(S,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.invalidconfirm")})]})]})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.pets")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPets,onChange:g=>n("allow_pets",g.target.checked)}),t(S,{children:m("navigator.roomsettings.allowpets")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPetsEat,onChange:g=>n("allow_pets_eat",g.target.checked)}),t(S,{children:m("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},vc=3,wc=60,yc=255,Po=15,gy=o=>{const{roomData:e=null,handleChange:n=null,onClose:r=null}=o,[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(""),[d,p]=i.exports.useState(""),[g,h]=i.exports.useState(""),[f,E]=i.exports.useState(0),[I,_]=i.exports.useState(""),{showConfirm:C=null}=Ze(),{categories:b=null}=Mn();U(IC,x=>{const F=x.getParser();if(F)switch(F.code){case Ml.ERROR_INVALID_TAG:_("navigator.roomsettings.unacceptablewords");case Ml.ERROR_NON_USER_CHOOSABLE_TAG:_("navigator.roomsettings.nonuserchoosabletag");break;default:_("");break}});const N=()=>{C(m("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[e.roomName]),()=>{D(new EC(e.roomId)),r&&r(),ee("navigator/search/myworld_view")},null,null,null,m("navigator.roomsettings.deleteroom.confirm.title"))},w=()=>{a===e.roomName||a.length<vc||a.length>wc||n("name",a)},O=()=>{c===e.roomDescription||c.length>yc||n("description",c)},y=x=>{x===0&&d===e.tags[0]||d.length>Po||x===1&&g===e.tags[1]||g.length>Po||(d===""&&g!==""&&h(""),_(""),E(x),n("tags",d===""&&g!==""?[g]:[d,g]))};return i.exports.useEffect(()=>{s(e.roomName),u(e.roomDescription),p(e.tags.length>0&&e.tags[0]?e.tags[0]:""),h(e.tags.length>0&&e.tags[1]?e.tags[1]:"")},[e]),l(V,{children:[l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("navigator.roomname")}),l(T,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:a,maxLength:wc,onChange:x=>s(x.target.value),onBlur:w}),a.length<vc&&t(S,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.roomnameismandatory")})]})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("navigator.roomsettings.desc")}),t("textarea",{className:"form-control form-control-sm",value:c,maxLength:yc,onChange:x=>u(x.target.value),onBlur:O})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("navigator.category")}),t("select",{className:"form-select form-select-sm",value:e.categoryId,onChange:x=>n("category",x.target.value),children:b&&b.map(x=>t("option",{value:x.id,children:m(x.name)},x.id))})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",value:e.userCount,onChange:x=>n("max_visitors",x.target.value),children:tc&&tc.map(x=>t("option",{value:x,children:x},x))})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",value:e.tradeState,onChange:x=>n("trade_state",x.target.value),children:[t("option",{value:"0",children:m("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:m("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:m("navigator.roomsettings.trade_allowed")})]})]}),l(v,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:m("navigator.tags")}),l(T,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:d,onChange:x=>p(x.target.value),onBlur:()=>y(0)}),d.length>Po&&t(S,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.toomanycharacters")}),f===0&&I!=""&&t(S,{bold:!0,small:!0,variant:"danger",children:m(I)})]}),l(T,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:g,onChange:x=>h(x.target.value),onBlur:()=>y(1)}),g.length>Po&&t(S,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.toomanycharacters")}),f===1&&I!=""&&t(S,{bold:!0,small:!0,variant:"danger",children:m(I)})]})]}),l(v,{alignItems:"center",gap:1,children:[t(L,{className:"col-3"}),t("input",{className:"form-check-input",type:"checkbox",checked:e.allowWalkthrough,onChange:x=>n("allow_walkthrough",x.target.checked)}),t(S,{children:m("navigator.roomsettings.allow_walk_through")})]}),l(S,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:N,children:[t(_n,{className:"fa-icon"}),m("navigator.roomsettings.delete")]})]})},py=o=>{var d;const{roomData:e=null,handleChange:n=null}=o,[r,a]=i.exports.useState(-1),[s,c]=i.exports.useState([]),u=p=>{c(g=>{const h=[...g],f=h.findIndex(E=>E.userId===p);return f>=0&&h.splice(f,1),h}),D(new _C(p,e.roomId)),a(-1)};return U(CC,p=>{const g=p.getParser();!e||e.roomId!==g.roomId||c(g.bannedUsers)}),i.exports.useEffect(()=>{D(new $u(e.roomId))},[e.roomId]),l(te,{overflow:"auto",children:[l(T,{size:6,children:[l(S,{bold:!0,children:[m("navigator.roomsettings.moderation.banned.users")," (",s.length,")"]}),t(v,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(T,{fullWidth:!0,overflow:"auto",gap:1,children:s&&s.length>0&&s.map((p,g)=>l(v,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(Cn,{userName:p.userName}),l(S,{pointer:!0,grow:!0,onClick:h=>a(p.userId),children:[" ",p.userName]})]},g))})}),l(M,{disabled:r<=0,onClick:p=>u(r),children:[m("navigator.roomsettings.moderation.unban")," ",r>0&&((d=s.find(p=>p.userId===r))==null?void 0:d.userName)]})]}),l(T,{size:6,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.moderation.mute.header")}),t(v,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowMute,onChange:p=>n("moderation_mute",p.target.value),children:[t("option",{value:Un.MODERATION_LEVEL_NONE,children:m("navigator.roomsettings.moderation.none")}),t("option",{value:Un.MODERATION_LEVEL_USER_WITH_RIGHTS,children:m("navigator.roomsettings.moderation.rights")})]})})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.moderation.kick.header")}),t(v,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowKick,onChange:p=>n("moderation_kick",p.target.value),children:[t("option",{value:Un.MODERATION_LEVEL_NONE,children:m("navigator.roomsettings.moderation.none")}),t("option",{value:Un.MODERATION_LEVEL_USER_WITH_RIGHTS,children:m("navigator.roomsettings.moderation.rights")}),t("option",{value:Un.MODERATION_LEVEL_ALL,children:m("navigator.roomsettings.moderation.all")})]})})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.moderation.ban.header")}),t(v,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowBan,onChange:p=>n("moderation_ban",p.target.value),children:[t("option",{value:Un.MODERATION_LEVEL_NONE,children:m("navigator.roomsettings.moderation.none")}),t("option",{value:Un.MODERATION_LEVEL_USER_WITH_RIGHTS,children:m("navigator.roomsettings.moderation.rights")})]})})]})]})]})},hy=o=>{const{roomData:e=null}=o,[n,r]=i.exports.useState(new Map);return U(bC,a=>{const s=a.getParser();!e||e.roomId!==s.roomId||r(s.users)}),U(SC,a=>{const s=a.getParser();!e||e.roomId!==s.roomId||r(c=>{const u=new Map(c);return u.set(s.data.userId,s.data.userName),u})}),U(NC,a=>{const s=a.getParser();!e||e.roomId!==s.roomId||r(c=>{const u=new Map(c);return u.delete(s.userId),u})}),i.exports.useEffect(()=>{D(new TC(e.roomId))},[e.roomId]),l(te,{children:[l(T,{size:6,children:[t(S,{bold:!0,children:m("navigator.flatctrls.userswithrights",["displayed","total"],[n.size.toString(),n.size.toString()])}),t(v,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(T,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(n.entries()).map(([a,s],c)=>l(v,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(Cn,{userName:s}),l(S,{pointer:!0,grow:!0,onClick:u=>D(new vC(a)),children:[" ",s]})]},c))})})]}),t(T,{size:6,justifyContent:"end",children:t(M,{variant:"danger",disabled:!n.size,onClick:a=>D(new wC(e.roomId)),children:m("navigator.flatctrls.clear")})})]})},fy=o=>{const{roomData:e=null,handleChange:n=null}=o,[r,a]=i.exports.useState(0);return i.exports.useEffect(()=>{a(e.chatSettings.distance)},[e.chatSettings]),l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.vip.caption")}),t(S,{children:m("navigator.roomsettings.vip.info")})]}),l(te,{overflow:"auto",children:[l(T,{size:6,gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.chat_settings")}),t(S,{children:m("navigator.roomsettings.chat_settings.info")}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.mode,onChange:s=>n("bubble_mode",s.target.value),children:[t("option",{value:_t.CHAT_MODE_FREE_FLOW,children:m("navigator.roomsettings.chat.mode.free.flow")}),t("option",{value:_t.CHAT_MODE_LINE_BY_LINE,children:m("navigator.roomsettings.chat.mode.line.by.line")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.weight,onChange:s=>n("chat_weight",s.target.value),children:[t("option",{value:_t.CHAT_BUBBLE_WIDTH_NORMAL,children:m("navigator.roomsettings.chat.bubbles.width.normal")}),t("option",{value:_t.CHAT_BUBBLE_WIDTH_THIN,children:m("navigator.roomsettings.chat.bubbles.width.thin")}),t("option",{value:_t.CHAT_BUBBLE_WIDTH_WIDE,children:m("navigator.roomsettings.chat.bubbles.width.wide")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.speed,onChange:s=>n("bubble_speed",s.target.value),children:[t("option",{value:_t.CHAT_SCROLL_SPEED_FAST,children:m("navigator.roomsettings.chat.speed.fast")}),t("option",{value:_t.CHAT_SCROLL_SPEED_NORMAL,children:m("navigator.roomsettings.chat.speed.normal")}),t("option",{value:_t.CHAT_SCROLL_SPEED_SLOW,children:m("navigator.roomsettings.chat.speed.slow")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.protection,onChange:s=>n("flood_protection",s.target.value),children:[t("option",{value:_t.FLOOD_FILTER_LOOSE,children:m("navigator.roomsettings.chat.flood.loose")}),t("option",{value:_t.FLOOD_FILTER_NORMAL,children:m("navigator.roomsettings.chat.flood.normal")}),t("option",{value:_t.FLOOD_FILTER_STRICT,children:m("navigator.roomsettings.chat.flood.strict")})]}),t(S,{children:m("navigator.roomsettings.chat_settings.hearing.distance")}),t("input",{type:"number",min:"0",className:"form-control form-control-sm",value:r,onChange:s=>a(s.target.valueAsNumber),onBlur:s=>n("chat_distance",r)})]}),l(T,{size:6,gap:1,children:[t(S,{bold:!0,children:m("navigator.roomsettings.vip_settings")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.hideWalls,onChange:s=>n("hide_walls",s.target.checked)}),t(S,{children:m("navigator.roomsettings.hide_walls")})]}),l("select",{className:"form-select form-select-sm",value:e.wallThickness,onChange:s=>n("wall_thickness",s.target.value),children:[t("option",{value:"0",children:m("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:"1",children:m("navigator.roomsettings.wall_thickness.thick")}),t("option",{value:"-1",children:m("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:"-2",children:m("navigator.roomsettings.wall_thickness.thinnest")})]}),l("select",{className:"form-select form-select-sm",value:e.floorThickness,onChange:s=>n("floor_thickness",s.target.value),children:[t("option",{value:"0",children:m("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:"1",children:m("navigator.roomsettings.floor_thickness.thick")}),t("option",{value:"-1",children:m("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:"-2",children:m("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},Nr=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],Iy=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(Nr[0]);U(yC,u=>{const d=u.getParser();if(!d)return;const p=d.data;n({roomId:p.roomId,roomName:p.name,roomDescription:p.description,categoryId:p.categoryId,userCount:p.maximumVisitorsLimit,tags:p.tags,tradeState:p.tradeMode,allowWalkthrough:p.allowWalkThrough,lockState:p.doorMode,password:null,allowPets:p.allowPets,allowPetsEat:p.allowFoodConsume,hideWalls:p.hideWalls,wallThickness:p.wallThickness,floorThickness:p.floorThickness,chatSettings:{mode:p.chatSettings.mode,weight:p.chatSettings.weight,speed:p.chatSettings.speed,distance:p.chatSettings.distance,protection:p.chatSettings.protection},moderationSettings:{allowMute:p.roomModerationSettings.allowMute,allowKick:p.roomModerationSettings.allowKick,allowBan:p.roomModerationSettings.allowBan}}),D(new $u(p.roomId))});const s=()=>{n(null),a(Nr[0])},c=(u,d)=>{n(p=>{const g={...p};switch(u){case"name":g.roomName=String(d);break;case"description":g.roomDescription=String(d);break;case"category":g.categoryId=Number(d);break;case"max_visitors":g.userCount=Number(d);break;case"trade_state":g.tradeState=Number(d);break;case"tags":g.tags=d;break;case"allow_walkthrough":g.allowWalkthrough=Boolean(d);break;case"allow_pets":g.allowPets=Boolean(d);break;case"allow_pets_eat":g.allowPetsEat=Boolean(d);break;case"hide_walls":g.hideWalls=Boolean(d);break;case"wall_thickness":g.wallThickness=Number(d);break;case"floor_thickness":g.floorThickness=Number(d);break;case"lock_state":g.lockState=Number(d);break;case"password":g.lockState=st.PASSWORD_STATE,g.password=String(d);break;case"moderation_mute":g.moderationSettings.allowMute=Number(d);break;case"moderation_kick":g.moderationSettings.allowKick=Number(d);break;case"moderation_ban":g.moderationSettings.allowBan=Number(d);break;case"bubble_mode":g.chatSettings.mode=Number(d);break;case"chat_weight":g.chatSettings.weight=Number(d);break;case"bubble_speed":g.chatSettings.speed=Number(d);break;case"flood_protection":g.chatSettings.protection=Number(d);break;case"chat_distance":g.chatSettings.distance=Number(d);break}return D(new xC(g.roomId,g.roomName,g.roomDescription,g.lockState,g.password,g.userCount,g.categoryId,g.tags.length,g.tags,g.tradeState,g.allowPets,g.allowPetsEat,g.allowWalkthrough,g.hideWalls,g.wallThickness,g.floorThickness,g.moderationSettings.allowMute,g.moderationSettings.allowKick,g.moderationSettings.allowBan,g.chatSettings.mode,g.chatSettings.weight,g.chatSettings.speed,g.chatSettings.distance,g.chatSettings.protection)),g})};return e?l(ae,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[t(oe,{headerText:m("navigator.roomsettings"),onCloseClick:s}),t(Er,{children:Nr.map(u=>t(qn,{isActive:r===u,onClick:d=>a(u),children:m(u)},u))}),l(se,{children:[r===Nr[0]&&t(gy,{roomData:e,handleChange:c,onClose:s}),r===Nr[1]&&t(my,{roomData:e,handleChange:c}),r===Nr[2]&&t(hy,{roomData:e,handleChange:c}),r===Nr[3]&&t(fy,{roomData:e,handleChange:c}),r===Nr[4]&&t(py,{roomData:e,handleChange:c})]})]}):null},xc=o=>{const{roomData:e=null}=o,[n,r]=i.exports.useState(!1),a=i.exports.useRef(),s=()=>{const c=100*(e.userCount/e.maxUserCount);let u="bg-primary";return c>=92?u="bg-danger":c>=50?u="bg-warning":c>0&&(u="bg-success"),u};return l(V,{children:[t(L,{pointer:!0,innerRef:a,className:"icon icon-navigator-info",onMouseOver:c=>r(!0),onMouseLeave:c=>r(!1)}),t(ia,{show:n,target:a.current,placement:"right",children:t(fs,{children:t(se,{overflow:"hidden",className:"room-info image-rendering-pixelated bg-transparent",children:l(v,{gap:2,overflow:"hidden",children:[l(ha,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(Ye,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),e.doorMode!==st.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===st.DOORBELL_STATE?"locked":e.doorMode===st.PASSWORD_STATE?"password":e.doorMode===st.INVISIBLE_STATE?"invisible":"")})]}),l(T,{gap:1,children:[t(S,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:e.roomName}),l(v,{gap:2,children:[t(S,{italics:!0,variant:"muted",children:m("navigator.roomownercaption")}),l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:e.ownerId}),t(S,{italics:!0,children:e.ownerName})]})]}),t(S,{className:"flex-grow-1",children:e.description}),l(v,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+s(),gap:1,children:[t(ui,{className:"fa-icon"}),e.userCount]})]})]})})})})]})},Rc=o=>{const{roomData:e=null,children:n=null,thumbnail:r=!1,...a}=o,{setDoorData:s=null}=Mn(),c=()=>{const d=100*(e.userCount/e.maxUserCount);let p="bg-primary";return d>=92?p="bg-danger":d>=50?p="bg-warning":d>0&&(p="bg-success"),p},u=d=>{if(e.ownerId!==W().userId){if(e.habboGroupId!==0){Xt(e.roomId);return}switch(e.doorMode){case st.DOORBELL_STATE:s(p=>{const g={...p};return g.roomInfo=e,g.state=Le.START_DOORBELL,g});return;case st.PASSWORD_STATE:s(p=>{const g={...p};return g.roomInfo=e,g.state=Le.START_PASSWORD,g});return}}jr(e.roomId)};return r?l(T,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:0,className:"navigator-item p-1 bg-light rounded-3 small mb-1 flex-column border border-muted",...a,children:[l(ha,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(Ye,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),l(v,{center:!0,className:"badge p-1 position-absolute m-1 "+c(),gap:1,children:[t(ui,{className:"fa-icon"}),e.userCount]}),e.doorMode!==st.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===st.DOORBELL_STATE?"locked":e.doorMode===st.PASSWORD_STATE?"password":e.doorMode===st.INVISIBLE_STATE?"invisible":"")})]}),l(v,{className:"w-100",children:[t(S,{truncate:!0,className:"flex-grow-1",children:e.roomName}),t(v,{reverse:!0,alignItems:"center",gap:1,children:t(xc,{roomData:e})}),n]})]}):l(v,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:2,className:"navigator-item px-2 py-1 small",...a,children:[l(v,{center:!0,className:"badge p-1 "+c(),gap:1,children:[t(ui,{className:"fa-icon"}),e.userCount]}),t(S,{truncate:!0,grow:!0,children:e.roomName}),l(v,{reverse:!0,alignItems:"center",gap:1,children:[t(xc,{roomData:e}),e.habboGroupId>0&&t("i",{className:"icon icon-navigator-room-group"}),e.doorMode!==st.OPEN_STATE&&t("i",{className:"icon icon-navigator-room-"+(e.doorMode===st.DOORBELL_STATE?"locked":e.doorMode===st.PASSWORD_STATE?"password":e.doorMode===st.INVISIBLE_STATE?"invisible":"")})]}),n]})},Ey=o=>{const{searchResult:e=null,...n}=o,[r,a]=i.exports.useState(!0),[s,c]=i.exports.useState(0),{topLevelContext:u=null}=Mn(),d=()=>{let f=e.code;return!f||!f.length||m("navigator.searchcode.title."+f)=="navigator.searchcode.title."+f?e.data:f.startsWith("${")?f.slice(2,f.length-1):"navigator.searchcode.title."+f},p=()=>{c(f=>f===mr.LIST?mr.THUMBNAILS:mr.LIST)},g=()=>{e.action==1?D(new Es(e.code,"")):e.action==2&&u&&D(new Es(u.code,""))};i.exports.useEffect(()=>{e&&(a(!e.closed),c(e.mode))},[e]);const h=s>=mr.THUMBNAILS;return l(T,{className:"bg-white rounded border border-muted",gap:0,children:[l(v,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[l(v,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:f=>a(E=>!E),children:[r&&t(Bm,{className:"text-secondary fa-icon"}),!r&&t(Ks,{className:"text-secondary fa-icon"}),t(S,{children:m(d())})]}),l(v,{gap:2,children:[s===mr.LIST&&t(Gm,{className:"text-secondary fa-icon",onClick:p}),s>=mr.THUMBNAILS&&t(Vm,{className:"text-secondary fa-icon",onClick:p}),e.action>0&&e.action===1&&t(Hm,{className:"text-secondary fa-icon",onClick:g}),e.action>0&&e.action!==1&&t(Wm,{className:"text-secondary fa-icon",onClick:g})]})]})," ",r&&t(V,{children:h?t(Ge,{columnCount:3,...n,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:e.rooms.length>0&&e.rooms.map((f,E)=>t(Rc,{roomData:f,thumbnail:!0},E))}):t(te,{columnCount:1,className:"navigator-grid",gap:0,children:e.rooms.length>0&&e.rooms.map((f,E)=>t(Rc,{roomData:f},E))})})]})},Cy=o=>{const{sendSearch:e=null}=o,[n,r]=i.exports.useState(0),[a,s]=i.exports.useState(""),{topLevelContext:c=null,searchResult:u=null}=Mn(),d=()=>{if(!c)return;let g=rs[n];g||(g=rs[0]);const h=(g.query?g.query+":":"")+a;e(h||"",c.code)},p=g=>{g.key==="Enter"&&d()};return i.exports.useEffect(()=>{if(!u)return;const g=u.data.split(":");let h=null,f="";if(g.length>=2){const[E,...I]=g;h=rs.find(_=>_.query===E),f=I.join(":")}else f=u.data;h||(h=rs[0]),r(rs.findIndex(E=>E===h)),s(f)},[u]),l(v,{fullWidth:!0,gap:1,children:[t(v,{shrink:!0,children:t("select",{className:"form-select form-select-sm",value:n,onChange:g=>r(parseInt(g.target.value)),children:rs.map((g,h)=>t("option",{value:h,children:m("navigator.filter."+g.name)},h))})}),l(v,{fullWidth:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("navigator.filter.input.placeholder"),value:a,onChange:g=>s(g.target.value),onKeyDown:g=>p(g)}),t(M,{variant:"primary",onClick:d,children:t($s,{className:"fa-icon"})})]})]})},_y=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState(!1),[u,d]=i.exports.useState(!1),[p,g]=i.exports.useState(!1),[h,f]=i.exports.useState(!1),[E,I]=i.exports.useState(!0),[_,C]=i.exports.useState(!1),{searchResult:b=null,topLevelContext:N=null,topLevelContexts:w=null,navigatorData:O=null}=Mn(),y=i.exports.useRef(null),x=i.exports.useRef();Ke(zt.CREATED,k=>{n(!1),c(!1)});const F=i.exports.useCallback((k,R)=>{c(!1),D(new Es(R,k)),f(!0)},[]),P=i.exports.useCallback(()=>{if(!r){C(!0);return}if(y.current){F(y.current.value,y.current.code),y.current=null;return}if(b){F(b.data,b.code);return}N&&F("",N.code)},[r,b,N,F]);return i.exports.useEffect(()=>{const k={linkReceived:R=>{const A=R.split("/");if(!(A.length<2))switch(A[1]){case"show":{n(!0),C(!0);return}case"hide":n(!1);return;case"toggle":{if(e){n(!1);return}n(!0),C(!0);return}case"toggle-room-info":d(G=>!G);return;case"toggle-room-link":g(G=>!G);return;case"goto":if(A.length<=2)return;switch(A[2]){case"home":if(O.homeRoomId<=0)return;Xt(O.homeRoomId);break;default:{const G=parseInt(A[2]);Xt(G)}}return;case"create":n(!0),c(!0);return;case"search":if(A.length>2){const G=A[2];let B="";A.length>3&&(B=A[3]),y.current={value:B,code:G},n(!0),C(!0)}return}},eventUrlPrefix:"navigator/"};return It(k),()=>Et(k)},[e,O]),i.exports.useEffect(()=>{b&&(f(!1),x&&x.current&&(x.current.scrollTop=0))},[b]),i.exports.useEffect(()=>{!e||!r||!_||(P(),C(!1))},[e,r,_,P]),i.exports.useEffect(()=>{r||!N||a(!0)},[r,N]),i.exports.useEffect(()=>{!e||!E||(D(new RC),I(!1))},[e,E]),i.exports.useEffect(()=>{Gs.addCallback(Xs.OPENROOM,(k,R=!1,A=null)=>D(new OC(k)))},[]),l(V,{children:[e&&l(ae,{uniqueKey:"navigator",className:"nitro-navigator",children:[t(oe,{headerText:m(s?"navigator.createroom.title":"navigator.title"),onCloseClick:k=>n(!1)}),l(Er,{children:[w&&w.length>0&&w.map((k,R)=>t(qn,{isActive:N===k&&!s,onClick:A=>F("",k.code),children:m("navigator.toplevelview."+k.code)},R)),t(qn,{isActive:s,onClick:k=>c(!0),children:t(Ks,{className:"fa-icon"})})]}),l(se,{position:"relative",children:[h&&t(L,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),!s&&l(V,{children:[t(Cy,{sendSearch:F}),t(T,{innerRef:x,overflow:"auto",children:b&&b.results.map((k,R)=>t(Ey,{searchResult:k},R))})]}),s&&t(cy,{})]})]}),t(ly,{}),u&&t(uy,{onCloseClick:()=>d(!1)}),p&&t(dy,{onCloseClick:()=>g(!1)}),t(Iy,{})]})},by=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(""),{chatHistory:s=[]}=ao(),c=i.exports.useRef(null);if(i.exports.useMemo(()=>{if(r.length===0)return s;let d=r.toLowerCase();return s.filter(p=>p.message&&p.message.toLowerCase().includes(d)||p.name&&p.name.toLowerCase().includes(d))},[s,r]),i.exports.useEffect(()=>{c&&c.current&&e&&(c.current.scrollTop=c.current.scrollHeight)},[e]),i.exports.useEffect(()=>{const d={linkReceived:p=>{const g=p.split("/");if(!(g.length<2))switch(g[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(h=>!h);return}},eventUrlPrefix:"nitrobubblehidden/"};return It(d),()=>Et(d)},[]),!e)return null;var u="<style>.newbubblehe { visibility: hidden !important; }</style>";return t("div",{dangerouslySetInnerHTML:{__html:u}})},Sy=/\n\r|\n|\r/mg,Ny=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(""),[s,c]=i.exports.useState(null),u=i.exports.useRef(null);return i.exports.useEffect(()=>{const d=async g=>{try{const h=await fetch(g);if(!h)return;const E=(await h.text()).split(Sy),I=E.shift().split("|");a(I[0]),c(_=>I[1]&&I[1].split(";").length===2?{width:parseInt(I[1].split(";")[0]),height:parseInt(I[1].split(";")[1])}:null),n(E.join(""))}catch{Nu.error(`Failed to fetch ${g}`)}},p={linkReceived:g=>{const h=g.split("/");h.length<2||(h.shift(),d(K("habbopages.url")+h.join("/")))},eventUrlPrefix:"habbopages/"};return It(p),()=>Et(p)},[]),i.exports.useEffect(()=>{const d=p=>{if(!(p.target instanceof HTMLAnchorElement))return;p.preventDefault();const g=p.target.href;!g||!g.length||Xr(g)};return document.addEventListener("click",d),()=>{document.removeEventListener("click",d)}},[]),e?l(ae,{className:"nitropedia",theme:"primary-slim",style:s?{width:s.width,height:s.height}:{},children:[t(oe,{headerText:r,onCloseClick:()=>n(null)}),t(se,{children:t(L,{fit:!0,innerRef:u,className:"text-black",dangerouslySetInnerHTML:{__html:e}})})]}):null},Ty=o=>{const{offer:e=null,setOpen:n=null}=o;if(e)return l(nl,{fadesOut:!1,onClose:null,onClick:r=>n(!0),gap:2,children:[t(L,{className:"nitro-targeted-offer-icon",style:{backgroundImage:`url(${K("image.library.url")+e.iconImageUrl})`}}),t(S,{variant:"light",className:"ubuntu-bold",children:e.title})]})},vy=o=>{const{offer:e=null,setOpen:n=null}=o,{getCurrencyAmount:r}=es(),[a,s]=i.exports.useState(1),c=i.exports.useMemo(()=>{let p=!1,g=!1,h=!1;return e.priceInCredits>0&&(p=r(-1)>=e.priceInCredits),e.priceInActivityPoints>0?g=r(e.activityPointType)>=e.priceInActivityPoints:g=!0,e.purchaseLimit>0&&(h=!0),p&&g&&h},[e,r]),u=()=>{let p=Math.max(0,(e.expirationTime-Date.now())/1e3);return Hn.format(p)},d=()=>{D(new kC(e.id,a)),D(new Ku)};if(e)return l(ae,{theme:"primary-slim",uniqueKey:"targeted-offer",className:"nitro-targeted-offer",children:[t(oe,{headerText:m(e.title),onCloseClick:p=>n(!1)}),t(Od,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",variant:"danger",gap:3,children:m("targeted.offer.timeleft",["timeleft"],[u()])}),l(se,{gap:1,children:[l(v,{gap:1,fullHeight:!0,children:[l(v,{gap:1,column:!0,className:"w-75 text-black",children:[l(T,{className:"bg-warning p-2",fullHeight:!0,children:[t("h4",{children:m(e.title)}),t(L,{dangerouslySetInnerHTML:{__html:e.description}})]}),l(v,{alignSelf:"center",alignItems:"center",justifyContent:"center",gap:2,children:[e.purchaseLimit>1&&l(v,{gap:1,children:[t(S,{variant:"muted",children:m("catalog.bundlewidget.quantity")}),t("input",{type:"number",value:a,onChange:p=>s(parseInt(p.target.value)),min:1,max:e.purchaseLimit})]}),t(M,{variant:"primary",disabled:!c,onClick:()=>d(),children:m("targeted.offer.button.buy")})]})]}),t(L,{className:"w-50",fullHeight:!0,style:{background:`url(${K("image.library.url")+e.imageUrl}) no-repeat center`}})]}),l(v,{className:"price-ray position-absolute",alignItems:"center",justifyContent:"center",column:!0,children:[t(S,{children:m("targeted.offer.price.label")}),e.priceInCredits>0&&l(v,{gap:1,children:[t(S,{variant:"light",children:e.priceInCredits}),t(ct,{type:-1})]}),e.priceInActivityPoints>0&&l(v,{gap:1,children:[l(S,{className:"ubuntu-bold",variant:"light",children:["+",e.priceInActivityPoints]})," ",t(ct,{type:e.activityPointType})]})]})]})]})},wy=()=>{const[o,e]=i.exports.useState(null),[n,r]=i.exports.useState(!1);if(U(AC,a=>{let s=a.getParser();s&&e(s.data)}),Jd(()=>{D(new Ku)}),!!o)return t(V,{children:n?t(vy,{offer:o,setOpen:r}):t(Ty,{offer:o,setOpen:r})})},yy=o=>{const[e,n]=i.exports.useState(0),[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(!0),{showConfirm:u=null}=Ze();U(Xu,f=>{n(0),a(null)}),U(Pu,f=>{n(0),a(null)}),U(ws,f=>{const E=f.getParser();E.roomEnter&&(E.data.habboGroupId>0?(n(E.data.habboGroupId),D(new Bs(E.data.habboGroupId,!1))):(n(0),a(null)))}),U(PC,f=>{const E=f.getParser();!r||E.groupId!==r.id&&E.groupId!==e||(n(0),a(null))}),U(Js,f=>{const E=f.getParser();E.id===e&&a(E)});const d=()=>{u(m("group.leaveconfirm.desc"),()=>{D(new Gi(r.id,W().userId))},null)},p=r&&r.ownerName===W().userName,g=()=>{if(p)return"group.manage";if(r.type===ln.PRIVATE)return"";if(r.membershipType===yt.MEMBER)return"group.leave";if(r.membershipType===yt.NOT_MEMBER&&r.type===ln.REGULAR)return"group.join";if(r.membershipType===yt.REQUEST_PENDING)return"group.membershippending";if(r.membershipType===yt.NOT_MEMBER&&r.type===ln.EXCLUSIVE)return"group.requestmembership"},h=()=>{if(p)return Id(r.id);if(!(r.type===ln.PRIVATE&&r.membershipType===yt.NOT_MEMBER)){if(r.membershipType===yt.MEMBER){d();return}Qi(r.id)}};return r?t(L,{className:"nitro-notification-bubble rounded",children:l(T,{children:[l(v,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:f=>c(E=>!E),children:[t(S,{variant:"white",children:m("group.homeroominfo.title")}),s&&t(Mi,{className:"fa-icon"}),!s&&t(Ui,{className:"fa-icon"})]}),s&&l(V,{children:[l(v,{pointer:!0,alignItems:"center",gap:2,onClick:f=>ro(r.id),children:[t(L,{className:"group-badge",children:t(Ye,{badgeCode:r.badge,isGroup:!0})}),t(S,{variant:"white",children:r.title})]}),(r.type!==ln.PRIVATE||p)&&t(M,{fullWidth:!0,variant:"success",disabled:r.membershipType===yt.REQUEST_PENDING,onClick:h,children:m(g())})]})]})}):null},xy=o=>{const{title:e="Nitro",onClose:n=null,...r}=o;return t(ga,{title:e,onClose:n,...r,children:l(te,{children:[t(T,{center:!0,size:5,children:t("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:" "})}),l(T,{size:7,children:[l(T,{alignItems:"center",gap:0,children:[t(S,{bold:!0,fontSize:4,children:"Nitro React"}),l(S,{children:["v",fd()]})]}),l(T,{alignItems:"center",children:[l(S,{children:[t("b",{children:"Renderer:"})," v",gb()]}),l(T,{fullWidth:!0,gap:1,children:[t(M,{fullWidth:!0,variant:"success",onClick:a=>window.open("https://discord.nitrodev.co"),children:"Discord"}),l(v,{gap:1,children:[t(M,{fullWidth:!0,onClick:a=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Git"}),t(M,{fullWidth:!0,onClick:a=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Bug Report"})]})]})]})]})]})})},Ry=o=>{const{item:e=null,title:n=o.item&&o.item.title||"",onClose:r=null,...a}=o,[s,c]=i.exports.useState(!1),u=()=>{Xr(e.clickUrl),r()},d=e.alertType===ge.DEFAULT;return l(ga,{title:n,onClose:r,...a,type:d?ge.DEFAULT:e.alertType,children:[l(v,{fullHeight:!0,overflow:"auto",gap:d||e.imageUrl&&!s?2:0,children:[d&&!e.imageUrl&&t(L,{className:"notification-frank flex-shrink-0"}),e.imageUrl&&!s&&t("img",{src:e.imageUrl,alt:e.title,onError:()=>{c(!0)},className:"align-self-baseline"}),l(L,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",e.clickUrl&&!d?"justify-content-center":""],children:[e.messages.length>0&&e.messages.map((p,g)=>{const h=p.replace(/\r\n|\r|\n/g,"<br />");return t(L,{dangerouslySetInnerHTML:{__html:h}},g)}),e.clickUrl&&e.clickUrl.length>0&&e.imageUrl&&!s&&l(V,{children:[t("hr",{className:"my-2 w-100"}),t(M,{onClick:u,className:"align-self-center px-3",children:m(e.clickUrlText)})]})]})]}),(!e.imageUrl||e.imageUrl&&s)&&t(V,{children:l(T,{alignItems:"center",center:!0,gap:0,children:[t("hr",{className:"my-2 w-100"}),!e.clickUrl&&t(M,{onClick:r,children:m("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(M,{onClick:u,children:m(e.clickUrlText)})]})})]})},Oy=o=>{const{item:e=null,title:n=o.item&&o.item.title||"",onClose:r=null,...a}=o,[s,c]=i.exports.useState(""),[u,d]=i.exports.useState([]),p=()=>{Xr(e.clickUrl),r()},g=f=>{let E=JSON.parse(e.messages[0]);d(E.filter(I=>I.includes(f))),c(f)};i.exports.useEffect(()=>{d(JSON.parse(e.messages[0]))},[e]);const h=e.clickUrl&&e.clickUrl.startsWith("event:");return l(ga,{title:n,onClose:r,...a,children:[t(v,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:s,onChange:f=>g(f.target.value)})}),t(T,{fullHeight:!0,className:"py-1",overflow:"hidden",children:t(Ge,{gap:1,columnCount:1,children:u&&u.map((f,E)=>t("span",{children:f},E))})}),t("hr",{className:"my-2"}),l(T,{alignItems:"center",center:!0,gap:1,children:[!h&&!e.clickUrl&&t(M,{onClick:r,children:m("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(M,{onClick:p,children:m(e.clickUrlText)})]})]})},ky=(o,e)=>{if(!o)return null;const n={key:o.id,item:o,onClose:e};switch(o.alertType){case ge.NITRO:return t(xy,{...n});case ge.SEARCH:return t(Oy,{...n});default:return t(Ry,{...n})}},Ay=o=>{const{item:e=null,onClose:n=null,...r}=o;return l(nl,{fadesOut:!1,className:"flex-column club-gift",onClose:n,...r,children:[l("div",{className:"d-flex align-items-center gap-2 mb-2",children:[t(ct,{type:"hc",className:"flex-shrink-0"}),t("span",{className:"ms-1",children:m("notifications.text.club_gift")})]}),l("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[t("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:()=>Xr(e.linkUrl),children:m("notifications.button.show_gift_list")}),t("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:n,children:m("notifications.button.later")})]})]})},Py=o=>{const{item:e=null,onClose:n=null,...r}=o,a=e.message.replace(/\r\n|\r|\n/g,"<br />");return l(nl,{onClose:n,gap:2,alignItems:"center",onClick:s=>e.linkUrl&&e.linkUrl.length&&Xr(e.linkUrl),...r,children:[t(v,{center:!0,className:"bubble-image-container",children:e.iconUrl&&e.iconUrl.length&&t("img",{className:"no-select",src:e.iconUrl,alt:""})}),t(S,{wrap:!0,variant:"white",dangerouslySetInnerHTML:{__html:a}})]})},Dy=(o,e)=>{if(!o)return null;const n={key:o.id,item:o,onClose:e};switch(o.notificationType){case Qe.CLUBGIFT:return t(Ay,{...n});default:return t(Py,{...n})}},Ly=o=>{const{item:e=null,onClose:n=null,...r}=o,{message:a=null,onConfirm:s=null,onCancel:c=null,confirmText:u=null,cancelText:d=null,title:p=null}=e,g=()=>{s&&s(),n()},h=()=>{c&&c(),n()};return l(ga,{title:p,onClose:n,...r,type:ge.ALERT,children:[t(v,{grow:!0,center:!0,children:t(S,{children:a})}),l(v,{gap:1,children:[t(M,{fullWidth:!0,variant:"danger",onClick:h,children:d}),t(M,{fullWidth:!0,onClick:g,children:u})]})]})},My=(o,e)=>{if(!o)return null;const n={key:o.id,item:o,onClose:e};switch(o.confirmType){default:return t(Ly,{...n})}},Uy=o=>{const{alerts:e=[],bubbleAlerts:n=[],confirms:r=[],closeAlert:a=null,closeBubbleAlert:s=null,closeConfirm:c=null}=Ze(),u=i.exports.useMemo(()=>{if(!e||!e.length)return null;const g=[];for(const h of e){const f=ky(h,()=>a(h));g.push(f)}return g},[e,a]),d=i.exports.useMemo(()=>{if(!n||!n.length)return null;const g=[];for(const h of n){const f=Dy(h,()=>s(h));if(h.notificationType===Qe.CLUBGIFT){g.unshift(f);continue}g.push(f)}return g},[n,s]),p=i.exports.useMemo(()=>{if(!r||!r.length)return null;const g=[];for(const h of r){const f=My(h,()=>c(h));g.push(f)}return g},[r,c]);return l(V,{children:[t(T,{gap:1,className:"topnotifications",children:d}),p,u]})},Oc=o=>{const{type:e=-1,amount:n=-1,short:r=!1}=o,a=i.exports.useMemo(()=>l(v,{justifyContent:"end",pointer:!0,gap:1,className:`nitro-purse-button rounded allcurrencypurse nitro-purse-button currency-${e}`,children:[t(S,{truncate:!0,textEnd:!0,variant:"white",grow:!0,children:r?V_(n):Ko(n)}),t(ct,{type:e})]}),[n,r,e]);return r?t(Eu,{placement:"left",overlay:t(jm,{id:`tooltip-${e}`,children:Ko(n)}),children:a}):a},Fy=o=>{const{type:e=-1,amount:n=-1}=o;return l(v,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency p-2 rounded",children:[t(S,{variant:"white",children:m(`purse.seasonal.currency.${e}`)}),l(v,{gap:1,children:[t(S,{variant:"white",children:Ko(n)}),t(ct,{type:e})]})]})},By=o=>{const{purse:e=null,hcDisabled:n=!1}=es(),r=i.exports.useMemo(()=>K("system.currency.types",[]),[]),a=i.exports.useMemo(()=>K("currency.display.number.short",!1),[]),s=(()=>{if(!e)return null;const u=e.clubPeriods*31+e.clubDays,d=e.minutesUntilExpiration;return e.clubLevel===dn.NO_CLUB?m("purse.clubdays.zero.amount.text"):d>-1&&d<60*24?Hn.shortFormat(d*60):Hn.shortFormat(u*86400)})(),c=(u,d=-1,p=!1)=>{if(!e||!e.activityPoints||!e.activityPoints.size)return null;const g=Array.from(e.activityPoints.keys()).filter(E=>r.indexOf(E)>=0);let h=0;for(;h<u;)g.shift(),h++;h=0;const f=[];for(const E of g){if(d>-1&&h===d)break;p?f.push(t(Fy,{type:E,amount:e.activityPoints.get(E)},E)):f.push(t(Oc,{type:E,amount:e.activityPoints.get(E),short:a},E)),h++}return f};return e?l(T,{alignItems:"end",className:"nitro-purse-container",gap:1,children:[t(v,{className:"nitro-purse rounded-bottom p-1",children:l(te,{fullWidth:!0,gap:1,children:[l(T,{justifyContent:"center",size:n?10:6,gap:0,children:[t(Oc,{type:-1,amount:e.credits,short:a}),c(0,2)]}),!n&&l(T,{center:!0,pointer:!0,size:4,gap:1,className:"nitro-purse-subscription rounded borderhccontent",onClick:u=>ee("habboUI/open/hccenter"),children:[t(ct,{type:"hc"}),t(S,{variant:"white",children:s})]}),l(T,{justifyContent:"center",size:2,gap:0,children:[t(v,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded coffecurrencybutton",onClick:u=>ee("help/show"),children:t("i",{className:"icon icon-help"})}),t(v,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded coffecurrencybutton",onClick:u=>ee("user-settings/toggle"),children:t("i",{className:"icon icon-cog"})})]})]})}),c(2,-1,!0)]}):null},Gy={purple:9452386,blue:3891856,green:6459451,yellow:10658089,lilac:6897548,orange:10841125,turquoise:2661026,red:10104881},Vy=o=>{const[e,n]=i.exports.useState(!0),[r,a]=i.exports.useState(""),[s,c]=i.exports.useState("");$b(DC.MYSTERY_BOX_KEYS_UPDATE,d=>{a(d.keyColor),c(d.boxColor)});const u=d=>{const p=Gy[d];return en.int2rgb(p)};return r===""&&s===""?null:t(L,{className:"nitro-notification-bubble rounded mysterybox-extension",children:l(T,{children:[l(v,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:d=>n(p=>!p),children:[t(S,{variant:"white",children:m("mysterybox.tracker.title")}),e&&t(Mi,{className:"fa-icon"}),!e&&t(Ui,{className:"fa-icon"})]}),e&&l(V,{children:[t(S,{variant:"white",children:m("mysterybox.tracker.description")}),l(v,{justifyContent:"center",alignItems:"center",gap:2,children:[t(Ne,{className:"mysterybox-container",children:t("div",{className:"box-image flex-shrink-0",style:{backgroundColor:u(s)},children:t("div",{className:"chain-overlay-image"})})}),t(Ne,{className:"mysterybox-container",children:t("div",{className:"key-image flex-shrink-0",style:{backgroundColor:u(r)},children:t("div",{className:"key-overlay-image"})})})]})]})]})})},Hy=o=>{const{eventId:e=-1,eventName:n="",eventDescription:r="",setIsEditingPromote:a=null}=o,[s,c]=i.exports.useState(n),[u,d]=i.exports.useState(r),p=()=>{D(new LC(e,s,u)),a(!1)};return l(ae,{className:"nitro-guide-tool",theme:"primary-slim",children:[t(oe,{headerText:m("navigator.eventsettings.editcaption"),onCloseClick:()=>a(!1)}),l(se,{className:"text-black",children:[l(T,{children:[t(S,{bold:!0,children:m("navigator.eventsettings.name")}),t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("navigator.eventsettings.name"),maxLength:64,value:s,onChange:g=>c(g.target.value)})]}),l(T,{children:[t(S,{bold:!0,children:m("navigator.eventsettings.desc")}),t("textarea",{className:"form-control form-control-sm",placeholder:m("navigator.eventsettings.desc"),maxLength:64,value:u,onChange:g=>d(g.target.value)})]}),t(T,{children:t(M,{fullWidth:!0,disabled:!s||!u,variant:!s||!u?"danger":"success",onClick:g=>p(),children:m("navigator.eventsettings.edit")})})]})]})},Wy=o=>{const{eventDescription:e="",setIsEditingPromote:n=null}=o,{setIsExtended:r}=ll(),a=()=>{r(!0),ee("catalog/open/room_event")};return l(V,{children:[t(v,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(S,{variant:"white",children:e})}),t("br",{}),t("br",{}),l(te,{className:"d-flex align-items-center justify-content-end gap-2",children:[t(M,{className:"btn btn-primary w-100 btn-sm",onClick:s=>n(!0),children:m("navigator.roominfo.editevent")}),t(M,{className:"btn btn-success w-100 btn-sm",onClick:s=>a(),children:m("roomad.extend.event")})]})]})},jy=o=>{const{eventDescription:e=""}=o;return l(V,{children:[t(v,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(S,{variant:"white",children:e})}),t("br",{}),t("br",{}),t(T,{alignItems:"center",gap:1,children:l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",center:!0,children:m("navigator.eventinprogress")})}),t(S,{children:" "})]})})]})},qy=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(!0),{promoteInformation:s,setPromoteInformation:c}=ll();return U(Xu,u=>{c(null)}),s?t(V,{children:s.data.adId!==-1&&t(L,{className:"nitro-notification-bubble rounded",children:l(T,{children:[l(v,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:u=>a(d=>!d),children:[t(S,{variant:"white",overflow:"hidden",children:s.data.eventName}),r&&t(Mi,{className:"fa-icon"}),!r&&t(Ui,{className:"fa-icon"})]}),r&&W().userId!==s.data.ownerAvatarId&&t(jy,{eventDescription:s.data.eventDescription}),r&&W().userId===s.data.ownerAvatarId&&t(Wy,{eventDescription:s.data.eventDescription,setIsEditingPromote:()=>n(!0)}),e&&t(Hy,{eventId:s.data.adId,eventName:s.data.eventName,eventDescription:s.data.eventDescription,setIsEditingPromote:()=>n(!1)})]})})}):null},zy=o=>t("div",{className:"nitro-right-side",children:l(T,{position:"relative",gap:1,children:[t(By,{}),t(yy,{}),t(Vy,{}),t(wy,{}),t(qy,{}),t(Uy,{})]})}),Yy=o=>t("div",{className:"room-spectator"}),$y=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(null),{chatStyleId:s=0}=zn(),{roomSession:c=null}=We();U(MC,d=>{const p=d.getParser();if(!p)return;const g=c.userDataManager.getPetData(p.petId);g&&(n(g),a(p))});const u=(d,p)=>{!d||!p||c==null||c.sendChatMessage(`${d} ${p}`,s)};return!e||!r?null:l(ae,{uniqueKey:"user-settings",className:"user-settings-window no-resize",theme:"primary-slim",children:[t(oe,{headerText:m("widgets.pet.commands.title"),onCloseClick:()=>a(null)}),l(se,{className:"text-black",children:[t(v,{alignItems:"center",justifyContent:"center",gap:2,children:l(te,{columnCount:2,children:[t(T,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(er,{figure:e.figure,posture:"std",direction:2})}),t(S,{variant:"black",small:!0,wrap:!0,children:e.name})]})}),t(te,{columnCount:2,children:r.commands&&r.commands.length>0&&r.commands.map((d,p)=>t(M,{disabled:!r.enabledCommands.includes(d),onClick:()=>u(e.name,m(`pet.command.${d}`)),children:m(`pet.command.${d}`)},p))})]})]})},$t=o=>{const{justifyContent:e="center",alignItems:n="center",classNames:r=[],...a}=o,s=i.exports.useMemo(()=>{const c=["menu-header","p-1"];return r.length&&c.push(...r),c},[r]);return t(v,{justifyContent:e,alignItems:n,classNames:s,...a})},Ky=o=>{const{chatEvent:e=null,onClose:n=null}=o,[r,a]=i.exports.useState(e.chat==="${bot.skill.chatter.configuration.text.placeholder}"?"":e.chat),[s,c]=i.exports.useState(e.automaticChat),[u,d]=i.exports.useState(e.mixSentences),[p,g]=i.exports.useState(e.chatDelay),h=i.exports.useMemo(()=>ji(Ae().roomId,e.objectId,e.category,1),[e]),f=I=>I.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r"),E=()=>{const I=f(r)+";#;"+s+";#;"+p+";#;"+u;D(new cr(e.botId,ve.SETUP_CHAT,I)),n()};return t(Or,{windowPosition:Pt.NOTHING,handleSelector:".drag-handler",dragStyle:{top:h.y,left:h.x},children:l(L,{className:"nitro-context-menu bot-chat",children:[t($t,{className:"drag-handler",children:m("bot.skill.chatter.configuration.title")}),l(T,{className:"p-1",children:[l(T,{gap:1,children:[t(S,{variant:"white",children:m("bot.skill.chatter.configuration.chat.text")}),t("textarea",{className:"form-control form-control-sm",placeholder:m("bot.skill.chatter.configuration.text.placeholder"),value:r,rows:7,onChange:I=>a(I.target.value)})]}),l(T,{gap:1,children:[l(v,{gap:1,alignItems:"center",justifyContent:"between",children:[t(S,{fullWidth:!0,variant:"white",children:m("bot.skill.chatter.configuration.automatic.chat")}),t("input",{type:"checkbox",className:"form-check-input",checked:s,onChange:I=>c(I.target.checked)})]}),l(v,{gap:1,alignItems:"center",justifyContent:"between",children:[t(S,{fullWidth:!0,variant:"white",children:m("bot.skill.chatter.configuration.markov")}),t("input",{type:"checkbox",className:"form-check-input",checked:u,onChange:I=>d(I.target.checked)})]}),l(v,{gap:1,alignItems:"center",justifyContent:"between",children:[t(S,{fullWidth:!0,variant:"white",children:m("bot.skill.chatter.configuration.chat.delay")}),t("input",{type:"number",className:"form-control form-control-sm",value:p,onChange:I=>g(I.target.valueAsNumber)})]})]}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(M,{fullWidth:!0,variant:"primary",onClick:n,children:m("cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:E,children:m("save")})]})]})]})})},kc=-1,Ac=0,Pc=1,Dc=2,Lc=3,Mc=4,Uc=5,Fc=6,Xy=o=>{const{item:e=null,onClose:n=null}=o,[r,a]=i.exports.useState(kc),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),{roomSession:p=null}=We(),g=()=>{s&&Y().selectRoomObject(p.roomId,s.roomIndex,Q.UNIT)},h=()=>{p.usePetProduct(e.requestRoomObjectId,s.webID),n()},f=i.exports.useMemo(()=>{if(!s||!u)return null;const E=new Is(s.figure),I=u.customParams.split(" "),_=parseInt(I[0]);switch(u.specialType){case Z.PET_SHAMPOO:{if(I.length<2)return null;const C=Y().getPetColorResult(_,E.paletteId),b=Y().getPetColorResultsForTag(_,I[1]);let N=-1;for(const w of b)if(w.breed===C.breed){N=parseInt(w.id);break}return t(er,{typeId:E.typeId,paletteId:N,petColor:E.color,customParts:E.customParts,direction:2})}case Z.PET_CUSTOM_PART:{if(I.length<4)return null;const C=[],b=I[1].split(",").map(y=>parseInt(y)),N=I[2].split(",").map(y=>parseInt(y)),w=I[3].split(",").map(y=>parseInt(y));let O=0;for(;O<b.length;){const y=b[O],x=E.getCustomPart(y);let F=w[O];x!=null&&(F=x.paletteId),C.push(new Fa(y,N[O],F)),O++}return t(er,{typeId:E.typeId,paletteId:E.paletteId,petColor:E.color,customParts:C,direction:2})}case Z.PET_CUSTOM_PART_SHAMPOO:{if(I.length<3)return null;const C=[],b=I[1].split(",").map(O=>parseInt(O)),N=I[2].split(",").map(O=>parseInt(O));let w=0;for(;w<b.length;){const O=b[w],y=E.getCustomPart(O);let x=-1;y!=null&&(x=y.partId),C.push(new Fa(b[w],x,N[w])),w++}return t(er,{typeId:E.typeId,paletteId:E.paletteId,petColor:E.color,customParts:C,direction:2})}case Z.PET_SADDLE:{if(I.length<4)return null;const C=[],b=I[1].split(",").map(y=>parseInt(y)),N=I[2].split(",").map(y=>parseInt(y)),w=I[3].split(",").map(y=>parseInt(y));let O=0;for(;O<b.length;)C.push(new Fa(b[O],N[O],w[O])),O++;for(const y of E.customParts)b.indexOf(y.layerId)===-1&&C.push(y);return t(er,{typeId:E.typeId,paletteId:E.paletteId,petColor:E.color,customParts:C,direction:2})}case Z.MONSTERPLANT_REBREED:case Z.MONSTERPLANT_REVIVAL:case Z.MONSTERPLANT_FERTILIZE:{let C="rip";const b=Y().getRoomObject(p.roomId,s.roomIndex,Q.UNIT);if(b&&(C=b.model.getValue(re.FIGURE_POSTURE),C==="rip")){const N=s.petLevel;N<7?C=`grw${N}`:C="std"}return t(er,{typeId:E.typeId,paletteId:E.paletteId,petColor:E.color,customParts:E.customParts,posture:C,direction:2})}}},[s,u,p]);return i.exports.useEffect(()=>{const E=p.userDataManager.getUserDataByIndex(e.id);c(E);const I=ca(p.roomId,e.requestRoomObjectId,Q.FLOOR);if(!I)return;d(I);let _=kc;switch(I.specialType){case Z.PET_SHAMPOO:_=Ac;break;case Z.PET_CUSTOM_PART:_=Pc;break;case Z.PET_CUSTOM_PART_SHAMPOO:_=Dc;break;case Z.PET_SADDLE:_=Lc;break;case Z.MONSTERPLANT_REVIVAL:_=Mc;break;case Z.MONSTERPLANT_REBREED:_=Uc;break;case Z.MONSTERPLANT_FERTILIZE:_=Fc;break}a(_)},[p,e]),s?l(ae,{className:"nitro-use-product-confirmation",children:[t(oe,{headerText:m("useproduct.widget.title",["name"],[s.name]),onCloseClick:n}),t(se,{center:!0,children:l(v,{gap:2,overflow:"hidden",children:[t(T,{children:t(L,{pointer:!0,className:"product-preview",onClick:g,children:f})}),l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:2,children:[r===Ac&&l(V,{children:[t(S,{children:m("useproduct.widget.text.shampoo",["productName"],[u.name])}),t(S,{children:m("useproduct.widget.info.shampoo")})]}),r===Pc&&l(V,{children:[t(S,{children:m("useproduct.widget.text.custompart",["productName"],[u.name])}),t(S,{children:m("useproduct.widget.info.custompart")})]}),r===Dc&&l(V,{children:[t(S,{children:m("useproduct.widget.text.custompartshampoo",["productName"],[u.name])}),t(S,{children:m("useproduct.widget.info.custompartshampoo")})]}),r===Lc&&l(V,{children:[t(S,{children:m("useproduct.widget.text.saddle",["productName"],[u.name])}),t(S,{children:m("useproduct.widget.info.saddle")})]}),r===Mc&&l(V,{children:[t(S,{children:m("useproduct.widget.text.revive_monsterplant",["productName"],[u.name])}),t(S,{children:m("useproduct.widget.info.revive_monsterplant")})]}),r===Uc&&l(V,{children:[t(S,{children:m("useproduct.widget.text.rebreed_monsterplant",["productName"],[u.name])}),t(S,{children:m("useproduct.widget.info.rebreed_monsterplant")})]}),r===Fc&&l(V,{children:[t(S,{children:m("useproduct.widget.text.fertilize_monsterplant",["productName"],[u.name])}),t(S,{children:m("useproduct.widget.info.fertilize_monsterplant")})]})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:n,children:m("useproduct.widget.cancel")}),t(M,{variant:"success",onClick:h,children:m("useproduct.widget.use")})]})]})]})})]}):null},z=o=>{const{disabled:e=!1,fullWidth:n=!0,justifyContent:r="center",alignItems:a="center",classNames:s=[],onClick:c=null,...u}=o,d=g=>{e||c&&c(g)},p=i.exports.useMemo(()=>{const g=["menu-item","list-item"];return e&&g.push("disabled"),s.length&&g.push(...s),g},[e,s]);return t(v,{fullWidth:n,justifyContent:r,alignItems:a,classNames:p,onClick:d,...u})},Qy=o=>{const{justifyContent:e="center",alignItems:n="center",classNames:r=[],collapsed:a=!0,...s}=o,c=i.exports.useMemo(()=>{const u=["menu-footer"];return r.length&&u.push(...r),u},[r]);return l(v,{justifyContent:e,alignItems:n,classNames:c,...s,children:[!a&&t(Ai,{className:"fa-icon align-self-center"}),a&&t(ki,{className:"fa-icon align-self-center"})]})},Jy=25,Bc=3,Zy=5e3,ex=75,as=10;let Ka=!1,Do=null,Lo=-1e6,Xa=1;const ar=o=>{const{objectId:e=-1,category:n=-1,userType:r=-1,fades:a=!1,onClose:s=null,position:c="absolute",classNames:u=[],style:d={},children:p=null,collapsable:g=!1,...h}=o,[f,E]=i.exports.useState({x:null,y:null}),[I,_]=i.exports.useState(1),[C,b]=i.exports.useState(!1),[N,w]=i.exports.useState(Ka),O=i.exports.useRef(),y=i.exports.useCallback(k=>{if(!C)return;Xa+=k;let R=(1-Xa/ex)*1;if(R<=0)return s(),!1;_(R)},[C,s]),x=i.exports.useCallback((k,R)=>{if(!k||!R||!Do)return;let A=-O.current.offsetHeight;r>-1&&(r===ft.USER||r===ft.BOT||r===ft.RENTABLE_BOT)?A=A+(k.height>50?15:0):A=A-14,Do.addValue(R.y-k.top);let G=Do.getMax();G<Lo-Bc&&(G=Lo-Bc),Lo=G;const B=R.y-G;let H=~~(R.x-O.current.offsetWidth/2),X=~~(B+A);const j=be().width-O.current.offsetWidth-as,de=be().height-O.current.offsetHeight-as;H<as?H=as:H>j&&(H=j),X<as?X=as:X>de&&(X=de),E({x:H,y:X})},[r]),F=i.exports.useMemo(()=>{const k=["nitro-context-menu"];return N&&k.push("menu-hidden"),k.push(f.x!==null?"visible":"invisible"),u.length&&k.push(...u),k},[f,u,N]),P=i.exports.useMemo(()=>{let k={};return k.left=f.x||0,k.top=f.y||0,k.opacity=I,Object.keys(d).length&&(k={...k,...d}),k},[f,I,d]);return i.exports.useEffect(()=>{if(!O.current)return;const k=R=>{if(!O.current)return;y(R);const A=ji(Ae().roomId,e,n),G=ad(Ae().roomId,e,n);x(A,G)};return fr().add(k),()=>{fr().remove(k)}},[e,n,y,x]),i.exports.useEffect(()=>{if(!a)return;const k=setTimeout(()=>b(!0),Zy);return()=>clearTimeout(k)},[a]),i.exports.useEffect(()=>{Ka=N},[N]),i.exports.useEffect(()=>{Do=new UC(Jy),Lo=-1e6,Xa=1},[]),l(L,{innerRef:O,position:c,classNames:F,style:P,...h,children:[!(g&&Ka)&&p,g&&t(Qy,{onClick:()=>w(!N),collapsed:N})]})},Gc=0,Vc=1,Hc=2,Wc=3,jc=4,qc=5,zc=6,Yc=7,tx=o=>{const{item:e=null,updateConfirmingProduct:n=null,onClose:r=null}=o,[a,s]=i.exports.useState(0),{roomSession:c=null}=We(),u=d=>{if(d)switch(d){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":n(e);break}};return i.exports.useEffect(()=>{if(!e)return;const d=ca(c.roomId,e.requestRoomObjectId,Q.FLOOR);if(!d)return;let p=Gc;switch(d.specialType){case Z.PET_SHAMPOO:p=Vc;break;case Z.PET_CUSTOM_PART:p=Hc;break;case Z.PET_CUSTOM_PART_SHAMPOO:p=Wc;break;case Z.PET_SADDLE:p=jc;break;case Z.MONSTERPLANT_REVIVAL:p=qc;break;case Z.MONSTERPLANT_REBREED:p=zc;break;case Z.MONSTERPLANT_FERTILIZE:p=Yc;break}s(p)},[c,e]),l(ar,{objectId:e.id,category:Q.UNIT,userType:ft.PET,onClose:r,collapsable:!0,children:[t($t,{children:e.name}),a===Gc&&t(z,{onClick:d=>u("use_product"),children:m("infostand.button.useproduct")}),a===Vc&&t(z,{onClick:d=>u("use_product_shampoo"),children:m("infostand.button.useproduct_shampoo")}),a===Hc&&t(z,{onClick:d=>u("use_product_custom_part"),children:m("infostand.button.useproduct_custom_part")}),a===Wc&&t(z,{onClick:d=>u("use_product_custom_part_shampoo"),children:m("infostand.button.useproduct_custom_part_shampoo")}),a===jc&&l(V,{children:[e.replace&&t(z,{onClick:d=>u("replace_product_saddle"),children:m("infostand.button.replaceproduct_saddle")}),!e.replace&&t(z,{onClick:d=>u("use_product_saddle"),children:m("infostand.button.useproduct_saddle")})]}),a===qc&&t(z,{onClick:d=>u("revive_monsterplant"),children:m("infostand.button.revive_monsterplant")}),a===zc&&t(z,{onClick:d=>u("rebreed_monsterplant"),children:m("infostand.button.rebreed_monsterplant")}),a===Yc&&t(z,{onClick:d=>u("fertilize_monsterplant"),children:m("infostand.button.fertilize_monsterplant")})]})},nx=o=>{const{avatarInfo:e=null,onClose:n=null}=o;return e?t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_n,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(v,{gap:1,children:[t(T,{fullWidth:!0,className:"body-image bot",children:t(ot,{figure:e.figure,direction:4})}),t(T,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(r=>t(Ye,{badgeCode:r,showInfo:!0},r))})]}),t("hr",{className:"m-0"})]}),t(v,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(S,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:e.motto})}),e.carryItem>0&&l(T,{gap:1,children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.handitem",["item"],[m("handitem"+e.carryItem)])})]})]})}):null},Qa=0,$c=1,Kc=2,rx=o=>{const{avatarInfo:e=null,onClose:n=null}=o,{roomSession:r=null}=We(),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(!1),[d,p]=i.exports.useState(!1),[g,h]=i.exports.useState(!1),[f,E]=i.exports.useState([]),[I,_]=i.exports.useState([]),[C,b]=i.exports.useState([]),[N,w]=i.exports.useState([]),[O,y]=i.exports.useState(!1),[x,F]=i.exports.useState(0),[P,k]=i.exports.useState(0),[R,A]=i.exports.useState(!1),[G,B]=i.exports.useState(!1),[H,X]=i.exports.useState(null),[j,de]=i.exports.useState(!1),[ie,ne]=i.exports.useState(!1),[xe,Ee]=i.exports.useState(-1),[Me,it]=i.exports.useState(""),[Be,Lt]=i.exports.useState("");Hr(Du.NPE_SONG_CHANGED,pe=>{Ee(pe.id)},j||ie),Hr(BC.SIR_TRAX_SONG_INFO_RECEIVED,pe=>{if(pe.id!==xe)return;const Pe=be().soundManager.musicController.getSongInfo(pe.id);Pe&&(it(Pe.name),Lt(Pe.creator))},j||ie),i.exports.useEffect(()=>{let pe=Qa,Pe=!1,at=!1,rn=!1,Ce=[],Ue=[],Tn=[],Ar=[],sn=!1,co=0,xs=0,Pr=!1,Dr=!1,ts=!1,Rs=!1,br=-1;const Lr=e.roomControllerLevel>=tt.GUEST;if((Lr||e.isOwner||e.isRoomOwner||e.isAnyRoomController)&&(Pe=!0,at=!e.isWallItem,e.roomControllerLevel>=tt.MODERATOR&&(Pr=!0)),e.isAnyRoomController&&(Dr=!0),(e.usagePolicy===Ul.EVERYBODY||e.usagePolicy===Ul.CONTROLLER&&Lr||e.extraParam===ur.JUKEBOX&&Lr||e.extraParam===ur.USABLE_PRODUCT&&Lr)&&(rn=!0),e.extraParam){if(e.extraParam===ur.CRACKABLE_FURNI){const Vt=e.stuffData;rn=!0,sn=!0,co=Vt.hits,xs=Vt.target}else if(e.extraParam===ur.JUKEBOX){const Vt=be().soundManager.musicController.getRoomItemPlaylist();Vt&&(br=Vt.nowPlayingSongId),ts=!0}else e.extraParam.indexOf(ur.SONGDISK)===0&&(br=parseInt(e.extraParam.substr(ur.SONGDISK.length)),Rs=!0);if(Pr){const Vt=e.extraParam.substr(ur.BRANDING_OPTIONS.length);if(Vt){const $n=Vt.split("	");for(const ns of $n){const Kn=ns.split("=");Kn&&Kn.length===2&&(Ce.push(Kn[0]),Ue.push(Kn[1]))}}}}if(Pr){const Vt=Y().getRoomObject(r.roomId,e.id,e.isWallItem?Q.WALL:Q.FLOOR);if(Vt){const $n=Vt.model.getValue(re.FURNITURE_CUSTOM_VARIABLES),ns=Vt.model.getValue(re.FURNITURE_DATA);if($n&&$n.length)for(const Kn of $n)Tn.push(Kn),Ar.push(ns[Kn]||"")}}e.isOwner||e.isAnyRoomController?pe=Kc:(e.isRoomOwner||e.roomControllerLevel>=tt.GUILD_ADMIN)&&(pe=$c),e.isStickie&&(pe=Qa),s(pe),u(Pe),p(at),h(rn),E(Ce),_(Ue),b(Tn),w(Ar),y(sn),F(co),k(xs),A(Pr),B(Dr),X(null),de(ts),ne(Rs),Ee(br),e.groupId&&D(new Bs(e.groupId,!1))},[r,e]),U(Js,pe=>{const Pe=pe.getParser();!e||e.groupId!==Pe.id||Pe.flag||(H&&X(null),X(Pe.title))}),i.exports.useEffect(()=>{const pe=be().soundManager.musicController.getSongInfo(xe);it((pe==null?void 0:pe.name)??""),Lt((pe==null?void 0:pe.creator)??"")},[xe]);const Nn=i.exports.useCallback((pe,Pe)=>{const at=Array.from(I);at[pe]=Pe,_(at)},[I]),He=i.exports.useCallback((pe,Pe)=>{const at=Array.from(N);at[pe]=Pe,w(at)},[N]),_e=i.exports.useCallback(()=>{if(f.length===0||I.length===0)return"";let pe="",Pe=0;for(;Pe<f.length;){const at=f[Pe],rn=I[Pe];pe=pe+(at+"="+rn+"	"),Pe++}return pe},[f,I]),Xe=i.exports.useCallback(pe=>{if(!(!pe||pe===""))switch(pe){case"buy_one":ee(`catalog/open/offerId/${e.purchaseOfferId}`);return;case"move":Y().processRoomObjectOperation(e.id,e.category,Gn.OBJECT_MOVE);break;case"rotate":Y().processRoomObjectOperation(e.id,e.category,Gn.OBJECT_ROTATE_POSITIVE);break;case"pickup":a===Kc?Y().processRoomObjectOperation(e.id,e.category,Gn.OBJECT_PICKUP):Y().processRoomObjectOperation(e.id,e.category,Gn.OBJECT_EJECT);break;case"use":Y().useRoomObject(e.id,e.category);break;case"save_branding_configuration":{const Pe=new Map,at=_e().split("	");if(at)for(const rn of at){const[Ce,Ue]=rn.split("=",2);Pe.set(Ce,Ue)}Y().modifyRoomObjectDataWithMap(e.id,e.category,Gn.OBJECT_SAVE_STUFF_DATA,Pe);break}case"save_custom_variables":{const Pe=new Map;for(let at=0;at<C.length;at++){const rn=C[at],Ce=N[at];rn&&rn.length&&Ce&&Ce.length&&Pe.set(rn,Ce)}D(new FC(e.id,Pe));break}}},[e,a,C,N,_e]),Ot=i.exports.useCallback(()=>{const pe=e.stuffData;return!pe||!(pe instanceof Qs)?null:pe.getValue(2)},[e]);return e?l(T,{gap:1,alignItems:"end",children:[t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_n,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(v,{position:"relative",gap:1,children:[e.stuffData.isUnique&&t("div",{className:"position-absolute end-0",children:t(Pd,{uniqueNumber:e.stuffData.uniqueNumber,uniqueSeries:e.stuffData.uniqueSeries})}),e.stuffData.rarityLevel>-1&&t("div",{className:"position-absolute end-0",children:t(sl,{level:e.stuffData.rarityLevel})}),e.image&&e.image.src.length&&t("img",{className:"d-block mx-auto",src:e.image.src,alt:""})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(S,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,children:e.description}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:e.ownerId}),t(S,{variant:"white",small:!0,wrap:!0,children:m("furni.owner",["name"],[e.ownerName])})]}),e.purchaseOfferId>0&&t(v,{children:t(S,{variant:"white",small:!0,underline:!0,pointer:!0,onClick:pe=>Xe("buy_one"),children:m("infostand.button.buy")})})]}),(j||ie)&&l(T,{gap:1,children:[t("hr",{className:"m-0"}),xe===-1&&t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.jukebox.text.not.playing")}),!!Me.length&&l(v,{alignItems:"center",gap:1,children:[t(L,{className:"icon disk-icon"}),t(S,{variant:"white",small:!0,wrap:!0,children:Me})]}),!!Be.length&&l(v,{alignItems:"center",gap:1,children:[t(L,{className:"icon disk-creator"}),t(S,{variant:"white",small:!0,wrap:!0,children:Be})]})]}),l(T,{gap:1,children:[O&&l(V,{children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.crackable_furni.hits_remaining",["hits","target"],[x.toString(),P.toString()])})]}),e.groupId>0&&l(V,{children:[t("hr",{className:"m-0"}),l(v,{pointer:!0,alignItems:"center",gap:2,onClick:()=>ro(e.groupId),children:[t(Ye,{badgeCode:Ot(),isGroup:!0}),t(S,{variant:"white",underline:!0,children:H})]})]}),R&&l(V,{children:[t("hr",{className:"m-0"}),G&&l(S,{small:!0,wrap:!0,variant:"white",children:["ID: ",e.id]}),f.length>0&&l(V,{children:[t("hr",{className:"m-0"}),t(T,{gap:1,children:f.map((pe,Pe)=>l(v,{alignItems:"center",gap:1,children:[t(S,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:pe}),t("input",{type:"text",className:"form-control form-control-sm",value:I[Pe],onChange:at=>Nn(Pe,at.target.value)})]},Pe))})]})]}),C.length>0&&l(V,{children:[t("hr",{className:"m-0 my-1"}),t(T,{gap:1,children:C.map((pe,Pe)=>l(v,{alignItems:"center",gap:1,children:[t(S,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:pe}),t("input",{type:"text",className:"form-control form-control-sm",value:N[Pe],onChange:at=>He(Pe,at.target.value)})]},Pe))})]})]})]})}),l(v,{gap:1,justifyContent:"end",children:[c&&t(M,{variant:"dark",onClick:pe=>Xe("move"),children:m("infostand.button.move")}),d&&t(M,{variant:"dark",onClick:pe=>Xe("rotate"),children:m("infostand.button.rotate")}),a!==Qa&&t(M,{variant:"dark",onClick:pe=>Xe("pickup"),children:m(a===$c?"infostand.button.eject":"infostand.button.pickup")}),g&&t(M,{variant:"dark",onClick:pe=>Xe("use"),children:m("infostand.button.use")}),f.length>0&&I.length>0&&f.length===I.length&&t(M,{variant:"dark",onClick:()=>Xe("save_branding_configuration"),children:m("save")}),C.length>0&&N.length>0&&C.length===N.length&&t(M,{variant:"dark",onClick:()=>Xe("save_custom_variables"),children:m("save")})]})]}):null},sx=o=>{const{avatarInfo:e=null,onClose:n=null}=o,[r,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),{roomSession:u=null}=We(),{petRespectRemaining:d=0,respectPet:p=null}=zn();if(i.exports.useEffect(()=>{a(e.remainingGrowTime),c(e.remainingTimeToLive)},[e]),i.exports.useEffect(()=>{if(e.petType!==Bt.MONSTERPLANT||e.dead)return;const h=setInterval(()=>{a(f=>f-1),c(f=>f-1)},1e3);return()=>clearInterval(h)},[e]),!e)return null;const g=h=>{let f=!0;if(!(!h||h=="")){switch(h){case"respect":p(e.id),d-1>=1&&(f=!1);break;case"buyfood":ee("catalog/open/"+K("catalog.links")["pets.buy_food"]);break;case"train":u==null||u.requestPetCommands(e.id);break;case"treat":D(new Vi(e.id));break;case"compost":u==null||u.compostPlant(e.id);break;case"pick_up":u==null||u.pickupPet(e.id);break}f&&n()}};return l(T,{gap:1,alignItems:"end",children:[t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_n,{className:"cursor-pointer fa-icon",onClick:n})]}),t(S,{variant:"white",small:!0,wrap:!0,children:m(`pet.breed.${e.petType}.${e.petBreed}`)}),t("hr",{className:"m-0"})]}),e.petType===Bt.MONSTERPLANT&&l(V,{children:[l(T,{center:!0,gap:1,children:[t(er,{figure:e.petFigure,posture:e.posture,direction:4}),t("hr",{className:"m-0"})]}),l(T,{gap:2,children:[!e.dead&&t(T,{alignItems:"center",gap:1,children:t(S,{variant:"white",center:!0,small:!0,wrap:!0,children:m("pet.level",["level","maxlevel"],[e.level.toString(),e.maximumLevel.toString()])})}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:m("infostand.pet.text.wellbeing")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.dead?"00:00:00":Ur(s==0?e.remainingTimeToLive:s).split(":")[1]+":"+Ur(s==null||s==null?0:s).split(":")[2]+":"+Ur(s==null||s==null?0:s).split(":")[3]})}),t(L,{className:"bg-success rounded pet-stats",style:{width:e.dead?"0":Math.round(e.maximumTimeToLive*100/s).toString()}})]})]}),r!=0&&r>0&&l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:m("infostand.pet.text.growth")}),t(Bb,{className:"top-2 end-2",day:Ur(r).split(":")[0],hour:Ur(r).split(":")[1],minutes:Ur(r).split(":")[2],seconds:Ur(r).split(":")[3]})]}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:m("infostand.pet.text.raritylevel",["level"],[m(`infostand.pet.raritylevel.${e.rarityLevel}`)])}),t(sl,{className:"top-2 end-2",level:e.rarityLevel})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:m("pet.age",["age"],[e.age.toString()])}),t("hr",{className:"m-0"})]})]}),e.petType!==Bt.MONSTERPLANT&&l(V,{children:[l(T,{gap:1,children:[l(v,{gap:1,children:[t(T,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(er,{figure:e.petFigure,posture:e.posture,direction:4})}),l(T,{grow:!0,gap:1,children:[t(S,{variant:"white",center:!0,small:!0,wrap:!0,children:m("pet.level",["level","maxlevel"],[e.level.toString(),e.maximumLevel.toString()])}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:m("infostand.pet.text.happiness")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.happyness+"/"+e.maximumHappyness})}),t(L,{className:"bg-info rounded pet-stats",style:{width:e.happyness/e.maximumHappyness*100+"%"}})]})]}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:m("infostand.pet.text.experience")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.experience+"/"+e.levelExperienceGoal})}),t(L,{className:"bg-purple rounded pet-stats",style:{width:e.experience/e.levelExperienceGoal*100+"%"}})]})]}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:m("infostand.pet.text.energy")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.energy+"/"+e.maximumEnergy})}),t(L,{className:"bg-success rounded pet-stats",style:{width:e.energy/e.maximumEnergy*100+"%"}})]})]})]})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[e.petType!==Bt.MONSTERPLANT&&t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.petrespect",["count"],[e.respect.toString()])}),t(S,{variant:"white",small:!0,wrap:!0,children:m("pet.age",["age"],[e.age.toString()])}),t("hr",{className:"m-0"})]})]}),t(T,{gap:1,children:l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:e.ownerId}),t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.petowner",["name"],[e.ownerName])})]})})]})}),l(v,{gap:1,justifyContent:"end",children:[e.petType!==Bt.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("buyfood"),children:m("infostand.button.buyfood")}),e.isOwner&&e.petType!==Bt.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("train"),children:m("infostand.button.train")}),!e.dead&&e.energy/e.maximumEnergy<.98&&e.petType===Bt.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("treat"),children:m("infostand.button.pettreat")}),(u==null?void 0:u.isRoomOwner)&&e.petType===Bt.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("compost"),children:m("infostand.button.compost")}),e.isOwner&&t(M,{variant:"dark",onClick:h=>g("pick_up"),children:m("inventory.pets.pickup")}),d>0&&e.petType!==Bt.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("respect"),children:m("infostand.button.petrespect",["count"],[d.toString()])})]})]})},ox=o=>{const{avatarInfo:e=null,onClose:n=null}=o,r=i.exports.useMemo(()=>!(e.botSkills.indexOf(ve.NO_PICK_UP)>=0||!e.amIOwner&&!e.amIAnyRoomController),[e]),a=()=>D(new Qu(e.webID));if(e)return l(T,{gap:1,children:[t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_n,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(v,{gap:1,children:[t(T,{fullWidth:!0,className:"body-image bot",children:t(ot,{figure:e.figure,direction:4})}),t(T,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(s=>t(Ye,{badgeCode:s,showInfo:!0},s))})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(v,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(S,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:e.motto})}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:e.ownerId}),t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.botowner",["name"],[e.ownerName])})]}),e.carryItem>0&&l(V,{children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.handitem",["item"],[m("handitem"+e.carryItem)])})]})]})]})}),r&&t(v,{justifyContent:"end",children:t(M,{variant:"dark",onClick:a,children:m("infostand.button.pickup")})})]})},Ja=o=>{const{type:e=-1,relationship:n=null}=o;if(!n)return null;const r=Fn.RELATIONSHIP_NAMES[e].toLocaleLowerCase();return l(v,{alignItems:"center",gap:1,children:[t("i",{className:`nitro-friends-spritesheet icon-${r}`}),t(v,{alignItems:"center",gap:0,children:l(S,{small:!0,variant:"white",onClick:a=>tn(n.randomFriendId),children:[t("u",{children:n.randomFriendName}),n.friendCount>1&&" "+m(`extendedprofile.relstatus.others.${r}`,["count"],[(n.friendCount-1).toString()])]})})]})},ax=o=>{const{relationships:e=null}=o;return!e||!e.relationshipStatusMap.length?null:l(V,{children:[t(Ja,{type:Fn.HEART,relationship:e.relationshipStatusMap.getValue(Fn.HEART)}),t(Ja,{type:Fn.SMILE,relationship:e.relationshipStatusMap.getValue(Fn.SMILE)}),t(Ja,{type:Fn.BOBBA,relationship:e.relationshipStatusMap.getValue(Fn.BOBBA)})]})},ix=o=>{ee(`navigator/search/${o}`),D(new Es("hotel_view",`tag:${o}`))},lx=o=>{const{tags:e=null}=o;return!e||!e.length?null:l(V,{children:[t("hr",{className:"m-0"}),t(v,{className:"flex-tags",children:e&&e.length>0&&e.map((n,r)=>t(S,{variant:"white",className:"text-tags",onClick:a=>ix(n),children:n},r))})]})},cx=o=>{const{avatarInfo:e=null,setAvatarInfo:n=null,onClose:r=null}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(!1),[d,p]=i.exports.useState(null),{roomSession:g=null}=We(),h=I=>{!c||I.length>K("motto.max.length",38)||(g.sendMottoMessage(I),u(!1))},f=I=>h(I.target.value),E=I=>{switch(I.stopPropagation(),I.key){case"Enter":h(I.target.value);return}};return Ke(GC.RSUBE_BADGES,I=>{!e||e.webID!==I.userId||e.badges.join("")===I.badges.join("")||n(C=>{const b=Kt(C);return b.badges=I.badges,b})}),Ke(VC.USER_FIGURE,I=>{!e||e.roomIndex!==I.roomIndex||n(_=>{const C=Kt(_);return C.figure=I.figure,C.motto=I.customInfo,C.achievementScore=I.activityPoints,C})}),Ke(HC.FAVOURITE_GROUP_UPDATE,I=>{!e||e.roomIndex!==I.roomIndex||n(_=>{const C=Kt(_),b=I.status===-1||I.habboGroupId<=0;return C.groupId=b?-1:I.habboGroupId,C.groupName=b?null:I.habboGroupName,C.groupBadgeId=b?null:W().getGroupBadge(I.habboGroupId),C})}),U(Ju,I=>{const _=I.getParser();!e||e.webID!==_.userId||p(_)}),i.exports.useEffect(()=>(u(!1),s(e.motto),D(new Zu(e.webID)),()=>{u(!1),s(null),p(null)}),[e]),e?t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",children:[l(v,{alignItems:"center",gap:1,children:[t(Cn,{userId:e.webID}),t(S,{variant:"white",small:!0,wrap:!0,children:e.name})]}),t(_n,{className:"cursor-pointer fa-icon",onClick:r})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(v,{gap:1,children:[t(T,{fullWidth:!0,className:"body-image",onClick:I=>tn(e.webID),children:t(ot,{figure:e.figure,direction:4})}),l(T,{grow:!0,alignItems:"center",gap:0,children:[l(v,{gap:1,children:[t(v,{center:!0,className:"badge-image",children:e.badges[0]&&t(Ye,{badgeCode:e.badges[0],showInfo:!0})}),t(v,{center:!0,pointer:e.groupId>0,className:"badge-image",onClick:I=>ro(e.groupId),children:e.groupId>0&&t(Ye,{badgeCode:e.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:e.groupName})})]}),l(v,{center:!0,gap:1,children:[t(v,{center:!0,className:"badge-image",children:e.badges[1]&&t(Ye,{badgeCode:e.badges[1],showInfo:!0})}),t(v,{center:!0,className:"badge-image",children:e.badges[2]&&t(Ye,{badgeCode:e.badges[2],showInfo:!0})})]}),l(v,{center:!0,gap:1,children:[t(v,{center:!0,className:"badge-image",children:e.badges[3]&&t(Ye,{badgeCode:e.badges[3],showInfo:!0})}),t(v,{center:!0,className:"badge-image",children:e.badges[4]&&t(Ye,{badgeCode:e.badges[4],showInfo:!0})})]})]})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(v,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:[e.type!==nt.OWN_USER&&t(v,{grow:!0,alignItems:"center",className:"motto-content",children:t(S,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:a})}),e.type===nt.OWN_USER&&l(v,{grow:!0,alignItems:"center",gap:2,children:[t(qm,{className:"small fa-icon"}),l(v,{grow:!0,alignItems:"center",className:"motto-content",children:[!c&&l(S,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:I=>u(!0),children:[a," "]}),c&&t("input",{type:"text",className:"motto-input",maxLength:K("motto.max.length",38),value:a,onChange:I=>s(I.target.value),onBlur:f,onKeyDown:E,autoFocus:!0})]})]})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.achievement_score")+" "+e.achievementScore}),e.carryItem>0&&l(V,{children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.handitem",["item"],[m("handitem"+e.carryItem)])})]})]}),t(T,{gap:1,children:t(ax,{relationships:d})}),K("user.tags.enabled")&&t(T,{gap:1,className:"mt-1",children:t(lx,{tags:W().tags})})]})}):null},Mo=0,Za=1,Xc=2,Qc=3,ei=4,Jc=5,Zc=6,ux=o=>{const{avatarInfo:e=null,onClose:n=null}=o,[r,a]=i.exports.useState(Mo),{canRequestFriend:s=null}=pn(),{report:c=null}=Ln(),{roomSession:u=null}=We(),{userRespectRemaining:d=0,respectUser:p=null}=zn(),g=i.exports.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel<tt.GUEST&&!e.isGuildRoom,[e]),h=i.exports.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel===tt.GUEST&&!e.isGuildRoom,[e]),f=i.exports.useMemo(()=>e.canBeKicked||e.canBeBanned||e.canBeMuted||g||h,[g,h,e]),E=i.exports.useMemo(()=>{let _=!1;const C=Jr();if(C){const b=C.model.getValue(re.FIGURE_CARRY_OBJECT);b>0&&b<999999&&(_=!0)}return _},[]),I=_=>{let C=!0;if(_)switch(_){case"moderate":C=!1,a(Za);break;case"ban":C=!1,a(Xc);break;case"mute":C=!1,a(Qc);break;case"ambassador":C=!1,a(ei);break;case"ambassador_mute":C=!1,a(Jc);break;case"back_moderate":C=!1,a(Za);break;case"back_ambassador":C=!1,a(ei);break;case"back":C=!1,a(Mo);break;case"whisper":Tt(new wr(wr.WHISPER,e.name));break;case"friend":ee(`friends/request/${e.webID}/${e.name}`);break;case"relationship":C=!1,a(Zc);break;case"respect":{p(e.webID),d-1>=1&&(C=!1);break}case"ignore":W().ignoreUser(e.name);break;case"unignore":W().unignoreUser(e.name);break;case"kick":u.sendKickMessage(e.webID);break;case"ban_hour":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_HOUR");break;case"ban_day":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_DAY");break;case"perm_ban":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_PERM");break;case"mute_2min":u.sendMuteMessage(e.webID,2);break;case"mute_5min":u.sendMuteMessage(e.webID,5);break;case"mute_10min":u.sendMuteMessage(e.webID,10);break;case"give_rights":u.sendGiveRightsMessage(e.webID);break;case"remove_rights":u.sendTakeRightsMessage(e.webID);break;case"trade":D(new jC(e.roomIndex));break;case"report":c(qe.BULLY,{reportedUserId:e.webID});break;case"pass_hand_item":D(new WC(e.webID));break;case"ambassador_alert":u.sendAmbassadorAlertMessage(e.webID);break;case"ambassador_kick":u.sendKickMessage(e.webID);break;case"ambassador_mute_2min":u.sendMuteMessage(e.webID,2);break;case"ambassador_mute_10min":u.sendMuteMessage(e.webID,10);break;case"ambassador_mute_60min":u.sendMuteMessage(e.webID,60);break;case"ambassador_mute_18hour":u.sendMuteMessage(e.webID,1080);break;case"rship_heart":D(new Ps(e.webID,qt.RELATIONSHIP_HEART));break;case"rship_smile":D(new Ps(e.webID,qt.RELATIONSHIP_SMILE));break;case"rship_bobba":D(new Ps(e.webID,qt.RELATIONSHIP_BOBBA));break;case"rship_none":D(new Ps(e.webID,qt.RELATIONSHIP_NONE));break}C&&n()};return i.exports.useEffect(()=>{a(Mo)},[e]),l(ar,{objectId:e.roomIndex,category:Q.UNIT,userType:e.userType,onClose:n,collapsable:!0,children:[t($t,{className:"cursor-pointer",onClick:_=>tn(e.webID),children:e.name}),r===Mo&&l(V,{children:[s(e.webID)&&t(z,{onClick:_=>I("friend"),children:m("infostand.button.friend")}),t(z,{onClick:_=>I("trade"),children:m("infostand.button.trade")}),t(z,{onClick:_=>I("whisper"),children:m("infostand.button.whisper")}),d>0&&t(z,{onClick:_=>I("respect"),children:m("infostand.button.respect",["count"],[d.toString()])}),!s(e.webID)&&l(z,{onClick:_=>I("relationship"),children:[m("infostand.link.relationship"),t(Zt,{className:"right fa-icon"})]}),!e.isIgnored&&t(z,{onClick:_=>I("ignore"),children:m("infostand.button.ignore")}),e.isIgnored&&t(z,{onClick:_=>I("unignore"),children:m("infostand.button.unignore")}),t(z,{onClick:_=>I("report"),children:m("infostand.button.report")}),f&&l(z,{onClick:_=>I("moderate"),children:[t(Zt,{className:"right fa-icon"}),m("infostand.link.moderate")]}),e.isAmbassador&&l(z,{onClick:_=>I("ambassador"),children:[t(Zt,{className:"right fa-icon"}),m("infostand.link.ambassador")]}),E&&t(z,{onClick:_=>I("pass_hand_item"),children:m("avatar.widget.pass_hand_item")})]}),r===Za&&l(V,{children:[t(z,{onClick:_=>I("kick"),children:m("infostand.button.kick")}),l(z,{onClick:_=>I("mute"),children:[t(Zt,{className:"right fa-icon"}),m("infostand.button.mute")]}),l(z,{onClick:_=>I("ban"),children:[t(Zt,{className:"right fa-icon"}),m("infostand.button.ban")]}),g&&t(z,{onClick:_=>I("give_rights"),children:m("infostand.button.giverights")}),h&&t(z,{onClick:_=>I("remove_rights"),children:m("infostand.button.removerights")}),l(z,{onClick:_=>I("back"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]}),r===Xc&&l(V,{children:[t(z,{onClick:_=>I("ban_hour"),children:m("infostand.button.ban_hour")}),t(z,{onClick:_=>I("ban_day"),children:m("infostand.button.ban_day")}),t(z,{onClick:_=>I("perm_ban"),children:m("infostand.button.perm_ban")}),l(z,{onClick:_=>I("back_moderate"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]}),r===Qc&&l(V,{children:[t(z,{onClick:_=>I("mute_2min"),children:m("infostand.button.mute_2min")}),t(z,{onClick:_=>I("mute_5min"),children:m("infostand.button.mute_5min")}),t(z,{onClick:_=>I("mute_10min"),children:m("infostand.button.mute_10min")}),l(z,{onClick:_=>I("back_moderate"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]}),r===ei&&l(V,{children:[t(z,{onClick:_=>I("ambassador_alert"),children:m("infostand.button.alert")}),t(z,{onClick:_=>I("ambassador_kick"),children:m("infostand.button.kick")}),l(z,{onClick:_=>I("ambassador_mute"),children:[m("infostand.button.mute"),t(Zt,{className:"right fa-icon"})]}),l(z,{onClick:_=>I("back"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]}),r===Jc&&l(V,{children:[t(z,{onClick:_=>I("ambassador_mute_2min"),children:m("infostand.button.mute_2min")}),t(z,{onClick:_=>I("ambassador_mute_10min"),children:m("infostand.button.mute_10min")}),t(z,{onClick:_=>I("ambassador_mute_60min"),children:m("infostand.button.mute_60min")}),t(z,{onClick:_=>I("ambassador_mute_18hr"),children:m("infostand.button.mute_18hour")}),l(z,{onClick:_=>I("back_ambassador"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]}),r===Zc&&l(V,{children:[l(v,{className:"menu-list-split-3",children:[t(z,{onClick:_=>I("rship_heart"),children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),t(z,{onClick:_=>I("rship_smile"),children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),t(z,{onClick:_=>I("rship_bobba"),children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),t(z,{onClick:_=>I("rship_none"),children:m("avatar.widget.clear_relationship")}),l(z,{onClick:_=>I("back"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]})]})},_m=o=>{const{classNames:e=[],...n}=o,r=i.exports.useMemo(()=>{const a=["menu-list"];return e.length&&a.push(...e),a},[e]);return t(T,{classNames:r,...n})},dx=o=>{const{userId:e=-1,userName:n="",roomIndex:r=-1,setIsDecorating:a=null}=o;return t(ar,{objectId:r,category:Q.UNIT,onClose:null,children:t(_m,{children:t(z,{onClick:s=>a(!1),children:m("widget.avatar.stop_decorating")})})})},mx=o=>{const{avatarInfo:e=null,onClose:n=null}=o,r=a=>{if(a)switch(a){case"move":us(e.id,e.category,Gn.OBJECT_MOVE);break;case"rotate":us(e.id,e.category,Gn.OBJECT_ROTATE_POSITIVE);break;case"pickup":us(e.id,e.category,Gn.OBJECT_PICKUP);break;case"eject":us(e.id,e.category,Gn.OBJECT_EJECT);break}};return l(ar,{objectId:e.id,category:e.category,onClose:n,collapsable:!0,children:[t($t,{children:e.name}),l(v,{className:"menu-list-split-3",children:[t(z,{onClick:a=>r("move"),children:t(zm,{className:"center fa-icon"})}),t(z,{onClick:a=>r("rotate"),disabled:e.isWallItem,children:t(Ym,{className:"center fa-icon"})}),(e.isOwner||e.isAnyRoomController)&&t(z,{onClick:a=>r("pickup"),children:t(El,{className:"center fa-icon"})}),!e.isOwner&&!e.isAnyRoomController&&(e.isRoomOwner||e.roomControllerLevel>=tt.GUILD_ADMIN)&&t(z,{onClick:a=>r("eject"),children:t(El,{className:"center fa-icon"})})]})]})},eu=o=>{const{nameInfo:e=null,onClose:n=null}=o,r=i.exports.useMemo(()=>{const a=["name-only"];return e.isFriend&&a.push("is-friend"),a},[e]);return t(ar,{objectId:e.roomIndex,category:e.category,userType:e.userType,fades:e.id!==W().userId,classNames:r,onClose:n,children:t("div",{className:"text-shadow",children:e.name})})},ti=0,ni=1,tu=3,nu=4,gx=o=>{const{avatarInfo:e=null,isDancing:n=!1,setIsDecorating:r=null,onClose:a=null}=o,[s,c]=i.exports.useState(n&&qr()?ni:ti),{roomSession:u=null}=We(),d=h=>{let f=!0;if(h)if(h.startsWith("sign_")){const E=parseInt(h.split("_")[1]);u.sendSignMessage(E)}else switch(h){case"decorate":r(!0);break;case"change_name":Tt(new sa(sa.INIT));break;case"change_looks":ee("avatar-editor/show");break;case"expressions":f=!1,c(tu);break;case"sit":u.sendPostureMessage(Jo.POSTURE_SIT);break;case"stand":u.sendPostureMessage(Jo.POSTURE_STAND);break;case"wave":u.sendExpressionMessage(Zn.WAVE.ordinal);break;case"blow":u.sendExpressionMessage(Zn.BLOW.ordinal);break;case"laugh":u.sendExpressionMessage(Zn.LAUGH.ordinal);break;case"idle":u.sendExpressionMessage(Zn.IDLE.ordinal);break;case"dance_menu":f=!1,c(ni);break;case"dance":u.sendDanceMessage(1);break;case"dance_stop":u.sendDanceMessage(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":u.sendDanceMessage(parseInt(h.charAt(h.length-1)));break;case"signs":f=!1,c(nu);break;case"back":f=!1,c(ti);break;case"drop_carry_item":D(new qC);break}f&&a()},p=()=>e.amIOwner||e.amIAnyRoomController||e.roomControllerLevel>tt.GUEST,g=L_();return l(ar,{objectId:e.roomIndex,category:Q.UNIT,userType:e.userType,onClose:a,collapsable:!0,children:[t($t,{className:"cursor-pointer",onClick:h=>tn(e.webID),children:e.name}),s===ti&&l(V,{children:[e.allowNameChange&&t(z,{onClick:h=>d("change_name"),children:m("widget.avatar.change_name")}),p()&&t(z,{onClick:h=>d("decorate"),children:m("widget.avatar.decorate")}),t(z,{onClick:h=>d("change_looks"),children:m("widget.memenu.myclothes")}),qr()&&!g&&l(z,{onClick:h=>d("dance_menu"),children:[t(Zt,{className:"right fa-icon"}),m("widget.memenu.dance")]}),!n&&!qr()&&!g&&t(z,{onClick:h=>d("dance"),children:m("widget.memenu.dance")}),n&&!qr()&&!g&&t(z,{onClick:h=>d("dance_stop"),children:m("widget.memenu.dance.stop")}),l(z,{onClick:h=>d("expressions"),children:[t(Zt,{className:"right fa-icon"}),m("infostand.link.expressions")]}),l(z,{onClick:h=>d("signs"),children:[t(Zt,{className:"right fa-icon"}),m("infostand.show.signs")]}),e.carryItem>0&&t(z,{onClick:h=>d("drop_carry_item"),children:m("avatar.widget.drop_hand_item")})]}),s===ni&&l(V,{children:[n&&t(z,{onClick:h=>d("dance_stop"),children:m("widget.memenu.dance.stop")}),t(z,{onClick:h=>d("dance_1"),children:m("widget.memenu.dance1")}),t(z,{onClick:h=>d("dance_2"),children:m("widget.memenu.dance2")}),t(z,{onClick:h=>d("dance_3"),children:m("widget.memenu.dance3")}),t(z,{onClick:h=>d("dance_4"),children:m("widget.memenu.dance4")}),l(z,{onClick:h=>d("back"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]}),s===tu&&l(V,{children:[P_()===ms.POSTURE_STAND&&t(z,{onClick:h=>d("sit"),children:m("widget.memenu.sit")}),b_()&&t(z,{onClick:h=>d("stand"),children:m("widget.memenu.stand")}),Ha()&&t(z,{onClick:h=>d("wave"),children:m("widget.memenu.wave")}),Ha()&&l(z,{disabled:!To(),onClick:h=>d("laugh"),children:[!To()&&t(ct,{type:"hc"}),m("widget.memenu.laugh")]}),Ha()&&l(z,{disabled:!To(),onClick:h=>d("blow"),children:[!To()&&t(ct,{type:"hc"}),m("widget.memenu.blow")]}),t(z,{onClick:h=>d("idle"),children:m("widget.memenu.idle")}),l(z,{onClick:h=>d("back"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]}),s===nu&&l(V,{children:[l(v,{className:"menu-list-split-3",children:[t(z,{onClick:h=>d("sign_1"),children:"1"}),t(z,{onClick:h=>d("sign_2"),children:"2"}),t(z,{onClick:h=>d("sign_3"),children:"3"})]}),l(v,{className:"menu-list-split-3",children:[t(z,{onClick:h=>d("sign_4"),children:"4"}),t(z,{onClick:h=>d("sign_5"),children:"5"}),t(z,{onClick:h=>d("sign_6"),children:"6"})]}),l(v,{className:"menu-list-split-3",children:[t(z,{onClick:h=>d("sign_7"),children:"7"}),t(z,{onClick:h=>d("sign_8"),children:"8"}),t(z,{onClick:h=>d("sign_9"),children:"9"})]}),l(v,{className:"menu-list-split-3",children:[t(z,{onClick:h=>d("sign_10"),children:"10"}),t(z,{onClick:h=>d("sign_11"),children:t("i",{className:"icon icon-sign-heart"})}),t(z,{onClick:h=>d("sign_12"),children:t("i",{className:"icon icon-sign-skull"})})]}),l(v,{className:"menu-list-split-3",children:[t(z,{onClick:h=>d("sign_0"),children:"0"}),t(z,{onClick:h=>d("sign_13"),children:t("i",{className:"icon icon-sign-exclamation"})}),t(z,{onClick:h=>d("sign_15"),children:t("i",{className:"icon icon-sign-smile"})})]}),l(v,{className:"menu-list-split-3",children:[t(z,{onClick:h=>d("sign_14"),children:t("i",{className:"icon icon-sign-soccer"})}),t(z,{onClick:h=>d("sign_17"),children:t("i",{className:"icon icon-sign-yellow"})}),t(z,{onClick:h=>d("sign_16"),children:t("i",{className:"icon icon-sign-red"})})]}),l(z,{onClick:h=>d("back"),children:[t(Jt,{className:"left fa-icon"}),m("generic.back")]})]})]})},ri=0,ru=1,su=2,ou=3,px=o=>{const{avatarInfo:e=null,onClose:n=null}=o,[r,a]=i.exports.useState(ri),{roomSession:s=null}=We(),{petRespectRemaining:c=0,respectPet:u=null}=zn(),d=i.exports.useMemo(()=>{let g=!1;const h=Jr();if(h){const f=h.model.getValue(re.FIGURE_CARRY_OBJECT);f>0&&f<999999&&(g=!0)}return g},[]),p=g=>{let h=!0;if(g)switch(g){case"respect":u(e.id),c-1>=1&&(h=!1);break;case"treat":D(new Vi(e.id));break;case"pass_handitem":D(new ed(e.id));break;case"train":s.requestPetCommands(e.id);break;case"pick_up":s.pickupPet(e.id);break;case"mount":s.mountPet(e.id);break;case"toggle_riding_permission":s.togglePetRiding(e.id);break;case"toggle_breeding_permission":s.togglePetBreeding(e.id);break;case"dismount":s.dismountPet(e.id);break;case"saddle_off":s.removePetSaddle(e.id);break;case"breed":break;case"harvest":s.harvestPet(e.id);break;case"revive":break;case"compost":s.compostPlant(e.id);break;case"buy_saddle":ee("catalog/open/"+K("catalog.links")["pets.buy_saddle"]);break}h&&n()};return i.exports.useEffect(()=>{a(g=>e.petType===Bt.MONSTERPLANT?ou:e.saddle&&!e.rider?ru:e.rider?su:ri)},[e]),l(ar,{objectId:e.roomIndex,category:Q.UNIT,userType:ft.PET,onClose:n,collapsable:!0,children:[t($t,{children:e.name}),r===ri&&l(V,{children:[c>0&&t(z,{onClick:g=>p("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])}),t(z,{onClick:g=>p("train"),children:m("infostand.button.train")}),t(z,{onClick:g=>p("pick_up"),children:m("infostand.button.pickup")}),e.petType===Bt.HORSE&&t(z,{onClick:g=>p("buy_saddle"),children:m("infostand.button.buy_saddle")}),[Bt.BEAR,Bt.TERRIER,Bt.CAT,Bt.DOG,Bt.PIG].indexOf(e.petType)>-1&&t(z,{onClick:g=>p("breed"),children:m("infostand.button.breed")})]}),r===ru&&l(V,{children:[t(z,{onClick:g=>p("mount"),children:m("infostand.button.mount")}),l(z,{onClick:g=>p("toggle_riding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:!!e.publiclyRideable,readOnly:!0}),m("infostand.button.toggle_riding_permission")]}),c>0&&t(z,{onClick:g=>p("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])}),t(z,{onClick:g=>p("train"),children:m("infostand.button.train")}),t(z,{onClick:g=>p("pick_up"),children:m("infostand.button.pickup")}),t(z,{onClick:g=>p("saddle_off"),children:m("infostand.button.saddleoff")})]}),r===su&&l(V,{children:[t(z,{onClick:g=>p("dismount"),children:m("infostand.button.dismount")}),c>0&&t(z,{onClick:g=>p("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])})]}),r===ou&&l(V,{children:[t(z,{onClick:g=>p("pick_up"),children:m("infostand.button.pickup")}),e.dead&&t(z,{onClick:g=>p("revive"),children:m("infostand.button.revive")}),s.isRoomOwner&&t(z,{onClick:g=>p("compost"),children:m("infostand.button.compost")}),!e.dead&&e.energy/e.maximumEnergy<.98&&t(z,{onClick:g=>p("treat"),children:m("infostand.button.pettreat")}),!e.dead&&e.level===e.maximumLevel&&e.breedable&&l(V,{children:[l(z,{onClick:g=>p("toggle_breeding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:e.publiclyBreedable,readOnly:!0}),m("infostand.button.toggle_breeding_permission")]}),t(z,{onClick:g=>p("breed"),children:m("infostand.button.breed")})]})]}),d&&t(z,{onClick:g=>p("pass_hand_item"),children:m("infostand.button.pass_hand_item")})]})},si=0,au=1,iu=2,lu=3,hx=o=>{const{avatarInfo:e=null,onClose:n=null}=o,[r,a]=i.exports.useState(si),{roomSession:s=null}=We(),{petRespectRemaining:c=0,respectPet:u=null}=zn(),d=i.exports.useMemo(()=>s.isRoomOwner||s.controllerLevel>=tt.GUEST||W().isModerator,[s]),p=i.exports.useMemo(()=>{let h=!1;const f=Jr();if(f){const E=f.model.getValue(re.FIGURE_CARRY_OBJECT);E>0&&E<999999&&(h=!0)}return h},[]),g=h=>{let f=!0;if(h)switch(h){case"respect":u(e.id),c-1>=1&&(f=!1);break;case"treat":D(new Vi(e.id));break;case"pass_handitem":D(new ed(e.id));break;case"pick_up":s.pickupPet(e.id);break;case"mount":s.mountPet(e.id);break;case"dismount":s.dismountPet(e.id);break}f&&n()};return i.exports.useEffect(()=>{a(h=>e.petType===Bt.MONSTERPLANT?lu:e.saddle&&!e.rider?au:e.rider?iu:si)},[e]),l(ar,{objectId:e.roomIndex,category:Q.UNIT,userType:ft.PET,onClose:n,collapsable:!0,children:[t($t,{children:e.name}),r===si&&c>0&&t(z,{onClick:h=>g("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])}),r===au&&l(V,{children:[!!e.publiclyRideable&&t(z,{onClick:h=>g("mount"),children:m("infostand.button.mount")}),c>0&&t(z,{onClick:h=>g("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])})]}),r===iu&&l(V,{children:[t(z,{onClick:h=>g("dismount"),children:m("infostand.button.dismount")}),c>0&&t(z,{onClick:h=>g("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])})]}),r===lu&&!e.dead&&e.energy/e.maximumEnergy<.98&&t(z,{onClick:h=>g("treat"),children:m("infostand.button.pettreat")}),d&&t(z,{onClick:h=>g("pick_up"),children:m("infostand.button.pickup")}),p&&t(z,{onClick:h=>g("pass_hand_item"),children:m("infostand.button.pass_hand_item")})]})},oi=0,cu=1,uu=2,fx=o=>{const{avatarInfo:e=null,onClose:n=null}=o,[r,a]=i.exports.useState(oi),[s,c]=i.exports.useState(""),[u,d]=i.exports.useState("");U(zC,f=>{const E=f.getParser();if(E.botId===e.webID)switch(E.commandId){case ve.CHANGE_BOT_NAME:c(E.data),a(cu);return;case ve.CHANGE_BOT_MOTTO:d(E.data),a(uu);return;case ve.SETUP_CHAT:{const I=E.data,_=I.split(I.indexOf(";#;")===-1?";":";#;");(_.length===3||_.length===4)&&(Tt(new Zi(e.roomIndex,Q.UNIT,e.webID,_[0],_[1].toLowerCase()==="true"||_[1]==="1",parseInt(_[2]),_[3]?_[3].toLowerCase()==="true"||_[3]==="1":!1)),n());return}}});const p=f=>D(new YC(e.webID,f)),g=f=>{let E=!0;if(f)switch(f){case"donate_to_all":p(ve.DONATE_TO_ALL),D(new cr(e.webID,ve.DONATE_TO_ALL,""));break;case"donate_to_user":p(ve.DONATE_TO_USER),D(new cr(e.webID,ve.DONATE_TO_USER,""));break;case"change_bot_name":p(ve.CHANGE_BOT_NAME),E=!1;break;case"save_bot_name":D(new cr(e.webID,ve.CHANGE_BOT_NAME,s));break;case"change_bot_motto":p(ve.CHANGE_BOT_MOTTO),E=!1;break;case"save_bot_motto":D(new cr(e.webID,ve.CHANGE_BOT_MOTTO,u));break;case"dress_up":D(new cr(e.webID,ve.DRESS_UP,""));break;case"random_walk":D(new cr(e.webID,ve.RANDOM_WALK,""));break;case"setup_chat":p(ve.SETUP_CHAT),E=!1;break;case"dance":D(new cr(e.webID,ve.DANCE,""));break;case"nux_take_tour":be().createLinkEvent("help/tour"),D(new cr(e.webID,ve.NUX_TAKE_TOUR,""));break;case"pick":D(new Qu(e.webID));break}E&&n()};i.exports.useEffect(()=>{a(oi)},[e]);const h=e.amIOwner||e.amIAnyRoomController;return l(ar,{objectId:e.roomIndex,category:Q.UNIT,userType:ft.RENTABLE_BOT,onClose:n,collapsable:!0,children:[t($t,{children:e.name}),r===oi&&h&&l(V,{children:[e.botSkills.indexOf(ve.DONATE_TO_ALL)>=0&&t(z,{onClick:f=>g("donate_to_all"),children:m("avatar.widget.donate_to_all")}),e.botSkills.indexOf(ve.DONATE_TO_USER)>=0&&t(z,{onClick:f=>g("donate_to_user"),children:m("avatar.widget.donate_to_user")}),e.botSkills.indexOf(ve.CHANGE_BOT_NAME)>=0&&t(z,{onClick:f=>g("change_bot_name"),children:m("avatar.widget.change_bot_name")}),e.botSkills.indexOf(ve.CHANGE_BOT_MOTTO)>=0&&t(z,{onClick:f=>g("change_bot_motto"),children:m("avatar.widget.change_bot_motto")}),e.botSkills.indexOf(ve.DRESS_UP)>=0&&t(z,{onClick:f=>g("dress_up"),children:m("avatar.widget.dress_up")}),e.botSkills.indexOf(ve.RANDOM_WALK)>=0&&t(z,{onClick:f=>g("random_walk"),children:m("avatar.widget.random_walk")}),e.botSkills.indexOf(ve.SETUP_CHAT)>=0&&t(z,{onClick:f=>g("setup_chat"),children:m("avatar.widget.setup_chat")}),e.botSkills.indexOf(ve.DANCE)>=0&&t(z,{onClick:f=>g("dance"),children:m("avatar.widget.dance")}),e.botSkills.indexOf(ve.NO_PICK_UP)===-1&&t(z,{onClick:f=>g("pick"),children:m("avatar.widget.pick_up")})]}),r===cu&&l(T,{className:"menu-item",onClick:null,gap:1,children:[t(S,{variant:"white",children:m("bot.skill.name.configuration.new.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:s,maxLength:K("bot.name.max.length",15),onChange:f=>c(f.target.value)}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(M,{fullWidth:!0,variant:"secondary",onClick:f=>g(null),children:m("cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:f=>g("save_bot_name"),children:m("save")})]})]}),r===uu&&l(T,{className:"menu-item",onClick:null,gap:1,children:[t(S,{variant:"white",children:m("bot.skill.name.configuration.new.motto")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:K("motto.max.length",38),onChange:f=>d(f.target.value)}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(M,{fullWidth:!0,variant:"secondary",onClick:f=>g(null),children:m("cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:f=>g("save_bot_motto"),children:m("save")})]})]})]})},Ix=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),{avatarInfo:u=null,setAvatarInfo:d=null,activeNameBubble:p=null,setActiveNameBubble:g=null,nameBubbles:h=[],removeNameBubble:f=null,productBubbles:E=[],confirmingProduct:I=null,updateConfirmingProduct:_=null,removeProductBubble:C=null,isDecorating:b=!1,setIsDecorating:N=null}=RN(),{roomSession:w=null}=We();we(In.NORMAL_MODE,x=>{e&&n(!1)}),we(In.GAME_MODE,x=>{e||n(!0)}),Ke($C.RSDE_DANCE,x=>{x.roomIndex===w.ownRoomIndex&&a(x.danceId!==0)}),ut(Zi.UPDATE_CHAT,x=>c(x));const O=()=>{if(!w||e)return null;if(p)return t(eu,{nameInfo:p,onClose:()=>g(null)});if(u)switch(u.type){case bs.FURNI:{const x=u;return b?t(mx,{avatarInfo:x,onClose:()=>d(null)}):null}case nt.OWN_USER:case nt.PEER:{const x=u;return K("user.tags.enabled")&&W().getUserTags(x.roomIndex),x.isSpectatorMode?null:x.isOwnUser?di.isRunning()?null:t(gx,{avatarInfo:x,isDancing:r,setIsDecorating:N,onClose:()=>d(null)}):t(ux,{avatarInfo:x,onClose:()=>d(null)})}case Ss.PET_INFO:{const x=u;return x.isOwner?t(px,{avatarInfo:x,onClose:()=>d(null)}):t(hx,{avatarInfo:x,onClose:()=>d(null)})}case Ns.RENTABLE_BOT:return t(fx,{avatarInfo:u,onClose:()=>d(null)})}return null},y=()=>{if(!u)return null;switch(u.type){case bs.FURNI:return t(rx,{avatarInfo:u,onClose:()=>d(null)});case nt.OWN_USER:case nt.PEER:return t(cx,{avatarInfo:u,setAvatarInfo:d,onClose:()=>d(null)});case nt.BOT:return t(nx,{avatarInfo:u,onClose:()=>d(null)});case Ns.RENTABLE_BOT:return t(ox,{avatarInfo:u,onClose:()=>d(null)});case Ss.PET_INFO:return t(sx,{avatarInfo:u,onClose:()=>d(null)})}};return l(V,{children:[b&&t(dx,{userId:W().userId,userName:W().userName,roomIndex:w.ownRoomIndex,setIsDecorating:N}),O(),u&&t(T,{alignItems:"end",className:"nitro-infostand-container",children:y()}),h.length>0&&h.map((x,F)=>t(eu,{nameInfo:x,onClose:()=>f(F)},F)),E.length>0&&E.map((x,F)=>t(tx,{item:x,updateConfirmingProduct:_,onClose:()=>C(F)},x.id)),s&&t(Ky,{chatEvent:s,onClose:()=>c(null)}),I&&t(Xy,{item:I,onClose:()=>_(null)}),t($y,{})]})},Ex=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(!0),[h,f]=i.exports.useState(!1),{sendChat:E=null}=cl();var I=!1;const{chatStyleId:_=0}=zn();function C(k){if(I=!0,k.length==0){f(!1),g(!0);return}fetch("https://api.giphy.com/v1/gifs/search?api_key=4qwMrfzYMYVl1lhhl3wDaVxDNWAzAv6s&q="+k+"&limit=25&offset=0&rating=g&lang=en").then(R=>R.json()).then(R=>{d(R),g(!1),f(!0)})}const b=k=>{k.key==="Enter"&&C(F)};function N(k){const R=k.split(".gif");E(R[0],On.CHAT_DEFAULT,"",_)}function w(){return s==null?null:t("div",{})}function O(){return u==null?null:t(te,{columnCount:4,overflow:"auto",id:"giphyStickers",children:u.data.map(k=>t(L,{children:t("img",{src:k.images.downsized_medium.url,width:50,height:50,className:"sticker-img",onClick:R=>N(k.images.fixed_height_small.url)})},k.images.downsized_medium.url))})}const y=k=>{if(I)return;let R=!0;a(A=>(R=!A,R)),R&&n(k.target),I=!1};function x(){I=!0}var F="";function P(k){F=k}return i.exports.useEffect(()=>{r||n(null)},[r]),t(V,{children:t(L,{pointer:!0,className:"icon sticker-icon",onClick:y,style:{display:"inline-block"},children:t(ia,{show:r,target:e,placement:"top",children:t(fs,{className:"nitro-chat-sticker-selector-container image-rendering-pixelated",children:l(se,{overflow:"hidden",className:"bg-transparent",children:[l(v,{gap:1,children:[t("input",{onClick:k=>x(),onKeyDown:b,onChange:k=>P(k.target.value),type:"text",className:"form-control form-control-sm",placeholder:m("generic.search")}),t(Li,{variant:"success",className:"stickers-search-button",onClick:k=>C(F),children:t($s,{className:"fa-icon"})})]}),p?t(w,{}):null,h?t(O,{}):null]})})})})})},Cx=o=>{const{chatStyleId:e=0,chatStyleIds:n=null,selectChatStyleId:r=null}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(!1),d=g=>{r(g),u(!1)},p=g=>{let h=!1;u(f=>(h=!f,h)),h&&s(g.target)};return i.exports.useEffect(()=>{c||s(null)},[c]),l(V,{children:[t(L,{pointer:!0,className:"icon chatstyles-icon nitro-chat-style-box",onClick:p}),t(ia,{show:c,target:a,placement:"top",children:t(fs,{className:"nitro-chat-style-selector-container image-rendering-pixelated",children:t(se,{overflow:"hidden",className:"bg-transparent",children:t(te,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map(g=>t(v,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:h=>d(g),children:t(L,{className:"bubble-container",children:t(L,{className:`chat-bubble bubble-${g}`,children:" "})},g)},g))})})})})]})},_x=o=>{const[e,n]=i.exports.useState(""),{chatStyleId:r=0,updateChatStyleId:a=null}=zn(),{selectedUsername:s="",floodBlocked:c=!1,floodBlockedSeconds:u=0,setIsTyping:d=null,setIsIdle:p=null,sendChat:g=null}=cl(),{roomSession:h=null}=We(),f=i.exports.useRef(),E=i.exports.useMemo(()=>m("widgets.chatinput.mode.whisper"),[]),I=i.exports.useMemo(()=>m("widgets.chatinput.mode.shout"),[]),_=i.exports.useMemo(()=>m("widgets.chatinput.mode.speak"),[]),C=i.exports.useMemo(()=>K("chat.input.maxlength",100),[]);var b,N=[],w=document.getElementById("microphoneOn"),O=document.getElementById("microphoneOff"),y=document.getElementById("deleteAudio"),x=!1;function F(){w.style.display="none",O.style.display="inline-block",y.style.display="inline-block",navigator.mediaDevices.getUserMedia({audio:!0}).then(ne=>{b=new MediaRecorder(ne),b.start(),b.addEventListener("dataavailable",xe=>{N.push(xe.data)}),b.addEventListener("stop",()=>{if(w.style.display="inline-block",O.style.display="none",y.style.display="none",!x){const Ee=new Blob(N);var xe=new FormData;xe.append("audio",Ee),fetch("https://int.habbeh.net/audio.php",{method:"POST",body:xe}).then(Me=>Me.text()).then(Me=>{h.sendChatMessage("https://int.habbeh.net/audios/"+Me+".mp3",0)})}x=!1,N=[]})})}function P(){w.style.display="inline-block",O.style.display="none",y.style.display="none",b.stop()}function k(){w.style.display="inline-block",O.style.display="none",y.style.display="none",x=!0,b.stop()}function R(){document.getElementById("submenuChat").style.display=="block"?document.getElementById("submenuChat").style.display="none":document.getElementById("submenuChat").style.display="block"}function A(){document.getElementById("submenuChat").style.display="none"}const G=i.exports.useCallback(()=>{const ne=document.activeElement;return!(!ne||f&&f.current===ne||!(ne instanceof HTMLInputElement)&&!(ne instanceof HTMLTextAreaElement))},[f]),B=i.exports.useCallback(()=>{f.current.focus(),f.current.setSelectionRange(f.current.value.length*2,f.current.value.length*2)},[f]),H=i.exports.useCallback(()=>{n(ne=>ne!==E||!s.length?ne:`${ne} ${s}`)},[s,E]),X=i.exports.useCallback((ne,xe=!1)=>{if(!ne||ne==="")return;let Ee=xe?On.CHAT_SHOUT:On.CHAT_DEFAULT,Me=ne;const it=Me.split(" ");let Be="",Lt="";switch(it[0]){case E:Ee=On.CHAT_WHISPER,Be=it[1],Lt=E+" "+Be+" ",it.shift(),it.shift();break;case I:Ee=On.CHAT_SHOUT,it.shift();break;case _:Ee=On.CHAT_DEFAULT,it.shift();break}Me=it.join(" "),d(!1),p(!1),Me.length<=C&&(/%CC%/g.test(encodeURIComponent(Me))?n(""):(n(""),g(Me,Ee,Be,r))),n(Lt)},[E,I,_,C,r,d,p,g]),j=i.exports.useCallback(ne=>{!ne||!ne.length?d(!1):(d(!0),p(!0)),n(ne)},[d,p]),de=i.exports.useCallback(ne=>{if(c||!f.current||G())return;document.activeElement!==f.current&&B();const xe=ne.target.value;switch(ne.key){case" ":case"Space":H();return;case"NumpadEnter":case"Enter":X(xe,ne.shiftKey);return;case"Backspace":if(xe){const Ee=xe.split(" ");Ee[0]===E&&Ee.length===3&&Ee[2]===""&&n("")}return}},[c,f,E,G,B,H,X]);ut(wr.CHAT_INPUT_CONTENT,ne=>{switch(ne.chatMode){case wr.WHISPER:{n(`${E} ${ne.userName} `);return}case wr.SHOUT:return}});const ie=i.exports.useMemo(()=>{let ne=[];const xe=K("chat.styles");for(const Ee of xe)if(Ee){if(Ee.minRank>0){W().hasSecurity(Ee.minRank)&&ne.push(Ee.styleId);continue}if(Ee.isSystemStyle&&W().hasSecurity(tt.MODERATOR)){ne.push(Ee.styleId);continue}if(!(K("chat.styles.disabled").indexOf(Ee.styleId)>=0)){if(Ee.isHcOnly&&En()>=dn.CLUB){ne.push(Ee.styleId);continue}if(Ee.isAmbassadorOnly&&W().isAmbassador){ne.push(Ee.styleId);continue}!Ee.isHcOnly&&!Ee.isAmbassadorOnly&&ne.push(Ee.styleId)}}return ne},[]);return i.exports.useEffect(()=>(document.body.addEventListener("keydown",de),()=>{document.body.removeEventListener("keydown",de)}),[de]),i.exports.useEffect(()=>{f.current&&(f.current.parentElement.dataset.value=e)},[e]),!h||h.isSpectator?null:Pi.exports.createPortal(t("div",{className:"nitro-chat-input-container",children:l("div",{className:"input-sizer align-items-center",children:[t("div",{onClick:()=>R(),className:"iconcommandsright icon chatmas-icon"}),t(Cx,{chatStyleId:r,chatStyleIds:ie,selectChatStyleId:a}),!c&&t("input",{ref:f,type:"text",className:"chat-input",placeholder:m("widgets.chatinput.default"),value:e,maxLength:C,onChange:ne=>j(ne.target.value),onMouseDown:ne=>B()}),c&&l(S,{variant:"danger",children:[m("chat.input.alert.flood",["time"],[u.toString()])," "]}),l("div",{id:"submenuChat",children:[t(Ex,{}),t("div",{id:"microphoneOn",onClick:ne=>F(),style:{marginLeft:"5px",display:"inline-block"},className:"icon chatmicrophone-on-icon"}),t("div",{id:"microphoneOff",onClick:ne=>P(),style:{marginLeft:"5px",display:"none"},className:"icon chatmicrophone-off-icon"}),t("div",{id:"deleteAudio",onClick:ne=>k(),style:{marginLeft:"5px",display:"none"},className:"icon chatdeleteaudio-icon"}),t("div",{onClick:()=>A(),className:"icon chatequis-icon",style:{display:"inline-block"}})]})]})}),document.getElementById("toolbar-chat-input-container"))},bx=()=>{let o=null;self.onmessage=e=>{if(!e)return;const n=e.data;switch(n.action){case"START":o=setInterval(()=>postMessage(null),n.content);break;case"STOP":o&&(clearInterval(o),o=null);break}}};class Sx extends Worker{constructor(e){const n=e.toString(),r=new Blob([`(${n})()`]);super(URL.createObjectURL(r))}}const Nx=o=>{const{chat:e=null,makeRoom:n=null,bubbleWidth:r=_t.CHAT_BUBBLE_WIDTH_NORMAL}=o,[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),d=i.exports.useRef(),p=i.exports.useMemo(()=>{switch(r){case _t.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case _t.CHAT_BUBBLE_WIDTH_THIN:return 240;case _t.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}},[r]);return i.exports.useEffect(()=>{s(!1);const g=d.current;if(!g)return;const h=g.offsetWidth,f=g.offsetHeight;e.width=h,e.height=f,e.elementRef=g;let E=e.left,I=e.top;return!E&&!I&&(E=e.location.x-h/2,I=g.parentElement.offsetHeight-f,e.left=E,e.top=I),u(!0),()=>{e.elementRef=null,u(!1)}},[e]),i.exports.useEffect(()=>{!c||!e||a||(n&&n(e),s(!0))},[e,c,a,n]),l("div",{ref:d,className:`bubble-container newbubblehe ${a?"visible":"invisible"}`,onClick:g=>Y().selectRoomObject(e.roomId,e.senderId,Q.UNIT),children:[e.styleId===0&&t("div",{className:"user-container-bg",style:{backgroundColor:e.color}}),l("div",{className:`chat-bubble bubble-${e.styleId} type-${e.type}`,style:{maxWidth:p},children:[t("div",{className:"user-container",children:e.imageUrl&&e.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${e.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${e.username}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${e.formattedText}`}})]}),t("div",{className:"pointer"})]})]})},Tx=o=>{const{chatMessages:e=[],setChatMessages:n=null,chatSettings:r=null,getScrollSpeed:a=6e3}=AN(),s=i.exports.useRef(),c=i.exports.useCallback(()=>{n(p=>{if(p){const g=p.filter(h=>h.top>-h.height*2);if(g.length!==p.length)return g}return p})},[n]),u=i.exports.useCallback((p,g,h)=>{for(let f=e.indexOf(p)-1;f>=0;f--){const E=e[f];if(!(!E||p===E||h.indexOf(E)>=0||E.top+E.height-g>p.top+p.height)&&bb(p,E,-g,0)){const I=Math.abs(E.top+E.height-p.top);h.push(E),E.top-=I,E.skipMovement=!0,u(E,I,h)}}},[e]),d=i.exports.useCallback(p=>{if(r.mode===_t.CHAT_MODE_FREE_FLOW)p.skipMovement=!0,u(p,0,[p]),c();else{const g=p.top+p.height,h=p.height,f=s.current.offsetHeight-g,E=h-f;f<h&&(n(I=>(I.forEach(_=>{_!==p&&(_.top-=E)}),I)),c())}},[r,u,c,n]);return i.exports.useEffect(()=>{const p=(g=null)=>{if(!s||!s.current)return;const h=s.current.offsetHeight,f=Math.round(document.body.offsetHeight*K("chat.viewer.height.percentage"));s.current.style.height=`${f}px`,n(E=>(E&&E.forEach(I=>I.top-=h-f),E))};return window.addEventListener("resize",p),p(),()=>{window.removeEventListener("resize",p)}},[n]),i.exports.useEffect(()=>{const p=h=>{n(f=>(f.forEach(E=>{if(E.skipMovement){E.skipMovement=!1;return}E.top-=h}),f)),c()},g=new Sx(bx);return g.onmessage=()=>p(15),g.postMessage({action:"START",content:a}),()=>{g.postMessage({action:"STOP"})}},[a,c,n]),t("div",{ref:s,className:"nitro-chat-widget",children:e.map(p=>t(Nx,{chat:p,makeRoom:d,bubbleWidth:r.weight},p.id))})},bm=o=>{const{title:e=null,items:n=[],selectItem:r=null,onClose:a=null}=o,[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(""),p=W().isModerator,g=i.exports.useMemo(()=>{const h=u.toLocaleLowerCase();return n.filter(f=>{var E;return(E=f.name)==null?void 0:E.toLocaleLowerCase().includes(h)})},[n,u]);return i.exports.useEffect(()=>{s&&r(s)},[s,r]),l(ae,{className:"nitro-chooser-widget",theme:"primary-slim",children:[t(oe,{headerText:e,onCloseClick:a}),l(se,{overflow:"hidden",gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:u,onChange:h=>d(h.target.value)}),t(fa,{rows:g,rowRender:h=>t(v,{alignItems:"center",className:Ht("rounded p-1",s===h&&"bg-muted"),pointer:!0,onClick:f=>c(h),children:l(S,{truncate:!0,children:[h.name," ",p&&" - "+h.id]})})})]})]})},vx=o=>{const{items:e=null,onClose:n=null,selectItem:r=null,populateChooser:a=null}=GN();return i.exports.useEffect(()=>{const s={linkReceived:c=>{c.split("/"),a()},eventUrlPrefix:"furni-chooser/"};return It(s),()=>Et(s)},[a]),e?t(bm,{title:m("widget.chooser.furni.title"),items:e,selectItem:r,onClose:n}):null},wx=o=>{const{items:e=null,onClose:n=null,selectItem:r=null,populateChooser:a=null}=zN();return i.exports.useEffect(()=>{const s={linkReceived:c=>{c.split("/"),a()},eventUrlPrefix:"user-chooser/"};return It(s),()=>Et(s)},[a]),e?t(bm,{title:m("widget.chooser.user.title"),items:e,selectItem:r,onClose:n}):null},yx=o=>{const[e,n]=i.exports.useState(!1),{users:r=[],answer:a=null}=DN();return i.exports.useEffect(()=>{n(!!r.length)},[r]),e?l(ae,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[t(oe,{headerText:m("navigator.doorbell.title"),onCloseClick:s=>n(!1)}),l(se,{overflow:"hidden",gap:0,children:[t(T,{gap:2,children:l(te,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[t(L,{className:"g-col-6",children:m("generic.username")}),t(L,{className:"g-col-6"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:r&&r.length>0&&r.map(s=>l(te,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[t(L,{className:"g-col-6",children:s}),t(L,{className:"g-col-6",children:l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(M,{variant:"success",onClick:()=>a(s,!0),children:m("generic.accept")}),t(M,{variant:"danger",onClick:()=>a(s,!1),children:m("generic.deny")})]})})]},s))})]})]}):null},hl=o=>{const{objectId:e=-1,category:n=-1,noFollow:r=!1,position:a="absolute",...s}=o,[c,u]=i.exports.useState({x:-1,y:-1}),d=i.exports.useRef();return i.exports.useEffect(()=>{let p=!1;const g=()=>{const f=Ae();return ji(f.roomId,e,n,1)},h=()=>{const f=g();!f||!d.current||u({x:Math.round(f.left+f.width/2-d.current.offsetWidth/2),y:Math.round(f.top-d.current.offsetHeight+10)})};return r?h():(p=!0,fr().add(h)),()=>{p&&fr().remove(h)}},[e,n,r]),t(L,{innerRef:d,position:a,visible:c.x+(d.current?d.current.offsetWidth:0)>-1,className:"object-location",style:{left:c.x,top:c.y},...s})},xx=o=>{const{roomIndex:e=-1,request:n=null,hideFriendRequest:r=null,requestResponse:a=null}=o;return t(hl,{objectId:e,category:Q.UNIT,children:t(L,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:l(T,{children:[l(v,{alignItems:"center",justifyContent:"between",gap:2,children:[t(S,{variant:"white",fontSize:6,children:m("widget.friendrequest.from",["username"],[n.name])}),t(_n,{className:"cursor-pointer fa-icon",onClick:s=>r(n.requesterUserId)})]}),l(v,{justifyContent:"end",gap:1,children:[t(M,{variant:"danger",onClick:s=>a(n.requesterUserId,!1),children:m("widget.friendrequest.decline")}),t(M,{variant:"success",onClick:s=>a(n.requesterUserId,!0),children:m("widget.friendrequest.accept")})]})]})})})},Rx=o=>{const{displayedRequests:e=[],hideFriendRequest:n=null}=FN(),{requestResponse:r=null}=pn();return e.length?t(V,{children:e.map((a,s)=>t(xx,{roomIndex:a.roomIndex,request:a.request,hideFriendRequest:n,requestResponse:r},s))}):null},Ox=o=>{const{productType:e=me.FLOOR,classId:n=-1,extraParam:r=void 0}=o;switch(e){case me.WALL:case me.FLOOR:return t(el,{productType:e,productClassId:n});case me.BADGE:return t(Ye,{badgeCode:r});case me.HABBO_CLUB:return t(ct,{type:"hc"})}return null},kx=o=>{const{ownerId:e=-1}=o,[n,r]=i.exports.useState(0),[a,s]=i.exports.useState(void 0),c=()=>{n===1&&D(new JC(e)),r(0),s(void 0)};U(KC,d=>{r(1)}),U(XC,d=>{r(0),s(void 0)}),U(QC,d=>{const p=d.getParser();s({contentType:p.contentType,classId:p.classId}),r(2)});const u=W().userId===e;return n===0?null:l(ae,{className:"nitro-mysterybox-dialog",theme:"primary-slim",children:[t(oe,{headerText:m(n===1?`mysterybox.dialog.${u?"owner":"other"}.title`:"mysterybox.reward.title"),onCloseClick:c}),l(se,{children:[n===1&&l(V,{children:[l(S,{variant:"primary",children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.subtitle`)," "]}),l(S,{children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.description`)," "]}),l(S,{children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.waiting`)]}),l(M,{variant:"danger",onClick:c,className:"mt-auto",children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.cancel`)," "]})]}),n===2&&a&&l(V,{children:[l(S,{variant:"black",children:[" ",m("mysterybox.reward.text")," "]}),t(v,{className:"prize-container justify-content-center mx-auto",children:t(Ox,{classId:a.classId,productType:a.contentType})}),l(M,{variant:"success",onClick:c,className:"mt-auto",children:[" ",m("mysterybox.reward.close")," "]})]})]})]})},Ax=o=>{const{objectId:e=-1,onClose:n=null}=o,[r,a]=i.exports.useState(""),s=()=>{D(new ZC(e,r)),n()};return e===-1?null:l(ae,{className:"nitro-mysterytrophy-dialog no-resize",theme:"primary-slim",children:[t(oe,{center:!0,headerText:m("mysterytrophy.header.title"),onCloseClick:n}),l(se,{children:[l(v,{className:"mysterytrophy-dialog-top p-3",children:[t("div",{className:"mysterytrophy-image flex-shrink-0"}),t("div",{className:"m-2",children:t(S,{variant:"white",className:"mysterytrophy-text-big",children:m("mysterytrophy.header.description")})})]}),t(v,{className:"mysterytrophy-dialog-bottom p-2",children:l(T,{gap:1,children:[l(v,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-mysterytrophy-dialog",children:[t("textarea",{className:"form-control form-control-sm input-mysterytrophy",value:r,onChange:c=>a(c.target.value)}),t("div",{className:"mysterytrophy-pencil-image flex-shrink-0 small fa-icon"})]}),l(v,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(S,{pointer:!0,className:"text-decoration",onClick:()=>n(),children:m("cancel")}),t(M,{variant:"success",onClick:()=>s(),children:m("generic.ok")})]})]})})]})]})},Px=o=>{const{objectId:e=-1,onClose:n=null}=o,{roomSession:r=null}=We(),a=()=>{r.useMultistateItem(e),n()};return l(ae,{className:"nitro-use-product-confirmation",children:[t(oe,{headerText:m("effectbox.header.title"),onCloseClick:n}),t(se,{center:!0,children:t(v,{gap:2,children:l(T,{justifyContent:"between",children:[t(S,{children:m("effectbox.header.description")}),l(v,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:n,children:m("generic.cancel")}),t(M,{variant:"success",onClick:a,children:m("generic.ok")})]})]})})})]})},Uo=-1,Dx=0,Lx=o=>{const{objectId:e=-1,onClose:n=null}=o,[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(Uo),{roomSession:u=null}=We(),d=()=>{u.useMultistateItem(e),n()};return i.exports.useEffect(()=>{if(!u||e===-1)return;const p=ca(u.roomId,e,Q.FLOOR);if(!p)return;a(p);let g=Uo;switch(p.specialType){case Z.MONSTERPLANT_SEED:g=Dx;break}if(g===Uo){n();return}c(g)},[u,e,n]),s===Uo?null:l(ae,{className:"nitro-use-product-confirmation",children:[t(oe,{headerText:m("useproduct.widget.title.plant_seed",["name"],[r.name]),onCloseClick:n}),t(se,{center:!0,children:l(v,{gap:2,overflow:"hidden",children:[t(T,{children:t(L,{className:"product-preview",children:t(L,{className:"monsterplant-image"})})}),l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:2,children:[t(S,{children:m("useproduct.widget.text.plant_seed",["productName"],[r.name])}),t(S,{children:m("useproduct.widget.info.plant_seed")})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:n,children:m("useproduct.widget.cancel")}),t(M,{variant:"success",onClick:d,children:m("widget.monsterplant_seed.button.use")})]})]})]})})]})},Fo=-1,Mx=0,Ux=o=>{const{objectId:e=-1,onClose:n=null}=o,[r,a]=i.exports.useState(Fo),[s,c]=i.exports.useState(ue.MALE),[u,d]=i.exports.useState(null),{roomSession:p=null}=We(),g=()=>{fi().send(new e_(e)),fi().send(new Gu(s,u)),n()};return i.exports.useEffect(()=>{let h=Fo;const f=W().figure,E=W().gender,I=[];if(p&&e>=0){const _=ca(p.roomId,e,Q.FLOOR);if(_)switch(_.specialType){case Z.FIGURE_PURCHASABLE_SET:h=Mx;const C=_.customParams.split(",").map(b=>parseInt(b));for(const b of C)vt().isValidFigureSetForGender(b,E)&&I.push(b);break}}if(h===Fo){n();return}c(E),d(vt().getFigureStringWithFigureIds(f,E,I)),a(h)},[p,e,n]),r===Fo?null:l(ae,{className:"nitro-use-product-confirmation",children:[t(oe,{headerText:m("useproduct.widget.title.bind_clothing"),onCloseClick:n}),t(se,{center:!0,children:l(v,{gap:2,overflow:"hidden",children:[t(T,{children:t(L,{className:"mannequin-preview",children:t(ot,{figure:u,direction:2})})}),l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:2,children:[t(S,{children:m("useproduct.widget.text.bind_clothing")}),t(S,{children:m("useproduct.widget.info.bind_clothing")})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:n,children:m("useproduct.widget.cancel")}),t(M,{variant:"success",onClick:g,children:m("useproduct.widget.bind_clothing")})]})]})]})})]})},Fx=o=>{const{closeConfirm:e=null,processAction:n=null,onClose:r=null,objectId:a=-1,mode:s=null,confirmMode:c=null,confirmingObjectId:u=-1,groupData:d=null,isGroupMember:p=!1,objectOwnerId:g=-1}=FS(),{simpleAlert:h=null}=Ze();U(t_,E=>{const I=E.getParser();if(I)switch(I.count){case 1:h(m("costumehopper.costumerequired.bodytext"),null,"catalog/open/temporary_effects",m("costumehopper.costumerequired.buy"),m("costumehopper.costumerequired.header"),null);break;case 2:h(m("viphopper.viprequired.bodytext"),null,"catalog/open/habbo_club",m("viprequired.buy.vip"),m("viprequired.header"),null);break;case 3:h(m("gate.viprequired.bodytext"),null,"catalog/open/habbo_club",m("viprequired.buy.vip"),m("gate.viprequired.title"),null);break}});const f=W().userId===g;return l(V,{children:[c===yi&&t(Lx,{objectId:u,onClose:e}),c===xi&&t(Ux,{objectId:u,onClose:e}),c===Qd&&t(Px,{objectId:u,onClose:e}),c===Ri&&t(Ax,{objectId:u,onClose:e}),t(kx,{ownerId:g}),a>=0&&s&&l(ar,{objectId:a,category:Q.FLOOR,onClose:r,fades:!0,children:[s===Ut.FRIEND_FURNITURE&&l(V,{children:[t($t,{children:m("friendfurni.context.title")}),t(z,{onClick:E=>n("use_friend_furni"),children:m("friendfurni.context.use")})]}),s===Ut.MONSTERPLANT_SEED&&l(V,{children:[t($t,{children:m("furni.mnstr_seed.name")}),t(z,{onClick:E=>n("use_monsterplant_seed"),children:m("widget.monsterplant_seed.button.use")})]}),s===Ut.RANDOM_TELEPORT&&l(V,{children:[t($t,{children:m("furni.random_teleport.name")}),t(z,{onClick:E=>n("use_random_teleport"),children:m("widget.random_teleport.button.use")})]}),s===Ut.PURCHASABLE_CLOTHING&&l(V,{children:[t($t,{children:m("furni.generic_usable.name")}),t(z,{onClick:E=>n("use_purchaseable_clothing"),children:m("widget.generic_usable.button.use")})]}),s===Ut.MYSTERY_BOX&&l(V,{children:[t($t,{children:m("mysterybox.context.title")}),t(z,{onClick:E=>n("use_mystery_box"),children:m("mysterybox.context."+(f?"owner":"other")+".use")})]}),s===Ut.MYSTERY_TROPHY&&l(V,{children:[t($t,{children:m("mysterytrophy.header.title")}),t(z,{onClick:E=>n("use_mystery_trophy"),children:m("friendfurni.context.use")})]}),s===Xd&&d&&l(V,{children:[t($t,{className:"cursor-pointer text-truncate",onClick:()=>ro(d.guildId),children:d.guildName}),!p&&t(z,{onClick:E=>n("join_group"),children:m("widget.furniture.button.join.group")}),t(z,{onClick:E=>n("go_to_group_homeroom"),children:m("widget.furniture.button.go.to.group.home.room")}),d.guildHasReadableForum&&t(z,{onClick:E=>n("open_forum"),children:m("widget.furniture.button.open_group_forum")})]})]})]})},Bx=o=>{const{objectId:e=-1,color:n=0,setColor:r=null,applyToner:a=null,toggleToner:s=null,onClose:c=null}=DS();return e===-1?null:l(ae,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[t(oe,{headerText:m("widget.backgroundcolor.title"),onCloseClick:c}),l(se,{overflow:"hidden",justifyContent:"between",children:[t(T,{overflow:"auto",gap:1,children:t("input",{type:"color",className:"form-control",value:en.makeColorNumberHex(n),onChange:u=>r(en.convertFromHex(u.target.value))})}),l(T,{gap:1,children:[t(M,{fullWidth:!0,variant:"primary",onClick:s,children:m("widget.backgroundcolor.button.on")}),t(M,{fullWidth:!0,variant:"primary",onClick:a,children:m("widget.backgroundcolor.button.apply")})]})]})]})},Gx=o=>{const{objectId:e=-1,color:n="1",badgeName:r="",badgeDesc:a="",date:s="",senderName:c="",onClose:u=null}=MS();return e===-1?null:t(Dd,{color:n,message:a,date:s,senderName:c,customTitle:r,onCloseClick:u})},Vx=o=>{const{objectId:e=-1,recipes:n=[],ingredients:r=[],selectedRecipe:a=null,requiredIngredients:s=null,isCrafting:c=!1,craft:u=null,selectRecipe:d=null,onClose:p=null}=GS(),{roomSession:g=null}=We(),[h,f]=i.exports.useState(!1),E=i.exports.useMemo(()=>{const C=Y().getRoomObject(g.roomId,e,Q.FLOOR);return jt(C)},[e,g.roomId]),I=i.exports.useMemo(()=>{if(!s||!s.length)return!1;for(const C of s){const b=r.find(N=>N.name===C.itemName);if(!b||b.count<C.count)return!1}return!0},[r,s]),_=()=>{if(!h){f(!0);return}u(),f(!1)};return i.exports.useEffect(()=>{f(!1)},[a]),e===-1?null:l(ae,{className:"nitro-widget-crafting",theme:"primary-slim",children:[t(oe,{headerText:m("crafting.title"),onCloseClick:p}),t(se,{children:l(v,{grow:!0,overflow:"hidden",gap:2,children:[l(v,{column:!0,fullWidth:!0,gap:2,children:[l(T,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:m("crafting.title.products")}),t(Ge,{columnCount:5,children:n.length>0&&n.map(C=>t(Ne,{itemImage:C.iconUrl,itemActive:a&&a.name===C.name,onClick:()=>d(C)},C.name))})]}),l(T,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:m("crafting.title.mixer")}),t(Ge,{columnCount:5,children:r.length>0&&r.map(C=>t(Ne,{itemImage:C.iconUrl,itemCount:C.count,itemCountMinimum:0,className:(C.count?"":"opacity-0-5 ")+"cursor-default"},C.name))})]})]}),l(v,{column:!0,fullWidth:!0,gap:2,children:[!a&&t(T,{center:!0,fullHeight:!0,className:"text-black text-center",children:m("crafting.info.start")}),a&&l(V,{children:[l(T,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:m("crafting.current_recipe")}),t(Ge,{columnCount:5,children:!!s&&s.length>0&&s.map(C=>{const b=r.find(w=>w.name===C.itemName),N=[];for(let w=0;w<C.count;w++)N.push(t(Ne,{itemImage:b.iconUrl,className:(b.count-w<=0?"opacity-0-5 ":"")+"cursor-default"},w));return N})})]}),l(v,{gap:2,column:!0,fullHeight:!0,children:[l(v,{gap:2,className:"bg-muted rounded",column:!0,fullHeight:!0,children:[t("div",{className:"py-1 text-center",children:m("crafting.result")}),l(v,{gap:1,center:!0,column:!0,fullHeight:!0,className:"pb-1",children:[t(T,{fullHeight:!0,children:t("img",{src:a.iconUrl})}),t("div",{className:"text-black",children:a.localizedName})]})]}),l(M,{variant:!E||!I?"danger":h?"warning":c?"primary":"success",disabled:!E||!I||c,onClick:_,children:[!c&&m(E?I?h?"generic.confirm":"crafting.btn.craft":"crafting.status.recipe.incomplete":"crafting.btn.notowner"),c&&t(tl,{})]})]})]})]})]})})]})},Hx=o=>{const[e,n]=i.exports.useState(!1),{presets:r=[],dimmerState:a=0,selectedPresetId:s=0,color:c=16777215,brightness:u=255,effectId:d=0,selectedColor:p=0,setSelectedColor:g=null,selectedBrightness:h=0,setSelectedBrightness:f=null,selectedEffectId:E=0,setSelectedEffectId:I=null,selectPresetId:_=null,applyChanges:C}=HS(),b=()=>{on.previewDimmer(c,u,d===2),n(!1)};we(Re.REMOVE_DIMMER,w=>n(!1)),i.exports.useEffect(()=>{!r||!r.length||n(!0)},[r]);const N=i.exports.useMemo(()=>K("widget.dimmer.colorwheel",!1),[]);return e?l(ae,{className:"nitro-room-widget-dimmer",children:[t(oe,{headerText:m("widget.dimmer.title"),onCloseClick:b}),a===1&&t(Er,{children:r.map(w=>t(qn,{isActive:s===w.id,onClick:O=>_(w.id),children:m(`widget.dimmer.tab.${w.id}`)},w.id))}),l(se,{children:[a===0&&l(T,{alignItems:"center",children:[t(L,{className:"dimmer-banner"}),t(S,{center:!0,className:"bg-muted rounded p-1",children:m("widget.dimmer.info.off")}),t(M,{fullWidth:!0,variant:"success",onClick:()=>on.changeState(),children:m("widget.dimmer.button.on")})]}),a===1&&l(V,{children:[l(T,{gap:1,children:[t(S,{fontWeight:"bold",children:m("widget.backgroundcolor.hue")}),N&&t("input",{type:"color",className:"form-control",value:en.makeColorNumberHex(p),onChange:w=>g(en.convertFromHex(w.target.value))}),!N&&t(te,{gap:1,columnCount:7,children:on.AVAILABLE_COLORS.map((w,O)=>t(T,{fullWidth:!0,pointer:!0,className:Ht("color-swatch rounded",w===p&&"active"),onClick:()=>g(w),style:{backgroundColor:on.HTML_COLORS[O]}},O))})]}),l(T,{gap:1,children:[t(S,{fontWeight:"bold",children:m("widget.backgroundcolor.lightness")}),t(Dt,{className:"nitro-slider",min:on.MIN_BRIGHTNESS,max:on.MAX_BRIGHTNESS,value:h,onChange:w=>f(w),thumbClassName:"thumb percent",renderThumb:(w,O)=>t("div",{...w,children:on.scaleBrightness(O.valueNow)})})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:E===2,onChange:w=>I(w.target.checked?2:1)}),t(S,{children:m("widget.dimmer.type.checkbox")})]}),l(v,{gap:1,children:[t(M,{fullWidth:!0,variant:"danger",onClick:()=>on.changeState(),children:m("widget.dimmer.button.off")}),t(M,{fullWidth:!0,variant:"success",onClick:C,children:m("widget.dimmer.button.apply")})]})]})]})]}):null},Wx=o=>{const{objectId:e=-1,value:n=0,onClose:r=null,redeem:a=null}=jS();return e===-1?null:l(ae,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[t(oe,{headerText:m("catalog.redeem.dialog.title"),onCloseClick:r}),t(se,{center:!0,children:l(v,{overflow:"hidden",gap:2,children:[t(T,{center:!0,children:t(L,{className:"exchange-image"})}),l(T,{grow:!0,justifyContent:"between",overflow:"hidden",children:[l(T,{gap:1,overflow:"auto",children:[t(S,{fontWeight:"bold",children:m("creditfurni.description",["credits"],[n.toString()])}),t(S,{children:m("creditfurni.prompt")})]}),t(M,{variant:"success",onClick:a,children:m("catalog.redeem.dialog.button.exchange")})]})]})})]})},jx=o=>{const{currentIndex:e=-1,currentPhotos:n=null}=o,[r,a]=i.exports.useState(0),s=n&&n.length?n[r]:null,c=()=>{a(d=>{let p=d+1;return p>=n.length&&(p=0),p})},u=()=>{a(d=>{let p=d-1;return p<0&&(p=n.length-1),p})};return i.exports.useEffect(()=>{a(e)},[e]),s?l(te,{style:{display:"flex",flexDirection:"column"},children:[t(v,{center:!0,className:"picture-preview border border-black",style:s.w?{backgroundImage:"url("+s.w+")"}:{},children:!s.w&&t(S,{bold:!0,children:m("camera.loading")})}),s.m&&s.m.length&&t(S,{center:!0,children:s.m}),l(v,{alignItems:"center",justifyContent:"between",children:[t(S,{children:s.n||""}),t(S,{children:new Date(s.t*1e3).toLocaleDateString()})]}),n.length>1&&l(v,{className:"picture-preview-buttons",children:[t(fu,{className:"cursor-pointer picture-preview-buttons-previous fa-icon",onClick:u}),t(S,{underline:!0,className:"cursor-pointer",onClick:d=>tn(s.oi),children:s.o}),t(Iu,{className:"cursor-pointer picture-preview-buttons-next fa-icon",onClick:c})]})]}):null},qx=o=>{const{objectId:e=-1,currentPhotoIndex:n=-1,currentPhotos:r=null,onClose:a=null}=zS(),{report:s=null}=Ln();return e===-1||n===-1?null:l(ae,{className:"nitro-external-image-widget",theme:"primary-slim",children:[t(oe,{headerText:"",isGalleryPhoto:!0,onReportPhoto:()=>s(qe.PHOTO,{extraData:r[n].w,roomId:r[n].s,reportedUserId:W().userId,roomObjectId:Number(r[n].u)}),onCloseClick:a}),t(se,{children:t(jx,{currentIndex:n,currentPhotos:r})})]})},zx=o=>{const{objectId:e=-1,type:n=0,stage:r=0,usernames:a=[],figures:s=[],date:c=null,onClose:u=null,respond:d=null}=$S();if(e===-1)return null;if(r>0)return l(ae,{className:"nitro-engraving-lock",theme:"primary-slim",children:[t(oe,{headerText:m("friend.furniture.confirm.lock.caption"),onCloseClick:u}),l(se,{children:[t("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:m("friend.furniture.confirm.lock.subtitle")}),t("div",{className:"d-flex justify-content-center mb-2",children:t("div",{className:`engraving-lock-stage-${r}`})}),r===2&&t("div",{className:"text-small text-black text-center mb-2",children:m("friend.furniture.confirm.lock.other.locked")}),l(v,{gap:1,children:[t(M,{fullWidth:!0,onClick:p=>d(!1),children:m("friend.furniture.confirm.lock.button.cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:p=>d(!0),children:m("friend.furniture.confirm.lock.button.confirm")})]})]})]});if(a.length>0)return t(Or,{handleSelector:".nitro-engraving-lock-view",children:l("div",{className:`nitro-engraving-lock-view engraving-lock-${n}`,children:[t("div",{className:"engraving-lock-close",onClick:u}),l(v,{justifyContent:"center",children:[t("div",{className:"engraving-lock-avatar",children:t(ot,{figure:s[0],direction:2})}),t("div",{className:"engraving-lock-avatar",children:t(ot,{figure:s[1],direction:4})})]}),l(T,{justifyContent:"between",className:"mt-1",children:[l(T,{alignItems:"center",justifyContent:"center",gap:1,children:[l("div",{children:[n===0&&m("lovelock.engraving.caption"),n===3&&m("wildwest.engraving.caption")]}),t("div",{children:c})]}),l(v,{justifyContent:"center",gap:4,children:[t("div",{children:a[0]}),t("div",{children:a[1]})]})]})]})})},Yx=o=>{const{objectId:e=-1,classId:n=-1,itemType:r=null,text:a=null,isOwnerOfFurniture:s=!1,senderName:c=null,senderFigure:u=null,placedItemId:d=-1,placedItemType:p=null,placedInRoom:g=!1,imageUrl:h=null,openPresent:f=null,onClose:E=null}=cN(),{groupItems:I=[]}=Zr();if(e===-1)return null;const _=C=>{const b=I.find(N=>{var w;return((w=N.getItemById(C))==null?void 0:w.id)===C});b&&_s(b),E()};return l(ae,{className:"nitro-gift-opening",theme:"primary-slim",children:[t(oe,{headerText:m(c?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[c]),onCloseClick:E}),l(se,{children:[d===-1&&l(T,{overflow:"hidden",children:[t(v,{center:!0,overflow:"auto",children:t(Ad,{userName:c,figure:u,message:a})}),s&&l(v,{gap:1,children:[c&&t(M,{fullWidth:!0,onClick:C=>ee("catalog/open"),children:m("widget.furni.present.give_gift",["name"],[c])}),t(M,{fullWidth:!0,variant:"success",onClick:f,children:m("widget.furni.present.open_gift")})]})]}),d>-1&&l(v,{gap:2,overflow:"hidden",children:[t(T,{center:!0,className:"p-2",children:t(or,{imageUrl:h})}),l(T,{grow:!0,children:[l(T,{center:!0,gap:1,children:[t(S,{wrap:!0,small:!0,children:m("widget.furni.present.message_opened")}),t(S,{bold:!0,fontSize:5,children:a})]}),l(T,{grow:!0,gap:1,children:[l(v,{gap:1,children:[g&&t(M,{fullWidth:!0,onClick:null,children:m("widget.furni.present.put_in_inventory")}),t(M,{fullWidth:!0,variant:"success",onClick:C=>_(d),children:m(g?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),c&&c.length&&t(M,{fullWidth:!0,onClick:C=>ee("catalog/open"),children:m("widget.furni.present.give_gift",["name"],[c])})]})]})]})]})]})},$x=o=>{const{stuffDatas:e=null,getScoreType:n=null,getClearType:r=null}=JS();return!e||!e.size?null:t(V,{children:Array.from(e.entries()).map(([a,s],c)=>t(hl,{objectId:a,category:Q.FLOOR,children:l(T,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[t($t,{children:m("high.score.display.caption",["scoretype","cleartype"],[m(`high.score.display.scoretype.${n(s.scoreType)}`),m(`high.score.display.cleartype.${r(s.clearType)}`)])}),l(_m,{overflow:"hidden",gap:1,className:"h-100",children:[l(T,{gap:1,children:[l(v,{alignItems:"center",children:[t(S,{center:!0,bold:!0,variant:"white",className:"col-8",children:m("high.score.display.users.header")}),t(S,{center:!0,bold:!0,variant:"white",className:"col-4",children:m("high.score.display.score.header")})]}),t("hr",{className:"m-0"})]}),t(T,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:s.entries.map((u,d)=>l(v,{alignItems:"center",children:[t(S,{center:!0,variant:"white",className:"col-8",children:u.users.join(", ")}),t(S,{center:!0,variant:"white",className:"col-4",children:u.score})]},d))})]})]})},c))})},Kx=o=>(tN(),null),Xx=-1,Bo=0,ai=1,ii=2,li=3,ci=4,Qx=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState(Xx),{objectId:s=-1,figure:c=null,gender:u=null,clubLevel:d=dn.NO_CLUB,name:p=null,setName:g=null,saveFigure:h=null,wearFigure:f=null,saveName:E=null,onClose:I=null}=rN();return i.exports.useEffect(()=>{if(s===-1)return;const _=Ae();if(_.isRoomOwner||_.controllerLevel>=tt.GUEST||W().isModerator){a(Bo);return}if(W().gender.toLowerCase()!==u.toLowerCase()){a(ci);return}if(En()<d){a(li);return}a(ii)},[s,u,d]),i.exports.useEffect(()=>{switch(r){case Bo:case ci:{const _=vt().createFigureContainer(c);ps.transformAsMannequinFigure(_),n(_.getFigureString());break}case ai:{const _=vt().createFigureContainer(W().figure);ps.transformAsMannequinFigure(_),n(_.getFigureString());break}case ii:case li:{const _=ps.getMergedMannequinFigureContainer(W().figure,c);n(_.getFigureString());break}}},[r,c,d]),s===-1?null:l(ae,{className:"nitro-mannequin no-resize",theme:"primary-slim",children:[t(oe,{headerText:m("mannequin.widget.title"),onCloseClick:I}),t(se,{center:!0,children:l(v,{fullWidth:!0,gap:2,overflow:"hidden",children:[t(T,{children:l(L,{position:"relative",className:"mannequin-preview",children:[t(ot,{position:"absolute",figure:e,direction:2}),d>0&&t(ct,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),l(T,{grow:!0,justifyContent:"between",overflow:"auto",children:[r===Bo&&l(V,{children:[t("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:_=>g(_.target.value),onBlur:E}),l(T,{gap:1,children:[t(M,{variant:"success",onClick:_=>a(ai),children:m("mannequin.widget.style")}),t(M,{variant:"success",onClick:f,children:m("mannequin.widget.wear")})]})]}),r===ai&&l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:p}),t(S,{wrap:!0,children:m("mannequin.widget.savetext")})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(S,{underline:!0,pointer:!0,onClick:_=>a(Bo),children:m("mannequin.widget.back")}),t(M,{variant:"success",onClick:h,children:m("mannequin.widget.save")})]})]}),r===ii&&l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:p}),t(S,{children:m("mannequin.widget.weartext")})]}),t(M,{variant:"success",onClick:f,children:m("mannequin.widget.wear")})]}),r===li&&t(v,{center:!0,grow:!0,children:t(S,{children:m("mannequin.widget.clubnotification")})}),r===ci&&t(S,{children:m("mannequin.widget.wronggender")})]})]})})]})},Jx=o=>(mN(),null),Sm=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],Zx=["blue","pink","green","yellow"],eR=o=>{let e=Sm.indexOf(o);return e===-1&&(e=0),Zx[e]},tR=o=>{const{objectId:e=-1,color:n="0",setColor:r=null,text:a="",setText:s=null,canModify:c=!1,onClose:u=null}=pN();return e===-1?null:t(Or,{handleSelector:".drag-handler",windowPosition:Pt.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+eR(n),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:c&&l(V,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:u}),Sm.map(d=>t("div",{className:"stickie-color ms-1",onClick:p=>r(d),style:{backgroundColor:en.makeColorHex(d)}},d))]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:u})]}),t("div",{className:"stickie-context",children:t("textarea",{className:"context-text",value:a,onChange:d=>s(d.target.value),tabIndex:0,autoFocus:!0})})]})})},nR=o=>{const{objectId:e=-1,height:n=0,maxHeight:r=40,onClose:a=null,updateHeight:s=null}=fN(),[c,u]=i.exports.useState(""),d=p=>{u(p);const g=parseFloat(p);isNaN(g)||g===n||s(g)};return i.exports.useEffect(()=>{u(n.toString())},[n]),e===-1?null:l(ae,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[t(oe,{headerText:m("widget.custom.stack.height.title"),onCloseClick:a}),l(se,{justifyContent:"between",children:[t(S,{children:m("widget.custom.stack.height.text")}),l(v,{gap:2,children:[t(Dt,{className:"nitro-slider",min:0,max:r,step:.01,value:n,onChange:p=>s(p),renderThumb:(p,g)=>t("div",{...p,children:g.valueNow})}),t("input",{className:"show-number-arrows",style:{width:50},type:"number",min:0,max:r,value:c,onChange:p=>d(p.target.value)})]}),l(T,{gap:1,children:[t(M,{onClick:p=>D(new pi(e,-100)),children:m("furniture.above.stack")}),t(M,{onClick:p=>D(new pi(e,0)),children:m("furniture.floor.level")})]})]})]})},Nm=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],rR=["blue","pink","green","yellow"],sR=["post_it","post_it_shakesp","post_it_dreams","post_it_xmas","post_it_vd","post_it_juninas"],oR=["post_it","shakesp","dreams","christmas","heart","juninas"],aR=o=>{let e=Nm.indexOf(o);return e===-1&&(e=0),rR[e]},iR=o=>{let e=sR.indexOf(o);return e===-1&&(e=0),oR[e]},lR=o=>{const{objectId:e=-1,color:n="0",text:r="",type:a="",canModify:s=!1,updateColor:c=null,updateText:u=null,trash:d=null,onClose:p=null}=EN(),[g,h]=i.exports.useState(!1);return i.exports.useEffect(()=>{h(!1)},[e,n,r,a]),e===-1?null:t(Or,{handleSelector:".drag-handler",windowPosition:Pt.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+(a=="post_it"?aR(n):iR(a)),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:s&&l(V,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:d}),a=="post_it"&&t(V,{children:Nm.map(f=>t("div",{className:"stickie-color ms-1",onClick:E=>c(f),style:{backgroundColor:en.makeColorHex(f)}},f))})]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:p})]}),t("div",{className:"stickie-context",children:!g||!s?t("div",{className:"context-text",onClick:f=>s&&h(!0),children:r}):t("textarea",{className:"context-text",defaultValue:r,tabIndex:0,onBlur:f=>u(f.target.value),autoFocus:!0})})]})})},cR=o=>{const{objectId:e=-1,color:n="1",senderName:r="",date:a="",message:s="",onClose:c=null}=_N();return e===-1?null:t(Dd,{color:n,message:s,date:a,senderName:r,onCloseClick:c})},uR=o=>{const[e,n]=i.exports.useState(null),{objectId:r=-1,videoId:a=null,videoStart:s=0,videoEnd:c=0,currentVideoState:u=null,selectedVideo:d=null,playlists:p=[],onClose:g=null,previous:h=null,next:f=null,pause:E=null,play:I=null,selectVideo:_=null}=wN(),C=N=>{if(n(N.target),r!==-1)switch(N.target.getPlayerState()){case-1:case 1:u!==1&&I();return;case 2:u!==2&&E()}};if(i.exports.useEffect(()=>{if(!(u===null||!e)){if(u===kn.PLAYING&&e.getPlayerState()!==kn.PLAYING){e.playVideo();return}if(u===kn.PAUSED&&e.getPlayerState()!==kn.PAUSED){e.pauseVideo();return}}},[u,e]),r===-1)return null;const b={height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:s,end:c}};return l(ae,{className:"youtube-tv-widget",children:[t(oe,{headerText:m("catalog.page.youtube_tvs"),onCloseClick:g}),t(se,{children:l("div",{className:"row w-100 h-100",children:[l("div",{className:"youtube-video-container col-9 overflow-hidden",children:[a&&a.length>0&&t($m,{videoId:a,opts:b,onReady:N=>n(N.target),onStateChange:C,containerClassName:"youtubeContainer"}),(!a||a.length===0)&&t("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:m("widget.furni.video_viewer.no_videos")})]}),l("div",{className:"playlist-container col-3 d-flex flex-column",children:[l("span",{className:"playlist-controls justify-content-center d-flex",children:[t("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:h}),t("i",{className:"icon icon-youtube-next cursor-pointer",onClick:f})]}),t("div",{className:"mb-1",children:m("widget.furni.video_viewer.playlists")}),t(Ge,{columnCount:1,columnMinWidth:80,columnMinHeight:100,className:"mb-1",overflow:"auto",children:p&&p.map((N,w)=>t(Ne,{onClick:O=>_(N.video),itemActive:N.video===d,children:t("b",{children:N.title})},w))})]})]})})]})},dR=o=>{const{diskInventory:e=null,addToPlaylist:n=null}=o,[r,a]=i.exports.useState(-1),[s,c]=i.exports.useState(-1),u=i.exports.useCallback((g,h)=>{g.stopPropagation(),c(f=>f===h?-1:h)},[]),d=i.exports.useCallback((g,h)=>{var f,E;g.stopPropagation(),n(h,(E=(f=be().soundManager.musicController)==null?void 0:f.getRoomItemPlaylist())==null?void 0:E.length)},[n]),p=()=>{ee("catalog/open/"+mt.TRAX_SONGS)};return i.exports.useEffect(()=>{var g;if(s!==-1)return(g=be().soundManager.musicController)==null||g.playSong(s,Ds.PRIORITY_SONG_PLAY,0,0,0,0),()=>{var h;(h=be().soundManager.musicController)==null||h.stop(Ds.PRIORITY_SONG_PLAY)}},[s]),i.exports.useEffect(()=>()=>c(-1),[]),l(V,{children:[l("div",{className:"bg-success py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:K("image.library.url")+"playlist/title_mymusic.gif",className:"my-music"}),t("h2",{className:"ms-4",children:m("playlist.editor.my.music")})]}),t("div",{className:"h-100 overflow-y-scroll mt-4 py-2",children:t(Ge,{columnCount:3,columnMinWidth:95,gap:1,children:e&&e.getKeys().map((g,h)=>{var _;const f=e.getKey(h),E=e.getWithIndex(h),I=(_=be().soundManager.musicController)==null?void 0:_.getSongInfo(E);return l(Ne,{itemActive:r===h,onClick:()=>a(C=>C===h?-1:h),classNames:["text-black"],children:[t("div",{className:"disk-image flex-shrink-0 mb-n2",style:{backgroundColor:wd(I==null?void 0:I.songData)}}),t(S,{truncate:!0,fullWidth:!0,className:"text-center",children:I==null?void 0:I.name}),r===h&&l(v,{position:"absolute",className:"bottom-0 mb-1 bg-secondary p-1 rounded",alignItems:"center",justifyContent:"center",gap:2,children:[t(M,{onClick:C=>u(C,E),variant:"light",children:t(L,{className:s===E?"pause-btn":"preview-song"})}),t(M,{onClick:C=>d(C,f),variant:"light",children:t(L,{className:"move-disk"})})]})]},h)})})}),l("div",{className:"playlist-bottom text-black p-1",children:[t("h5",{children:m("playlist.editor.text.get.more.music")}),t("div",{children:m("playlist.editor.text.you.have.no.songdisks.available")}),t("div",{children:m("playlist.editor.text.you.can.buy.some.from.the.catalogue")}),t("button",{className:"btn btn-primary btn-sm",onClick:()=>p(),children:m("playlist.editor.button.open.catalogue")})]}),t("img",{src:K("image.library.url")+"playlist/background_get_more_music.gif",className:"get-more"})]})},mR=o=>{var g,h;const{furniId:e=-1,playlist:n=null,currentPlayingIndex:r=-1,removeFromPlaylist:a=null,togglePlayPause:s=null}=o,[c,u]=i.exports.useState(-1),d=f=>{c===f&&a(f)},p=(f,E)=>{s(f,E!==-1?E:0)};return l(V,{children:[l("div",{className:"bg-primary py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:K("image.library.url")+"playlist/title_playlist.gif",className:"playlist-img"}),t("h2",{className:"ms-4",children:m("playlist.editor.playlist")})]}),t("div",{className:"h-100 overflow-y-scroll py-2",children:t(v,{column:!0,gap:2,children:n&&n.map((f,E)=>l(v,{gap:1,className:"text-black cursor-pointer "+(c===E?"border border-muted border-2 rounded":"border-2"),alignItems:"center",onClick:()=>u(I=>I===E?-1:E),children:[t(L,{onClick:()=>d(E),className:"disk-2 "+(c===E?"selected-song":""),style:{backgroundColor:c===E?"":wd(f.songData)}}),f.name]},E))})}),(!n||n.length===0)&&l(V,{children:[l("div",{className:"playlist-bottom text-black p-1 ms-5",children:[t("h5",{children:m("playlist.editor.add.songs.to.your.playlist")}),t("div",{children:m("playlist.editor.text.click.song.to.choose.click.again.to.move")})]}),t("img",{src:K("image.library.url")+"playlist/background_add_songs.gif",className:"add-songs"})]}),n&&n.length>0&&l(V,{children:[r===-1&&t(M,{variant:"success",size:"lg",onClick:()=>p(e,c),children:m("playlist.editor.button.play.now")}),r!==-1&&l(v,{gap:1,children:[t(M,{variant:"danger",onClick:()=>p(e,c),children:t(L,{className:"pause-song"})}),l(v,{column:!0,children:[t(S,{bold:!0,display:"block",children:m("playlist.editor.text.now.playing.in.your.room")}),t(S,{children:((g=n[r])==null?void 0:g.name)+" - "+((h=n[r])==null?void 0:h.creator)})]})]})]})]})},gR=o=>{const{objectId:e=-1,currentPlayingIndex:n=-1,playlist:r=null,diskInventory:a=null,onClose:s=null,togglePlayPause:c=null,removeFromPlaylist:u=null,addToPlaylist:d=null}=oN();return e===-1?null:l(ae,{className:"nitro-playlist-editor-widget",theme:"primary-slim",children:[t(oe,{headerText:m("playlist.editor.title"),onCloseClick:s}),t(se,{children:l("div",{className:"d-flex flex-row gap-1 h-100",children:[t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(dR,{addToPlaylist:d,diskInventory:a})}),t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(mR,{furniId:e,removeFromPlaylist:u,playlist:r,togglePlayPause:c,currentPlayingIndex:n})})]})})]})},pR=o=>l(L,{fit:!0,position:"absolute",className:"nitro-room-widgets top-0 start-0",children:[t(Bx,{}),t(Gx,{}),t(Vx,{}),t(Hx,{}),t(Wx,{}),t(qx,{}),t(zx,{}),t(Yx,{}),t($x,{}),t(Kx,{}),t(Qx,{}),t(gR,{}),t(Jx,{}),t(tR,{}),t(nR,{}),t(lR,{}),t(cR,{}),t(Fx,{}),t(uR,{})]}),hR=o=>{const{isVisible:e=!1,errorResult:n=null,petName:r=null,objectType:a=null,onChangePetName:s=null,onConfirm:c=null,onClose:u=null}=HN();return t(V,{children:e&&l(ae,{className:"nitro-pet-package no-resize",theme:"primary-slim",children:[t(oe,{center:!0,headerText:m(a==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage.open"),onCloseClick:()=>u()}),l(se,{children:[l(v,{className:"pet-package-container-top p-3",children:[t("div",{className:`package-image-${a} flex-shrink-0`}),t("div",{className:"m-2",children:t(S,{variant:"white",className:"package-text-big",children:m(a==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage")})})]}),t(v,{className:"pet-package-container-bottom p-2",children:l(T,{gap:1,children:[l(v,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-pet-package-container",children:[t("input",{type:"text",className:"form-control form-control-sm input-pet-package",maxLength:K("pet.package.name.max.length"),placeholder:m(a==="gnome_box"?"widgets.gnomepackage.name.select":"widgets.petpackage.name.title"),value:r,onChange:d=>s(d.target.value)}),t("div",{className:"package-pencil-image flex-shrink-0 small fa-icon"})]}),n.length>0&&t(L,{className:"invalid-feedback d-block m-0",children:n}),l(v,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(S,{pointer:!0,className:"text-decoration",onClick:()=>u(),children:m("cancel")}),t(Li,{variant:r.length<3?"danger":"success",disabled:r.length<3,onClick:()=>c(),children:m(a==="gnome_box"?"widgets.gnomepackage.name.pick":"furni.petpackage.confirm")})]})]})})]})]})})},fR=o=>{const[e,n]=i.exports.useState("bobba"),[r,a]=i.exports.useState(""),[s,c]=i.exports.useState(!1),{wordsFilter:u=[],isVisible:d=null,setWordsFilter:p,onClose:g=null}=MN(),{navigatorData:h=null}=Mn(),f=_=>{(s?!r:!e)||(D(new n_(h.enteredGuestRoom.roomId,_,s?r:e)),a(""),n("bobba"),c(!1),!(_&&u.includes(s?r:e))&&p(C=>{const b=[...C];return _?b.push(s?r:e):b.splice(b.indexOf(s?r:e),1),b}))},E=_=>{n(_),c(!1)},I=_=>{a(_),c(!0)};return d?l(ae,{className:"nitro-guide-tool no-resize",theme:"primary-slim",children:[t(oe,{headerText:m("navigator.roomsettings.roomfilter"),onCloseClick:()=>g()}),l(se,{className:"text-black",children:[l(te,{className:"d-flex align-items-center justify-content-end gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",maxLength:255,value:e,onChange:_=>E(_.target.value)}),t(M,{onClick:()=>f(!0),children:m("navigator.roomsettings.roomfilter.addword")})]}),t(T,{overflow:"auto",gap:0,className:"form-control form-control-sm",style:{height:"100px"},children:u&&u.length>0&&u.map((_,C)=>t(v,{alignItems:"center",className:Ht("rounded p-1",r===_&&"bg-muted"),pointer:!0,onClick:b=>I(_),children:t(S,{truncate:!0,children:_})},C))}),t(te,{className:"d-flex align-items-center justify-content-end gap-2",children:t(M,{variant:"danger",onClick:()=>f(!1),disabled:u.length===0||!s,children:m("navigator.roomsettings.roomfilter.removeword")})})]})]}):null},IR=o=>{const[e,n]=i.exports.useState(!1),{roomSession:r=null}=We();ut([Bn.SHOW_THUMBNAIL,Bn.HIDE_THUMBNAIL,Bn.TOGGLE_THUMBNAIL],s=>{switch(s.type){case Bn.SHOW_THUMBNAIL:n(!0);return;case Bn.HIDE_THUMBNAIL:n(!1);return;case Bn.TOGGLE_THUMBNAIL:n(c=>!c);return}});const a=s=>{Y().saveTextureAsScreenshot(s,!0),n(!1)};return e?t(Vb,{roomId:r.roomId,textureReceiver:a,onClose:()=>n(!1)}):null},ER=o=>{var y,x,F,P;const[e,n]=i.exports.useState(!1);i.exports.useState(!1);const[r,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(!1),{navigatorData:h=null}=Mn(),{roomSession:f=null}=We(),[E,I]=i.exports.useState([]),[_,C]=i.exports.useState(!1);i.exports.useRef(null);const b=(k,R)=>{switch(k){case"bawtool":f.sendChatMessage(":bc",0);break;case"settings":ee("navigator/toggle-room-info");return;case"zoom":n(A=>{let G=Y().getRoomInstanceRenderingCanvasScale(f.roomId,1);return A?G*=2:G/=2,Y().setRoomInstanceRenderingCanvasScale(f.roomId,1,G),!A});return;case"chat_history":ee("chat-history/toggle");return;case"hiddenbubbles":ee("nitrobubblehidden/toggle"),document.getElementById("bubble").classList.toggle("icon-chat-disablebubble");return;case"like_room":D(new r_(1));return;case"toggle_room_link":ee("navigator/toggle-room-link");return;case"navigator_search_tag":ee(`navigator/search/${R}`),D(new Es("hotel_view",`tag:${R}`));return;case"room_history":if(E.length>0){const A=document.getElementById("roomhistorytool");_?(C(!1),A.style.display="none"):(A.style.display="block",C(!0))}return;case"room_history_back":Xt(E[E.findIndex(A=>A.roomId===h.currentRoomId)-1].roomId);return;case"room_history_next":Xt(E[E.findIndex(A=>A.roomId===h.currentRoomId)+1].roomId);return}},N=(k,R)=>{let A=JSON.parse(window.localStorage.getItem("nitro.room.history"));if(A&&A.filter(B=>B.roomId===k).length>0)return;A&&A.length>=10&&A.shift();const G=A?[...A,{roomId:k,roomName:R}]:[{roomId:k,roomName:R}];return I(G),Ki("nitro.room.history",G)};U(ws,k=>{ee("nitrobubblehidden/hide");const R=k.getParser();!R.roomEnter||R.data.roomId!==f.roomId||(r!==R.data.roomName&&a(R.data.roomName),s!==R.data.ownerName&&c(R.data.ownerName),u!==R.data.tags&&d(R.data.tags),N(R.data.roomId,R.data.roomName))}),i.exports.useEffect(()=>{g(!0);const k=setTimeout(()=>g(!1),5e3);return()=>clearTimeout(k)},[r,s,u]),i.exports.useEffect(()=>{I(JSON.parse(window.localStorage.getItem("nitro.room.history"))??[])},[]);function w(){C(!1),document.getElementById("roomhistorytool").style.display="none",document.getElementById("roomsettnew").style.marginLeft="-152px",document.getElementById("roomsetthide").style.display="none",document.getElementById("roomsettshow").style.display="block"}function O(){C(!1),document.getElementById("roomhistorytool").style.display="none",document.getElementById("roomsettnew").style.marginLeft="19px",document.getElementById("roomsettshow").style.display="none",document.getElementById("roomsetthide").style.display="block"}return l(v,{className:"nitro-room-tools-container",children:[t("div",{className:"leftroomhide",id:"roomsetthide",onClick:()=>w(),style:{display:"none"},children:t(Jt,{className:"fa-icon iconcenterleftiright"})}),l(T,{center:!0,className:"nitro-room-tools p-2 d-block",id:"roomsettnew",style:{marginLeft:-152},children:[f.controllerLevel>=tt.ROOM_OWNER&&l("div",{className:"gridinforooms",children:[t(V,{children:t(L,{pointer:!0,title:"Herramienta Baw",className:"iconleftgen icon icon-bawtool",onClick:()=>b("bawtool"),style:{marginTop:-4}})}),t("div",{className:"texticonright",onClick:()=>b("bawtool"),title:"Herramienta Baw",children:"Baw Tool"})]}),l("div",{className:"gridinforooms",children:[t(L,{pointer:!0,title:m("room.settings.button.text"),className:"iconleftgen icon icon-cog",onClick:()=>b("settings")}),t("div",{className:"texticonright",onClick:()=>b("settings"),title:m("room.settings.button.text"),children:"Ajustes"})]}),l("div",{className:"gridinforooms",children:[t(L,{pointer:!0,title:m("room.zoom.button.text"),onClick:()=>b("zoom"),className:Ht("iconleftgen icon",!e&&"icon-zoom-less",e&&"icon-zoom-more")})," ",t("div",{className:"texticonright",style:{marginLeft:22},onClick:()=>b("zoom"),title:m("room.zoom.button.text"),children:"Zoom"})]}),l("div",{className:"gridinforooms",children:[" ",t(L,{pointer:!0,title:m("room.chathistory.button.text"),onClick:()=>b("chat_history"),className:"iconleftgen icon icon-chat-history"}),t("div",{className:"texticonright",onClick:()=>b("chat_history"),title:m("room.chathistory.button.text"),children:"Historial de chat"})]}),l("div",{className:"gridinforooms",children:[t(L,{id:"bubble",pointer:!0,title:"Burbujas de chat",onClick:()=>b("hiddenbubbles"),className:"iconleftgen icon icon-chat-enablebubble"}),t("div",{className:"texticonright",onClick:()=>b("hiddenbubbles"),title:"Burbujas de chat",children:"Burbujas"})]}),h.canRate&&l("div",{className:"gridinforooms",children:[t(V,{children:t(L,{pointer:!0,title:m("room.like.button.text"),onClick:()=>b("like_room"),className:"iconleftgen icon icon-like-room"})}),t("div",{className:"texticonright",onClick:()=>b("like_room"),title:m("room.like.button.text"),children:"Me gusta"})]}),l(v,{justifyContent:"center",children:[t(L,{pointer:E.length>1&&((y=E[0])==null?void 0:y.roomId)!==h.currentRoomId,title:m("room.history.button.back.tooltip"),className:`icon ${(E==null?void 0:E.length)===0||((x=E[0])==null?void 0:x.roomId)===h.currentRoomId?"icon-room-history-back-disabled":"icon-room-history-back-enabled"}`,onClick:()=>{var k;return(E==null?void 0:E.length)===0||((k=E[0])==null?void 0:k.roomId)===h.currentRoomId?null:b("room_history_back")}}),t(L,{pointer:(E==null?void 0:E.length)>0,title:m("room.history.button.tooltip"),className:`icon ${(E==null?void 0:E.length)===0?"icon-room-history-disabled":"icon-room-history-enabled"} margin-button-history`,onClick:()=>(E==null?void 0:E.length)===0?null:b("room_history")}),t(L,{pointer:E.length>1&&((F=E[E.length-1])==null?void 0:F.roomId)!==h.currentRoomId,title:m("room.history.button.forward.tooltip"),className:`icon ${(E==null?void 0:E.length)===0||((P=E[E.length-1])==null?void 0:P.roomId)===h.currentRoomId?"icon-room-history-next-disabled":"icon-room-history-next-enabled"}`,onClick:()=>{var k;return(E==null?void 0:E.length)===0||((k=E[E.length-1])==null?void 0:k.roomId)===h.currentRoomId?null:b("room_history_next")}})]})]}),t("div",{className:"leftroomhideshow",id:"roomsettshow",onClick:()=>O(),children:t(Zt,{className:"fa-icon"})}),t(vs,{type:Nt.SLIDE_LEFT,inProp:p,timeout:200,children:l(T,{className:"nitro-room-tools-info rounded py-2 px-3",children:[l(T,{gap:1,children:[t(S,{wrap:!0,variant:"white",fontSize:5,children:r}),t(S,{variant:"muted",fontSize:6,children:s})]}),u&&u.length>0&&t(v,{gap:2,children:u.map((k,R)=>l(S,{small:!0,pointer:!0,variant:"white",className:"rounded bg-primary p-1",onClick:()=>b("navigator_search_tag",k),children:["#",k]},R))})]})}),t("div",{className:"nitro-room-tools-history",id:"roomhistorytool",style:{display:"none",bottom:h.canRate?"210px":"180px"},children:t(vs,{type:Nt.SLIDE_LEFT,inProp:_,children:t(T,{center:!0,children:t(T,{className:"nitro-room-history rounded py-2 px-3",children:t(T,{gap:1,children:E.length>0&&E.map(k=>t(S,{bold:k.roomId===h.currentRoomId,variant:k.roomId===h.currentRoomId?"white":"muted",pointer:!0,onClick:()=>Xt(k.roomId),children:k.roomName},k.roomId))})})})})})]})},CR=o=>{const{question:e=null,canVote:n=null,vote:r=null,noVotes:a=null,yesVotes:s=null}=o;return l(T,{gap:2,className:"wordquiz-question p-2",children:[!n&&l(v,{fullWidth:!0,alignItems:"center",gap:2,children:[t(v,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:t(S,{variant:"white",children:a})}),t(S,{variant:"white",center:!0,textBreak:!0,children:e}),t(v,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:t(S,{variant:"white",children:s})})]}),n&&l(T,{children:[t(S,{variant:"white",center:!0,textBreak:!0,children:e}),l(v,{fullWidth:!0,justifyContent:"center",gap:1,children:[t(v,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:c=>r(Zo),children:t(L,{className:"word-quiz-dislike"})}),t(v,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:c=>r(yd),children:t(L,{className:"word-quiz-like"})})]})]})]})},_R=o=>{const{userIndex:e=null,vote:n=null,...r}=o;return t(hl,{objectId:e,category:Q.UNIT,...r,children:t(v,{center:!0,pointer:!0,className:`bg-${n===Zo?"danger":"success"} rounded p-1`,children:t(L,{className:`word-quiz-${n===Zo?"dislike":"like"}-sm`})})})},bR=o=>{const{question:e=null,answerSent:n=!1,answerCounts:r=null,userAnswers:a=null,vote:s=null}=KN();return l(V,{children:[e&&t(CR,{question:e.content,canVote:!n,vote:s,noVotes:r.get(Zo)||0,yesVotes:r.get(yd)||0}),a&&Array.from(a.entries()).map(([c,u],d)=>t(_R,{userIndex:c,vote:u.value},d))]})},SR=o=>{const{roomSession:e=null}=We(),{simpleAlert:n=null}=Ze();return we(hi.ROOM_ZOOM,r=>Y().setRoomInstanceRenderingCanvasScale(r.roomId,1,r.level,null,null,!1,r.asDelta)),we([Re.REQUEST_TEASER,Re.REQUEST_ECOTRONBOX,Re.REQUEST_CLOTHING_CHANGE,Re.REQUEST_PLAYLIST_EDITOR,Re.OPEN_WIDGET,Re.CLOSE_WIDGET,fo.FURNI_CLICK,fo.FURNI_DOUBLE_CLICK,fo.TOOLTIP_SHOW,fo.TOOLTIP_HIDE],r=>{if(e)switch(r.objectId,r.category,r.type){}}),Ke([pt.RSEME_KICKED,pt.RSEME_PETS_FORBIDDEN_IN_HOTEL,pt.RSEME_PETS_FORBIDDEN_IN_FLAT,pt.RSEME_MAX_PETS,pt.RSEME_MAX_NUMBER_OF_OWN_PETS,pt.RSEME_NO_FREE_TILES_FOR_PET,pt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,pt.RSEME_BOTS_FORBIDDEN_IN_HOTEL,pt.RSEME_BOTS_FORBIDDEN_IN_FLAT,pt.RSEME_BOT_LIMIT_REACHED,pt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,pt.RSEME_BOT_NAME_NOT_ACCEPTED],r=>{let a=m("error.title"),s="";switch(r.type){case pt.RSEME_MAX_PETS:s=m("room.error.max_pets");break;case pt.RSEME_MAX_NUMBER_OF_OWN_PETS:s=m("room.error.max_own_pets");break;case pt.RSEME_KICKED:s=m("room.error.kicked"),a=m("generic.alert.title");break;case pt.RSEME_PETS_FORBIDDEN_IN_HOTEL:s=m("room.error.pets.forbidden_in_hotel");break;case pt.RSEME_PETS_FORBIDDEN_IN_FLAT:s=m("room.error.pets.forbidden_in_flat");break;case pt.RSEME_NO_FREE_TILES_FOR_PET:s=m("room.error.pets.no_free_tiles");break;case pt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:s=m("room.error.pets.selected_tile_not_free");break;case pt.RSEME_BOTS_FORBIDDEN_IN_HOTEL:s=m("room.error.bots.forbidden_in_hotel");break;case pt.RSEME_BOTS_FORBIDDEN_IN_FLAT:s=m("room.error.bots.forbidden_in_flat");break;case pt.RSEME_BOT_LIMIT_REACHED:s=m("room.error.max_bots");break;case pt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:s=m("room.error.bots.selected_tile_not_free");break;case pt.RSEME_BOT_NAME_NOT_ACCEPTED:s=m("room.error.bots.name.not.accepted");break;default:return}n(s,ge.DEFAULT,null,null,a)}),l(V,{children:[t(Ix,{}),t(Tx,{}),t(_x,{}),t(yx,{}),t(pR,{}),t(ER,{}),t(fR,{}),t(IR,{}),t(vx,{}),t(hR,{}),t(wx,{}),t(bR,{}),t(Rx,{})]})},NR=o=>{const{roomSession:e=null}=We(),n=i.exports.useRef();return i.exports.useEffect(()=>{const r=be().application.renderer.view;if(!r)return;r.onclick=s=>_o(s),r.onmousemove=s=>_o(s),r.onmousedown=s=>_o(s),r.onmouseup=s=>_o(s),r.ontouchstart=s=>No(s),r.ontouchmove=s=>No(s),r.ontouchend=s=>No(s),r.ontouchcancel=s=>No(s);const a=n.current;a&&a.appendChild(r)},[]),t(L,{fit:!0,innerRef:n,className:!e&&"d-none",children:e&&l(V,{children:[t(SR,{}),e.isSpectator&&t(Yy,{})]})})},TR=o=>{const{useGuideTool:e=!1,unseenAchievementCount:n=0,setMeExpanded:r=null,children:a=null,...s}=o,c=i.exports.useRef();return i.exports.useEffect(()=>{const u=Ae();u&&Y().selectRoomObject(u.roomId,u.ownRoomIndex,Q.UNIT)},[]),i.exports.useEffect(()=>{const u=d=>r(!1);return document.addEventListener("click",u),()=>document.removeEventListener(ke.MOUSE_CLICK,u)},[r]),l(v,{innerRef:c,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,children:[K("guides.enabled")&&e&&t(L,{pointer:!0,className:"navigation-item icon icon-me-helper-tool click-box",onClick:u=>Tt(new Wt(Wt.TOGGLE_GUIDE_TOOL))}),t(L,{pointer:!0,className:"navigation-item icon icon-me-achievements click-box",onClick:u=>ee("achievements/toggle"),children:n>0&&t(yr,{count:n})}),t(L,{pointer:!0,className:"navigation-item icon icon-me-profile click-box",onClick:u=>tn(W().userId)}),t(L,{pointer:!0,className:"navigation-item icon icon-me-rooms click-box",onClick:u=>ee("navigator/search/myworld_view")}),t(L,{pointer:!0,className:"navigation-item icon icon-me-clothing click-box",onClick:u=>ee("avatar-editor/toggle")}),t(L,{pointer:!0,className:"navigation-item icon icon-me-settings click-box",onClick:u=>ee("user-settings/toggle")}),a]})},vR=o=>{const{isInRoom:e}=o,[n,r]=i.exports.useState(!1),[a,s]=i.exports.useState(!1),{userFigure:c=null}=zn(),{getFullCount:u=0}=bn(),{getTotalUnseen:d=0}=Ia(),{requests:p=[]}=pn(),{iconState:g=Wn.HIDDEN}=al(),h=W().isModerator;return U(qu,f=>{const E=f.getParser();s(E.isAllowed(ju.USE_GUIDE_TOOL))}),we(s_.ANIMATE_ICON,f=>{((I,_,C,b)=>{const N=document.body.getElementsByClassName(I)[0];if(!N)return;_.className="toolbar-icon-animation",_.style.visibility="visible",_.style.left=C+"px",_.style.top=b+"px",document.body.append(_);const w=N.getBoundingClientRect(),O=_.getBoundingClientRect(),y=O.x-w.x,x=O.y-w.y,F=Math.sqrt(y*y+x*x),P=500-Math.abs(1/F*100*500*.5),k=20,R=`ToolbarBouncing[${I}]`;Ba.getMotionByTag(R)||(Ba.runMotion(new Fl(new o_(P+8),new a_(N,400,12))).tag=R);const A=new Fl(new i_(new l_(_,P,w.x-O.x+k,w.y-O.y,100,1),1),new c_(_));Ba.runMotion(A)})("icon-inventory",f.image,f.x,f.y)}),l(V,{children:[t(vs,{type:Nt.FADE_IN,inProp:n,timeout:300,children:t(TR,{useGuideTool:a,unseenAchievementCount:d,setMeExpanded:r})}),l(v,{alignItems:"center",justifyContent:"between",gap:2,className:"nitro-toolbar py-1 px-3",children:[l(v,{gap:2,alignItems:"center",className:"widthsizemax",children:[l(v,{alignItems:"center",gap:2,children:[l(v,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(n?"active ":""),onClick:f=>r(!n),children:[t(ot,{figure:c,direction:2,position:"absolute"}),d>0&&t(yr,{count:d})]}),e&&t(L,{pointer:!0,className:"navigation-item icon icon-habbo click-box",onClick:f=>Wi()}),!e&&t(L,{pointer:!0,className:"navigation-item icon icon-house click-box",onClick:f=>ee("navigator/goto/home")}),t(L,{pointer:!0,className:"navigation-item icon icon-rooms click-box",onClick:f=>ee("navigator/toggle")}),K("game.center.enabled")&&t(L,{pointer:!0,className:"navigation-item icon icon-game click-box",onClick:f=>ee("games/toggle")}),t(L,{pointer:!0,className:"navigation-item icon icon-catalog click-box",onClick:f=>ee("catalog/toggle")}),t(L,{pointer:!0,className:"navigation-item icon icon-inventory click-box",onClick:f=>ee("inventory/toggle"),children:u>0&&t(yr,{count:u})}),e&&t(L,{pointer:!0,className:"navigation-item icon icon-camera click-box",onClick:f=>ee("camera/toggle")}),h&&t(L,{pointer:!0,className:"navigation-item icon icon-modtools click-box",onClick:f=>ee("mod-tools/toggle")})]}),t(v,{alignItems:"center",id:"toolbar-chat-input-container"})]}),l(v,{alignItems:"center",gap:2,children:[l(v,{gap:2,children:[t(L,{pointer:!0,className:"navigation-item icon icon-friendall click-box friendsmovilgen",onClick:f=>ee("friends/toggle"),children:p.length>0&&t(yr,{count:p.length})}),(g===Wn.SHOW||g===Wn.UNREAD)&&t(L,{pointer:!0,className:`navigation-item icon icon-message click-box mensajesmovilgen ${g===Wn.UNREAD&&"is-unseen"}`,onClick:f=>ma()})]}),t(L,{id:"toolbar-friend-bar-container",className:"d-none d-lg-block"})]})]})]})},wR=o=>{const{badges:e=null,gap:n=1,justifyContent:r="between",...a}=o;return t(V,{children:e&&e.length>0&&e.map((s,c)=>t(T,{center:!0,children:t(Ye,{badgeCode:s},s)},s))})},yR=o=>{const{relationships:e=null}=o,n=({type:r})=>{const a=e&&e.relationshipStatusMap.hasKey(r)?e.relationshipStatusMap.getValue(r):null,s=Fn.RELATIONSHIP_NAMES[r].toLocaleLowerCase();return l(v,{fullWidth:!0,gap:1,children:[t(v,{center:!0,className:"user-relationship",children:t("i",{className:`nitro-friends-spritesheet icon-${s}`})}),l(T,{grow:!0,gap:0,children:[l(v,{alignItems:"center",justifyContent:"between",className:"bg-white rounded px-2 py-1 user-relationship",children:[l(S,{small:!0,underline:!0,pointer:!0,onClick:c=>a&&a.randomFriendId>=1&&tn(a.randomFriendId),children:[(!a||a.friendCount===0)&&m("extendedprofile.add.friends"),a&&a.friendCount>=1&&a.randomFriendName]}),a&&a.friendCount>=1&&t(v,{center:!0,position:"relative",className:"avatar-image-container",children:t(ot,{figure:a.randomFriendFigure,headOnly:!0,direction:4})})]}),l(S,{small:!0,italics:!0,className:"user-relationship-count",children:[(!a||a.friendCount===0)&&m("extendedprofile.no.friends.in.this.category"),a&&a.friendCount>1&&m(`extendedprofile.relstatus.others.${s}`,["count"],[(a.friendCount-1).toString()])," "]})]})]})};return l(V,{children:[t(n,{type:Fn.HEART}),t(n,{type:Fn.SMILE}),t(n,{type:Fn.BOBBA})]})},xR=o=>{const{relationships:e=null,friendsCount:n=null}=o;return l(T,{gap:1,children:[l(S,{small:!0,children:[t("b",{children:m("extendedprofile.friends.count")})," ",n]}),t(S,{bold:!0,small:!0,children:m("extendedprofile.relstatus")}),t(T,{children:t(yR,{relationships:e})})]})},RR=o=>{const{itsMe:e=null,groups:n=null,onLeaveGroup:r=null,overflow:a="hidden",gap:s=2,...c}=o,[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(null);return U(Js,h=>{const f=h.getParser();!u||u!==f.id||f.flag||g(f)}),i.exports.useEffect(()=>{u&&D(new Bs(u,!1))},[u]),i.exports.useEffect(()=>{g(null),n.length>0&&d(h=>(h===n[0].groupId&&D(new Bs(n[0].groupId,!1)),n[0].groupId))},[n]),!n||!n.length?t(T,{center:!0,fullHeight:!0,children:l(v,{justifyContent:"center",gap:2,children:[t(L,{className:"no-group-spritesheet image-1"}),t(L,{className:"no-group-spritesheet image-2"}),t(L,{className:"no-group-spritesheet image-3"})]})}):l(te,{overflow:a,gap:2,...c,children:[t(T,{alignItems:"center",size:2,overflow:"auto",children:t(Ge,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:n.map((h,f)=>l(Ne,{overflow:"unset",itemActive:u===h.groupId,onClick:()=>d(h.groupId),className:"p-1",children:[e&&t("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(h.favourite?"favorite":"not-favorite"),onClick:()=>pb(h)}),t(Ye,{badgeCode:h.badgeCode,isGroup:!0})]},f))})}),t(T,{size:10,overflow:"hidden",children:p&&t(pm,{groupInformation:p,onClose:r})})]})},OR=o=>{const{userProfile:e=null}=o,[n,r]=i.exports.useState(e.requestSent),a=e.id===W().userId,s=!n&&!a&&!e.isMyFriend&&!e.requestSent,c=()=>{r(!0),D(new xu(e.username))};return i.exports.useEffect(()=>{r(e.requestSent)},[e]),l(v,{gap:2,children:[t(T,{center:!0,className:"avatar-container",children:t(ot,{figure:e.figure,direction:2})}),l(T,{children:[l(T,{gap:0,children:[t(S,{bold:!0,children:e.username}),l(S,{italics:!0,textBreak:!0,small:!0,children:[e.motto," "]})]}),l(T,{gap:1,children:[l(S,{small:!0,children:[t("b",{children:m("extendedprofile.created")})," ",e.registration]}),l(S,{small:!0,children:[t("b",{children:m("extendedprofile.last.login")})," ",Hn.format(e.secondsSinceLastVisit,".ago",2)]}),l(S,{small:!0,children:[t("b",{children:m("extendedprofile.achievementscore")})," ",e.achievementPoints]})]}),l(v,{gap:1,children:[e.isOnline&&t("i",{className:"icon icon-pf-online"}),!e.isOnline&&t("i",{className:"icon icon-pf-offline"}),l(v,{alignItems:"center",gap:1,children:[s&&t(S,{small:!0,underline:!0,pointer:!0,onClick:c,children:m("extendedprofile.addasafriend")}),!s&&l(V,{children:[t("i",{className:"icon icon-pf-tick"}),a&&t(S,{children:m("extendedprofile.me")}),e.isMyFriend&&t(S,{children:m("extendedprofile.friend")}),(n||e.requestSent)&&t(S,{children:m("extendedprofile.friendrequestsent")})]})]})]})]})]})},kR=o=>{const[e,n]=i.exports.useState(null),[r,a]=i.exports.useState([]),[s,c]=i.exports.useState(null),u=()=>{n(null),a([]),c(null)},d=()=>{!e||e.id!==W().userId||tn(e.id)};return U(u_,p=>{const g=p.getParser();!e||g.userId!==e.id||a(g.badges)}),U(Ju,p=>{const g=p.getParser();!e||g.userId!==e.id||c(g)}),U(m_,p=>{const g=p.getParser();let h=!1;n(f=>(f&&f.id&&(h=f.id===g.id),g)),h||(a([]),c(null)),D(new d_(g.id)),D(new Zu(g.id))}),U(g_,p=>{const g=p.getParser();g.userId==(e==null?void 0:e.id)&&tn(g.userId)}),we(Ct.SELECTED,p=>{if(!e||p.category!==Q.UNIT)return;const g=Ae().userDataManager.getUserDataByIndex(p.objectId);g.type===ft.USER&&tn(g.webID)}),e?l(ae,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[t(oe,{headerText:m("extendedprofile.caption"),onCloseClick:u}),l(se,{overflow:"hidden",children:[l(te,{fullHeight:!1,gap:2,children:[l(T,{size:7,gap:1,className:"user-container pe-2",children:[t(OR,{userProfile:e}),t(te,{columnCount:5,fullHeight:!0,className:"bg-muted rounded px-2 py-1",children:t(wR,{fullWidth:!0,center:!0,badges:r})})]}),t(T,{size:5,children:s&&t(xR,{relationships:s,friendsCount:e.friendsCount})})]}),t(v,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:l(v,{alignItems:"center",gap:1,onClick:p=>ee(`navigator/search/hotel_view/owner:${e.username}`),children:[t("i",{className:"icon icon-rooms"}),t(S,{bold:!0,underline:!0,pointer:!0,children:m("extendedprofile.rooms")})]})}),t(RR,{fullWidth:!0,itsMe:e.id===W().userId,groups:e.groups,onLeaveGroup:d})]})]}):null},AR=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(null),[s,c]=Wd(),[u,d]=jd(),p=(h,f)=>{let E=!0;const I=r.clone();switch(h){case"close_view":n(!1),E=!1;return;case"oldchat":I.oldChat=f,D(new f_(I.oldChat));break;case"room_invites":I.roomInvites=f,D(new h_(I.roomInvites));break;case"camera_follow":I.cameraFollow=f,D(new p_(I.cameraFollow));break;case"system_volume":I.volumeSystem=f,I.volumeSystem=Math.max(0,I.volumeSystem),I.volumeSystem=Math.min(100,I.volumeSystem);break;case"furni_volume":I.volumeFurni=f,I.volumeFurni=Math.max(0,I.volumeFurni),I.volumeFurni=Math.min(100,I.volumeFurni);break;case"trax_volume":I.volumeTrax=f,I.volumeTrax=Math.max(0,I.volumeTrax),I.volumeTrax=Math.min(100,I.volumeTrax);break}E&&a(I),Ci(I)},g=h=>{switch(h){case"volume":D(new I_(Math.round(r.volumeSystem),Math.round(r.volumeFurni),Math.round(r.volumeTrax)));break}};return U(Bu,h=>{const f=h.getParser(),E=new E_;E.volumeSystem=f.volumeSystem,E.volumeFurni=f.volumeFurni,E.volumeTrax=f.volumeTrax,E.oldChat=f.oldChat,E.roomInvites=f.roomInvites,E.cameraFollow=f.cameraFollow,E.flags=f.flags,E.chatType=f.chatType,a(E),Ci(E)}),i.exports.useEffect(()=>{const h={linkReceived:f=>{const E=f.split("/");if(!(E.length<2))switch(E[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(I=>!I);return}},eventUrlPrefix:"user-settings/"};return It(h),()=>Et(h)},[]),i.exports.useEffect(()=>{r&&Tt(r)},[r]),!e||!r?null:l(ae,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[t(oe,{headerText:m("widget.memenu.settings.title"),onCloseClick:h=>p("close_view")}),l(se,{className:"text-black",children:[l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:r.oldChat,onChange:h=>p("oldchat",h.target.checked)}),t(S,{children:m("memenu.settings.chat.prefer.old.chat")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:r.roomInvites,onChange:h=>p("room_invites",h.target.checked)}),t(S,{children:m("memenu.settings.other.ignore.room.invites")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:r.cameraFollow,onChange:h=>p("camera_follow",h.target.checked)}),t(S,{children:m("memenu.settings.other.disable.room.camera.follow")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:s,onChange:h=>c(h.target.checked)}),t(S,{children:m("memenu.settings.other.place.multiple.objects")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:u,onChange:h=>d(h.target.checked)}),t(S,{children:m("memenu.settings.other.skip.purchase.confirmation")})]})]}),l(T,{children:[t(S,{bold:!0,children:m("widget.memenu.settings.volume")}),l(T,{gap:1,children:[t(S,{children:m("widget.memenu.settings.volume.ui")}),l(v,{alignItems:"center",gap:1,children:[r.volumeSystem===0&&t(wa,{className:Ht(r.volumeSystem>=50&&"text-muted","fa-icon")}),r.volumeSystem>0&&t(ya,{className:Ht(r.volumeSystem>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:r.volumeSystem,onChange:h=>p("system_volume",h.target.value),onMouseUp:()=>g("volume")}),t(xa,{className:Ht(r.volumeSystem<50&&"text-muted","fa-icon")})]})]}),l(T,{gap:1,children:[t(S,{children:m("widget.memenu.settings.volume.furni")}),l(v,{alignItems:"center",gap:1,children:[r.volumeFurni===0&&t(wa,{className:Ht(r.volumeFurni>=50&&"text-muted","fa-icon")}),r.volumeFurni>0&&t(ya,{className:Ht(r.volumeFurni>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:r.volumeFurni,onChange:h=>p("furni_volume",h.target.value),onMouseUp:()=>g("volume")}),t(xa,{className:Ht(r.volumeFurni<50&&"text-muted","fa-icon")})]})]}),l(T,{gap:1,children:[t(S,{children:m("widget.memenu.settings.volume.trax")}),l(v,{alignItems:"center",gap:1,children:[r.volumeTrax===0&&t(wa,{className:Ht(r.volumeTrax>=50&&"text-muted","fa-icon")}),r.volumeTrax>0&&t(ya,{className:Ht(r.volumeTrax>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:r.volumeTrax,onChange:h=>p("trax_volume",h.target.value),onMouseUp:()=>g("volume")}),t(xa,{className:Ht(r.volumeTrax<50&&"text-muted","fa-icon")})]})]})]})]})]})},PR=o=>{const{trigger:e=null,furniIds:n=[]}=ye();return l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.pickfurnis.caption",["count","limit"],[n.length.toString(),e.maximumItemSelectionCount.toString()])}),t(S,{small:!0,children:m("wiredfurni.pickfurnis.desc")})]})},fl=o=>{const{wiredType:e="",requiresFurni:n=ce.STUFF_SELECTION_OPTION_NONE,save:r=null,validate:a=null,children:s=null,hasSpecialInput:c=!1}=o,[u,d]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(!1),{trigger:E=null,setTrigger:I=null,setIntParams:_=null,setStringParam:C=null,setFurniIds:b=null,setAllowsFurni:N=null,saveWired:w=null}=ye(),O=()=>I(null),y=()=>{a&&!a()||(r&&r(),f(!0))};return i.exports.useEffect(()=>{h&&(w(),f(!1))},[h,w]),i.exports.useEffect(()=>{if(!E)return;const x=E.spriteId||-1,F=W().getFloorItemData(x);F?(d(F.name),g(F.description)):(d("NAME: "+x),g("NAME: "+x)),c&&(_(E.intData),C(E.stringData)),n>ce.STUFF_SELECTION_OPTION_NONE&&b(P=>(P&&P.length&&hs.clearSelectionShaderFromFurni(P),E.selectedItems&&E.selectedItems.length?(hs.applySelectionShaderToFurni(E.selectedItems),E.selectedItems):[])),N(n)},[E,c,n,_,C,b,N]),l(ae,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[t(oe,{headerText:m("wiredfurni.title"),onCloseClick:O}),l(se,{children:[l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("i",{className:`icon icon-wired-${e}`}),t(S,{bold:!0,children:u})]}),t(S,{small:!0,children:p})]}),!!s&&t("hr",{className:"m-0 bg-dark"}),s,n>ce.STUFF_SELECTION_OPTION_NONE&&l(V,{children:[t("hr",{className:"m-0 bg-dark"}),t(PR,{})]}),l(v,{alignItems:"center",gap:1,children:[t(M,{fullWidth:!0,variant:"success",onClick:y,children:m("wiredfurni.ready")}),t(M,{fullWidth:!0,variant:"secondary",onClick:O,children:m("cancel")})]})]})]})},gt=o=>{const{requiresFurni:e=ce.STUFF_SELECTION_OPTION_NONE,save:n=null,hasSpecialInput:r=!1,children:a=null}=o,{trigger:s=null,actionDelay:c=0,setActionDelay:u=null}=ye();return i.exports.useEffect(()=>{u(s.delayInPulses)},[s,u]),l(fl,{wiredType:"action",requiresFurni:e,save:n,hasSpecialInput:r,children:[a,!!a&&t("hr",{className:"m-0 bg-dark"}),l(T,{children:[t(S,{bold:!0,children:m("wiredfurni.params.delay",["seconds"],[oo(c)])}),t(Dt,{className:"nitro-slider",min:0,max:20,value:c,onChange:d=>u(d)})]})]})},DR="hd-180-1.ch-210-66.lg-270-82.sh-290-81",LR=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(""),{trigger:s=null,setStringParam:c=null}=ye(),u=()=>c(e+Ts+r);return i.exports.useEffect(()=>{const d=s.stringData.split(Ts);d.length>0&&n(d[0]),d.length>1&&a(d[1].length>0?d[1]:DR)},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:d=>n(d.target.value)})]}),l(v,{center:!0,children:[t(ot,{figure:r,direction:4}),t(M,{onClick:d=>a(W().figure),children:m("wiredfurni.params.capture.figure")})]})]})},MR=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(-1),{trigger:s=null,setStringParam:c=null,setIntParams:u=null}=ye(),d=()=>{c(e),u([r])};return i.exports.useEffect(()=>{n(s.stringData),a(s.intData.length>0?s.intData[0]:0)},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:p=>n(p.target.value)})]}),l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:r===1,onChange:p=>a(1)}),t(S,{children:m("wiredfurni.params.start.following")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:r===0,onChange:p=>a(0)}),t(S,{children:m("wiredfurni.params.stop.following")})]})]})]})},UR=[2,5,7,8,9,10,27],FR=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(-1),{trigger:s=null,setStringParam:c=null,setIntParams:u=null}=ye(),d=()=>{c(e),u([r])};return i.exports.useEffect(()=>{n(s.stringData),a(s.intData.length>0?s.intData[0]:0)},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:p=>n(p.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.handitem")}),l("select",{className:"form-select form-select-sm",value:r,onChange:p=>a(parseInt(p.target.value)),children:[t("option",{value:"0",children:"------"}),UR.map(p=>t("option",{value:p,children:m(`handitem${p}`)},p))]})]})]})},BR=o=>{const[e,n]=i.exports.useState(""),{trigger:r=null,setStringParam:a=null}=ye(),s=()=>a(e);return i.exports.useEffect(()=>{n(r.stringData)},[r]),t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},GR=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(""),[s,c]=i.exports.useState(-1),{trigger:u=null,setStringParam:d=null,setIntParams:p=null}=ye(),g=()=>{d(e+Ts+r),p([s])};return i.exports.useEffect(()=>{const h=u.stringData.split(Ts);h.length>0&&n(h[0]),h.length>1&&a(h[1].length>0?h[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:h=>n(h.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:K("wired.action.bot.talk.to.avatar.max.length",64),value:r,onChange:h=>a(h.target.value)})]}),l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:s===0,onChange:h=>c(0)}),t(S,{children:m("wiredfurni.params.talk")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:s===1,onChange:h=>c(1)}),t(S,{children:m("wiredfurni.params.whisper")})]})]})]})},VR=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(""),[s,c]=i.exports.useState(-1),{trigger:u=null,setStringParam:d=null,setIntParams:p=null}=ye(),g=()=>{d(e+Ts+r),p([s])};return i.exports.useEffect(()=>{const h=u.stringData.split(Ts);h.length>0&&n(h[0]),h.length>1&&a(h[1].length>0?h[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:h=>n(h.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:K("wired.action.bot.talk.max.length",64),value:r,onChange:h=>a(h.target.value)})]}),l(T,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:s===0,onChange:h=>c(0)}),t(S,{children:m("wiredfurni.params.talk")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:s===1,onChange:h=>c(1)}),t(S,{children:m("wiredfurni.params.shout")})]})]})]})},HR=o=>{const[e,n]=i.exports.useState(""),{trigger:r=null,setStringParam:a=null}=ye(),s=()=>a(e);return i.exports.useEffect(()=>{n(r.stringData)},[r]),t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},WR=o=>t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),jR=o=>t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),qR=o=>{const[e,n]=i.exports.useState(""),{trigger:r=null,setStringParam:a=null}=ye(),s=()=>a(e);return i.exports.useEffect(()=>{n(r.stringData)},[r]),t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>n(c.target.value),maxLength:K("wired.action.chat.max.length",100)})]})})},zR=o=>t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),YR=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(1),[s,c]=i.exports.useState(!1),[u,d]=i.exports.useState(1),[p,g]=i.exports.useState(1),[h,f]=i.exports.useState([]),{trigger:E=null,setIntParams:I=null,setStringParam:_=null}=ye(),C=()=>f(O=>[...O,{isBadge:!1,itemCode:"",probability:null}]),b=O=>{f(y=>{const x=Array.from(y);return x.splice(O,1),x})},N=(O,y,x,F)=>{const P=Array.from(h),k=P[O];k&&(k.isBadge=y,k.itemCode=x,k.probability=F,f(P))},w=()=>{let O=[];for(const y of h){if(!y.itemCode)continue;const x=[y.isBadge?"0":"1",y.itemCode,y.probability.toString()];O.push(x.join(","))}O.length>0&&(_(O.join(";")),I([r,s?1:0,u,p]))};return i.exports.useEffect(()=>{const O=[];if(E.stringData.length>0&&E.stringData.includes(";")){const y=E.stringData.split(";");for(const x of y){const F=x.split(",");F.length===3&&O.push({isBadge:F[0]==="0",itemCode:F[1],probability:Number(F[2])})}}O.length===0&&O.push({isBadge:!1,itemCode:"",probability:null}),a(E.intData.length>0?E.intData[0]:0),c(E.intData.length>1?E.intData[1]===1:!1),d(E.intData.length>2?E.intData[2]:0),g(E.intData.length>3?E.intData[3]:0),n(E.intData.length>3?E.intData[3]>0:!1),f(O)},[E]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:w,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:O=>n(O.target.checked)}),t(S,{children:m("wiredfurni.params.prizelimit",["amount"],[e?u.toString():""])})]}),!e&&t(S,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),e&&t(Dt,{className:"nitro-slider",min:1,max:1e3,value:u,onChange:O=>d(O)}),t("hr",{className:"m-0 bg-dark"}),l(T,{gap:1,children:[t(S,{bold:!0,children:"How often can a user be rewarded?"}),l(v,{gap:1,children:[l("select",{className:"form-select form-select-sm w-100",value:r,onChange:O=>a(Number(O.target.value)),children:[t("option",{value:"0",children:"Once"}),l("option",{value:"3",children:["Once every ",p," minutes"]}),l("option",{value:"2",children:["Once every ",p," hours"]}),l("option",{value:"1",children:["Once every ",p," days"]})]}),r>0&&t("input",{type:"number",className:"form-control form-control-sm",value:p,onChange:O=>g(Number(O.target.value))})]})]}),t("hr",{className:"m-0 bg-dark"}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:s,onChange:O=>c(O.target.checked)}),t(S,{children:"Unique rewards"})]}),t(S,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),t("hr",{className:"m-0 bg-dark"}),l(v,{justifyContent:"between",alignItems:"center",children:[t(S,{bold:!0,children:"Rewards"}),t(M,{variant:"success",onClick:C,children:t(Ks,{className:"fa-icon"})})]}),t(T,{gap:1,children:h&&h.map((O,y)=>l(v,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:O.isBadge,onChange:x=>N(y,x.target.checked,O.itemCode,O.probability)}),t(S,{small:!0,children:"Badge?"})]}),t("input",{type:"text",className:"form-control form-control-sm",value:O.itemCode,onChange:x=>N(y,O.isBadge,x.target.value,O.probability),placeholder:"Item Code"}),t("input",{type:"number",className:"form-control form-control-sm",value:O.probability,onChange:x=>N(y,O.isBadge,O.itemCode,Number(x.target.value)),placeholder:"Probability"}),y>0&&t(M,{variant:"danger",onClick:x=>b(y),children:t(Di,{className:"fa-icon"})})]},y))})]})},$R=o=>{const[e,n]=i.exports.useState(1),[r,a]=i.exports.useState(1),[s,c]=i.exports.useState(1),{trigger:u=null,setIntParams:d=null}=ye(),p=()=>d([e,r,s]);return i.exports.useEffect(()=>{u.intData.length>=2?(n(u.intData[0]),a(u.intData[1]),c(u.intData[2])):(n(1),a(1),c(1))},[u]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:p,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:100,value:e,onChange:g=>n(g)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.settimesingame",["times"],[r.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:10,value:r,onChange:g=>a(g)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.team")}),[1,2,3,4].map(g=>l(v,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${g}`,checked:s===g,onChange:h=>c(g)}),t(S,{children:m("wiredfurni.params.team."+g)})]},g))]})]})},KR=o=>{const[e,n]=i.exports.useState(1),[r,a]=i.exports.useState(1),{trigger:s=null,setIntParams:c=null}=ye(),u=()=>c([e,r]);return i.exports.useEffect(()=>{s.intData.length>=2?(n(s.intData[0]),a(s.intData[1])):(n(1),a(1))},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:100,value:e,onChange:d=>n(d)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.settimesingame",["times"],[r.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:10,value:r,onChange:d=>a(d)})]})]})},XR=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.team")}),[1,2,3,4].map(c=>l(v,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>n(c)}),t(S,{children:m(`wiredfurni.params.team.${c}`)})]},c))]})})},QR=o=>{const[e,n]=i.exports.useState(""),{trigger:r=null,setStringParam:a=null}=ye(),s=()=>a(e);return i.exports.useEffect(()=>{n(r.stringData)},[r]),t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>n(c.target.value),maxLength:K("wired.action.kick.from.room.max.length",100)})]})})},JR=o=>t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),ZR=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],eO=[0,1,2,3,4,5,6],tO=o=>{const[e,n]=i.exports.useState(-1),[r,a]=i.exports.useState(-1),{trigger:s=null,setIntParams:c=null}=ye(),u=()=>c([e,r]);return i.exports.useEffect(()=>{s.intData.length>=2?(n(s.intData[0]),a(s.intData[1])):(n(-1),a(-1))},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.startdir")}),t(v,{gap:1,children:ZR.map(d=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${d.value}`,checked:e===d.value,onChange:p=>n(d.value)}),t(S,{children:t("i",{className:`icon icon-${d.icon}`})})]},d.value))})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.turn")}),eO.map(d=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${d}`,checked:r===d,onChange:p=>a(d)}),t(S,{children:m(`wiredfurni.params.turn.${d}`)})]},d))]})]})},nO=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],rO=o=>{const[e,n]=i.exports.useState(-1),[r,a]=i.exports.useState(-1),{trigger:s=null,setIntParams:c=null}=ye(),u=()=>c([r,e]);return i.exports.useEffect(()=>{s.intData.length>=2?(n(s.intData[1]),a(s.intData[0])):(n(-1),a(-1))},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.emptytiles",["tiles"],[e.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:5,value:e,onChange:d=>n(d)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.startdir")}),t(v,{gap:1,children:nO.map(d=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${d.value}`,checked:r===d.value,onChange:p=>a(d.value)}),t(S,{children:t("i",{className:`icon icon-${d.icon}`})})]},d.value))})]})]})},sO=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],oO=[0,1,2,3],aO=o=>{const[e,n]=i.exports.useState(-1),[r,a]=i.exports.useState(-1),{trigger:s=null,setIntParams:c=null}=ye(),u=()=>c([e,r]);return i.exports.useEffect(()=>{s.intData.length>=2?(n(s.intData[0]),a(s.intData[1])):(n(-1),a(-1))},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.movefurni")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:e===0,onChange:d=>n(0)}),t(S,{children:m("wiredfurni.params.movefurni.0")})]}),l(v,{gap:1,children:[sO.map(d=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${d.value}`,checked:e===d.value,onChange:p=>n(d.value)}),t("i",{className:`icon icon-${d.icon}`})]},d.value)),t("div",{className:"col"})]})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.rotatefurni")}),oO.map(d=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${d}`,checked:r===d,onChange:p=>a(d)}),l(S,{children:[[1,2].includes(d)&&t("i",{className:`icon icon-rot-${d}`}),m(`wiredfurni.params.rotatefurni.${d}`)]})]},d))]})]})},iO=o=>{const[e,n]=i.exports.useState(-1),[r,a]=i.exports.useState(""),{trigger:s=null,setIntParams:c=null,setStringParam:u=null}=ye(),d=()=>{c([e]),u(r)};return i.exports.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0),a(s.stringData)},[s]),l(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.length.minutes",["minutes"],[e.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:10,value:e,onChange:p=>n(p)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:p=>a(p.target.value),maxLength:K("wired.action.mute.user.max.length",100)})]})]})},lO=o=>t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),cO=o=>{const[e,n]=i.exports.useState(0),[r,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),{trigger:u=null,setIntParams:d=null}=ye(),p=()=>d([e,r,s]);return i.exports.useEffect(()=>{n(u.getBoolean(0)?1:0),a(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:p,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.conditions")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:g=>n(g.target.checked?1:0)}),t(S,{children:m("wiredfurni.params.condition.state")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!r,onChange:g=>a(g.target.checked?1:0)}),t(S,{children:m("wiredfurni.params.condition.direction")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!s,onChange:g=>c(g.target.checked?1:0)}),t(S,{children:m("wiredfurni.params.condition.position")})]})]})})},uO=o=>t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),dO=o=>t(gt,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),mO=o=>{switch(o){case fe.BOT_CHANGE_FIGURE:return t(LR,{});case fe.BOT_FOLLOW_AVATAR:return t(MR,{});case fe.BOT_GIVE_HAND_ITEM:return t(FR,{});case fe.BOT_MOVE:return t(BR,{});case fe.BOT_TALK:return t(VR,{});case fe.BOT_TALK_DIRECT_TO_AVTR:return t(GR,{});case fe.BOT_TELEPORT:return t(HR,{});case fe.CALL_ANOTHER_STACK:return t(WR,{});case fe.CHASE:return t(jR,{});case fe.CHAT:return t(qR,{});case fe.FLEE:return t(zR,{});case fe.GIVE_REWARD:return t(YR,{});case fe.GIVE_SCORE:return t(KR,{});case fe.GIVE_SCORE_TO_PREDEFINED_TEAM:return t($R,{});case fe.JOIN_TEAM:return t(XR,{});case fe.KICK_FROM_ROOM:return t(QR,{});case fe.LEAVE_TEAM:return t(JR,{});case fe.MOVE_FURNI:return t(aO,{});case fe.MOVE_AND_ROTATE_FURNI:return t(tO,{});case fe.MOVE_FURNI_TO:return t(rO,{});case fe.MUTE_USER:return t(iO,{});case fe.RESET:return t(lO,{});case fe.SET_FURNI_STATE:return t(cO,{});case fe.TELEPORT:return t(uO,{});case fe.TOGGLE_FURNI_STATE:return t(dO,{})}return null},nn=o=>{const{requiresFurni:e=ce.STUFF_SELECTION_OPTION_NONE,save:n=null,hasSpecialInput:r=!1,children:a=null}=o;return t(fl,{wiredType:"condition",requiresFurni:e,hasSpecialInput:r,save:()=>n&&n(),children:a})},gO=[2,5,7,8,9,10,27],pO=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.handitem")}),t("select",{className:"form-select form-select-sm",value:e,onChange:c=>n(parseInt(c.target.value)),children:gO.map(c=>t("option",{value:c,children:m(`handitem${c}`)},c))})]})})},hO=o=>t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),fO=o=>t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),IO=[1,2,3,4],EO=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.team")}),IO.map(c=>l(v,{gap:1,alignItems:"center",children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>n(c)}),t(S,{children:m(`wiredfurni.params.team.${c}`)})]},c))]})})},CO=o=>{const[e,n]=i.exports.useState(""),{trigger:r=null,setStringParam:a=null}=ye(),s=()=>a(e);return i.exports.useEffect(()=>{n(r.stringData)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.badgecode")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>n(c.target.value)})]})})},_O=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n((r==null?void 0:r.intData[0])??0)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.tooltip.effectid")}),t("input",{type:"number",className:"form-control form-control-sm",value:e,onChange:c=>n(parseInt(c.target.value))})]})})},bO=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(""),{trigger:s=null,setIntParams:c=null}=ye(),u=()=>{let d=0,p=0;const g=new Date(e),h=new Date(r);g&&h&&(d=g.getTime()/1e3,p=h.getTime()/1e3),c([d,p])};return i.exports.useEffect(()=>{if(s.intData.length>=2){let d=new Date,p=new Date;s.intData[0]>0&&(d=new Date(s.intData[0]*1e3)),s.intData[1]>0&&(p=new Date(s.intData[1]*1e3)),n(rc(d)),a(rc(p))}},[s]),l(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.startdate")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:d=>n(d.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.enddate")}),t("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:d=>a(d.target.value)})]})]})},SO=o=>t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),NO=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.requireall")}),[0,1].map(c=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>n(c)}),t(S,{children:m("wiredfurni.params.requireall."+c)})]},c))]})})},TO=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.not_requireall")}),[0,1].map(c=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>n(c)}),t(S,{children:m(`wiredfurni.params.not_requireall.${c}`)})]},c))]})})},vO=o=>t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),wO=o=>{const[e,n]=i.exports.useState(0),[r,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),{trigger:u=null,setIntParams:d=null}=ye(),p=()=>d([e,r,s]);return i.exports.useEffect(()=>{n(u.getBoolean(0)?1:0),a(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:p,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.conditions")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:g=>n(g.target.checked?1:0)}),t(S,{children:m("wiredfurni.params.condition.state")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!r,onChange:g=>a(g.target.checked?1:0)}),t(S,{children:m("wiredfurni.params.condition.direction")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!s,onChange:g=>c(g.target.checked?1:0)}),t(S,{children:m("wiredfurni.params.condition.position")})]})]})})},yO=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.allowbefore",["seconds"],[oo(e)])}),t(Dt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>n(c)})]})})},xO=o=>{const[e,n]=i.exports.useState(-1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.allowafter",["seconds"],[oo(e)])}),t(Dt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>n(c)})]})})},RO=o=>{const[e,n]=i.exports.useState(1),[r,a]=i.exports.useState(1),{trigger:s=null,setIntParams:c=null}=ye(),u=()=>c([e,r]);return i.exports.useEffect(()=>{s.intData.length>=2?(n(s.intData[0]),a(s.intData[1])):(n(1),a(1))},[s]),l(nn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.usercountmin",["value"],[e.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:50,value:e,onChange:d=>n(d)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.usercountmax",["value"],[r.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:50,value:r,onChange:d=>a(d)})]})]})},OO=o=>{switch(o){case Ie.ACTOR_HAS_HANDITEM:return t(pO,{});case Ie.ACTOR_IS_GROUP_MEMBER:case Ie.NOT_ACTOR_IN_GROUP:return t(hO,{});case Ie.ACTOR_IS_ON_FURNI:case Ie.NOT_ACTOR_ON_FURNI:return t(fO,{});case Ie.ACTOR_IS_IN_TEAM:case Ie.NOT_ACTOR_IN_TEAM:return t(EO,{});case Ie.ACTOR_IS_WEARING_BADGE:case Ie.NOT_ACTOR_WEARS_BADGE:return t(CO,{});case Ie.ACTOR_IS_WEARING_EFFECT:case Ie.NOT_ACTOR_WEARING_EFFECT:return t(_O,{});case Ie.DATE_RANGE_ACTIVE:return t(bO,{});case Ie.FURNIS_HAVE_AVATARS:case Ie.FURNI_NOT_HAVE_HABBO:return t(SO,{});case Ie.HAS_STACKED_FURNIS:return t(NO,{});case Ie.NOT_HAS_STACKED_FURNIS:return t(TO,{});case Ie.STUFF_TYPE_MATCHES:case Ie.NOT_FURNI_IS_OF_TYPE:return t(vO,{});case Ie.STATES_MATCH:case Ie.NOT_STATES_MATCH:return t(wO,{});case Ie.TIME_ELAPSED_LESS:return t(yO,{});case Ie.TIME_ELAPSED_MORE:return t(xO,{});case Ie.USER_COUNT_IN:case Ie.NOT_USER_COUNT_IN:return t(RO,{})}return null},hn=o=>{const{requiresFurni:e=ce.STUFF_SELECTION_OPTION_NONE,save:n=null,hasSpecialInput:r=!1,children:a=null}=o;return t(fl,{wiredType:"trigger",requiresFurni:e,hasSpecialInput:r,save:()=>n&&n(),children:a})},kO=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(0),{trigger:s=null,setStringParam:c=null}=ye(),u=()=>c(r===1?e:"");return i.exports.useEffect(()=>{n(s.stringData),a(s.stringData?1:0)},[s]),t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.picktriggerer")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:r===0,onChange:d=>a(0)}),t(S,{children:m("wiredfurni.params.anyavatar")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:r===1,onChange:d=>a(1)}),t(S,{children:m("wiredfurni.params.certainavatar")})]}),r===1&&t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:d=>n(d.target.value)})]})})},AO=o=>{const[e,n]=i.exports.useState(""),[r,a]=i.exports.useState(-1),{trigger:s=null,setStringParam:c=null,setIntParams:u=null}=ye(),d=()=>{c(e),u([r])};return i.exports.useEffect(()=>{n(s.stringData),a(s.intData.length>0?s.intData[0]:0)},[s]),l(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.whatissaid")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:p=>n(p.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.picktriggerer")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:r===0,onChange:p=>a(0)}),t(S,{children:m("wiredfurni.params.anyavatar")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:r===1,onChange:p=>a(1)}),t(S,{children:W().userName})]})]})]})},PO=o=>t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),DO=o=>t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),LO=o=>{const[e,n]=i.exports.useState(""),{trigger:r=null,setStringParam:a=null}=ye(),s=()=>a(e);return i.exports.useEffect(()=>{n(r.stringData)},[r]),t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},MO=o=>{const[e,n]=i.exports.useState(""),{trigger:r=null,setStringParam:a=null}=ye(),s=()=>a(e);return i.exports.useEffect(()=>{n(r.stringData)},[r]),t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},UO=o=>t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),FO=o=>{const[e,n]=i.exports.useState(1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.settime",["seconds"],[oo(e)])}),t(Dt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>n(c)})]})})},BO=o=>{const[e,n]=i.exports.useState(1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.setlongtime",["time"],[Hn.format(e*5).toString()])}),t(Dt,{className:"nitro-slider",min:1,max:120,value:e,onChange:c=>n(c)})]})})},GO=o=>{const[e,n]=i.exports.useState(1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.settime",["seconds"],[oo(e)])}),t(Dt,{className:"nitro-slider",min:1,max:60,value:e,onChange:c=>n(c)})]})})},VO=o=>t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),HO=o=>t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),WO=o=>{const[e,n]=i.exports.useState(1),{trigger:r=null,setIntParams:a=null}=ye(),s=()=>a([e]);return i.exports.useEffect(()=>{n(r.intData.length>0?r.intData[0]:0)},[r]),t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:m("wiredfurni.params.setscore",["points"],[e.toString()])}),t(Dt,{className:"nitro-slider",min:1,max:1e3,value:e,onChange:c=>n(c)})]})})},jO=o=>t(hn,{requiresFurni:ce.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),qO=o=>{switch(o){case et.AVATAR_ENTERS_ROOM:return t(kO,{});case et.AVATAR_SAYS_SOMETHING:return t(AO,{});case et.AVATAR_WALKS_OFF_FURNI:return t(PO,{});case et.AVATAR_WALKS_ON_FURNI:return t(DO,{});case et.BOT_REACHED_AVATAR:return t(LO,{});case et.BOT_REACHED_STUFF:return t(MO,{});case et.COLLISION:return t(UO,{});case et.EXECUTE_ONCE:return t(FO,{});case et.EXECUTE_PERIODICALLY:return t(GO,{});case et.EXECUTE_PERIODICALLY_LONG:return t(BO,{});case et.GAME_ENDS:return t(VO,{});case et.GAME_STARTS:return t(HO,{});case et.SCORE_ACHIEVED:return t(WO,{});case et.TOGGLE_FURNI:return t(jO,{})}return null},zO=o=>{const{trigger:e=null}=ye();return e?e instanceof Lu?mO(e.code):e instanceof Mu?qO(e.code):e instanceof Uu?OO(e.code):null:null},YO=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(!0);return Ke(zt.CREATED,s=>a(!1)),Ke(zt.ENDED,s=>a(s.openLandingView)),i.exports.useEffect(()=>{n(!0),Vs().connection.onReady()},[]),i.exports.useEffect(()=>{const s={linkReceived:c=>{const u=c.split("/");if(!(u.length<2))switch(u[1]){case"open":if(u.length>2)switch(u[2]){case"credits":break;default:{const d=u[2];Xs.openHabblet(d)}}return}},eventUrlPrefix:"habblet/"};return It(s),()=>Et(s)},[]),l(L,{fit:!0,children:[t(vs,{type:Nt.FADE_IN,inProp:r,timeout:300,children:t(Pw,{})}),t(vR,{isInRoom:!r}),t(oy,{}),t(NR,{}),t(lv,{}),t(zO,{}),t(gT,{}),t(sT,{}),t(_y,{}),t(by,{}),t(jw,{}),t(iv,{}),t(Pv,{}),t(zy,{}),t(AR,{}),t(kR,{}),t(Xv,{}),t(_T,{}),t(ww,{}),t(Ny,{}),t(iw,{}),t(lw,{}),t(NT,{}),t(Uv,{}),t(Cv,{})]})};Cu.UI_VERSION=fd();const $O=o=>{const[e,n]=i.exports.useState(!1),[r,a]=i.exports.useState(!1),[s,c]=i.exports.useState("Getting Ready"),[u,d]=i.exports.useState(0),[p,g]=i.exports.useState(!0);if(!be()){if(!NitroConfig)throw new Error("NitroConfig is not defined!");is.bootstrap()}const h=i.exports.useCallback(async f=>{switch(f.type){case Io.LOADED:be().localization.init(),d(E=>E+20);return;case Io.FAILED:a(!0),c("Configuration Failed");return;case is.WEBGL_UNAVAILABLE:a(!0),c("WebGL Required");return;case is.WEBGL_CONTEXT_LOST:a(!0),c("WebGL Context Lost - Reloading"),setTimeout(()=>window.location.reload(),1500);return;case Xn.CONNECTION_HANDSHAKING:d(E=>E+20);return;case Xn.CONNECTION_HANDSHAKE_FAILED:a(!0),c("Handshake Failed");return;case Xn.CONNECTION_AUTHENTICATED:d(E=>E+20),be().init(),Gs.available&&Gs.call("legacyTrack","authentication","authok",[]);return;case Xn.CONNECTION_ERROR:a(!0),c("Connection Error");return;case Xn.CONNECTION_CLOSED:c("Connection Error"),Xs.send(-1,"client.init.handshake.fail");return;case In.ENGINE_INITIALIZED:d(E=>E+20),setTimeout(()=>n(!0),300);return;case Bl.LOADED:{const E=K("preload.assets.urls"),I=[];if(E&&E.length)for(const C of E)I.push(dr.interpolate(C));await Hu().downloadAssets(I)?(Vs().init(),d(C=>C+20)):(a(!0),c("Assets Failed"));return}}},[]);return Fr(is.WEBGL_UNAVAILABLE,h),Fr(is.WEBGL_CONTEXT_LOST,h),Fr(Xn.CONNECTION_HANDSHAKING,h),Fr(Xn.CONNECTION_HANDSHAKE_FAILED,h),Fr(Xn.CONNECTION_AUTHENTICATED,h),Fr(Xn.CONNECTION_ERROR,h),Fr(Xn.CONNECTION_CLOSED,h),we(In.ENGINE_INITIALIZED,h),Yb(Bl.LOADED,h),ac(Io.LOADED,h),ac(Io.FAILED,h),i.exports.useEffect(()=>{be().core.configuration.init();const f=E=>g(!(window.devicePixelRatio%1));return window.addEventListener("resize",f),f(),()=>{window.removeEventListener("resize",f)}},[]),l(L,{fit:!0,overflow:"hidden",className:p&&"image-rendering-pixelated",children:[(!e||r)&&t(qb,{isError:r,message:s,percent:u}),t(vs,{type:Nt.FADE_IN,inProp:e,children:t(YO,{})}),t(L,{id:"draggable-windows-container"})]})};Km(document.getElementById("root")).render(t($O,{}));
